d0456f15e9d5e3599993bcb5d1c65354
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _processColor = _interopRequireDefault(require("../../StyleSheet/processColor"));
var _Platform = _interopRequireDefault(require("../../Utilities/Platform"));
var _NativeStatusBarManagerAndroid = _interopRequireDefault(require("./NativeStatusBarManagerAndroid"));
var _NativeStatusBarManagerIOS = _interopRequireDefault(require("./NativeStatusBarManagerIOS"));
var _invariant = _interopRequireDefault(require("invariant"));
var React = _interopRequireWildcard(require("react"));
var _NativeStatusBarManag;
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
function mergePropsStack(propsStack, defaultValues) {
  return propsStack.reduce(function (prev, cur) {
    for (var prop in cur) {
      if (cur[prop] != null) {
        prev[prop] = cur[prop];
      }
    }
    return prev;
  }, Object.assign({}, defaultValues));
}
function createStackEntry(props) {
  var _props$animated, _props$showHideTransi;
  var animated = (_props$animated = props.animated) != null ? _props$animated : false;
  var showHideTransition = (_props$showHideTransi = props.showHideTransition) != null ? _props$showHideTransi : 'fade';
  return {
    backgroundColor: props.backgroundColor != null ? {
      value: props.backgroundColor,
      animated: animated
    } : null,
    barStyle: props.barStyle != null ? {
      value: props.barStyle,
      animated: animated
    } : null,
    translucent: props.translucent,
    hidden: props.hidden != null ? {
      value: props.hidden,
      animated: animated,
      transition: showHideTransition
    } : null,
    networkActivityIndicatorVisible: props.networkActivityIndicatorVisible
  };
}
var StatusBar = function (_React$Component) {
  (0, _inherits2.default)(StatusBar, _React$Component);
  var _super = _createSuper(StatusBar);
  function StatusBar() {
    var _this;
    (0, _classCallCheck2.default)(this, StatusBar);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _this._stackEntry = null;
    return _this;
  }
  (0, _createClass2.default)(StatusBar, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this._stackEntry = StatusBar.pushStackEntry(this.props);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      StatusBar.popStackEntry(this._stackEntry);
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      this._stackEntry = StatusBar.replaceStackEntry(this._stackEntry, this.props);
    }
  }, {
    key: "render",
    value: function render() {
      return null;
    }
  }], [{
    key: "setHidden",
    value: function setHidden(hidden, animation) {
      animation = animation || 'none';
      StatusBar._defaultProps.hidden.value = hidden;
      if (_Platform.default.OS === 'ios') {
        _NativeStatusBarManagerIOS.default.setHidden(hidden, animation);
      } else if (_Platform.default.OS === 'android') {
        _NativeStatusBarManagerAndroid.default.setHidden(hidden);
      }
    }
  }, {
    key: "setBarStyle",
    value: function setBarStyle(style, animated) {
      animated = animated || false;
      StatusBar._defaultProps.barStyle.value = style;
      if (_Platform.default.OS === 'ios') {
        _NativeStatusBarManagerIOS.default.setStyle(style, animated);
      } else if (_Platform.default.OS === 'android') {
        _NativeStatusBarManagerAndroid.default.setStyle(style);
      }
    }
  }, {
    key: "setNetworkActivityIndicatorVisible",
    value: function setNetworkActivityIndicatorVisible(visible) {
      if (_Platform.default.OS !== 'ios') {
        console.warn('`setNetworkActivityIndicatorVisible` is only available on iOS');
        return;
      }
      StatusBar._defaultProps.networkActivityIndicatorVisible = visible;
      _NativeStatusBarManagerIOS.default.setNetworkActivityIndicatorVisible(visible);
    }
  }, {
    key: "setBackgroundColor",
    value: function setBackgroundColor(color, animated) {
      if (_Platform.default.OS !== 'android') {
        console.warn('`setBackgroundColor` is only available on Android');
        return;
      }
      animated = animated || false;
      StatusBar._defaultProps.backgroundColor.value = color;
      var processedColor = (0, _processColor.default)(color);
      if (processedColor == null) {
        console.warn("`StatusBar.setBackgroundColor`: Color " + color + " parsed to null or undefined");
        return;
      }
      (0, _invariant.default)(typeof processedColor === 'number', 'Unexpected color given for StatusBar.setBackgroundColor');
      _NativeStatusBarManagerAndroid.default.setColor(processedColor, animated);
    }
  }, {
    key: "setTranslucent",
    value: function setTranslucent(translucent) {
      if (_Platform.default.OS !== 'android') {
        console.warn('`setTranslucent` is only available on Android');
        return;
      }
      StatusBar._defaultProps.translucent = translucent;
      _NativeStatusBarManagerAndroid.default.setTranslucent(translucent);
    }
  }, {
    key: "pushStackEntry",
    value: function pushStackEntry(props) {
      var entry = createStackEntry(props);
      StatusBar._propsStack.push(entry);
      StatusBar._updatePropsStack();
      return entry;
    }
  }, {
    key: "popStackEntry",
    value: function popStackEntry(entry) {
      var index = StatusBar._propsStack.indexOf(entry);
      if (index !== -1) {
        StatusBar._propsStack.splice(index, 1);
      }
      StatusBar._updatePropsStack();
    }
  }, {
    key: "replaceStackEntry",
    value: function replaceStackEntry(entry, props) {
      var newEntry = createStackEntry(props);
      var index = StatusBar._propsStack.indexOf(entry);
      if (index !== -1) {
        StatusBar._propsStack[index] = newEntry;
      }
      StatusBar._updatePropsStack();
      return newEntry;
    }
  }]);
  return StatusBar;
}(React.Component);
StatusBar._propsStack = [];
StatusBar._defaultProps = createStackEntry({
  backgroundColor: _Platform.default.OS === 'android' ? (_NativeStatusBarManag = _NativeStatusBarManagerAndroid.default.getConstants().DEFAULT_BACKGROUND_COLOR) != null ? _NativeStatusBarManag : 'black' : 'black',
  barStyle: 'default',
  translucent: false,
  hidden: false,
  networkActivityIndicatorVisible: false
});
StatusBar._updateImmediate = null;
StatusBar._currentValues = null;
StatusBar.currentHeight = _Platform.default.OS === 'android' ? _NativeStatusBarManagerAndroid.default.getConstants().HEIGHT : null;
StatusBar._updatePropsStack = function () {
  clearImmediate(StatusBar._updateImmediate);
  StatusBar._updateImmediate = setImmediate(function () {
    var oldProps = StatusBar._currentValues;
    var mergedProps = mergePropsStack(StatusBar._propsStack, StatusBar._defaultProps);
    if (_Platform.default.OS === 'ios') {
      if (!oldProps || oldProps.barStyle.value !== mergedProps.barStyle.value) {
        _NativeStatusBarManagerIOS.default.setStyle(mergedProps.barStyle.value, mergedProps.barStyle.animated || false);
      }
      if (!oldProps || oldProps.hidden.value !== mergedProps.hidden.value) {
        _NativeStatusBarManagerIOS.default.setHidden(mergedProps.hidden.value, mergedProps.hidden.animated ? mergedProps.hidden.transition : 'none');
      }
      if (!oldProps || oldProps.networkActivityIndicatorVisible !== mergedProps.networkActivityIndicatorVisible) {
        _NativeStatusBarManagerIOS.default.setNetworkActivityIndicatorVisible(mergedProps.networkActivityIndicatorVisible);
      }
    } else if (_Platform.default.OS === 'android') {
      _NativeStatusBarManagerAndroid.default.setStyle(mergedProps.barStyle.value);
      var processedColor = (0, _processColor.default)(mergedProps.backgroundColor.value);
      if (processedColor == null) {
        console.warn("`StatusBar._updatePropsStack`: Color " + mergedProps.backgroundColor.value + " parsed to null or undefined");
      } else {
        (0, _invariant.default)(typeof processedColor === 'number', 'Unexpected color given in StatusBar._updatePropsStack');
        _NativeStatusBarManagerAndroid.default.setColor(processedColor, mergedProps.backgroundColor.animated);
      }
      if (!oldProps || oldProps.hidden.value !== mergedProps.hidden.value) {
        _NativeStatusBarManagerAndroid.default.setHidden(mergedProps.hidden.value);
      }
      if (!oldProps || oldProps.translucent !== mergedProps.translucent || mergedProps.translucent) {
        _NativeStatusBarManagerAndroid.default.setTranslucent(mergedProps.translucent);
      }
    }
    StatusBar._currentValues = mergedProps;
  });
};
module.exports = StatusBar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcHJvY2Vzc0NvbG9yIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfUGxhdGZvcm0iLCJfTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQiLCJfTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUyIsIl9pbnZhcmlhbnQiLCJSZWFjdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX05hdGl2ZVN0YXR1c0Jhck1hbmFnIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwibm9kZUludGVyb3AiLCJXZWFrTWFwIiwiY2FjaGVCYWJlbEludGVyb3AiLCJjYWNoZU5vZGVJbnRlcm9wIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJjYWNoZSIsImhhcyIsImdldCIsIm5ld09iaiIsImhhc1Byb3BlcnR5RGVzY3JpcHRvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZGVzYyIsInNldCIsIl9jcmVhdGVTdXBlciIsIkRlcml2ZWQiLCJoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIl9jcmVhdGVTdXBlckludGVybmFsIiwiU3VwZXIiLCJfZ2V0UHJvdG90eXBlT2YyIiwicmVzdWx0IiwiTmV3VGFyZ2V0IiwiY29uc3RydWN0b3IiLCJSZWZsZWN0IiwiY29uc3RydWN0IiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIiLCJzaGFtIiwiUHJveHkiLCJCb29sZWFuIiwidmFsdWVPZiIsImUiLCJtZXJnZVByb3BzU3RhY2siLCJwcm9wc1N0YWNrIiwiZGVmYXVsdFZhbHVlcyIsInJlZHVjZSIsInByZXYiLCJjdXIiLCJwcm9wIiwiYXNzaWduIiwiY3JlYXRlU3RhY2tFbnRyeSIsInByb3BzIiwiX3Byb3BzJGFuaW1hdGVkIiwiX3Byb3BzJHNob3dIaWRlVHJhbnNpIiwiYW5pbWF0ZWQiLCJzaG93SGlkZVRyYW5zaXRpb24iLCJiYWNrZ3JvdW5kQ29sb3IiLCJ2YWx1ZSIsImJhclN0eWxlIiwidHJhbnNsdWNlbnQiLCJoaWRkZW4iLCJ0cmFuc2l0aW9uIiwibmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSIsIlN0YXR1c0JhciIsIl9SZWFjdCRDb21wb25lbnQiLCJfaW5oZXJpdHMyIiwiX3N1cGVyIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2syIiwiX2xlbiIsImxlbmd0aCIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJjb25jYXQiLCJfc3RhY2tFbnRyeSIsIl9jcmVhdGVDbGFzczIiLCJjb21wb25lbnREaWRNb3VudCIsInB1c2hTdGFja0VudHJ5IiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJwb3BTdGFja0VudHJ5IiwiY29tcG9uZW50RGlkVXBkYXRlIiwicmVwbGFjZVN0YWNrRW50cnkiLCJyZW5kZXIiLCJzZXRIaWRkZW4iLCJhbmltYXRpb24iLCJfZGVmYXVsdFByb3BzIiwiUGxhdGZvcm0iLCJPUyIsIk5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJJT1MiLCJOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZCIsInNldEJhclN0eWxlIiwic3R5bGUiLCJzZXRTdHlsZSIsInNldE5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUiLCJ2aXNpYmxlIiwiY29uc29sZSIsIndhcm4iLCJzZXRCYWNrZ3JvdW5kQ29sb3IiLCJjb2xvciIsInByb2Nlc3NlZENvbG9yIiwicHJvY2Vzc0NvbG9yIiwiaW52YXJpYW50Iiwic2V0Q29sb3IiLCJzZXRUcmFuc2x1Y2VudCIsImVudHJ5IiwiX3Byb3BzU3RhY2siLCJwdXNoIiwiX3VwZGF0ZVByb3BzU3RhY2siLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJuZXdFbnRyeSIsIkNvbXBvbmVudCIsImdldENvbnN0YW50cyIsIkRFRkFVTFRfQkFDS0dST1VORF9DT0xPUiIsIl91cGRhdGVJbW1lZGlhdGUiLCJfY3VycmVudFZhbHVlcyIsImN1cnJlbnRIZWlnaHQiLCJIRUlHSFQiLCJjbGVhckltbWVkaWF0ZSIsInNldEltbWVkaWF0ZSIsIm9sZFByb3BzIiwibWVyZ2VkUHJvcHMiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiU3RhdHVzQmFyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZm9ybWF0XG4gKiBAZmxvd1xuICovXG5cbmltcG9ydCB0eXBlIHtDb2xvclZhbHVlfSBmcm9tICcuLi8uLi9TdHlsZVNoZWV0L1N0eWxlU2hlZXQnO1xuXG5pbXBvcnQgcHJvY2Vzc0NvbG9yIGZyb20gJy4uLy4uL1N0eWxlU2hlZXQvcHJvY2Vzc0NvbG9yJztcbmltcG9ydCBQbGF0Zm9ybSBmcm9tICcuLi8uLi9VdGlsaXRpZXMvUGxhdGZvcm0nO1xuaW1wb3J0IE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkIGZyb20gJy4vTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQnO1xuaW1wb3J0IE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJJT1MgZnJvbSAnLi9OYXRpdmVTdGF0dXNCYXJNYW5hZ2VySU9TJztcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuLyoqXG4gKiBTdGF0dXMgYmFyIHN0eWxlXG4gKi9cbmV4cG9ydCB0eXBlIFN0YXR1c0JhclN0eWxlID0gJEtleXM8e1xuICAvKipcbiAgICogRGVmYXVsdCBzdGF0dXMgYmFyIHN0eWxlIChkYXJrIGZvciBpT1MsIGxpZ2h0IGZvciBBbmRyb2lkKVxuICAgKi9cbiAgZGVmYXVsdDogc3RyaW5nLFxuICAvKipcbiAgICogRGFyayBiYWNrZ3JvdW5kLCB3aGl0ZSB0ZXh0cyBhbmQgaWNvbnNcbiAgICovXG4gICdsaWdodC1jb250ZW50Jzogc3RyaW5nLFxuICAvKipcbiAgICogTGlnaHQgYmFja2dyb3VuZCwgZGFyayB0ZXh0cyBhbmQgaWNvbnNcbiAgICovXG4gICdkYXJrLWNvbnRlbnQnOiBzdHJpbmcsXG4gIC4uLlxufT47XG5cbi8qKlxuICogU3RhdHVzIGJhciBhbmltYXRpb25cbiAqL1xuZXhwb3J0IHR5cGUgU3RhdHVzQmFyQW5pbWF0aW9uID0gJEtleXM8e1xuICAvKipcbiAgICogTm8gYW5pbWF0aW9uXG4gICAqL1xuICBub25lOiBzdHJpbmcsXG4gIC8qKlxuICAgKiBGYWRlIGFuaW1hdGlvblxuICAgKi9cbiAgZmFkZTogc3RyaW5nLFxuICAvKipcbiAgICogU2xpZGUgYW5pbWF0aW9uXG4gICAqL1xuICBzbGlkZTogc3RyaW5nLFxuICAuLi5cbn0+O1xuXG50eXBlIEFuZHJvaWRQcm9wcyA9ICRSZWFkT25seTx7fFxuICAvKipcbiAgICogVGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIHN0YXR1cyBiYXIuXG4gICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAqL1xuICBiYWNrZ3JvdW5kQ29sb3I/OiA/Q29sb3JWYWx1ZSxcbiAgLyoqXG4gICAqIElmIHRoZSBzdGF0dXMgYmFyIGlzIHRyYW5zbHVjZW50LlxuICAgKiBXaGVuIHRyYW5zbHVjZW50IGlzIHNldCB0byB0cnVlLCB0aGUgYXBwIHdpbGwgZHJhdyB1bmRlciB0aGUgc3RhdHVzIGJhci5cbiAgICogVGhpcyBpcyB1c2VmdWwgd2hlbiB1c2luZyBhIHNlbWkgdHJhbnNwYXJlbnQgc3RhdHVzIGJhciBjb2xvci5cbiAgICpcbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIHRyYW5zbHVjZW50PzogP2Jvb2xlYW4sXG58fT47XG5cbnR5cGUgSU9TUHJvcHMgPSAkUmVhZE9ubHk8e3xcbiAgLyoqXG4gICAqIElmIHRoZSBuZXR3b3JrIGFjdGl2aXR5IGluZGljYXRvciBzaG91bGQgYmUgdmlzaWJsZS5cbiAgICpcbiAgICogQHBsYXRmb3JtIGlvc1xuICAgKi9cbiAgbmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZT86ID9ib29sZWFuLFxuICAvKipcbiAgICogVGhlIHRyYW5zaXRpb24gZWZmZWN0IHdoZW4gc2hvd2luZyBhbmQgaGlkaW5nIHRoZSBzdGF0dXMgYmFyIHVzaW5nIHRoZSBgaGlkZGVuYFxuICAgKiBwcm9wLiBEZWZhdWx0cyB0byAnZmFkZScuXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIHNob3dIaWRlVHJhbnNpdGlvbj86ID8oJ2ZhZGUnIHwgJ3NsaWRlJyB8ICdub25lJyksXG58fT47XG5cbnR5cGUgUHJvcHMgPSAkUmVhZE9ubHk8e3xcbiAgLi4uQW5kcm9pZFByb3BzLFxuICAuLi5JT1NQcm9wcyxcbiAgLyoqXG4gICAqIElmIHRoZSBzdGF0dXMgYmFyIGlzIGhpZGRlbi5cbiAgICovXG4gIGhpZGRlbj86ID9ib29sZWFuLFxuICAvKipcbiAgICogSWYgdGhlIHRyYW5zaXRpb24gYmV0d2VlbiBzdGF0dXMgYmFyIHByb3BlcnR5IGNoYW5nZXMgc2hvdWxkIGJlIGFuaW1hdGVkLlxuICAgKiBTdXBwb3J0ZWQgZm9yIGJhY2tncm91bmRDb2xvciwgYmFyU3R5bGUgYW5kIGhpZGRlbi5cbiAgICovXG4gIGFuaW1hdGVkPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjb2xvciBvZiB0aGUgc3RhdHVzIGJhciB0ZXh0LlxuICAgKi9cbiAgYmFyU3R5bGU/OiA/KCdkZWZhdWx0JyB8ICdsaWdodC1jb250ZW50JyB8ICdkYXJrLWNvbnRlbnQnKSxcbnx9PjtcblxuLyoqXG4gKiBNZXJnZXMgdGhlIHByb3Agc3RhY2sgd2l0aCB0aGUgZGVmYXVsdCB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIG1lcmdlUHJvcHNTdGFjayhcbiAgcHJvcHNTdGFjazogQXJyYXk8T2JqZWN0PixcbiAgZGVmYXVsdFZhbHVlczogT2JqZWN0LFxuKTogT2JqZWN0IHtcbiAgcmV0dXJuIHByb3BzU3RhY2sucmVkdWNlKFxuICAgIChwcmV2LCBjdXIpID0+IHtcbiAgICAgIGZvciAoY29uc3QgcHJvcCBpbiBjdXIpIHtcbiAgICAgICAgaWYgKGN1cltwcm9wXSAhPSBudWxsKSB7XG4gICAgICAgICAgcHJldltwcm9wXSA9IGN1cltwcm9wXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHByZXY7XG4gICAgfSxcbiAgICB7Li4uZGVmYXVsdFZhbHVlc30sXG4gICk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBvYmplY3QgdG8gaW5zZXJ0IGluIHRoZSBwcm9wcyBzdGFjayBmcm9tIHRoZSBwcm9wc1xuICogYW5kIHRoZSB0cmFuc2l0aW9uL2FuaW1hdGlvbiBpbmZvLlxuICovXG5mdW5jdGlvbiBjcmVhdGVTdGFja0VudHJ5KHByb3BzOiBhbnkpOiBhbnkge1xuICBjb25zdCBhbmltYXRlZCA9IHByb3BzLmFuaW1hdGVkID8/IGZhbHNlO1xuICBjb25zdCBzaG93SGlkZVRyYW5zaXRpb24gPSBwcm9wcy5zaG93SGlkZVRyYW5zaXRpb24gPz8gJ2ZhZGUnO1xuICByZXR1cm4ge1xuICAgIGJhY2tncm91bmRDb2xvcjpcbiAgICAgIHByb3BzLmJhY2tncm91bmRDb2xvciAhPSBudWxsXG4gICAgICAgID8ge1xuICAgICAgICAgICAgdmFsdWU6IHByb3BzLmJhY2tncm91bmRDb2xvcixcbiAgICAgICAgICAgIGFuaW1hdGVkLFxuICAgICAgICAgIH1cbiAgICAgICAgOiBudWxsLFxuICAgIGJhclN0eWxlOlxuICAgICAgcHJvcHMuYmFyU3R5bGUgIT0gbnVsbFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5iYXJTdHlsZSxcbiAgICAgICAgICAgIGFuaW1hdGVkLFxuICAgICAgICAgIH1cbiAgICAgICAgOiBudWxsLFxuICAgIHRyYW5zbHVjZW50OiBwcm9wcy50cmFuc2x1Y2VudCxcbiAgICBoaWRkZW46XG4gICAgICBwcm9wcy5oaWRkZW4gIT0gbnVsbFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5oaWRkZW4sXG4gICAgICAgICAgICBhbmltYXRlZCxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IHNob3dIaWRlVHJhbnNpdGlvbixcbiAgICAgICAgICB9XG4gICAgICAgIDogbnVsbCxcbiAgICBuZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlOiBwcm9wcy5uZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlLFxuICB9O1xufVxuXG4vKipcbiAqIENvbXBvbmVudCB0byBjb250cm9sIHRoZSBhcHAgc3RhdHVzIGJhci5cbiAqXG4gKiAjIyMgVXNhZ2Ugd2l0aCBOYXZpZ2F0b3JcbiAqXG4gKiBJdCBpcyBwb3NzaWJsZSB0byBoYXZlIG11bHRpcGxlIGBTdGF0dXNCYXJgIGNvbXBvbmVudHMgbW91bnRlZCBhdCB0aGUgc2FtZVxuICogdGltZS4gVGhlIHByb3BzIHdpbGwgYmUgbWVyZ2VkIGluIHRoZSBvcmRlciB0aGUgYFN0YXR1c0JhcmAgY29tcG9uZW50cyB3ZXJlXG4gKiBtb3VudGVkLiBPbmUgdXNlIGNhc2UgaXMgdG8gc3BlY2lmeSBzdGF0dXMgYmFyIHN0eWxlcyBwZXIgcm91dGUgdXNpbmcgYE5hdmlnYXRvcmAuXG4gKlxuICogYGBgXG4gKiAgPFZpZXc+XG4gKiAgICA8U3RhdHVzQmFyXG4gKiAgICAgIGJhY2tncm91bmRDb2xvcj1cImJsdWVcIlxuICogICAgICBiYXJTdHlsZT1cImxpZ2h0LWNvbnRlbnRcIlxuICogICAgLz5cbiAqICAgIDxOYXZpZ2F0b3JcbiAqICAgICAgaW5pdGlhbFJvdXRlPXt7c3RhdHVzQmFySGlkZGVuOiB0cnVlfX1cbiAqICAgICAgcmVuZGVyU2NlbmU9eyhyb3V0ZSwgbmF2aWdhdG9yKSA9PlxuICogICAgICAgIDxWaWV3PlxuICogICAgICAgICAgPFN0YXR1c0JhciBoaWRkZW49e3JvdXRlLnN0YXR1c0JhckhpZGRlbn0gLz5cbiAqICAgICAgICAgIC4uLlxuICogICAgICAgIDwvVmlldz5cbiAqICAgICAgfVxuICogICAgLz5cbiAqICA8L1ZpZXc+XG4gKiBgYGBcbiAqXG4gKiAjIyMgSW1wZXJhdGl2ZSBBUElcbiAqXG4gKiBGb3IgY2FzZXMgd2hlcmUgdXNpbmcgYSBjb21wb25lbnQgaXMgbm90IGlkZWFsLCB0aGVyZSBhcmUgc3RhdGljIG1ldGhvZHNcbiAqIHRvIG1hbmlwdWxhdGUgdGhlIGBTdGF0dXNCYXJgIGRpc3BsYXkgc3RhY2suIFRoZXNlIG1ldGhvZHMgaGF2ZSB0aGUgc2FtZVxuICogYmVoYXZpb3IgYXMgbW91bnRpbmcgYW5kIHVubW91bnRpbmcgYSBgU3RhdHVzQmFyYCBjb21wb25lbnQuXG4gKlxuICogRm9yIGV4YW1wbGUsIHlvdSBjYW4gY2FsbCBgU3RhdHVzQmFyLnB1c2hTdGFja0VudHJ5YCB0byB1cGRhdGUgdGhlIHN0YXR1cyBiYXJcbiAqIGJlZm9yZSBsYXVuY2hpbmcgYSB0aGlyZC1wYXJ0eSBuYXRpdmUgVUkgY29tcG9uZW50LCBhbmQgdGhlbiBjYWxsXG4gKiBgU3RhdHVzQmFyLnBvcFN0YWNrRW50cnlgIHdoZW4gY29tcGxldGVkLlxuICpcbiAqIGBgYFxuICogY29uc3Qgb3BlblRoaXJkUGFydHlCdWdSZXBvcnRlciA9IGFzeW5jICgpID0+IHtcbiAqICAgLy8gVGhlIGJ1ZyByZXBvcnRlciBoYXMgYSBkYXJrIGJhY2tncm91bmQsIHNvIHdlIHB1c2ggYSBuZXcgc3RhdHVzIGJhciBzdHlsZS5cbiAqICAgY29uc3Qgc3RhY2tFbnRyeSA9IFN0YXR1c0Jhci5wdXNoU3RhY2tFbnRyeSh7YmFyU3R5bGU6ICdsaWdodC1jb250ZW50J30pO1xuICpcbiAqICAgLy8gYG9wZW5gIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgVUkgaXMgZGlzbWlzc2VkLlxuICogICBhd2FpdCBCdWdSZXBvcnRlci5vcGVuKCk7XG4gKlxuICogICAvLyBEb24ndCBmb3JnZXQgdG8gY2FsbCBgcG9wU3RhY2tFbnRyeWAgd2hlbiB5b3UncmUgZG9uZS5cbiAqICAgU3RhdHVzQmFyLnBvcFN0YWNrRW50cnkoc3RhY2tFbnRyeSk7XG4gKiB9O1xuICogYGBgXG4gKlxuICogVGhlcmUgaXMgYSBsZWdhY3kgaW1wZXJhdGl2ZSBBUEkgdGhhdCBlbmFibGVzIHlvdSB0byBtYW51YWxseSB1cGRhdGUgdGhlXG4gKiBzdGF0dXMgYmFyIHN0eWxlcy4gSG93ZXZlciwgdGhlIGxlZ2FjeSBBUEkgZG9lcyBub3QgdXBkYXRlIHRoZSBpbnRlcm5hbFxuICogYFN0YXR1c0JhcmAgZGlzcGxheSBzdGFjaywgd2hpY2ggbWVhbnMgdGhhdCBhbnkgY2hhbmdlcyB3aWxsIGJlIG92ZXJyaWRkZW5cbiAqIHdoZW5ldmVyIGEgYFN0YXR1c0JhcmAgY29tcG9uZW50IGlzIG1vdW50ZWQgb3IgdW5tb3VudGVkLlxuICpcbiAqIEl0IGlzIHN0cm9uZ2x5IGFkdmlzZWQgdGhhdCB5b3UgdXNlIGBwdXNoU3RhY2tFbnRyeWAsIGBwb3BTdGFja0VudHJ5YCwgb3JcbiAqIGByZXBsYWNlU3RhY2tFbnRyeWAgaW5zdGVhZCBvZiB0aGUgc3RhdGljIG1ldGhvZHMgYmVnaW5uaW5nIHdpdGggYHNldGAuXG4gKlxuICogIyMjIENvbnN0YW50c1xuICpcbiAqIGBjdXJyZW50SGVpZ2h0YCAoQW5kcm9pZCBvbmx5KSBUaGUgaGVpZ2h0IG9mIHRoZSBzdGF0dXMgYmFyLlxuICovXG5jbGFzcyBTdGF0dXNCYXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcbiAgc3RhdGljIF9wcm9wc1N0YWNrOiBBcnJheTxhbnk+ID0gW107XG5cbiAgc3RhdGljIF9kZWZhdWx0UHJvcHM6IGFueSA9IGNyZWF0ZVN0YWNrRW50cnkoe1xuICAgIGJhY2tncm91bmRDb2xvcjpcbiAgICAgIFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCdcbiAgICAgICAgPyBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZC5nZXRDb25zdGFudHMoKVxuICAgICAgICAgICAgLkRFRkFVTFRfQkFDS0dST1VORF9DT0xPUiA/PyAnYmxhY2snXG4gICAgICAgIDogJ2JsYWNrJyxcbiAgICBiYXJTdHlsZTogJ2RlZmF1bHQnLFxuICAgIHRyYW5zbHVjZW50OiBmYWxzZSxcbiAgICBoaWRkZW46IGZhbHNlLFxuICAgIG5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGU6IGZhbHNlLFxuICB9KTtcblxuICAvLyBUaW1lciBmb3IgdXBkYXRpbmcgdGhlIG5hdGl2ZSBtb2R1bGUgdmFsdWVzIGF0IHRoZSBlbmQgb2YgdGhlIGZyYW1lLlxuICBzdGF0aWMgX3VwZGF0ZUltbWVkaWF0ZSA9IG51bGw7XG5cbiAgLy8gVGhlIGN1cnJlbnQgbWVyZ2VkIHZhbHVlcyBmcm9tIHRoZSBwcm9wcyBzdGFjay5cbiAgc3RhdGljIF9jdXJyZW50VmFsdWVzID0gbnVsbDtcblxuICAvLyBUT0RPKGphbmljKTogUHJvdmlkZSBhIHJlYWwgQVBJIHRvIGRlYWwgd2l0aCBzdGF0dXMgYmFyIGhlaWdodC4gU2VlIHRoZVxuICAvLyBkaXNjdXNzaW9uIGluICM2MTk1LlxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgaGVpZ2h0IG9mIHRoZSBzdGF0dXMgYmFyIG9uIHRoZSBkZXZpY2UuXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAqL1xuICBzdGF0aWMgY3VycmVudEhlaWdodDogP251bWJlciA9XG4gICAgUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJ1xuICAgICAgPyBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZC5nZXRDb25zdGFudHMoKS5IRUlHSFRcbiAgICAgIDogbnVsbDtcblxuICAvLyBQcm92aWRlIGFuIGltcGVyYXRpdmUgQVBJIGFzIHN0YXRpYyBmdW5jdGlvbnMgb2YgdGhlIGNvbXBvbmVudC5cbiAgLy8gU2VlIHRoZSBjb3JyZXNwb25kaW5nIHByb3AgZm9yIG1vcmUgZGV0YWlsLlxuXG4gIC8qKlxuICAgKiBTaG93IG9yIGhpZGUgdGhlIHN0YXR1cyBiYXJcbiAgICogQHBhcmFtIGhpZGRlbiBIaWRlIHRoZSBzdGF0dXMgYmFyLlxuICAgKiBAcGFyYW0gYW5pbWF0aW9uIE9wdGlvbmFsIGFuaW1hdGlvbiB3aGVuXG4gICAqICAgIGNoYW5naW5nIHRoZSBzdGF0dXMgYmFyIGhpZGRlbiBwcm9wZXJ0eS5cbiAgICovXG4gIHN0YXRpYyBzZXRIaWRkZW4oaGlkZGVuOiBib29sZWFuLCBhbmltYXRpb24/OiBTdGF0dXNCYXJBbmltYXRpb24pIHtcbiAgICBhbmltYXRpb24gPSBhbmltYXRpb24gfHwgJ25vbmUnO1xuICAgIFN0YXR1c0Jhci5fZGVmYXVsdFByb3BzLmhpZGRlbi52YWx1ZSA9IGhpZGRlbjtcbiAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdpb3MnKSB7XG4gICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VySU9TLnNldEhpZGRlbihoaWRkZW4sIGFuaW1hdGlvbik7XG4gICAgfSBlbHNlIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnKSB7XG4gICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZC5zZXRIaWRkZW4oaGlkZGVuKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBzdGF0dXMgYmFyIHN0eWxlXG4gICAqIEBwYXJhbSBzdHlsZSBTdGF0dXMgYmFyIHN0eWxlIHRvIHNldFxuICAgKiBAcGFyYW0gYW5pbWF0ZWQgQW5pbWF0ZSB0aGUgc3R5bGUgY2hhbmdlLlxuICAgKi9cbiAgc3RhdGljIHNldEJhclN0eWxlKHN0eWxlOiBTdGF0dXNCYXJTdHlsZSwgYW5pbWF0ZWQ/OiBib29sZWFuKSB7XG4gICAgYW5pbWF0ZWQgPSBhbmltYXRlZCB8fCBmYWxzZTtcbiAgICBTdGF0dXNCYXIuX2RlZmF1bHRQcm9wcy5iYXJTdHlsZS52YWx1ZSA9IHN0eWxlO1xuICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2lvcycpIHtcbiAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJJT1Muc2V0U3R5bGUoc3R5bGUsIGFuaW1hdGVkKTtcbiAgICB9IGVsc2UgaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLnNldFN0eWxlKHN0eWxlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29udHJvbCB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgbmV0d29yayBhY3Rpdml0eSBpbmRpY2F0b3JcbiAgICogQHBhcmFtIHZpc2libGUgU2hvdyB0aGUgaW5kaWNhdG9yLlxuICAgKi9cbiAgc3RhdGljIHNldE5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUodmlzaWJsZTogYm9vbGVhbikge1xuICAgIGlmIChQbGF0Zm9ybS5PUyAhPT0gJ2lvcycpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ2BzZXROZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlYCBpcyBvbmx5IGF2YWlsYWJsZSBvbiBpT1MnLFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgU3RhdHVzQmFyLl9kZWZhdWx0UHJvcHMubmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSA9IHZpc2libGU7XG4gICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUy5zZXROZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlKHZpc2libGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYmFja2dyb3VuZCBjb2xvciBmb3IgdGhlIHN0YXR1cyBiYXJcbiAgICogQHBhcmFtIGNvbG9yIEJhY2tncm91bmQgY29sb3IuXG4gICAqIEBwYXJhbSBhbmltYXRlZCBBbmltYXRlIHRoZSBzdHlsZSBjaGFuZ2UuXG4gICAqL1xuICBzdGF0aWMgc2V0QmFja2dyb3VuZENvbG9yKGNvbG9yOiBzdHJpbmcsIGFuaW1hdGVkPzogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmIChQbGF0Zm9ybS5PUyAhPT0gJ2FuZHJvaWQnKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2BzZXRCYWNrZ3JvdW5kQ29sb3JgIGlzIG9ubHkgYXZhaWxhYmxlIG9uIEFuZHJvaWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYW5pbWF0ZWQgPSBhbmltYXRlZCB8fCBmYWxzZTtcbiAgICBTdGF0dXNCYXIuX2RlZmF1bHRQcm9wcy5iYWNrZ3JvdW5kQ29sb3IudmFsdWUgPSBjb2xvcjtcblxuICAgIGNvbnN0IHByb2Nlc3NlZENvbG9yID0gcHJvY2Vzc0NvbG9yKGNvbG9yKTtcbiAgICBpZiAocHJvY2Vzc2VkQ29sb3IgPT0gbnVsbCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgXFxgU3RhdHVzQmFyLnNldEJhY2tncm91bmRDb2xvclxcYDogQ29sb3IgJHtjb2xvcn0gcGFyc2VkIHRvIG51bGwgb3IgdW5kZWZpbmVkYCxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGludmFyaWFudChcbiAgICAgIHR5cGVvZiBwcm9jZXNzZWRDb2xvciA9PT0gJ251bWJlcicsXG4gICAgICAnVW5leHBlY3RlZCBjb2xvciBnaXZlbiBmb3IgU3RhdHVzQmFyLnNldEJhY2tncm91bmRDb2xvcicsXG4gICAgKTtcblxuICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLnNldENvbG9yKHByb2Nlc3NlZENvbG9yLCBhbmltYXRlZCk7XG4gIH1cblxuICAvKipcbiAgICogQ29udHJvbCB0aGUgdHJhbnNsdWNlbmN5IG9mIHRoZSBzdGF0dXMgYmFyXG4gICAqIEBwYXJhbSB0cmFuc2x1Y2VudCBTZXQgYXMgdHJhbnNsdWNlbnQuXG4gICAqL1xuICBzdGF0aWMgc2V0VHJhbnNsdWNlbnQodHJhbnNsdWNlbnQ6IGJvb2xlYW4pIHtcbiAgICBpZiAoUGxhdGZvcm0uT1MgIT09ICdhbmRyb2lkJykge1xuICAgICAgY29uc29sZS53YXJuKCdgc2V0VHJhbnNsdWNlbnRgIGlzIG9ubHkgYXZhaWxhYmxlIG9uIEFuZHJvaWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgU3RhdHVzQmFyLl9kZWZhdWx0UHJvcHMudHJhbnNsdWNlbnQgPSB0cmFuc2x1Y2VudDtcbiAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZC5zZXRUcmFuc2x1Y2VudCh0cmFuc2x1Y2VudCk7XG4gIH1cblxuICAvKipcbiAgICogUHVzaCBhIFN0YXR1c0JhciBlbnRyeSBvbnRvIHRoZSBzdGFjay5cbiAgICogVGhlIHJldHVybiB2YWx1ZSBzaG91bGQgYmUgcGFzc2VkIHRvIGBwb3BTdGFja0VudHJ5YCB3aGVuIGNvbXBsZXRlLlxuICAgKlxuICAgKiBAcGFyYW0gcHJvcHMgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIFN0YXR1c0JhciBwcm9wcyB0byB1c2UgaW4gdGhlIHN0YWNrIGVudHJ5LlxuICAgKi9cbiAgc3RhdGljIHB1c2hTdGFja0VudHJ5KHByb3BzOiBhbnkpOiBhbnkge1xuICAgIGNvbnN0IGVudHJ5ID0gY3JlYXRlU3RhY2tFbnRyeShwcm9wcyk7XG4gICAgU3RhdHVzQmFyLl9wcm9wc1N0YWNrLnB1c2goZW50cnkpO1xuICAgIFN0YXR1c0Jhci5fdXBkYXRlUHJvcHNTdGFjaygpO1xuICAgIHJldHVybiBlbnRyeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQb3AgYSBTdGF0dXNCYXIgZW50cnkgZnJvbSB0aGUgc3RhY2suXG4gICAqXG4gICAqIEBwYXJhbSBlbnRyeSBFbnRyeSByZXR1cm5lZCBmcm9tIGBwdXNoU3RhY2tFbnRyeWAuXG4gICAqL1xuICBzdGF0aWMgcG9wU3RhY2tFbnRyeShlbnRyeTogYW55KSB7XG4gICAgY29uc3QgaW5kZXggPSBTdGF0dXNCYXIuX3Byb3BzU3RhY2suaW5kZXhPZihlbnRyeSk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgU3RhdHVzQmFyLl9wcm9wc1N0YWNrLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIFN0YXR1c0Jhci5fdXBkYXRlUHJvcHNTdGFjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgYW4gZXhpc3RpbmcgU3RhdHVzQmFyIHN0YWNrIGVudHJ5IHdpdGggbmV3IHByb3BzLlxuICAgKlxuICAgKiBAcGFyYW0gZW50cnkgRW50cnkgcmV0dXJuZWQgZnJvbSBgcHVzaFN0YWNrRW50cnlgIHRvIHJlcGxhY2UuXG4gICAqIEBwYXJhbSBwcm9wcyBPYmplY3QgY29udGFpbmluZyB0aGUgU3RhdHVzQmFyIHByb3BzIHRvIHVzZSBpbiB0aGUgcmVwbGFjZW1lbnQgc3RhY2sgZW50cnkuXG4gICAqL1xuICBzdGF0aWMgcmVwbGFjZVN0YWNrRW50cnkoZW50cnk6IGFueSwgcHJvcHM6IGFueSk6IGFueSB7XG4gICAgY29uc3QgbmV3RW50cnkgPSBjcmVhdGVTdGFja0VudHJ5KHByb3BzKTtcbiAgICBjb25zdCBpbmRleCA9IFN0YXR1c0Jhci5fcHJvcHNTdGFjay5pbmRleE9mKGVudHJ5KTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBTdGF0dXNCYXIuX3Byb3BzU3RhY2tbaW5kZXhdID0gbmV3RW50cnk7XG4gICAgfVxuICAgIFN0YXR1c0Jhci5fdXBkYXRlUHJvcHNTdGFjaygpO1xuICAgIHJldHVybiBuZXdFbnRyeTtcbiAgfVxuXG4gIF9zdGFja0VudHJ5ID0gbnVsbDtcblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAvLyBFdmVyeSB0aW1lIGEgU3RhdHVzQmFyIGNvbXBvbmVudCBpcyBtb3VudGVkLCB3ZSBwdXNoIGl0J3MgcHJvcCB0byBhIHN0YWNrXG4gICAgLy8gYW5kIGFsd2F5cyB1cGRhdGUgdGhlIG5hdGl2ZSBzdGF0dXMgYmFyIHdpdGggdGhlIHByb3BzIGZyb20gdGhlIHRvcCBvZiB0aGVuXG4gICAgLy8gc3RhY2suIFRoaXMgYWxsb3dzIGhhdmluZyBtdWx0aXBsZSBTdGF0dXNCYXIgY29tcG9uZW50cyBhbmQgdGhlIG9uZSB0aGF0IGlzXG4gICAgLy8gYWRkZWQgbGFzdCBvciBpcyBkZWVwZXIgaW4gdGhlIHZpZXcgaGllcmFyY2h5IHdpbGwgaGF2ZSBwcmlvcml0eS5cbiAgICB0aGlzLl9zdGFja0VudHJ5ID0gU3RhdHVzQmFyLnB1c2hTdGFja0VudHJ5KHRoaXMucHJvcHMpO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgLy8gV2hlbiBhIFN0YXR1c0JhciBpcyB1bm1vdW50ZWQsIHJlbW92ZSBpdHNlbGYgZnJvbSB0aGUgc3RhY2sgYW5kIHVwZGF0ZVxuICAgIC8vIHRoZSBuYXRpdmUgYmFyIHdpdGggdGhlIG5leHQgcHJvcHMuXG4gICAgU3RhdHVzQmFyLnBvcFN0YWNrRW50cnkodGhpcy5fc3RhY2tFbnRyeSk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgdGhpcy5fc3RhY2tFbnRyeSA9IFN0YXR1c0Jhci5yZXBsYWNlU3RhY2tFbnRyeShcbiAgICAgIHRoaXMuX3N0YWNrRW50cnksXG4gICAgICB0aGlzLnByb3BzLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgbmF0aXZlIHN0YXR1cyBiYXIgd2l0aCB0aGUgcHJvcHMgZnJvbSB0aGUgc3RhY2suXG4gICAqL1xuICBzdGF0aWMgX3VwZGF0ZVByb3BzU3RhY2sgPSAoKSA9PiB7XG4gICAgLy8gU2VuZCB0aGUgdXBkYXRlIHRvIHRoZSBuYXRpdmUgbW9kdWxlIG9ubHkgb25jZSBhdCB0aGUgZW5kIG9mIHRoZSBmcmFtZS5cbiAgICBjbGVhckltbWVkaWF0ZShTdGF0dXNCYXIuX3VwZGF0ZUltbWVkaWF0ZSk7XG4gICAgU3RhdHVzQmFyLl91cGRhdGVJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGUoKCkgPT4ge1xuICAgICAgY29uc3Qgb2xkUHJvcHMgPSBTdGF0dXNCYXIuX2N1cnJlbnRWYWx1ZXM7XG4gICAgICBjb25zdCBtZXJnZWRQcm9wcyA9IG1lcmdlUHJvcHNTdGFjayhcbiAgICAgICAgU3RhdHVzQmFyLl9wcm9wc1N0YWNrLFxuICAgICAgICBTdGF0dXNCYXIuX2RlZmF1bHRQcm9wcyxcbiAgICAgICk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgcHJvcHMgdGhhdCBoYXZlIGNoYW5nZWQgdXNpbmcgdGhlIG1lcmdlZCB2YWx1ZXMgZnJvbSB0aGUgcHJvcHMgc3RhY2suXG4gICAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdpb3MnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhb2xkUHJvcHMgfHxcbiAgICAgICAgICBvbGRQcm9wcy5iYXJTdHlsZS52YWx1ZSAhPT0gbWVyZ2VkUHJvcHMuYmFyU3R5bGUudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUy5zZXRTdHlsZShcbiAgICAgICAgICAgIG1lcmdlZFByb3BzLmJhclN0eWxlLnZhbHVlLFxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMuYmFyU3R5bGUuYW5pbWF0ZWQgfHwgZmFsc2UsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9sZFByb3BzIHx8IG9sZFByb3BzLmhpZGRlbi52YWx1ZSAhPT0gbWVyZ2VkUHJvcHMuaGlkZGVuLnZhbHVlKSB7XG4gICAgICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUy5zZXRIaWRkZW4oXG4gICAgICAgICAgICBtZXJnZWRQcm9wcy5oaWRkZW4udmFsdWUsXG4gICAgICAgICAgICBtZXJnZWRQcm9wcy5oaWRkZW4uYW5pbWF0ZWRcbiAgICAgICAgICAgICAgPyBtZXJnZWRQcm9wcy5oaWRkZW4udHJhbnNpdGlvblxuICAgICAgICAgICAgICA6ICdub25lJyxcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICFvbGRQcm9wcyB8fFxuICAgICAgICAgIG9sZFByb3BzLm5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUgIT09XG4gICAgICAgICAgICBtZXJnZWRQcm9wcy5uZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlXG4gICAgICAgICkge1xuICAgICAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJJT1Muc2V0TmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZShcbiAgICAgICAgICAgIG1lcmdlZFByb3BzLm5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnKSB7XG4gICAgICAgIC8vdG9kbyhUNjA2ODQ3ODcpOiBBZGQgYmFjayBvcHRpbWl6YXRpb24gdG8gb25seSB1cGRhdGUgYmFyIHN0eWxlIGFuZFxuICAgICAgICAvL2JhY2tncm91bmQgY29sb3IgaWYgdGhlIG5ldyB2YWx1ZSBpcyBkaWZmZXJlbnQgZnJvbSB0aGUgb2xkIHZhbHVlLlxuICAgICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZC5zZXRTdHlsZShtZXJnZWRQcm9wcy5iYXJTdHlsZS52YWx1ZSk7XG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZENvbG9yID0gcHJvY2Vzc0NvbG9yKG1lcmdlZFByb3BzLmJhY2tncm91bmRDb2xvci52YWx1ZSk7XG4gICAgICAgIGlmIChwcm9jZXNzZWRDb2xvciA9PSBudWxsKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgYFxcYFN0YXR1c0Jhci5fdXBkYXRlUHJvcHNTdGFja1xcYDogQ29sb3IgJHttZXJnZWRQcm9wcy5iYWNrZ3JvdW5kQ29sb3IudmFsdWV9IHBhcnNlZCB0byBudWxsIG9yIHVuZGVmaW5lZGAsXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbnZhcmlhbnQoXG4gICAgICAgICAgICB0eXBlb2YgcHJvY2Vzc2VkQ29sb3IgPT09ICdudW1iZXInLFxuICAgICAgICAgICAgJ1VuZXhwZWN0ZWQgY29sb3IgZ2l2ZW4gaW4gU3RhdHVzQmFyLl91cGRhdGVQcm9wc1N0YWNrJyxcbiAgICAgICAgICApO1xuICAgICAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLnNldENvbG9yKFxuICAgICAgICAgICAgcHJvY2Vzc2VkQ29sb3IsXG4gICAgICAgICAgICBtZXJnZWRQcm9wcy5iYWNrZ3JvdW5kQ29sb3IuYW5pbWF0ZWQsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9sZFByb3BzIHx8IG9sZFByb3BzLmhpZGRlbi52YWx1ZSAhPT0gbWVyZ2VkUHJvcHMuaGlkZGVuLnZhbHVlKSB7XG4gICAgICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQuc2V0SGlkZGVuKG1lcmdlZFByb3BzLmhpZGRlbi52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWN0aXZpdGllcyBhcmUgbm90IHRyYW5zbHVjZW50IGJ5IGRlZmF1bHQsIHNvIGFsd2F5cyBzZXQgaWYgdHJ1ZS5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICFvbGRQcm9wcyB8fFxuICAgICAgICAgIG9sZFByb3BzLnRyYW5zbHVjZW50ICE9PSBtZXJnZWRQcm9wcy50cmFuc2x1Y2VudCB8fFxuICAgICAgICAgIG1lcmdlZFByb3BzLnRyYW5zbHVjZW50XG4gICAgICAgICkge1xuICAgICAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLnNldFRyYW5zbHVjZW50KG1lcmdlZFByb3BzLnRyYW5zbHVjZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gVXBkYXRlIHRoZSBjdXJyZW50IHByb3AgdmFsdWVzLlxuICAgICAgU3RhdHVzQmFyLl9jdXJyZW50VmFsdWVzID0gbWVyZ2VkUHJvcHM7XG4gICAgfSk7XG4gIH07XG5cbiAgcmVuZGVyKCk6IFJlYWN0Lk5vZGUge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbm1vZHVs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