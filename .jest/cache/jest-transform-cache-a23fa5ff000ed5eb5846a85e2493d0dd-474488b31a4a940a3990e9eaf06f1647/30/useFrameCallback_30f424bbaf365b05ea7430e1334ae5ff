8e3b6034b829c2d04d9f51d1b99baa10
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useFrameCallback = useFrameCallback;
var _react = require("react");
var _FrameCallbackRegistryJS = _interopRequireDefault(require("../frameCallback/FrameCallbackRegistryJS"));
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}
var frameCallbackRegistry = new _FrameCallbackRegistryJS.default();
function useFrameCallback(callback) {
  var autostart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
  var ref = (0, _react.useRef)({
    setActive: function setActive(isActive) {
      frameCallbackRegistry.manageStateFrameCallback(ref.current.callbackId, isActive);
      ref.current.isActive = isActive;
    },
    isActive: autostart,
    callbackId: -1
  });
  (0, _react.useEffect)(function () {
    ref.current.callbackId = frameCallbackRegistry.registerFrameCallback(callback);
    ref.current.setActive(ref.current.isActive);
    return function () {
      frameCallbackRegistry.unregisterFrameCallback(ref.current.callbackId);
      ref.current.callbackId = -1;
    };
  }, [callback, autostart]);
  return ref.current;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX0ZyYW1lQ2FsbGJhY2tSZWdpc3RyeUpTIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiZnJhbWVDYWxsYmFja1JlZ2lzdHJ5IiwidXNlRnJhbWVDYWxsYmFjayIsImNhbGxiYWNrIiwiYXV0b3N0YXJ0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwicmVmIiwidXNlUmVmIiwic2V0QWN0aXZlIiwiaXNBY3RpdmUiLCJtYW5hZ2VTdGF0ZUZyYW1lQ2FsbGJhY2siLCJjdXJyZW50IiwiY2FsbGJhY2tJZCIsInVzZUVmZmVjdCIsInJlZ2lzdGVyRnJhbWVDYWxsYmFjayIsInVucmVnaXN0ZXJGcmFtZUNhbGxiYWNrIl0sInNvdXJjZXMiOlsidXNlRnJhbWVDYWxsYmFjay50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBGcmFtZUNhbGxiYWNrUmVnaXN0cnlKUyBmcm9tICcuLi9mcmFtZUNhbGxiYWNrL0ZyYW1lQ2FsbGJhY2tSZWdpc3RyeUpTJztcbmltcG9ydCB7IEZyYW1lSW5mbyB9IGZyb20gJy4uL2ZyYW1lQ2FsbGJhY2svRnJhbWVDYWxsYmFja1JlZ2lzdHJ5VUknO1xuXG5leHBvcnQgdHlwZSBGcmFtZUNhbGxiYWNrID0ge1xuICBzZXRBY3RpdmU6IChpc0FjdGl2ZTogYm9vbGVhbikgPT4gdm9pZDtcbiAgaXNBY3RpdmU6IGJvb2xlYW47XG4gIGNhbGxiYWNrSWQ6IG51bWJlcjtcbn07XG5jb25zdCBmcmFtZUNhbGxiYWNrUmVnaXN0cnkgPSBuZXcgRnJhbWVDYWxsYmFja1JlZ2lzdHJ5SlMoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUZyYW1lQ2FsbGJhY2soXG4gIGNhbGxiYWNrOiAoZnJhbWVJbmZvOiBGcmFtZUluZm8pID0+IHZvaWQsXG4gIGF1dG9zdGFydCA9IHRydWVcbik6IEZyYW1lQ2FsbGJhY2sge1xuICBjb25zdCByZWYgPSB1c2VSZWY8RnJhbWVDYWxsYmFjaz4oe1xuICAgIHNldEFjdGl2ZTogKGlzQWN0aXZlOiBib29sZWFuKSA9PiB7XG4gICAgICBmcmFtZUNhbGxiYWNrUmVnaXN0cnkubWFuYWdlU3RhdGVGcmFtZUNhbGxiYWNrKFxuICAgICAgICByZWYuY3VycmVudC5jYWxsYmFja0lkLFxuICAgICAgICBpc0FjdGl2ZVxuICAgICAgKTtcbiAgICAgIHJlZi5jdXJyZW50LmlzQWN0aXZlID0gaXNBY3RpdmU7XG4gICAgfSxcbiAgICBpc0FjdGl2ZTogYXV0b3N0YXJ0LFxuICAgIGNhbGxiYWNrSWQ6IC0xLFxuICB9KTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlZi5jdXJyZW50LmNhbGxiYWNrSWQgPVxuICAgICAgZnJhbWVDYWxsYmFja1JlZ2lzdHJ5LnJlZ2lzdGVyRnJhbWVDYWxsYmFjayhjYWxsYmFjayk7XG4gICAgcmVmLmN1cnJlbnQuc2V0QWN0aXZlKHJlZi5jdXJyZW50LmlzQWN0aXZlKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBmcmFtZUNhbGxiYWNrUmVnaXN0cnkudW5yZWdpc3RlckZyYW1lQ2FsbGJhY2socmVmLmN1cnJlbnQuY2FsbGJhY2tJZCk7XG4gICAgICByZWYuY3VycmVudC5jYWxsYmFja0lkID0gLTE7XG4gICAgfTtcbiAgfSwgW2NhbGxiYWNrLCBhdXRvc3RhcnRdKTtcblxuICByZXR1cm4gcmVmLmN1cnJlbnQ7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLHdCQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFBK0UsU0FBQUUsdUJBQUFDLEdBQUE7RUFBQSxPQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBO0lBQUFFLE9BQUEsRUFBQUY7RUFBQTtBQUFBO0FBUS9FLElBQU1HLHFCQUFxQixHQUFHLElBQUlMLHdCQUFBLENBQUFJLE9BQXVCLEVBQUU7QUFFcEQsU0FBU0UsZ0JBQWdCQSxDQUM5QkMsUUFBd0MsRUFFekI7RUFBQSxJQURmQyxTQUFTLEdBQUFDLFNBQUEsQ0FBQUMsTUFBQSxRQUFBRCxTQUFBLFFBQUFFLFNBQUEsR0FBQUYsU0FBQSxNQUFHLElBQUk7RUFFaEIsSUFBTUcsR0FBRyxHQUFHLElBQUFkLE1BQUEsQ0FBQWUsTUFBTSxFQUFnQjtJQUNoQ0MsU0FBUyxFQUFHLFNBQUFBLFVBQUFDLFFBQWlCLEVBQUs7TUFDaENWLHFCQUFxQixDQUFDVyx3QkFBd0IsQ0FDNUNKLEdBQUcsQ0FBQ0ssT0FBTyxDQUFDQyxVQUFVLEVBQ3RCSCxRQUFRLENBQ1Q7TUFDREgsR0FBRyxDQUFDSyxPQUFPLENBQUNGLFFBQVEsR0FBR0EsUUFBUTtJQUNqQyxDQUFDO0lBQ0RBLFFBQVEsRUFBRVAsU0FBUztJQUNuQlUsVUFBVSxFQUFFLENBQUM7RUFDZixDQUFDLENBQUM7RUFFRixJQUFBcEIsTUFBQSxDQUFBcUIsU0FBUyxFQUFDLFlBQU07SUFDZFAsR0FBRyxDQUFDSyxPQUFPLENBQUNDLFVBQVUsR0FDcEJiLHFCQUFxQixDQUFDZSxxQkFBcUIsQ0FBQ2IsUUFBUSxDQUFDO0lBQ3ZESyxHQUFHLENBQUNLLE9BQU8sQ0FBQ0gsU0FBUyxDQUFDRixHQUFHLENBQUNLLE9BQU8sQ0FBQ0YsUUFBUSxDQUFDO0lBRTNDLE9BQU8sWUFBTTtNQUNYVixxQkFBcUIsQ0FBQ2dCLHVCQUF1QixDQUFDVCxHQUFHLENBQUNLLE9BQU8sQ0FBQ0MsVUFBVSxDQUFDO01BQ3JFTixHQUFHLENBQUNLLE9BQU8sQ0FBQ0MsVUFBVSxHQUFHLENBQUMsQ0FBQztJQUM3QixDQUFDO0VBQ0gsQ0FBQyxFQUFFLENBQUNYLFFBQVEsRUFBRUMsU0FBUyxDQUFDLENBQUM7RUFFekIsT0FBT0ksR0FBRyxDQUFDSyxPQUFPO0FBQ3BCIn0=