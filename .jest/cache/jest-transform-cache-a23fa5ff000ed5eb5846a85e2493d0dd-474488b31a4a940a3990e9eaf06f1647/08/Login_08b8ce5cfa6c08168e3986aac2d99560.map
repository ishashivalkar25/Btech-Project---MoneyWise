{"version":3,"names":["_reactNative","require","_react","_interopRequireDefault","_config","_reactNativeSafeAreaContext","_auth","_core","_reactNativeDialogInput","_Background","_Btn","_Field","_Constants","_jsxRuntime","_Dimensions$get","Dimensions","get","width","height","Login","props","_React$useState","React","useState","_React$useState2","_slicedToArray2","default","userName","setUserName","_React$useState3","_React$useState4","password","setPassword","_React$useState5","_React$useState6","dialogBoxVisibility","setDialogBoxVisibility","_React$useState7","_React$useState8","userNameValidity","setUserNameValidity","useEffect","unsubscribe","auth","onAuthStateChanged","user","emailVerified","navigation","replace","console","log","logInToAcc","signInWithEmailAndPassword","then","userCredentials","email","JSON","stringify","alert","signOut","catch","error","handleUserNameChange","userNameInput","reg","test","redirectToSignUp","navigate","forgotPassword","passwordResetEmail","emailInput","sendPasswordResetEmail","jsx","SafeAreaProvider","children","jsxs","View","style","justifyContent","alignItems","Text","flex","color","fontSize","fontWeight","backgroundColor","borderTopLeftRadius","paddingTop","marginBottom","placeholder","keyboardType","onChangeText","text","styles","tip","secureTextEntry","paddingRight","darkGreen","onPress","testID","TouchableOpacity","borderRadius","paddingVertical","marginVertical","isDialogVisible","title","message","hintInput","submitInput","inputText","closeDialog","display","flexDirection","StyleSheet","create","textAlign","paddingLeft"],"sources":["Login.js"],"sourcesContent":["import { StyleSheet, Text, View, TextInput, Dimensions, KeyboardAvoidingView, TouchableOpacity} from 'react-native';\r\nimport React from 'react';\r\nimport { auth } from '../Firebase/config'\r\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\r\nimport { sendPasswordResetEmail, signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { useNavigation } from '@react-navigation/core';\r\nimport DialogInput from 'react-native-dialog-input';\r\nimport Background from \"./Background\";\r\nimport Btn from \"./Btn\";\r\nimport Field from \"./Field\";\r\nimport { darkGreen } from \"./Constants\";\r\nconst { width, height } = Dimensions.get(\"window\");\r\n\r\nexport default function Login(props) {\r\n  const [userName, setUserName] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n  const [dialogBoxVisibility, setDialogBoxVisibility] = React.useState(false);\r\n  const [userNameValidity, setUserNameValidity] = React.useState(true);\r\n\r\n  // const navigation = useNavigation();\r\n  React.useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged(user => {\r\n      if(user && user.emailVerified){\r\n        props.navigation.replace(\"Root\");\r\n        console.log(user);\r\n      }\r\n    });\r\n    setUserName(\"\");\r\n    setPassword(\"\");\r\n    setUserNameValidity(true);\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const logInToAcc = ()=>{\r\n    console.log(\"Logged In Successfully!!!\", auth);\r\n    signInWithEmailAndPassword(auth, userName, password)\r\n      .then(userCredentials => {\r\n        const user = userCredentials.user;\r\n        console.log(\"user email :\", user.email);\r\n        if(user.emailVerified){\r\n          props.navigation.replace(\"Root\");\r\n          console.log(JSON.stringify(user));\r\n          alert(\"Logged In Successfully!!!\");\r\n        }\r\n        else\r\n        {\r\n          alert(\"Please verify your Email. Link is already sent.\");\r\n          auth.signOut();\r\n        }\r\n      })\r\n      .catch(error => alert(\"Username/ Password is incorrect!!\"));\r\n  }\r\n\r\n  //validate email i.e username\r\n  const handleUserNameChange = (userNameInput) => {\r\n\r\n    const reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\r\n    if (reg.test(userNameInput) === true){\r\n      setUserName(userNameInput);\r\n      setUserNameValidity(true);\r\n    }\r\n    else{\r\n      setUserNameValidity(false);\r\n      setUserName(\"\");\r\n    }\r\n  }\r\n  \r\n\r\n  const redirectToSignUp = () => {\r\n    props.navigation.navigate(\"Sign Up\");\r\n  }\r\n\r\n  const forgotPassword = () => {\r\n    setDialogBoxVisibility(true);\r\n  }\r\n\r\n  const passwordResetEmail = (emailInput) => {\r\n    console.log(\"Email : \", emailInput);\r\n    setDialogBoxVisibility(false);\r\n    \r\n    sendPasswordResetEmail(auth, emailInput)\r\n      .then(function() {\r\n        alert(\"Password reset link is sent successfully!\");\r\n      })\r\n      .catch(function(error) {\r\n        alert(\"Please enter valid email address!\");\r\n      });\r\n  }\r\n\r\n  return (\r\n    <SafeAreaProvider>\r\n    <Background>\r\n      <View style={{ justifyContent:\"center\", alignItems: \"center\", width: \"100%\",  height:height*0.15,}}>\r\n        <Text\r\n            style={{\r\n              flex:1,\r\n              color: \"white\",\r\n              fontSize: 64,\r\n              fontWeight: \"bold\",\r\n              justifyContent:\"center\",\r\n             \r\n            }}\r\n        >\r\n            Login\r\n        </Text>\r\n        </View>\r\n        <View \r\n          style={{\r\n            backgroundColor: \"white\",\r\n            height: height*0.85,\r\n            width: width,\r\n            borderTopLeftRadius: 130,\r\n            paddingTop: 100,\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <Text\r\n            style={{\r\n              color: \"grey\",\r\n              fontSize: 19,\r\n              fontWeight: \"bold\",\r\n              marginBottom: 20,\r\n            }}\r\n          >\r\n            Login to your account\r\n          </Text>\r\n          <Field\r\n            placeholder=\"Email / Username\"\r\n            keyboardType={\"email-address\"}\r\n            onChangeText={(text)=>handleUserNameChange(text)}\r\n          />\r\n          {!userNameValidity && <Text style={styles.tip}>Invalid Email / Username!</Text>}\r\n        \r\n          <Field placeholder=\"Password\" secureTextEntry={true} onChangeText={(text)=>setPassword(text)}/>\r\n\r\n          <View\r\n            style={{\r\n              alignItems: \"flex-end\",\r\n              width: \"78%\",\r\n              paddingRight: 16,\r\n              marginBottom: 200,\r\n            }}\r\n          >\r\n            <Text\r\n              style={{ color: darkGreen, fontWeight: \"bold\", fontSize: 16 }}\r\n              onPress={forgotPassword}\r\n              testID='Forgot Password'\r\n            >Forgot Password ?</Text>\r\n          </View>\r\n\r\n          {/* <Btn\r\n            textColor=\"white\"\r\n            bgColor={darkGreen}\r\n            btnLabel=\"Login\"\r\n            Press={logInToAcc}\r\n            testID = \"LoginBtn\"\r\n          /> */}\r\n          <TouchableOpacity\r\n            onPress={logInToAcc}\r\n            style={{\r\n              backgroundColor: darkGreen,\r\n              borderRadius: 200,\r\n              alignItems: 'center',\r\n              width: 250,\r\n              paddingVertical: 5,\r\n              marginVertical: 10\r\n            }}\r\n            testID=\"LoginBtn\"\r\n          >\r\n            <Text style={{ color: 'white', fontSize: 25, fontWeight: 'bold' }}>\r\n              Login\r\n            </Text>\r\n          </TouchableOpacity>\r\n\r\n          <DialogInput isDialogVisible={dialogBoxVisibility}\r\n              title={\"Password Recovery\"}\r\n              message={\"Enter registered email address :\"}\r\n              hintInput ={\"abc@gmail.com\"}\r\n              submitInput={ (inputText) => {passwordResetEmail(inputText)} }\r\n              closeDialog={ () => {setDialogBoxVisibility(false)}}>\r\n          </DialogInput>\r\n\r\n          <View\r\n            style={{\r\n              display: \"flex\",\r\n              flexDirection: \"row\",\r\n              justifyContent: \"center\",\r\n            }}\r\n          >\r\n            <Text style={{ fontSize: 16, fontWeight: \"bold\" }}>\r\n              Don't have an account ?{\" \"}\r\n            </Text>\r\n            <TouchableOpacity\r\n              onPress={redirectToSignUp}\r\n            >\r\n              <Text\r\n                style={{ color: darkGreen, fontWeight: \"bold\", fontSize: 16 }}\r\n              >\r\n                Signup\r\n              </Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n\r\n        </View>\r\n      \r\n    </Background>\r\n    </SafeAreaProvider>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  tip:{\r\n    color:\"red\", \r\n    textAlign: 'left', \r\n    width: '70%', \r\n    paddingLeft: 10\r\n  }\r\n});\r\n"],"mappings":"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"}