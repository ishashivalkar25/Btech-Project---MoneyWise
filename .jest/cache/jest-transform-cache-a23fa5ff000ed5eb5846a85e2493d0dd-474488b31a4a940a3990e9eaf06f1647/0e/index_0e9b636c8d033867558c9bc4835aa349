5fdcd3fe2d3bb005cb8e3449cba0b17c
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _react = _interopRequireWildcard(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _reactNative = require("react-native");
var _reactNativePermissions = require("react-native-permissions");
var _reactNativeCamera = require("react-native-camera");
var _jsxRuntime = require("react/jsx-runtime");
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
var CAMERA_FLASH_MODE = _reactNativeCamera.RNCamera.Constants.FlashMode;
var CAMERA_FLASH_MODES = [CAMERA_FLASH_MODE.torch, CAMERA_FLASH_MODE.on, CAMERA_FLASH_MODE.off, CAMERA_FLASH_MODE.auto];
var QRCodeScanner = function (_Component) {
  (0, _inherits2.default)(QRCodeScanner, _Component);
  var _super = _createSuper(QRCodeScanner);
  function QRCodeScanner(props) {
    var _this;
    (0, _classCallCheck2.default)(this, QRCodeScanner);
    _this = _super.call(this, props);
    _this.state = {
      scanning: false,
      isCameraActivated: true,
      fadeInOpacity: new _reactNative.Animated.Value(0),
      isAuthorized: false,
      isAuthorizationChecked: false,
      disableVibrationByUser: false
    };
    _this.timer = null;
    _this._scannerTimeout = null;
    _this._handleBarCodeRead = _this._handleBarCodeRead.bind((0, _assertThisInitialized2.default)(_this));
    return _this;
  }
  (0, _createClass2.default)(QRCodeScanner, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this2 = this;
      if (_reactNative.Platform.OS === 'ios') {
        (0, _reactNativePermissions.request)(_reactNativePermissions.PERMISSIONS.IOS.CAMERA).then(function (cameraStatus) {
          _this2.setState({
            isAuthorized: cameraStatus === _reactNativePermissions.RESULTS.GRANTED,
            isAuthorizationChecked: true
          });
        });
      } else if (_reactNative.Platform.OS === 'android' && this.props.checkAndroid6Permissions) {
        _reactNative.PermissionsAndroid.request(_reactNative.PermissionsAndroid.PERMISSIONS.CAMERA, {
          title: this.props.permissionDialogTitle,
          message: this.props.permissionDialogMessage,
          buttonPositive: this.props.buttonPositive
        }).then(function (granted) {
          var isAuthorized = granted === _reactNative.PermissionsAndroid.RESULTS.GRANTED;
          _this2.setState({
            isAuthorized: isAuthorized,
            isAuthorizationChecked: true
          });
        });
      } else {
        this.setState({
          isAuthorized: true,
          isAuthorizationChecked: true
        });
      }
      if (this.props.fadeIn) {
        _reactNative.Animated.sequence([_reactNative.Animated.delay(1000), _reactNative.Animated.timing(this.state.fadeInOpacity, {
          toValue: 1,
          easing: _reactNative.Easing.inOut(_reactNative.Easing.quad),
          useNativeDriver: true
        })]).start();
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this._scannerTimeout !== null) {
        clearTimeout(this._scannerTimeout);
      }
      if (this.timer !== null) {
        clearTimeout(this.timer);
      }
      this.timer = null;
      this._scannerTimeout = null;
    }
  }, {
    key: "disable",
    value: function disable() {
      this.setState({
        disableVibrationByUser: true
      });
    }
  }, {
    key: "enable",
    value: function enable() {
      this.setState({
        disableVibrationByUser: false
      });
    }
  }, {
    key: "_setScanning",
    value: function _setScanning(value) {
      this.setState({
        scanning: value
      });
    }
  }, {
    key: "_setCamera",
    value: function _setCamera(value) {
      var _this3 = this;
      this.setState({
        isCameraActivated: value,
        scanning: false,
        fadeInOpacity: new _reactNative.Animated.Value(0)
      }, function () {
        if (value && _this3.props.fadeIn) {
          if (_this3.props.fadeIn) {
            _reactNative.Animated.sequence([_reactNative.Animated.delay(10), _reactNative.Animated.timing(_this3.state.fadeInOpacity, {
              toValue: 1,
              easing: _reactNative.Easing.inOut(_reactNative.Easing.quad),
              useNativeDriver: true
            })]).start();
          }
        }
      });
    }
  }, {
    key: "_handleBarCodeRead",
    value: function _handleBarCodeRead(e) {
      var _this4 = this;
      if (!this.state.scanning && !this.state.disableVibrationByUser) {
        if (this.props.vibrate) {
          _reactNative.Vibration.vibrate();
        }
        this._setScanning(true);
        this.props.onRead(e);
        if (this.props.reactivate) {
          this._scannerTimeout = setTimeout(function () {
            return _this4._setScanning(false);
          }, this.props.reactivateTimeout);
        }
      }
    }
  }, {
    key: "_renderTopContent",
    value: function _renderTopContent() {
      if (this.props.topContent) {
        return this.props.topContent;
      }
      return null;
    }
  }, {
    key: "_renderBottomContent",
    value: function _renderBottomContent() {
      if (this.props.bottomContent) {
        return this.props.bottomContent;
      }
      return null;
    }
  }, {
    key: "_renderCameraMarker",
    value: function _renderCameraMarker() {
      if (this.props.showMarker) {
        if (this.props.customMarker) {
          return this.props.customMarker;
        } else {
          return (0, _jsxRuntime.jsx)(_reactNative.View, {
            style: styles.rectangleContainer,
            children: (0, _jsxRuntime.jsx)(_reactNative.View, {
              style: [styles.rectangle, this.props.markerStyle ? this.props.markerStyle : null]
            })
          });
        }
      }
      return null;
    }
  }, {
    key: "_renderCameraComponent",
    value: function _renderCameraComponent() {
      return (0, _jsxRuntime.jsx)(_reactNativeCamera.RNCamera, Object.assign({
        androidCameraPermissionOptions: {
          title: this.props.permissionDialogTitle,
          message: this.props.permissionDialogMessage,
          buttonPositive: this.props.buttonPositive
        },
        style: [styles.camera, this.props.cameraStyle],
        onBarCodeRead: this._handleBarCodeRead.bind(this),
        type: this.props.cameraType,
        flashMode: this.props.flashMode,
        captureAudio: false
      }, this.props.cameraProps, {
        children: this._renderCameraMarker()
      }));
    }
  }, {
    key: "_renderCamera",
    value: function _renderCamera() {
      var _this5 = this;
      var _this$props = this.props,
        notAuthorizedView = _this$props.notAuthorizedView,
        pendingAuthorizationView = _this$props.pendingAuthorizationView,
        cameraType = _this$props.cameraType,
        cameraTimeoutView = _this$props.cameraTimeoutView;
      if (!this.state.isCameraActivated) {
        return (0, _jsxRuntime.jsx)(_reactNative.TouchableWithoutFeedback, {
          onPress: function onPress() {
            return _this5._setCamera(true);
          },
          children: cameraTimeoutView
        });
      }
      var _this$state = this.state,
        isAuthorized = _this$state.isAuthorized,
        isAuthorizationChecked = _this$state.isAuthorizationChecked;
      if (isAuthorized) {
        if (this.props.cameraTimeout > 0) {
          this.timer && clearTimeout(this.timer);
          this.timer = setTimeout(function () {
            return _this5._setCamera(false);
          }, this.props.cameraTimeout);
        }
        if (this.props.fadeIn) {
          return (0, _jsxRuntime.jsx)(_reactNative.Animated.View, {
            style: {
              opacity: this.state.fadeInOpacity,
              backgroundColor: 'transparent',
              height: this.props.cameraStyle && this.props.cameraStyle.height || styles.camera.height
            },
            children: this._renderCameraComponent()
          });
        }
        return this._renderCameraComponent();
      } else if (!isAuthorizationChecked) {
        return pendingAuthorizationView;
      } else {
        return notAuthorizedView;
      }
    }
  }, {
    key: "reactivate",
    value: function reactivate() {
      this._setScanning(false);
    }
  }, {
    key: "render",
    value: function render() {
      return (0, _jsxRuntime.jsxs)(_reactNative.View, {
        style: [styles.mainContainer, this.props.containerStyle],
        children: [(0, _jsxRuntime.jsx)(_reactNative.View, {
          style: [styles.infoView, this.props.topViewStyle],
          children: this._renderTopContent()
        }), (0, _jsxRuntime.jsx)(_reactNative.View, {
          style: this.props.cameraContainerStyle,
          children: this._renderCamera()
        }), (0, _jsxRuntime.jsx)(_reactNative.View, {
          style: [styles.infoView, this.props.bottomViewStyle],
          children: this._renderBottomContent()
        })]
      });
    }
  }]);
  return QRCodeScanner;
}(_react.Component);
exports.default = QRCodeScanner;
QRCodeScanner.propTypes = {
  onRead: _propTypes.default.func.isRequired,
  vibrate: _propTypes.default.bool,
  reactivate: _propTypes.default.bool,
  reactivateTimeout: _propTypes.default.number,
  cameraTimeout: _propTypes.default.number,
  fadeIn: _propTypes.default.bool,
  showMarker: _propTypes.default.bool,
  cameraType: _propTypes.default.oneOf(['front', 'back']),
  customMarker: _propTypes.default.element,
  containerStyle: _propTypes.default.any,
  cameraStyle: _propTypes.default.any,
  cameraContainerStyle: _propTypes.default.any,
  markerStyle: _propTypes.default.any,
  topViewStyle: _propTypes.default.any,
  bottomViewStyle: _propTypes.default.any,
  topContent: _propTypes.default.oneOfType([_propTypes.default.element, _propTypes.default.string]),
  bottomContent: _propTypes.default.oneOfType([_propTypes.default.element, _propTypes.default.string]),
  notAuthorizedView: _propTypes.default.element,
  permissionDialogTitle: _propTypes.default.string,
  permissionDialogMessage: _propTypes.default.string,
  buttonPositive: _propTypes.default.string,
  checkAndroid6Permissions: _propTypes.default.bool,
  flashMode: _propTypes.default.oneOf(CAMERA_FLASH_MODES),
  cameraProps: _propTypes.default.object,
  cameraTimeoutView: _propTypes.default.element
};
QRCodeScanner.defaultProps = {
  onRead: function onRead() {
    return null;
  },
  reactivate: false,
  vibrate: true,
  reactivateTimeout: 0,
  cameraTimeout: 0,
  fadeIn: true,
  showMarker: false,
  cameraType: 'back',
  notAuthorizedView: (0, _jsxRuntime.jsx)(_reactNative.View, {
    style: {
      flex: 1,
      alignItems: 'center',
      justifyContent: 'center'
    },
    children: (0, _jsxRuntime.jsx)(_reactNative.Text, {
      style: {
        textAlign: 'center',
        fontSize: 16
      },
      children: "Camera not authorized"
    })
  }),
  pendingAuthorizationView: (0, _jsxRuntime.jsx)(_reactNative.View, {
    style: {
      flex: 1,
      alignItems: 'center',
      justifyContent: 'center'
    },
    children: (0, _jsxRuntime.jsx)(_reactNative.Text, {
      style: {
        textAlign: 'center',
        fontSize: 16
      },
      children: "..."
    })
  }),
  permissionDialogTitle: 'Info',
  permissionDialogMessage: 'Need camera permission',
  buttonPositive: 'OK',
  checkAndroid6Permissions: false,
  flashMode: CAMERA_FLASH_MODE.auto,
  cameraProps: {},
  cameraTimeoutView: (0, _jsxRuntime.jsx)(_reactNative.View, {
    style: {
      flex: 0,
      alignItems: 'center',
      justifyContent: 'center',
      height: _reactNative.Dimensions.get('window').height,
      width: _reactNative.Dimensions.get('window').width,
      backgroundColor: 'black'
    },
    children: (0, _jsxRuntime.jsx)(_reactNative.Text, {
      style: {
        color: 'white'
      },
      children: "Tap to activate camera"
    })
  })
};
var styles = _reactNative.StyleSheet.create({
  mainContainer: {
    flex: 1
  },
  infoView: {
    flex: 2,
    justifyContent: 'center',
    alignItems: 'center',
    width: _reactNative.Dimensions.get('window').width
  },
  camera: {
    flex: 0,
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: 'transparent',
    height: _reactNative.Dimensions.get('window').width,
    width: _reactNative.Dimensions.get('window').width
  },
  rectangleContainer: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: 'transparent'
  },
  rectangle: {
    height: 250,
    width: 250,
    borderWidth: 2,
    borderColor: '#00FF00',
    backgroundColor: 'transparent'
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiX2Fzc2VydFRoaXNJbml0aWFsaXplZDIiLCJfaW5oZXJpdHMyIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yIiwiX2dldFByb3RvdHlwZU9mMiIsIl9yZWFjdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX3Byb3BUeXBlcyIsIl9yZWFjdE5hdGl2ZSIsIl9yZWFjdE5hdGl2ZVBlcm1pc3Npb25zIiwiX3JlYWN0TmF0aXZlQ2FtZXJhIiwiX2pzeFJ1bnRpbWUiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJub2RlSW50ZXJvcCIsIldlYWtNYXAiLCJjYWNoZUJhYmVsSW50ZXJvcCIsImNhY2hlTm9kZUludGVyb3AiLCJvYmoiLCJfX2VzTW9kdWxlIiwiY2FjaGUiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZXNjIiwic2V0IiwiX2NyZWF0ZVN1cGVyIiwiRGVyaXZlZCIsImhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QiLCJfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiX2NyZWF0ZVN1cGVySW50ZXJuYWwiLCJTdXBlciIsInJlc3VsdCIsIk5ld1RhcmdldCIsImNvbnN0cnVjdG9yIiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsImFyZ3VtZW50cyIsImFwcGx5Iiwic2hhbSIsIlByb3h5IiwiQm9vbGVhbiIsInZhbHVlT2YiLCJlIiwiQ0FNRVJBX0ZMQVNIX01PREUiLCJDYW1lcmEiLCJDb25zdGFudHMiLCJGbGFzaE1vZGUiLCJDQU1FUkFfRkxBU0hfTU9ERVMiLCJ0b3JjaCIsIm9uIiwib2ZmIiwiYXV0byIsIlFSQ29kZVNjYW5uZXIiLCJfQ29tcG9uZW50IiwiX3N1cGVyIiwicHJvcHMiLCJfdGhpcyIsInN0YXRlIiwic2Nhbm5pbmciLCJpc0NhbWVyYUFjdGl2YXRlZCIsImZhZGVJbk9wYWNpdHkiLCJBbmltYXRlZCIsIlZhbHVlIiwiaXNBdXRob3JpemVkIiwiaXNBdXRob3JpemF0aW9uQ2hlY2tlZCIsImRpc2FibGVWaWJyYXRpb25CeVVzZXIiLCJ0aW1lciIsIl9zY2FubmVyVGltZW91dCIsIl9oYW5kbGVCYXJDb2RlUmVhZCIsImJpbmQiLCJjb21wb25lbnREaWRNb3VudCIsIl90aGlzMiIsIlBsYXRmb3JtIiwiT1MiLCJyZXF1ZXN0IiwiUEVSTUlTU0lPTlMiLCJJT1MiLCJDQU1FUkEiLCJ0aGVuIiwiY2FtZXJhU3RhdHVzIiwic2V0U3RhdGUiLCJSRVNVTFRTIiwiR1JBTlRFRCIsImNoZWNrQW5kcm9pZDZQZXJtaXNzaW9ucyIsIlBlcm1pc3Npb25zQW5kcm9pZCIsInRpdGxlIiwicGVybWlzc2lvbkRpYWxvZ1RpdGxlIiwibWVzc2FnZSIsInBlcm1pc3Npb25EaWFsb2dNZXNzYWdlIiwiYnV0dG9uUG9zaXRpdmUiLCJncmFudGVkIiwiZmFkZUluIiwic2VxdWVuY2UiLCJkZWxheSIsInRpbWluZyIsInRvVmFsdWUiLCJlYXNpbmciLCJFYXNpbmciLCJpbk91dCIsInF1YWQiLCJ1c2VOYXRpdmVEcml2ZXIiLCJzdGFydCIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiY2xlYXJUaW1lb3V0IiwiZGlzYWJsZSIsImVuYWJsZSIsIl9zZXRTY2FubmluZyIsIl9zZXRDYW1lcmEiLCJfdGhpczMiLCJfdGhpczQiLCJ2aWJyYXRlIiwiVmlicmF0aW9uIiwib25SZWFkIiwicmVhY3RpdmF0ZSIsInNldFRpbWVvdXQiLCJyZWFjdGl2YXRlVGltZW91dCIsIl9yZW5kZXJUb3BDb250ZW50IiwidG9wQ29udGVudCIsIl9yZW5kZXJCb3R0b21Db250ZW50IiwiYm90dG9tQ29udGVudCIsIl9yZW5kZXJDYW1lcmFNYXJrZXIiLCJzaG93TWFya2VyIiwiY3VzdG9tTWFya2VyIiwianN4IiwiVmlldyIsInN0eWxlIiwic3R5bGVzIiwicmVjdGFuZ2xlQ29udGFpbmVyIiwiY2hpbGRyZW4iLCJyZWN0YW5nbGUiLCJtYXJrZXJTdHlsZSIsIl9yZW5kZXJDYW1lcmFDb21wb25lbnQiLCJSTkNhbWVyYSIsImFzc2lnbiIsImFuZHJvaWRDYW1lcmFQZXJtaXNzaW9uT3B0aW9ucyIsImNhbWVyYSIsImNhbWVyYVN0eWxlIiwib25CYXJDb2RlUmVhZCIsInR5cGUiLCJjYW1lcmFUeXBlIiwiZmxhc2hNb2RlIiwiY2FwdHVyZUF1ZGlvIiwiY2FtZXJhUHJvcHMiLCJfcmVuZGVyQ2FtZXJhIiwiX3RoaXM1IiwiX3RoaXMkcHJvcHMiLCJub3RBdXRob3JpemVkVmlldyIsInBlbmRpbmdBdXRob3JpemF0aW9uVmlldyIsImNhbWVyYVRpbWVvdXRWaWV3IiwiVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrIiwib25QcmVzcyIsIl90aGlzJHN0YXRlIiwiY2FtZXJhVGltZW91dCIsIm9wYWNpdHkiLCJiYWNrZ3JvdW5kQ29sb3IiLCJoZWlnaHQiLCJyZW5kZXIiLCJqc3hzIiwibWFpbkNvbnRhaW5lciIsImNvbnRhaW5lclN0eWxlIiwiaW5mb1ZpZXciLCJ0b3BWaWV3U3R5bGUiLCJjYW1lcmFDb250YWluZXJTdHlsZSIsImJvdHRvbVZpZXdTdHlsZSIsIkNvbXBvbmVudCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImZ1bmMiLCJpc1JlcXVpcmVkIiwiYm9vbCIsIm51bWJlciIsIm9uZU9mIiwiZWxlbWVudCIsImFueSIsIm9uZU9mVHlwZSIsInN0cmluZyIsIm9iamVjdCIsImRlZmF1bHRQcm9wcyIsImZsZXgiLCJhbGlnbkl0ZW1zIiwianVzdGlmeUNvbnRlbnQiLCJUZXh0IiwidGV4dEFsaWduIiwiZm9udFNpemUiLCJEaW1lbnNpb25zIiwid2lkdGgiLCJjb2xvciIsIlN0eWxlU2hlZXQiLCJjcmVhdGUiLCJib3JkZXJXaWR0aCIsImJvcmRlckNvbG9yIl0sInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcblxuaW1wb3J0IHtcbiAgU3R5bGVTaGVldCxcbiAgRGltZW5zaW9ucyxcbiAgVmlicmF0aW9uLFxuICBBbmltYXRlZCxcbiAgRWFzaW5nLFxuICBWaWV3LFxuICBUZXh0LFxuICBQbGF0Zm9ybSxcbiAgVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrLFxuICBQZXJtaXNzaW9uc0FuZHJvaWQsXG59IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5cbmltcG9ydCB7IHJlcXVlc3QsIFBFUk1JU1NJT05TLCBSRVNVTFRTIH0gZnJvbSAncmVhY3QtbmF0aXZlLXBlcm1pc3Npb25zJztcbmltcG9ydCB7IFJOQ2FtZXJhIGFzIENhbWVyYSB9IGZyb20gJ3JlYWN0LW5hdGl2ZS1jYW1lcmEnO1xuXG5jb25zdCBDQU1FUkFfRkxBU0hfTU9ERSA9IENhbWVyYS5Db25zdGFudHMuRmxhc2hNb2RlO1xuY29uc3QgQ0FNRVJBX0ZMQVNIX01PREVTID0gW1xuICBDQU1FUkFfRkxBU0hfTU9ERS50b3JjaCxcbiAgQ0FNRVJBX0ZMQVNIX01PREUub24sXG4gIENBTUVSQV9GTEFTSF9NT0RFLm9mZixcbiAgQ0FNRVJBX0ZMQVNIX01PREUuYXV0byxcbl07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFFSQ29kZVNjYW5uZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIG9uUmVhZDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICB2aWJyYXRlOiBQcm9wVHlwZXMuYm9vbCxcbiAgICByZWFjdGl2YXRlOiBQcm9wVHlwZXMuYm9vbCxcbiAgICByZWFjdGl2YXRlVGltZW91dDogUHJvcFR5cGVzLm51bWJlcixcbiAgICBjYW1lcmFUaW1lb3V0OiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIGZhZGVJbjogUHJvcFR5cGVzLmJvb2wsXG4gICAgc2hvd01hcmtlcjogUHJvcFR5cGVzLmJvb2wsXG4gICAgY2FtZXJhVHlwZTogUHJvcFR5cGVzLm9uZU9mKFsnZnJvbnQnLCAnYmFjayddKSxcbiAgICBjdXN0b21NYXJrZXI6IFByb3BUeXBlcy5lbGVtZW50LFxuICAgIGNvbnRhaW5lclN0eWxlOiBQcm9wVHlwZXMuYW55LFxuICAgIGNhbWVyYVN0eWxlOiBQcm9wVHlwZXMuYW55LFxuICAgIGNhbWVyYUNvbnRhaW5lclN0eWxlOiBQcm9wVHlwZXMuYW55LFxuICAgIG1hcmtlclN0eWxlOiBQcm9wVHlwZXMuYW55LFxuICAgIHRvcFZpZXdTdHlsZTogUHJvcFR5cGVzLmFueSxcbiAgICBib3R0b21WaWV3U3R5bGU6IFByb3BUeXBlcy5hbnksXG4gICAgdG9wQ29udGVudDogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmVsZW1lbnQsIFByb3BUeXBlcy5zdHJpbmddKSxcbiAgICBib3R0b21Db250ZW50OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuZWxlbWVudCwgUHJvcFR5cGVzLnN0cmluZ10pLFxuICAgIG5vdEF1dGhvcml6ZWRWaWV3OiBQcm9wVHlwZXMuZWxlbWVudCxcbiAgICBwZXJtaXNzaW9uRGlhbG9nVGl0bGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgcGVybWlzc2lvbkRpYWxvZ01lc3NhZ2U6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgYnV0dG9uUG9zaXRpdmU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2hlY2tBbmRyb2lkNlBlcm1pc3Npb25zOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBmbGFzaE1vZGU6IFByb3BUeXBlcy5vbmVPZihDQU1FUkFfRkxBU0hfTU9ERVMpLFxuICAgIGNhbWVyYVByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIGNhbWVyYVRpbWVvdXRWaWV3OiBQcm9wVHlwZXMuZWxlbWVudCxcbiAgfTtcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIG9uUmVhZDogKCkgPT4gbnVsbCxcbiAgICByZWFjdGl2YXRlOiBmYWxzZSxcbiAgICB2aWJyYXRlOiB0cnVlLFxuICAgIHJlYWN0aXZhdGVUaW1lb3V0OiAwLFxuICAgIGNhbWVyYVRpbWVvdXQ6IDAsXG4gICAgZmFkZUluOiB0cnVlLFxuICAgIHNob3dNYXJrZXI6IGZhbHNlLFxuICAgIGNhbWVyYVR5cGU6ICdiYWNrJyxcbiAgICBub3RBdXRob3JpemVkVmlldzogKFxuICAgICAgPFZpZXdcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICBmbGV4OiAxLFxuICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPFRleHRcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAxNixcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgQ2FtZXJhIG5vdCBhdXRob3JpemVkXG4gICAgICAgIDwvVGV4dD5cbiAgICAgIDwvVmlldz5cbiAgICApLFxuICAgIHBlbmRpbmdBdXRob3JpemF0aW9uVmlldzogKFxuICAgICAgPFZpZXdcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICBmbGV4OiAxLFxuICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPFRleHRcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAxNixcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgLi4uXG4gICAgICAgIDwvVGV4dD5cbiAgICAgIDwvVmlldz5cbiAgICApLFxuICAgIHBlcm1pc3Npb25EaWFsb2dUaXRsZTogJ0luZm8nLFxuICAgIHBlcm1pc3Npb25EaWFsb2dNZXNzYWdlOiAnTmVlZCBjYW1lcmEgcGVybWlzc2lvbicsXG4gICAgYnV0dG9uUG9zaXRpdmU6ICdPSycsXG4gICAgY2hlY2tBbmRyb2lkNlBlcm1pc3Npb25zOiBmYWxzZSxcbiAgICBmbGFzaE1vZGU6IENBTUVSQV9GTEFTSF9NT0RFLmF1dG8sXG4gICAgY2FtZXJhUHJvcHM6IHt9LFxuICAgIGNhbWVyYVRpbWVvdXRWaWV3OiAoXG4gICAgICA8Vmlld1xuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIGZsZXg6IDAsXG4gICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICAgIGhlaWdodDogRGltZW5zaW9ucy5nZXQoJ3dpbmRvdycpLmhlaWdodCxcbiAgICAgICAgICB3aWR0aDogRGltZW5zaW9ucy5nZXQoJ3dpbmRvdycpLndpZHRoLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ2JsYWNrJyxcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPFRleHQgc3R5bGU9e3sgY29sb3I6ICd3aGl0ZScgfX0+VGFwIHRvIGFjdGl2YXRlIGNhbWVyYTwvVGV4dD5cbiAgICAgIDwvVmlldz5cbiAgICApLFxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzY2FubmluZzogZmFsc2UsXG4gICAgICBpc0NhbWVyYUFjdGl2YXRlZDogdHJ1ZSxcbiAgICAgIGZhZGVJbk9wYWNpdHk6IG5ldyBBbmltYXRlZC5WYWx1ZSgwKSxcbiAgICAgIGlzQXV0aG9yaXplZDogZmFsc2UsXG4gICAgICBpc0F1dGhvcml6YXRpb25DaGVja2VkOiBmYWxzZSxcbiAgICAgIGRpc2FibGVWaWJyYXRpb25CeVVzZXI6IGZhbHNlLFxuICAgIH07XG4gICAgdGhpcy50aW1lciA9IG51bGw7XG4gICAgdGhpcy5fc2Nhbm5lclRpbWVvdXQgPSBudWxsO1xuICAgIHRoaXMuX2hhbmRsZUJhckNvZGVSZWFkID0gdGhpcy5faGFuZGxlQmFyQ29kZVJlYWQuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2lvcycpIHtcbiAgICAgIHJlcXVlc3QoUEVSTUlTU0lPTlMuSU9TLkNBTUVSQSkudGhlbihjYW1lcmFTdGF0dXMgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBpc0F1dGhvcml6ZWQ6IGNhbWVyYVN0YXR1cyA9PT0gUkVTVUxUUy5HUkFOVEVELFxuICAgICAgICAgIGlzQXV0aG9yaXphdGlvbkNoZWNrZWQ6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcgJiZcbiAgICAgIHRoaXMucHJvcHMuY2hlY2tBbmRyb2lkNlBlcm1pc3Npb25zXG4gICAgKSB7XG4gICAgICBQZXJtaXNzaW9uc0FuZHJvaWQucmVxdWVzdChQZXJtaXNzaW9uc0FuZHJvaWQuUEVSTUlTU0lPTlMuQ0FNRVJBLCB7XG4gICAgICAgIHRpdGxlOiB0aGlzLnByb3BzLnBlcm1pc3Npb25EaWFsb2dUaXRsZSxcbiAgICAgICAgbWVzc2FnZTogdGhpcy5wcm9wcy5wZXJtaXNzaW9uRGlhbG9nTWVzc2FnZSxcbiAgICAgICAgYnV0dG9uUG9zaXRpdmU6IHRoaXMucHJvcHMuYnV0dG9uUG9zaXRpdmUsXG4gICAgICB9KS50aGVuKGdyYW50ZWQgPT4ge1xuICAgICAgICBjb25zdCBpc0F1dGhvcml6ZWQgPSBncmFudGVkID09PSBQZXJtaXNzaW9uc0FuZHJvaWQuUkVTVUxUUy5HUkFOVEVEO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0F1dGhvcml6ZWQsIGlzQXV0aG9yaXphdGlvbkNoZWNrZWQ6IHRydWUgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzQXV0aG9yaXplZDogdHJ1ZSwgaXNBdXRob3JpemF0aW9uQ2hlY2tlZDogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5mYWRlSW4pIHtcbiAgICAgIEFuaW1hdGVkLnNlcXVlbmNlKFtcbiAgICAgICAgQW5pbWF0ZWQuZGVsYXkoMTAwMCksXG4gICAgICAgIEFuaW1hdGVkLnRpbWluZyh0aGlzLnN0YXRlLmZhZGVJbk9wYWNpdHksIHtcbiAgICAgICAgICB0b1ZhbHVlOiAxLFxuICAgICAgICAgIGVhc2luZzogRWFzaW5nLmluT3V0KEVhc2luZy5xdWFkKSxcbiAgICAgICAgICB1c2VOYXRpdmVEcml2ZXI6IHRydWUsXG4gICAgICAgIH0pLFxuICAgICAgXSkuc3RhcnQoKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICBpZiAodGhpcy5fc2Nhbm5lclRpbWVvdXQgIT09IG51bGwpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9zY2FubmVyVGltZW91dCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnRpbWVyICE9PSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XG4gICAgfVxuICAgIHRoaXMudGltZXIgPSBudWxsO1xuICAgIHRoaXMuX3NjYW5uZXJUaW1lb3V0ID0gbnVsbDtcbiAgfVxuXG4gIGRpc2FibGUoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRpc2FibGVWaWJyYXRpb25CeVVzZXI6IHRydWUgfSk7XG4gIH1cbiAgZW5hYmxlKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBkaXNhYmxlVmlicmF0aW9uQnlVc2VyOiBmYWxzZSB9KTtcbiAgfVxuXG4gIF9zZXRTY2FubmluZyh2YWx1ZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBzY2FubmluZzogdmFsdWUgfSk7XG4gIH1cblxuICBfc2V0Q2FtZXJhKHZhbHVlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZShcbiAgICAgIHtcbiAgICAgICAgaXNDYW1lcmFBY3RpdmF0ZWQ6IHZhbHVlLFxuICAgICAgICBzY2FubmluZzogZmFsc2UsXG4gICAgICAgIGZhZGVJbk9wYWNpdHk6IG5ldyBBbmltYXRlZC5WYWx1ZSgwKSxcbiAgICAgIH0sXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSAmJiB0aGlzLnByb3BzLmZhZGVJbikge1xuICAgICAgICAgIGlmICh0aGlzLnByb3BzLmZhZGVJbikge1xuICAgICAgICAgICAgQW5pbWF0ZWQuc2VxdWVuY2UoW1xuICAgICAgICAgICAgICBBbmltYXRlZC5kZWxheSgxMCksXG4gICAgICAgICAgICAgIEFuaW1hdGVkLnRpbWluZyh0aGlzLnN0YXRlLmZhZGVJbk9wYWNpdHksIHtcbiAgICAgICAgICAgICAgICB0b1ZhbHVlOiAxLFxuICAgICAgICAgICAgICAgIGVhc2luZzogRWFzaW5nLmluT3V0KEVhc2luZy5xdWFkKSxcbiAgICAgICAgICAgICAgICB1c2VOYXRpdmVEcml2ZXI6IHRydWUsXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSkuc3RhcnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgX2hhbmRsZUJhckNvZGVSZWFkKGUpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuc2Nhbm5pbmcgJiYgIXRoaXMuc3RhdGUuZGlzYWJsZVZpYnJhdGlvbkJ5VXNlcikge1xuICAgICAgaWYgKHRoaXMucHJvcHMudmlicmF0ZSkge1xuICAgICAgICBWaWJyYXRpb24udmlicmF0ZSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5fc2V0U2Nhbm5pbmcodHJ1ZSk7XG4gICAgICB0aGlzLnByb3BzLm9uUmVhZChlKTtcbiAgICAgIGlmICh0aGlzLnByb3BzLnJlYWN0aXZhdGUpIHtcbiAgICAgICAgdGhpcy5fc2Nhbm5lclRpbWVvdXQgPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICgpID0+IHRoaXMuX3NldFNjYW5uaW5nKGZhbHNlKSxcbiAgICAgICAgICB0aGlzLnByb3BzLnJlYWN0aXZhdGVUaW1lb3V0XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX3JlbmRlclRvcENvbnRlbnQoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMudG9wQ29udGVudCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMudG9wQ29udGVudDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBfcmVuZGVyQm90dG9tQ29udGVudCgpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5ib3R0b21Db250ZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5ib3R0b21Db250ZW50O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIF9yZW5kZXJDYW1lcmFNYXJrZXIoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuc2hvd01hcmtlcikge1xuICAgICAgaWYgKHRoaXMucHJvcHMuY3VzdG9tTWFya2VyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmN1c3RvbU1hcmtlcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5yZWN0YW5nbGVDb250YWluZXJ9PlxuICAgICAgICAgICAgPFZpZXdcbiAgICAgICAgICAgICAgc3R5bGU9e1tcbiAgICAgICAgICAgICAgICBzdHlsZXMucmVjdGFuZ2xlLFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubWFya2VyU3R5bGUgPyB0aGlzLnByb3BzLm1hcmtlclN0eWxlIDogbnVsbCxcbiAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9WaWV3PlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIF9yZW5kZXJDYW1lcmFDb21wb25lbnQoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxDYW1lcmFcbiAgICAgICAgYW5kcm9pZENhbWVyYVBlcm1pc3Npb25PcHRpb25zPXt7XG4gICAgICAgICAgdGl0bGU6IHRoaXMucHJvcHMucGVybWlzc2lvbkRpYWxvZ1RpdGxlLFxuICAgICAgICAgIG1lc3NhZ2U6IHRoaXMucHJvcHMucGVybWlzc2lvbkRpYWxvZ01lc3NhZ2UsXG4gICAgICAgICAgYnV0dG9uUG9zaXRpdmU6IHRoaXMucHJvcHMuYnV0dG9uUG9zaXRpdmUsXG4gICAgICAgIH19XG4gICAgICAgIHN0eWxlPXtbc3R5bGVzLmNhbWVyYSwgdGhpcy5wcm9wcy5jYW1lcmFTdHlsZV19XG4gICAgICAgIG9uQmFyQ29kZVJlYWQ9e3RoaXMuX2hhbmRsZUJhckNvZGVSZWFkLmJpbmQodGhpcyl9XG4gICAgICAgIHR5cGU9e3RoaXMucHJvcHMuY2FtZXJhVHlwZX1cbiAgICAgICAgZmxhc2hNb2RlPXt0aGlzLnByb3BzLmZsYXNoTW9kZX1cbiAgICAgICAgY2FwdHVyZUF1ZGlvPXtmYWxzZX1cbiAgICAgICAgey4uLnRoaXMucHJvcHMuY2FtZXJhUHJvcHN9XG4gICAgICA+XG4gICAgICAgIHt0aGlzLl9yZW5kZXJDYW1lcmFNYXJrZXIoKX1cbiAgICAgIDwvQ2FtZXJhPlxuICAgICk7XG4gIH1cblxuICBfcmVuZGVyQ2FtZXJhKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIG5vdEF1dGhvcml6ZWRWaWV3LFxuICAgICAgcGVuZGluZ0F1dGhvcml6YXRpb25WaWV3LFxuICAgICAgY2FtZXJhVHlwZSxcbiAgICAgIGNhbWVyYVRpbWVvdXRWaWV3LFxuICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgaWYgKCF0aGlzLnN0YXRlLmlzQ2FtZXJhQWN0aXZhdGVkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8VG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrIG9uUHJlc3M9eygpID0+IHRoaXMuX3NldENhbWVyYSh0cnVlKX0+XG4gICAgICAgICAge2NhbWVyYVRpbWVvdXRWaWV3fVxuICAgICAgICA8L1RvdWNoYWJsZVdpdGhvdXRGZWVkYmFjaz5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBpc0F1dGhvcml6ZWQsIGlzQXV0aG9yaXphdGlvbkNoZWNrZWQgfSA9IHRoaXMuc3RhdGU7XG4gICAgaWYgKGlzQXV0aG9yaXplZCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuY2FtZXJhVGltZW91dCA+IDApIHtcbiAgICAgICAgdGhpcy50aW1lciAmJiBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XG4gICAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICgpID0+IHRoaXMuX3NldENhbWVyYShmYWxzZSksXG4gICAgICAgICAgdGhpcy5wcm9wcy5jYW1lcmFUaW1lb3V0XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmZhZGVJbikge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxBbmltYXRlZC5WaWV3XG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICBvcGFjaXR5OiB0aGlzLnN0YXRlLmZhZGVJbk9wYWNpdHksXG4gICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICAgICAgaGVpZ2h0OlxuICAgICAgICAgICAgICAgICh0aGlzLnByb3BzLmNhbWVyYVN0eWxlICYmIHRoaXMucHJvcHMuY2FtZXJhU3R5bGUuaGVpZ2h0KSB8fFxuICAgICAgICAgICAgICAgIHN0eWxlcy5jYW1lcmEuaGVpZ2h0LFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7dGhpcy5fcmVuZGVyQ2FtZXJhQ29tcG9uZW50KCl9XG4gICAgICAgICAgPC9BbmltYXRlZC5WaWV3PlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlckNhbWVyYUNvbXBvbmVudCgpO1xuICAgIH0gZWxzZSBpZiAoIWlzQXV0aG9yaXphdGlvbkNoZWNrZWQpIHtcbiAgICAgIHJldHVybiBwZW5kaW5nQXV0aG9yaXphdGlvblZpZXc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBub3RBdXRob3JpemVkVmlldztcbiAgICB9XG4gIH1cblxuICByZWFjdGl2YXRlKCkge1xuICAgIHRoaXMuX3NldFNjYW5uaW5nKGZhbHNlKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFZpZXcgc3R5bGU9e1tzdHlsZXMubWFpbkNvbnRhaW5lciwgdGhpcy5wcm9wcy5jb250YWluZXJTdHlsZV19PlxuICAgICAgICA8VmlldyBzdHlsZT17W3N0eWxlcy5pbmZvVmlldywgdGhpcy5wcm9wcy50b3BWaWV3U3R5bGVdfT5cbiAgICAgICAgICB7dGhpcy5fcmVuZGVyVG9wQ29udGVudCgpfVxuICAgICAgICA8L1ZpZXc+XG4gICAgICAgIDxWaWV3IHN0eWxlPXt0aGlzLnByb3BzLmNhbWVyYUNvbnRhaW5lclN0eWxlfT57dGhpcy5fcmVuZGVyQ2FtZXJhKCl9PC9WaWV3PlxuICAgICAgICA8VmlldyBzdHlsZT17W3N0eWxlcy5pbmZvVmlldywgdGhpcy5wcm9wcy5ib3R0b21WaWV3U3R5bGVdfT5cbiAgICAgICAgICB7dGhpcy5fcmVuZGVyQm90dG9tQ29udGVudCgpfVxuICAgICAgICA8L1ZpZXc+XG4gICAgICA8L1ZpZXc+XG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIG1haW5Db250YWluZXI6IHtcbiAgICBmbGV4OiAxLFxuICB9LFxuICBpbmZvVmlldzoge1xuICAgIGZsZXg6IDIsXG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgIHdpZHRoOiBEaW1lbnNpb25zLmdldCgnd2luZG93Jykud2lkdGgsXG4gIH0sXG5cbiAgY2FtZXJhOiB7XG4gICAgZmxleDogMCxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgIGhlaWdodDogRGltZW5zaW9ucy5nZXQoJ3dpbmRvdycpLndpZHRoLFxuICAgIHdpZHRoOiBEaW1lbnNpb25zLmdldCgnd2luZG93Jykud2lkdGgsXG4gIH0sXG5cbiAgcmVjdGFuZ2xlQ29udGFpbmVyOiB7XG4gICAgZmxleDogMSxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnLFxuICB9LFxuXG4gIHJlY3RhbmdsZToge1xuICAgIGhlaWdodDogMjUwLFxuICAgIHdpZHRoOiAyNTAsXG4gICAgYm9yZGVyV2lkdGg6IDIsXG4gICAgYm9yZGVyQ29sb3I6ICcjMDBGRjAwJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gIH0sXG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFBQyxJQUFBQSxzQkFBQSxHQUFBQyxPQUFBO0FBQUFDLE1BQUEsQ0FBQUMsY0FBQSxDQUFBQyxPQUFBO0VBQUFDLEtBQUE7QUFBQTtBQUFBRCxPQUFBLENBQUFFLE9BQUE7QUFBQSxJQUFBQyxnQkFBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQU8sYUFBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQVEsdUJBQUEsR0FBQVQsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFTLFVBQUEsR0FBQVYsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFVLDJCQUFBLEdBQUFYLHNCQUFBLENBQUFDLE9B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