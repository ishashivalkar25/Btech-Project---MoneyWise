63b17f25cda2258d90264d01cf9dd173
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");
var _slicedToArray2 = _interopRequireDefault2(require("@babel/runtime/helpers/slicedToArray"));
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.makeShareable = makeShareable;
exports.makeShareableCloneOnUIRecursive = makeShareableCloneOnUIRecursive;
exports.makeShareableCloneRecursive = makeShareableCloneRecursive;
exports.registerShareableMapping = registerShareableMapping;
var _NativeReanimated = _interopRequireDefault(require("./NativeReanimated"));
var _PlatformChecker = require("./PlatformChecker");
var _errors = require("./errors");
var _jsVersion = require("./platform-specific/jsVersion");
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}
var USE_STUB_IMPLEMENTATION = (0, _PlatformChecker.shouldBeUseWeb)();
var _shareableCache = new WeakMap();
var _shareableFlag = Symbol('shareable flag');
var MAGIC_KEY = 'REANIMATED_MAGIC_KEY';
function isHostObject(value) {
  return MAGIC_KEY in value;
}
function registerShareableMapping(shareable, shareableRef) {
  if (USE_STUB_IMPLEMENTATION) {
    return;
  }
  _shareableCache.set(shareable, shareableRef || _shareableFlag);
}
function isPlainJSObject(object) {
  return Object.getPrototypeOf(object) === Object.prototype;
}
var _worklet_65486183985_init_data = {
  code: "function anonymous() {\n  return new Proxy({}, {\n    get: function (_, prop) {\n      if (prop === '_isReanimatedSharedValue') {\n        return false;\n      }\n      throw new Error(\"Trying to access property `\" + prop + \"` of an object which cannot be sent to the UI runtime.\");\n    },\n    set: function () {\n      throw new Error('Trying to write to an object which cannot be sent to the UI runtime.');\n    }\n  });\n}",
  location: "node_modules\\react-native-reanimated\\lib\\commonjs\\reanimated2\\shareables.js",
  sourceMap: "{\"version\":3,\"names\":[\"anonymous\",\"Proxy\",\"get\",\"_\",\"prop\",\"Error\",\"set\"],\"sources\":[\"C:/Users/ishas/Web Technology - Copy/ReactNative/Final Project/MoneyWise/node_modules/react-native-reanimated/lib/commonjs/reanimated2/shareables.js\"],\"mappings\":\"AAiDU,SAAAA,SAAMA,CAAA;EAGZ,OAAO,IAAIC,KAAK,CAAC,CAAC,CAAC,EAAE;IACnBC,GAAG,EAAE,SAAAA,CAACC,CAAC,EAAEC,IAAI,EAAK;MAChB,IAAIA,IAAI,KAAK,0BAA0B,EAAE;QAQvC,OAAO,KAAK;MACd;MACA,MAAM,IAAIC,KAAK,iCAAgCD,IAAK,2DAAwD,CAAC;IAC/G,CAAC;IACDE,GAAG,EAAE,SAAAA,CAAA,EAAM;MACT,MAAM,IAAID,KAAK,CAAC,sEAAsE,CAAC;IACzF;EACF,CAAC,CAAC;AACJ\"}"
};
var INACCESSIBLE_OBJECT = {
  __init: function () {
    var _e = [new global.Error(), 1, -27];
    var _f = function _f() {
      return new Proxy({}, {
        get: function get(_, prop) {
          if (prop === '_isReanimatedSharedValue') {
            return false;
          }
          throw new Error("Trying to access property `" + prop + "` of an object which cannot be sent to the UI runtime.");
        },
        set: function set() {
          throw new Error('Trying to write to an object which cannot be sent to the UI runtime.');
        }
      });
    };
    _f._closure = {};
    _f.__initData = _worklet_65486183985_init_data;
    _f.__workletHash = 65486183985;
    _f.__stackDetails = _e;
    _f.__version = "3.1.0";
    return _f;
  }()
};
var DETECT_CYCLIC_OBJECT_DEPTH_THRESHOLD = 30;
var processedObjectAtThresholdDepth;
var didShowPluginVersionMismatchError = false;
function makeShareableCloneRecursive(value) {
  var shouldPersistRemote = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  var depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
  if (USE_STUB_IMPLEMENTATION) {
    return value;
  }
  if (depth >= DETECT_CYCLIC_OBJECT_DEPTH_THRESHOLD) {
    if (depth === DETECT_CYCLIC_OBJECT_DEPTH_THRESHOLD) {
      processedObjectAtThresholdDepth = value;
    } else if (value === processedObjectAtThresholdDepth) {
      throw new Error('Trying to convert a cyclic object to a shareable. This is not supported.');
    }
  } else {
    processedObjectAtThresholdDepth = undefined;
  }
  var type = typeof value;
  var isTypeObject = type === 'object';
  var isTypeFunction = type === 'function';
  if ((isTypeObject || isTypeFunction) && value !== null) {
    var cached = _shareableCache.get(value);
    if (cached === _shareableFlag) {
      return value;
    } else if (cached !== undefined) {
      return cached;
    } else {
      var toAdapt;
      if (Array.isArray(value)) {
        toAdapt = value.map(function (element) {
          return makeShareableCloneRecursive(element, shouldPersistRemote, depth + 1);
        });
      } else if (isTypeFunction && value.__workletHash === undefined) {
        toAdapt = value;
      } else if (isHostObject(value)) {
        toAdapt = value;
      } else if (isPlainJSObject(value) || isTypeFunction) {
        toAdapt = {};
        if (value.__workletHash !== undefined) {
          if (__DEV__) {
            if (!didShowPluginVersionMismatchError && value.__version !== _jsVersion.jsVersion) {
              didShowPluginVersionMismatchError = true;
              console.error("[Reanimated] Mismatch between JavaScript code version and Reanimated Babel plugin version (" + _jsVersion.jsVersion + " vs. " + value.__version + "). Please clear your Metro bundler cache with `yarn start --reset-cache`,\n              `npm start -- --reset-cache` or `expo start -c` and run the app again.");
            }
            (0, _errors.registerWorkletStackDetails)(value.__workletHash, value.__stackDetails);
            delete value.__stackDetails;
          }
          toAdapt.__initData = makeShareableCloneRecursive(value.__initData, true);
          delete value.__initData;
        }
        for (var _ref of Object.entries(value)) {
          var _ref2 = (0, _slicedToArray2.default)(_ref, 2);
          var key = _ref2[0];
          var element = _ref2[1];
          toAdapt[key] = makeShareableCloneRecursive(element, shouldPersistRemote, depth + 1);
        }
      } else {
        var inaccessibleObject = makeShareableCloneRecursive(INACCESSIBLE_OBJECT);
        _shareableCache.set(value, inaccessibleObject);
        return inaccessibleObject;
      }
      if (__DEV__) {
        Object.freeze(value);
      }
      var adopted = _NativeReanimated.default.makeShareableClone(toAdapt, shouldPersistRemote);
      _shareableCache.set(value, adopted);
      _shareableCache.set(adopted, _shareableFlag);
      return adopted;
    }
  }
  return _NativeReanimated.default.makeShareableClone(value, shouldPersistRemote);
}
var _worklet_7252926345403_init_data = {
  code: "function makeShareableCloneOnUIRecursive(value) {\n  const {\n    USE_STUB_IMPLEMENTATION,\n    __DEV__\n  } = this._closure;\n  if (USE_STUB_IMPLEMENTATION) {\n    return value;\n  }\n  function cloneRecursive(value) {\n    const type = typeof value;\n    if ((type === 'object' || type === 'function') && value !== null) {\n      let toAdapt;\n      if (Array.isArray(value)) {\n        toAdapt = value.map(function (element) {\n          return cloneRecursive(element);\n        });\n      } else if (value !== undefined) {\n        toAdapt = {};\n        for (const [key, element] of Object.entries(value)) {\n          toAdapt[key] = cloneRecursive(element);\n        }\n      }\n      if (__DEV__) {\n        Object.freeze(value);\n      }\n      return _makeShareableClone(toAdapt);\n    }\n    return _makeShareableClone(value);\n  }\n  return cloneRecursive(value);\n}",
  location: "node_modules\\react-native-reanimated\\lib\\commonjs\\reanimated2\\shareables.js",
  sourceMap: "{\"version\":3,\"names\":[\"makeShareableCloneOnUIRecursive\",\"value\",\"USE_STUB_IMPLEMENTATION\",\"__DEV__\",\"_closure\",\"cloneRecursive\",\"type\",\"toAdapt\",\"Array\",\"isArray\",\"map\",\"element\",\"undefined\",\"key\",\"Object\",\"entries\",\"freeze\",\"_makeShareableClone\"],\"sources\":[\"C:/Users/ishas/Web Technology - Copy/ReactNative/Final Project/MoneyWise/node_modules/react-native-reanimated/lib/commonjs/reanimated2/shareables.js\"],\"mappings\":\"AAkLA,SAAAA,+BAASA,CAAgCC,KAAA,EAAK;EAAA;IAAAC,uBAAA;IAAAC;EAAA,SAAAC,QAAA;EAG5C,IAAIF,uBAAuB,EAAE;IAG3B,OAAOD,KAAK;EACd;EACA,SAASI,cAAcA,CAACJ,KAAK,EAAE;IAC7B,MAAMK,IAAI,GAAG,OAAOL,KAAK;IACzB,IAAI,CAACK,IAAI,KAAK,QAAQ,IAAIA,IAAI,KAAK,UAAU,KAAKL,KAAK,KAAK,IAAI,EAAE;MAChE,IAAIM,OAAO;MACX,IAAIC,KAAK,CAACC,OAAO,CAACR,KAAK,CAAC,EAAE;QACxBM,OAAO,GAAGN,KAAK,CAACS,GAAG,CAAC,UAAAC,OAAO;UAAA,OAAIN,cAAc,CAACM,OAAO,CAAC;QAAA,EAAC;MACzD,CAAC,MAAM,IAAIV,KAAK,KAAKW,SAAS,EAAE;QAC9BL,OAAO,GAAG,CAAC,CAAC;QACZ,KAAK,MAAM,CAACM,GAAG,EAAEF,OAAO,CAAC,IAAIG,MAAM,CAACC,OAAO,CAACd,KAAK,CAAC,EAAE;UAClDM,OAAO,CAACM,GAAG,CAAC,GAAGR,cAAc,CAACM,OAAO,CAAC;QACxC;MACF;MACA,IAAIR,OAAO,EAAE;QAEXW,MAAM,CAACE,MAAM,CAACf,KAAK,CAAC;MACtB;MACA,OAAOgB,mBAAmB,CAACV,OAAO,CAAC;IACrC;IACA,OAAOU,mBAAmB,CAAChB,KAAK,CAAC;EACnC;EACA,OAAOI,cAAc,CAACJ,KAAK,CAAC;AAC9B\"}"
};
var makeShareableCloneOnUIRecursive = function () {
  var _e = [new global.Error(), -3, -27];
  var _f = function _f(value) {
    if (USE_STUB_IMPLEMENTATION) {
      return value;
    }
    function cloneRecursive(value) {
      var type = typeof value;
      if ((type === 'object' || type === 'function') && value !== null) {
        var toAdapt;
        if (Array.isArray(value)) {
          toAdapt = value.map(function (element) {
            return cloneRecursive(element);
          });
        } else if (value !== undefined) {
          toAdapt = {};
          for (var _ref3 of Object.entries(value)) {
            var _ref4 = (0, _slicedToArray2.default)(_ref3, 2);
            var key = _ref4[0];
            var element = _ref4[1];
            toAdapt[key] = cloneRecursive(element);
          }
        }
        if (__DEV__) {
          Object.freeze(value);
        }
        return _makeShareableClone(toAdapt);
      }
      return _makeShareableClone(value);
    }
    return cloneRecursive(value);
  };
  _f._closure = {
    USE_STUB_IMPLEMENTATION: USE_STUB_IMPLEMENTATION,
    __DEV__: __DEV__
  };
  _f.__initData = _worklet_7252926345403_init_data;
  _f.__workletHash = 7252926345403;
  _f.__stackDetails = _e;
  _f.__version = "3.1.0";
  return _f;
}();
var _worklet_13878384066121_init_data = {
  code: "function anonymous() {\n  const {\n    value\n  } = this._closure;\n  return value;\n}",
  location: "node_modules\\react-native-reanimated\\lib\\commonjs\\reanimated2\\shareables.js",
  sourceMap: "{\"version\":3,\"names\":[\"anonymous\",\"value\",\"_closure\"],\"sources\":[\"C:/Users/ishas/Web Technology - Copy/ReactNative/Final Project/MoneyWise/node_modules/react-native-reanimated/lib/commonjs/reanimated2/shareables.js\"],\"mappings\":\"AAqNY,SAAAA,SAAMA,CAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAGZ,OAAOD,KAAK;AACd\"}"
};
function makeShareable(value) {
  if (USE_STUB_IMPLEMENTATION) {
    return value;
  }
  var handle = makeShareableCloneRecursive({
    __init: function () {
      var _e = [new global.Error(), -2, -27];
      var _f = function _f() {
        return value;
      };
      _f._closure = {
        value: value
      };
      _f.__initData = _worklet_13878384066121_init_data;
      _f.__workletHash = 13878384066121;
      _f.__stackDetails = _e;
      _f.__version = "3.1.0";
      return _f;
    }()
  });
  registerShareableMapping(value, handle);
  return value;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfTmF0aXZlUmVhbmltYXRlZCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX1BsYXRmb3JtQ2hlY2tlciIsIl9lcnJvcnMiLCJfanNWZXJzaW9uIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJVU0VfU1RVQl9JTVBMRU1FTlRBVElPTiIsInNob3VsZEJlVXNlV2ViIiwiX3NoYXJlYWJsZUNhY2hlIiwiV2Vha01hcCIsIl9zaGFyZWFibGVGbGFnIiwiU3ltYm9sIiwiTUFHSUNfS0VZIiwiaXNIb3N0T2JqZWN0IiwidmFsdWUiLCJyZWdpc3RlclNoYXJlYWJsZU1hcHBpbmciLCJzaGFyZWFibGUiLCJzaGFyZWFibGVSZWYiLCJzZXQiLCJpc1BsYWluSlNPYmplY3QiLCJvYmplY3QiLCJPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIl93b3JrbGV0XzY1NDg2MTgzOTg1X2luaXRfZGF0YSIsImNvZGUiLCJsb2NhdGlvbiIsInNvdXJjZU1hcCIsIklOQUNDRVNTSUJMRV9PQkpFQ1QiLCJfX2luaXQiLCJfZSIsImdsb2JhbCIsIkVycm9yIiwiX2YiLCJQcm94eSIsImdldCIsIl8iLCJwcm9wIiwiX2Nsb3N1cmUiLCJfX2luaXREYXRhIiwiX193b3JrbGV0SGFzaCIsIl9fc3RhY2tEZXRhaWxzIiwiX192ZXJzaW9uIiwiREVURUNUX0NZQ0xJQ19PQkpFQ1RfREVQVEhfVEhSRVNIT0xEIiwicHJvY2Vzc2VkT2JqZWN0QXRUaHJlc2hvbGREZXB0aCIsImRpZFNob3dQbHVnaW5WZXJzaW9uTWlzbWF0Y2hFcnJvciIsIm1ha2VTaGFyZWFibGVDbG9uZVJlY3Vyc2l2ZSIsInNob3VsZFBlcnNpc3RSZW1vdGUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJkZXB0aCIsInR5cGUiLCJpc1R5cGVPYmplY3QiLCJpc1R5cGVGdW5jdGlvbiIsImNhY2hlZCIsInRvQWRhcHQiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJlbGVtZW50IiwiX19ERVZfXyIsImpzVmVyc2lvbiIsImNvbnNvbGUiLCJlcnJvciIsInJlZ2lzdGVyV29ya2xldFN0YWNrRGV0YWlscyIsIl9yZWYiLCJlbnRyaWVzIiwiX3JlZjIiLCJfc2xpY2VkVG9BcnJheTIiLCJrZXkiLCJpbmFjY2Vzc2libGVPYmplY3QiLCJmcmVlemUiLCJhZG9wdGVkIiwibWFrZVNoYXJlYWJsZUNsb25lIiwiX3dvcmtsZXRfNzI1MjkyNjM0NTQwM19pbml0X2RhdGEiLCJtYWtlU2hhcmVhYmxlQ2xvbmVPblVJUmVjdXJzaXZlIiwiY2xvbmVSZWN1cnNpdmUiLCJfcmVmMyIsIl9yZWY0IiwiX21ha2VTaGFyZWFibGVDbG9uZSIsIl93b3JrbGV0XzEzODc4Mzg0MDY2MTIxX2luaXRfZGF0YSIsIm1ha2VTaGFyZWFibGUiLCJoYW5kbGUiXSwic291cmNlcyI6WyJzaGFyZWFibGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOYXRpdmVSZWFuaW1hdGVkTW9kdWxlIGZyb20gJy4vTmF0aXZlUmVhbmltYXRlZCc7XG5pbXBvcnQgeyBTaGFyZWFibGVSZWYgfSBmcm9tICcuL2NvbW1vblR5cGVzJztcbmltcG9ydCB7IHNob3VsZEJlVXNlV2ViIH0gZnJvbSAnLi9QbGF0Zm9ybUNoZWNrZXInO1xuaW1wb3J0IHsgcmVnaXN0ZXJXb3JrbGV0U3RhY2tEZXRhaWxzIH0gZnJvbSAnLi9lcnJvcnMnO1xuaW1wb3J0IHsganNWZXJzaW9uIH0gZnJvbSAnLi9wbGF0Zm9ybS1zcGVjaWZpYy9qc1ZlcnNpb24nO1xuXG4vLyBmb3Igd2ViL2Nocm9tZSBkZWJ1Z2dlci9qZXN0IGVudmlyb25tZW50cyB0aGlzIGZpbGUgcHJvdmlkZXMgYSBzdHViIGltcGxlbWVudGF0aW9uXG4vLyB3aGVyZSBubyBzaGFyZWFibGUgcmVmZXJlbmNlcyBhcmUgdXNlZC4gSW5zdGVhZCwgdGhlIG9iamVjdHMgdGhlbXNlbHZlcyBhcmUgdXNlZFxuLy8gaW5zdGVhZCBvZiBzaGFyZWFibGUgcmVmZXJlbmNlcywgYmVjYXVzZSBvZiB0aGUgZmFjdCB0aGF0IHdlIGRvbid0IGhhdmUgdG8gZGVhbCB3aXRoXG4vLyBydW5ubmluZyB0aGUgY29kZSBvbiBzZXBhcmF0ZSBWTXMuXG5jb25zdCBVU0VfU1RVQl9JTVBMRU1FTlRBVElPTiA9IHNob3VsZEJlVXNlV2ViKCk7XG5cbmNvbnN0IF9zaGFyZWFibGVDYWNoZSA9IG5ldyBXZWFrTWFwPFxuICBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgU2hhcmVhYmxlUmVmPGFueT4gfCBzeW1ib2xcbj4oKTtcbi8vIHRoZSBiZWxvdyBzeW1ib2wgaXMgdXNlZCB0byByZXByZXNlbnQgYSBtYXBwaW5nIGZyb20gdGhlIHZhbHVlIHRvIGl0c2VsZlxuLy8gdGhpcyBpcyB1c2VkIHRvIGFsbG93IGZvciBhIGNvbnZlcnRlZCBzaGFyZWFibGUgdG8gYmUgcGFzc2VkIHRvIG1ha2VTaGFyZWFibGVDbG9uZVxuY29uc3QgX3NoYXJlYWJsZUZsYWcgPSBTeW1ib2woJ3NoYXJlYWJsZSBmbGFnJyk7XG5cbmNvbnN0IE1BR0lDX0tFWSA9ICdSRUFOSU1BVEVEX01BR0lDX0tFWSc7XG5cbmZ1bmN0aW9uIGlzSG9zdE9iamVjdCh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG4gIC8vIFdlIGNvdWxkIHVzZSBKU0kgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYW4gb2JqZWN0IGlzIGEgaG9zdCBvYmplY3QsIGhvd2V2ZXJcbiAgLy8gdGhlIGJlbG93IHdvcmthcm91bmQgd29ya3Mgd2VsbCBhbmQgaXMgd2F5IGZhc3RlciB0aGFuIGFuIGFkZGl0aW9uYWwgSlNJIGNhbGwuXG4gIC8vIFdlIHVzZSB0aGUgZmFjdCB0aGF0IGhvc3Qgb2JqZWN0cyBoYXZlIGJyb2tlbiBpbXBsZW1lbnRhdGlvbiBvZiBgaGFzT3duUHJvcGVydHlgXG4gIC8vIGFuZCBoZW5jZSByZXR1cm4gdHJ1ZSBmb3IgYWxsIGBpbmAgY2hlY2tzIHJlZ2FyZGxlc3Mgb2YgdGhlIGtleSB3ZSBhc2sgZm9yLlxuICByZXR1cm4gTUFHSUNfS0VZIGluIHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJTaGFyZWFibGVNYXBwaW5nKFxuICBzaGFyZWFibGU6IGFueSxcbiAgc2hhcmVhYmxlUmVmPzogU2hhcmVhYmxlUmVmPGFueT5cbik6IHZvaWQge1xuICBpZiAoVVNFX1NUVUJfSU1QTEVNRU5UQVRJT04pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgX3NoYXJlYWJsZUNhY2hlLnNldChzaGFyZWFibGUsIHNoYXJlYWJsZVJlZiB8fCBfc2hhcmVhYmxlRmxhZyk7XG59XG5cbmZ1bmN0aW9uIGlzUGxhaW5KU09iamVjdChvYmplY3Q6IG9iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCkgPT09IE9iamVjdC5wcm90b3R5cGU7XG59XG5cbi8vIFRoZSBiZWxvdyBvYmplY3QgaXMgdXNlZCBhcyBhIHJlcGxhY2VtZW50IGZvciBvYmplY3RzIHRoYXQgY2Fubm90IGJlIHRyYW5zZmVycmVkXG4vLyBhcyBzaGFyZWFibGUgdmFsdWVzLiBJbiBtYWtlU2hhcmVhYmxlQ2xvbmVSZWN1cnNpdmUgd2UgZGV0ZWN0IGlmIGFuIG9iamVjdCBpcyBvZlxuLy8gYSBwbGFpbiBPYmplY3QucHJvdG90eXBlIGFuZCBvbmx5IGFsbG93IHN1Y2ggb2JqZWN0cyB0byBiZSB0cmFuc2ZlcnJlZC4gVGhpcyBsZXRzXG4vLyB1cyBhdm9pZCBhbGwgc29ydHMgb2YgcmVhY3QgaW50ZXJuYWxzIGZyb20gbGVha2luZyBpbnRvIHRoZSBVSSBydW50aW1lLiBUbyBtYWtlIGl0XG4vLyBwb3NzaWJsZSB0byBjYXRjaCBlcnJvcnMgd2hlbiBzb21lb25lIGFjdHVhbGx5IHRyaWVzIHRvIGFjY2VzcyBzdWNoIG9iamVjdCBvbiB0aGUgVUlcbi8vIHJ1bnRpbWUsIHdlIHVzZSB0aGUgYmVsb3cgUHJveHkgb2JqZWN0IHdoaWNoIGlzIGluc3RhbnRpYXRlZCBvbiB0aGUgVUkgcnVudGltZSBhbmRcbi8vIHRocm93cyB3aGVuZXZlciBzb21lb25lIHRyaWVzIHRvIGFjY2VzcyBpdHMgZmllbGRzLlxuY29uc3QgSU5BQ0NFU1NJQkxFX09CSkVDVCA9IHtcbiAgX19pbml0OiAoKSA9PiB7XG4gICAgJ3dvcmtsZXQnO1xuICAgIHJldHVybiBuZXcgUHJveHkoXG4gICAgICB7fSxcbiAgICAgIHtcbiAgICAgICAgZ2V0OiAoXzogYW55LCBwcm9wOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBpZiAocHJvcCA9PT0gJ19pc1JlYW5pbWF0ZWRTaGFyZWRWYWx1ZScpIHtcbiAgICAgICAgICAgIC8vIG5vdCB2ZXJ5IGhhcHB5IGFib3V0IHRoaXMgY2hlY2sgaGVyZSwgYnV0IHdlIG5lZWQgdG8gYWxsb3cgZm9yXG4gICAgICAgICAgICAvLyBcImluYWNjZXNzaWJsZVwiIG9iamVjdHMgdG8gYmUgdGVzdGVkIHdpdGggaXNTaGFyZWRWYWx1ZSBjaGVja1xuICAgICAgICAgICAgLy8gYXMgaXQgaXMgYmVpbmcgdXNlZCBpbiB0aGUgbWFwcGVycyB3aGVuIGV4dHJhY2luZyBpbnB1dHMgcmVjdXJzaXZlbHkuXG4gICAgICAgICAgICAvLyBBcHBhcmVudGx5IHdlIGNhbid0IGNoZWNrIGlmIGEga2V5IGV4aXN0cyB0aGVyZSBhcyBIb3N0T2JqZWN0cyBhbHdheXNcbiAgICAgICAgICAgIC8vIHJldHVybiB0cnVlIGZvciBzdWNoIHRlc3RzLCBzbyB0aGUgb25seSBwb3NzaWJpbGl0eSBmb3IgdXMgaXMgdG9cbiAgICAgICAgICAgIC8vIGFjdHVhbGx5IGFjY2VzcyB0aGF0IGtleSBhbmQgc2VlIGlmIGl0IGlzIHNldCB0byB0cnVlLiBXZSB0aGVyZWZvcmVcbiAgICAgICAgICAgIC8vIG5lZWQgdG8gYWxsb3cgZm9yIHRoaXMga2V5IHRvIGJlIGFjY2Vzc2VkIGhlcmUuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBUcnlpbmcgdG8gYWNjZXNzIHByb3BlcnR5IFxcYCR7cHJvcH1cXGAgb2YgYW4gb2JqZWN0IHdoaWNoIGNhbm5vdCBiZSBzZW50IHRvIHRoZSBVSSBydW50aW1lLmBcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6ICgpID0+IHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAnVHJ5aW5nIHRvIHdyaXRlIHRvIGFuIG9iamVjdCB3aGljaCBjYW5ub3QgYmUgc2VudCB0byB0aGUgVUkgcnVudGltZS4nXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICApO1xuICB9LFxufTtcblxuY29uc3QgREVURUNUX0NZQ0xJQ19PQkpFQ1RfREVQVEhfVEhSRVNIT0xEID0gMzA7XG4vLyBCZWxvdyB2YXJpYWJsZSBzdG9yZXMgb2JqZWN0IHRoYXQgd2UgcHJvY2VzcyBpbiBtYWtlU2hhcmVhYmxlQ2xvbmVSZWN1cnNpdmUgYXQgdGhlIHNwZWNpZmllZCBkZXB0aC5cbi8vIFdlIHVzZSBpdCB0byBjaGVjayBpZiBsYXRlciBvbiB0aGUgZnVuY3Rpb24gcmVlbnRlcnMgd2l0aCB0aGUgc2FtZSBvYmplY3RcbmxldCBwcm9jZXNzZWRPYmplY3RBdFRocmVzaG9sZERlcHRoOiBhbnk7XG5cbi8vIFdlIG9ubHkgd2FudCB0byBzaG93IG1pc21hdGNoIGVycm9yIG9uY2Ugc28gd2UgdXNlIHRoaXMgZmxhZyB0byB0cmFjayBpdFxubGV0IGRpZFNob3dQbHVnaW5WZXJzaW9uTWlzbWF0Y2hFcnJvciA9IGZhbHNlO1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVNoYXJlYWJsZUNsb25lUmVjdXJzaXZlPFQ+KFxuICB2YWx1ZTogYW55LFxuICBzaG91bGRQZXJzaXN0UmVtb3RlID0gZmFsc2UsXG4gIGRlcHRoID0gMFxuKTogU2hhcmVhYmxlUmVmPFQ+IHtcbiAgaWYgKFVTRV9TVFVCX0lNUExFTUVOVEFUSU9OKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChkZXB0aCA+PSBERVRFQ1RfQ1lDTElDX09CSkVDVF9ERVBUSF9USFJFU0hPTEQpIHtcbiAgICAvLyBpZiB3ZSByZWFjaCBjZXJ0YWluIHJlY3Vyc2lvbiBkZXB0aCB3ZSBzdXNwZWN0IHRoYXQgd2UgYXJlIGRlYWxpbmcgd2l0aCBhIGN5Y2xpYyBvYmplY3QuXG4gICAgLy8gdGhpcyB0eXBlIG9mIG9iamVjdHMgYXJlIG5vdCBzdXBwb3J0ZWQgYW5kIGNhbm5vdCBiZSB0cmFzZmVycmVkIGFzIHNoYXJlYWJsZSwgc28gd2VcbiAgICAvLyBpbXBsZW1lbnQgYSBzaW1wbGUgZGV0ZWN0aW9uIG1lY2hhbmlzbSB0aGF0IHJlbWVtYmVycyB0aGUgdmFsdWUgYXQgYSBnaXZlbiBkZXB0aCBhbmRcbiAgICAvLyB0ZXN0cyB3aGV0aGVyIHdlIHRyeSByZWVudGVyIHRoaXMgbWV0aG9kIGxhdGVyIG9uIHdpdGggdGhlIHNhbWUgdmFsdWUuIElmIHRoYXQgaGFwcGVuc1xuICAgIC8vIHdlIHRocm93IGFuIGFwcHJvcHJpYXRlIGVycm9yLlxuICAgIGlmIChkZXB0aCA9PT0gREVURUNUX0NZQ0xJQ19PQkpFQ1RfREVQVEhfVEhSRVNIT0xEKSB7XG4gICAgICBwcm9jZXNzZWRPYmplY3RBdFRocmVzaG9sZERlcHRoID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gcHJvY2Vzc2VkT2JqZWN0QXRUaHJlc2hvbGREZXB0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVHJ5aW5nIHRvIGNvbnZlcnQgYSBjeWNsaWMgb2JqZWN0IHRvIGEgc2hhcmVhYmxlLiBUaGlzIGlzIG5vdCBzdXBwb3J0ZWQuJ1xuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcHJvY2Vzc2VkT2JqZWN0QXRUaHJlc2hvbGREZXB0aCA9IHVuZGVmaW5lZDtcbiAgfVxuICAvLyBUaGlzIG9uZSBhY3R1YWxseSBtYXkgYmUgd29ydGggdG8gYmUgbW92ZWQgdG8gYysrLCB3ZSBhbHNvIG5lZWQgc2ltaWxhciBsb2dpYyB0byBydW4gb24gdGhlIFVJIHRocmVhZFxuICBjb25zdCB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICBjb25zdCBpc1R5cGVPYmplY3QgPSB0eXBlID09PSAnb2JqZWN0JztcbiAgY29uc3QgaXNUeXBlRnVuY3Rpb24gPSB0eXBlID09PSAnZnVuY3Rpb24nO1xuICBpZiAoKGlzVHlwZU9iamVjdCB8fCBpc1R5cGVGdW5jdGlvbikgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICBjb25zdCBjYWNoZWQgPSBfc2hhcmVhYmxlQ2FjaGUuZ2V0KHZhbHVlKTtcbiAgICBpZiAoY2FjaGVkID09PSBfc2hhcmVhYmxlRmxhZykge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoY2FjaGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBjYWNoZWQgYXMgU2hhcmVhYmxlUmVmPFQ+O1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgdG9BZGFwdDogYW55O1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHRvQWRhcHQgPSB2YWx1ZS5tYXAoKGVsZW1lbnQpID0+XG4gICAgICAgICAgbWFrZVNoYXJlYWJsZUNsb25lUmVjdXJzaXZlKGVsZW1lbnQsIHNob3VsZFBlcnNpc3RSZW1vdGUsIGRlcHRoICsgMSlcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNUeXBlRnVuY3Rpb24gJiYgdmFsdWUuX193b3JrbGV0SGFzaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIHRoaXMgaXMgYSByZW1vdGUgZnVuY3Rpb25cbiAgICAgICAgdG9BZGFwdCA9IHZhbHVlO1xuICAgICAgfSBlbHNlIGlmIChpc0hvc3RPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIC8vIGZvciBob3N0IG9iamVjdHMgd2UgcGFzcyB0aGUgcmVmZXJlbmNlIHRvIHRoZSBvYmplY3QgYXMgc2hhcmVhYmxlIGFuZFxuICAgICAgICAvLyB0aGVuIHJlY3JlYXRlIG5ldyBob3N0IG9iamVjdCB3cmFwcGluZyB0aGUgc2FtZSBpbnN0YW5jZSBvbiB0aGUgVUkgdGhyZWFkLlxuICAgICAgICAvLyB0aGVyZSBpcyBubyBwb2ludCBvZiBpdGVyYXRpbmcgb3ZlciBrZXlzIGFzIHdlIGRvIGZvciByZWd1bGFyIG9iamVjdHMuXG4gICAgICAgIHRvQWRhcHQgPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNQbGFpbkpTT2JqZWN0KHZhbHVlKSB8fCBpc1R5cGVGdW5jdGlvbikge1xuICAgICAgICB0b0FkYXB0ID0ge307XG4gICAgICAgIGlmICh2YWx1ZS5fX3dvcmtsZXRIYXNoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAvLyB3ZSBhcmUgY29udmVydGluZyBhIHdvcmtsZXRcbiAgICAgICAgICBpZiAoX19ERVZfXykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRoaXMgZXJyb3IgdG8gYmUgbG9nZ2VkIG1vcmUgdGhhbiBvbmNlLlxuICAgICAgICAgICAgICAhZGlkU2hvd1BsdWdpblZlcnNpb25NaXNtYXRjaEVycm9yICYmXG4gICAgICAgICAgICAgIHZhbHVlLl9fdmVyc2lvbiAhPT0ganNWZXJzaW9uXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgZGlkU2hvd1BsdWdpblZlcnNpb25NaXNtYXRjaEVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW1JlYW5pbWF0ZWRdIE1pc21hdGNoIGJldHdlZW4gSmF2YVNjcmlwdCBjb2RlIHZlcnNpb24gYW5kIFJlYW5pbWF0ZWQgQmFiZWwgcGx1Z2luIHZlcnNpb24gKCR7anNWZXJzaW9ufSB2cy4gJHt2YWx1ZS5fX3ZlcnNpb259KS4gUGxlYXNlIGNsZWFyIHlvdXIgTWV0cm8gYnVuZGxlciBjYWNoZSB3aXRoIFxcYHlhcm4gc3RhcnQgLS1yZXNldC1jYWNoZVxcYCxcbiAgICAgICAgICAgICAgXFxgbnBtIHN0YXJ0IC0tIC0tcmVzZXQtY2FjaGVcXGAgb3IgXFxgZXhwbyBzdGFydCAtY1xcYCBhbmQgcnVuIHRoZSBhcHAgYWdhaW4uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWdpc3RlcldvcmtsZXRTdGFja0RldGFpbHMoXG4gICAgICAgICAgICAgIHZhbHVlLl9fd29ya2xldEhhc2gsXG4gICAgICAgICAgICAgIHZhbHVlLl9fc3RhY2tEZXRhaWxzXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZGVsZXRlIHZhbHVlLl9fc3RhY2tEZXRhaWxzO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyB0byBzYXZlIG9uIHRyYW5zZmVycmluZyBzdGF0aWMgX19pbml0RGF0YSBmaWVsZCBvZiB3b3JrbGV0IHN0cnVjdHVyZVxuICAgICAgICAgIC8vIHdlIHJlcXVlc3Qgc2hhcmVhYmxlIHZhbHVlIHRvIHBlcnNpc3QgaXRzIFVJIGNvdW50ZXJwYXJ0LiBUaGlzIG1lYW5zXG4gICAgICAgICAgLy8gdGhhdCB0aGUgX19pbml0RGF0YSBmaWVsZCB0aGF0IGNvbnRhaW5zIGxvbmcgc3RyaW5ncyByZXByZXNldGluZyB0aGVcbiAgICAgICAgICAvLyB3b3JrbGV0IGNvZGUsIHNvdXJjZSBtYXAsIGFuZCBsb2NhdGlvbiwgd2lsbCBhbHdheXMgYmVcbiAgICAgICAgICAvLyBzZXJpYWxpemVkL2Rlc2VyaWFsaXplZCBvbmNlLiBXZSBkb24ndCBpbmNyZWFzZSBkZXB0aCB3aGVuIGNhbGxpbmdcbiAgICAgICAgICAvLyB0aGlzIG1ldGhvZCBhcyB0aGVzZSBvYmplY3RzIGhhdmUgb25lIGxldmVsIGFueXdheXMuXG4gICAgICAgICAgdG9BZGFwdC5fX2luaXREYXRhID0gbWFrZVNoYXJlYWJsZUNsb25lUmVjdXJzaXZlKFxuICAgICAgICAgICAgdmFsdWUuX19pbml0RGF0YSxcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgICApO1xuICAgICAgICAgIGRlbGV0ZSB2YWx1ZS5fX2luaXREYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBlbGVtZW50XSBvZiBPYmplY3QuZW50cmllcyh2YWx1ZSkpIHtcbiAgICAgICAgICB0b0FkYXB0W2tleV0gPSBtYWtlU2hhcmVhYmxlQ2xvbmVSZWN1cnNpdmUoXG4gICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgc2hvdWxkUGVyc2lzdFJlbW90ZSxcbiAgICAgICAgICAgIGRlcHRoICsgMVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRoaXMgaXMgcmVhY2hlZCBmb3Igb2JqZWN0IHR5cGVzIHRoYXQgYXJlIG5vdCBvZiBwbGFpbiBPYmplY3QucHJvdG90eXBlLlxuICAgICAgICAvLyBXZSBkb24ndCBzdXBwb3J0IHN1Y2ggb2JqZWN0cyBmcm9tIGJlaW5nIHRyYW5zZmVycmVkIGFzIHNoYXJlYWJsZXMgdG9cbiAgICAgICAgLy8gdGhlIFVJIHJ1bnRpbWUgYW5kIGhlbmNlIHdlIHJlcGxhY2UgdGhlbSB3aXRoIFwiaW5hY2Nlc3NpYmxlIG9iamVjdFwiXG4gICAgICAgIC8vIHdoaWNoIGlzIGltcGxlbWVudGVkIGFzIGEgUHJveHkgb2JqZWN0IHRoYXQgdGhyb3dzIG9uIGFueSBhdHRlbXB0XG4gICAgICAgIC8vIG9mIGFjY2Vzc2luZyBpdHMgZmllbGRzLiBXZSBhcmd1ZSB0aGF0IHN1Y2ggb2JqZWN0cyBjYW4gc29tZXRpbWVzIGxlYWtcbiAgICAgICAgLy8gYXMgYXR0cmlidXRlcyBvZiBvYmplY3RzIGJlaW5nIGNhcHR1cmVkIGJ5IHdvcmtsZXRzIGJ1dCBzaG91bGQgbmV2ZXJcbiAgICAgICAgLy8gYmUgdXNlZCBvbiB0aGUgVUkgcnVudGltZSByZWdhcmRsZXNzLiBJZiB0aGV5IGFyZSBiZWluZyBhY2Nlc3NlZCwgdGhlIHVzZXJcbiAgICAgICAgLy8gd2lsbCBnZXQgYW4gYXBwcm9wcmlhdGUgZXJyb3IgbWVzc2FnZS5cbiAgICAgICAgY29uc3QgaW5hY2Nlc3NpYmxlT2JqZWN0ID1cbiAgICAgICAgICBtYWtlU2hhcmVhYmxlQ2xvbmVSZWN1cnNpdmU8VD4oSU5BQ0NFU1NJQkxFX09CSkVDVCk7XG4gICAgICAgIF9zaGFyZWFibGVDYWNoZS5zZXQodmFsdWUsIGluYWNjZXNzaWJsZU9iamVjdCk7XG4gICAgICAgIHJldHVybiBpbmFjY2Vzc2libGVPYmplY3Q7XG4gICAgICB9XG4gICAgICBpZiAoX19ERVZfXykge1xuICAgICAgICAvLyB3ZSBmcmVlemUgb2JqZWN0cyB0aGF0IGFyZSB0cmFuc2Zvcm1lZCB0byBzaGFyZWFibGUuIFRoaXMgc2hvdWxkIGhlbHBcbiAgICAgICAgLy8gZGV0ZWN0IGlzc3VlcyB3aGVuIHNvbWVvbmUgbW9kaWZpZXMgZGF0YSBhZnRlciBpdCdzIGJlZW4gY29udmVydGVkIHRvXG4gICAgICAgIC8vIHNoYXJlYWJsZS4gTWVhbmluZyB0aGF0IHRoZXkgbWF5IGJlIGRvaW5nIGEgZmF1bHR5IGFzc3VtcHRpb24gaW4gdGhlaXJcbiAgICAgICAgLy8gY29kZSBleHBlY3RpbmcgdGhhdCB0aGUgdXBkYXRlcyBhcmUgZ29pbmcgdG8gYXV0b21hdGljYWxseSBwb3B1bGF0ZSB0b1xuICAgICAgICAvLyB0aGUgb2JqZWN0IHNlbnQgdG8gdGhlIFVJIHRocmVhZC4gSWYgdGhlIHVzZXIgcmVhbGx5IHdhbnRzIHNvbWUgb2JqZWN0c1xuICAgICAgICAvLyB0byBiZSBtdXRhYmxlIHRoZXkgc2hvdWxkIHVzZSBzaGFyZWQgdmFsdWVzIGluc3RlYWQuXG4gICAgICAgIE9iamVjdC5mcmVlemUodmFsdWUpO1xuICAgICAgfVxuICAgICAgY29uc3QgYWRvcHRlZCA9IE5hdGl2ZVJlYW5pbWF0ZWRNb2R1bGUubWFrZVNoYXJlYWJsZUNsb25lKFxuICAgICAgICB0b0FkYXB0LFxuICAgICAgICBzaG91bGRQZXJzaXN0UmVtb3RlXG4gICAgICApO1xuICAgICAgX3NoYXJlYWJsZUNhY2hlLnNldCh2YWx1ZSwgYWRvcHRlZCk7XG4gICAgICBfc2hhcmVhYmxlQ2FjaGUuc2V0KGFkb3B0ZWQsIF9zaGFyZWFibGVGbGFnKTtcbiAgICAgIHJldHVybiBhZG9wdGVkO1xuICAgIH1cbiAgfVxuICByZXR1cm4gTmF0aXZlUmVhbmltYXRlZE1vZHVsZS5tYWtlU2hhcmVhYmxlQ2xvbmUodmFsdWUsIHNob3VsZFBlcnNpc3RSZW1vdGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVNoYXJlYWJsZUNsb25lT25VSVJlY3Vyc2l2ZTxUPih2YWx1ZTogVCk6IFNoYXJlYWJsZVJlZjxUPiB7XG4gICd3b3JrbGV0JztcbiAgaWYgKFVTRV9TVFVCX0lNUExFTUVOVEFUSU9OKSB7XG4gICAgLy8gQHRzLWlnbm9yZSB3ZWIgaXMgYW4gaW50ZXJlc3RpbmcgcGxhY2Ugd2hlcmUgd2UgZG9uJ3QgcnVuIGEgc2Vjb25kYXJ5IFZNIG9uIHRoZSBVSSB0aHJlYWRcbiAgICAvLyBzZWUgbW9yZSBkZXRhaWxzIGluIHRoZSBjb21tZW50IHdoZXJlIFVTRV9TVFVCX0lNUExFTUVOVEFUSU9OIGlzIGRlZmluZWQuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGZ1bmN0aW9uIGNsb25lUmVjdXJzaXZlPFQ+KHZhbHVlOiBUKTogU2hhcmVhYmxlUmVmPFQ+IHtcbiAgICBjb25zdCB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICAgIGlmICgodHlwZSA9PT0gJ29iamVjdCcgfHwgdHlwZSA9PT0gJ2Z1bmN0aW9uJykgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgIGxldCB0b0FkYXB0OiBhbnk7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgdG9BZGFwdCA9IHZhbHVlLm1hcCgoZWxlbWVudCkgPT4gY2xvbmVSZWN1cnNpdmUoZWxlbWVudCkpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRvQWRhcHQgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBlbGVtZW50XSBvZiBPYmplY3QuZW50cmllcyh2YWx1ZSkpIHtcbiAgICAgICAgICB0b0FkYXB0W2tleV0gPSBjbG9uZVJlY3Vyc2l2ZShlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKF9fREVWX18pIHtcbiAgICAgICAgLy8gU2VlIHRoZSByZWFzb25pbmcgYmVoaW5kIGZyZWV6aW5nIGluIHRoZSBvdGhlciBjb21tZW50IGFib3ZlLlxuICAgICAgICBPYmplY3QuZnJlZXplKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfbWFrZVNoYXJlYWJsZUNsb25lKHRvQWRhcHQpO1xuICAgIH1cbiAgICByZXR1cm4gX21ha2VTaGFyZWFibGVDbG9uZSh2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIGNsb25lUmVjdXJzaXZlKHZhbHVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTaGFyZWFibGU8VD4odmFsdWU6IFQpOiBUIHtcbiAgaWYgKFVTRV9TVFVCX0lNUExFTUVOVEFUSU9OKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGNvbnN0IGhhbmRsZSA9IG1ha2VTaGFyZWFibGVDbG9uZVJlY3Vyc2l2ZSh7XG4gICAgX19pbml0OiAoKSA9PiB7XG4gICAgICAnd29ya2xldCc7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgfSk7XG4gIHJlZ2lzdGVyU2hhcmVhYmxlTWFwcGluZyh2YWx1ZSwgaGFuZGxlKTtcbiAgcmV0dXJuIHZhbHVlO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLElBQUFBLGlCQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFBQyxnQkFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsVUFBQSxHQUFBSCxPQUFBO0FBQTBELFNBQUFELHVCQUFBSyxHQUFBO0VBQUEsT0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQTtJQUFBRSxPQUFBLEVBQUFGO0VBQUE7QUFBQTtBQU0x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