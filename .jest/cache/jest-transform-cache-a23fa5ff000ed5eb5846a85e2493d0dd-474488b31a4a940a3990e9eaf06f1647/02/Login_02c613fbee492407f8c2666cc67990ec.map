{"version":3,"names":["_reactNative","require","_react","_interopRequireDefault","_config","_auth","_core","_reactNativeDialogInput","_Background","_Btn","_Field","_Constants","_jsxRuntime","_Dimensions$get","Dimensions","get","width","height","Login","props","_React$useState","React","useState","_React$useState2","_slicedToArray2","default","userName","setUserName","_React$useState3","_React$useState4","password","setPassword","_React$useState5","_React$useState6","dialogBoxVisibility","setDialogBoxVisibility","_React$useState7","_React$useState8","userNameValidity","setUserNameValidity","useEffect","unsubscribe","auth","onAuthStateChanged","user","emailVerified","navigation","replace","console","log","logInToAcc","signInWithEmailAndPassword","then","userCredentials","email","JSON","stringify","alert","signOut","catch","error","handleUserNameChange","userNameInput","reg","test","redirectToSignUp","navigate","forgotPassword","passwordResetEmail","emailInput","sendPasswordResetEmail","jsxs","children","jsx","View","style","justifyContent","alignItems","Text","flex","color","fontSize","fontWeight","backgroundColor","borderTopLeftRadius","paddingTop","marginBottom","placeholder","keyboardType","onChangeText","text","styles","tip","secureTextEntry","paddingRight","darkGreen","onPress","textColor","bgColor","btnLabel","Press","testID","isDialogVisible","title","message","hintInput","submitInput","inputText","closeDialog","display","flexDirection","TouchableOpacity","StyleSheet","create","textAlign","paddingLeft"],"sources":["Login.js"],"sourcesContent":["import { StyleSheet, Text, View, TextInput, Dimensions, KeyboardAvoidingView, TouchableOpacity} from 'react-native';\r\nimport React from 'react';\r\nimport { auth } from '../Firebase/config'\r\nimport { sendPasswordResetEmail, signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { useNavigation } from '@react-navigation/core';\r\nimport DialogInput from 'react-native-dialog-input';\r\nimport Background from \"./Background\";\r\nimport Btn from \"./Btn\";\r\nimport Field from \"./Field\";\r\nimport { darkGreen } from \"./Constants\";\r\nconst { width, height } = Dimensions.get(\"window\");\r\n\r\nexport default function Login(props) {\r\n  const [userName, setUserName] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n  const [dialogBoxVisibility, setDialogBoxVisibility] = React.useState(false);\r\n  const [userNameValidity, setUserNameValidity] = React.useState(true);\r\n\r\n  // const navigation = useNavigation();\r\n  React.useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged(user => {\r\n      if(user && user.emailVerified){\r\n        props.navigation.replace(\"Root\");\r\n        console.log(user);\r\n      }\r\n    });\r\n    setUserName(\"\");\r\n    setPassword(\"\");\r\n    setUserNameValidity(true);\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const logInToAcc = ()=>{\r\n    console.log(\"Logged In Successfully!!!\", auth);\r\n    signInWithEmailAndPassword(auth, userName, password)\r\n      .then(userCredentials => {\r\n        const user = userCredentials.user;\r\n        console.log(\"user email :\", user.email);\r\n        if(user.emailVerified){\r\n          props.navigation.replace(\"Root\");\r\n          console.log(JSON.stringify(user));\r\n          alert(\"Logged In Successfully!!!\");\r\n        }\r\n        else\r\n        {\r\n          alert(\"Please verify your Email. Link is already sent.\");\r\n          auth.signOut();\r\n        }\r\n      })\r\n      .catch(error => alert(\"Username/ Password is incorrect!!\"));\r\n  }\r\n\r\n  //validate email i.e username\r\n  const handleUserNameChange = (userNameInput) => {\r\n\r\n    const reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\r\n    if (reg.test(userNameInput) === true){\r\n      setUserName(userNameInput);\r\n      setUserNameValidity(true);\r\n    }\r\n    else{\r\n      setUserNameValidity(false);\r\n      setUserName(\"\");\r\n    }\r\n  }\r\n  \r\n\r\n  const redirectToSignUp = () => {\r\n    props.navigation.navigate(\"Sign Up\");\r\n  }\r\n\r\n  const forgotPassword = () => {\r\n    setDialogBoxVisibility(true);\r\n  }\r\n\r\n  const passwordResetEmail = (emailInput) => {\r\n    console.log(\"Email : \", emailInput);\r\n    setDialogBoxVisibility(false);\r\n    \r\n    sendPasswordResetEmail(auth, emailInput)\r\n      .then(function() {\r\n        alert(\"Password reset link is sent successfully!\");\r\n      })\r\n      .catch(function(error) {\r\n        alert(\"Please enter valid email address!\");\r\n      });\r\n  }\r\n\r\n  return (\r\n    <Background>\r\n      <View style={{ justifyContent:\"center\", alignItems: \"center\", width: \"100%\",  height:height*0.15,}}>\r\n        <Text\r\n            style={{\r\n              flex:1,\r\n              color: \"white\",\r\n              fontSize: 64,\r\n              fontWeight: \"bold\",\r\n              justifyContent:\"center\",\r\n             \r\n            }}\r\n        >\r\n            Login\r\n        </Text>\r\n        </View>\r\n        <View \r\n          style={{\r\n            backgroundColor: \"white\",\r\n            height: height*0.85,\r\n            width: width,\r\n            borderTopLeftRadius: 130,\r\n            paddingTop: 100,\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <Text\r\n            style={{\r\n              color: \"grey\",\r\n              fontSize: 19,\r\n              fontWeight: \"bold\",\r\n              marginBottom: 20,\r\n            }}\r\n          >\r\n            Login to your account\r\n          </Text>\r\n          <Field\r\n            placeholder=\"Email / Username\"\r\n            keyboardType={\"email-address\"}\r\n            onChangeText={(text)=>handleUserNameChange(text)}\r\n          />\r\n          {!userNameValidity && <Text style={styles.tip}>Invalid Email / Username!</Text>}\r\n        \r\n          <Field placeholder=\"Password\" secureTextEntry={true} onChangeText={(text)=>setPassword(text)}/>\r\n\r\n          <View\r\n            style={{\r\n              alignItems: \"flex-end\",\r\n              width: \"78%\",\r\n              paddingRight: 16,\r\n              marginBottom: 200,\r\n            }}\r\n          >\r\n            <Text\r\n              style={{ color: darkGreen, fontWeight: \"bold\", fontSize: 16 }}\r\n              onPress={forgotPassword}\r\n            >\r\n              Forgot Password ?\r\n            </Text>\r\n          </View>\r\n\r\n          <Btn\r\n            textColor=\"white\"\r\n            bgColor={darkGreen}\r\n            btnLabel=\"Login\"\r\n            Press={logInToAcc}\r\n            testID = \"LoginBtn\"\r\n          />\r\n\r\n          <DialogInput isDialogVisible={dialogBoxVisibility}\r\n              title={\"Password Recovery\"}\r\n              message={\"Enter registered email address :\"}\r\n              hintInput ={\"abc@gmail.com\"}\r\n              submitInput={ (inputText) => {passwordResetEmail(inputText)} }\r\n              closeDialog={ () => {setDialogBoxVisibility(false)}}>\r\n          </DialogInput>\r\n\r\n          <View\r\n            style={{\r\n              display: \"flex\",\r\n              flexDirection: \"row\",\r\n              justifyContent: \"center\",\r\n            }}\r\n          >\r\n            <Text style={{ fontSize: 16, fontWeight: \"bold\" }}>\r\n              Don't have an account ?{\" \"}\r\n            </Text>\r\n            <TouchableOpacity\r\n              onPress={redirectToSignUp}\r\n            >\r\n              <Text\r\n                style={{ color: darkGreen, fontWeight: \"bold\", fontSize: 16 }}\r\n              >\r\n                Signup\r\n              </Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n\r\n        </View>\r\n      \r\n    </Background>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  tip:{\r\n    color:\"red\", \r\n    textAlign: 'left', \r\n    width: '70%', \r\n    paddingLeft: 10\r\n  }\r\n});\r\n"],"mappings":"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"}