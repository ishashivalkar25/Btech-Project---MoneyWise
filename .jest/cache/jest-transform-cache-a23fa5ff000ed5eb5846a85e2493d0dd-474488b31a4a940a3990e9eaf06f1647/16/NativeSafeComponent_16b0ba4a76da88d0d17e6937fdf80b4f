3274e6f09cf420bfe37e25cd49cb7f2f
var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];
    for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }
  return target;
};
var _templateObject = _taggedTemplateLiteral(['\n      SafeModule.create(...) was invoked without any options parameter.\n    '], ['\n      SafeModule.create(...) was invoked without any options parameter.\n    ']),
  _templateObject2 = _taggedTemplateLiteral(['\n             When attempting to resolve the native component ', ',\n             componentOverrides.', ' is expected to be a function, but found\n             ', ' instead.\n          '], ['\n             When attempting to resolve the native component ', ',\n             componentOverrides.', ' is expected to be a function, but found\n             ', ' instead.\n          ']),
  _templateObject3 = _taggedTemplateLiteral(['\n            When attempting to resolve the native component ', ',\n            componentOverrides.', ' is expected to be a function that returns a React\n            component. Instead, ', ' was found.\n          '], ['\n            When attempting to resolve the native component ', ',\n            componentOverrides.', ' is expected to be a function that returns a React\n            component. Instead, ', ' was found.\n          ']);
var _reactNative = require('react-native');
var _dedent = require('dedent');
var _dedent2 = _interopRequireDefault(_dedent);
var _SafeModule = require('./SafeModule');
var _SafeModule2 = _interopRequireDefault(_SafeModule);
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}
function _taggedTemplateLiteral(strings, raw) {
  return Object.freeze(Object.defineProperties(strings, {
    raw: {
      value: Object.freeze(raw)
    }
  }));
}
var first = function first(array, fn) {
  var result = void 0;
  var i = 0;
  for (; i < array.length; i++) {
    result = fn(array[i]);
    if (result) return result;
  }
  return null;
};
var getViewManagerConfig = function getViewManagerConfig(moduleName) {
  if (_reactNative.UIManager.getViewManagerConfig) {
    return _reactNative.UIManager.getViewManagerConfig(moduleName);
  }
  return _reactNative.UIManager[moduleName];
};
var moduleWithName = function moduleWithName(nameOrArray) {
  if (!nameOrArray) return null;
  if (Array.isArray(nameOrArray)) return first(nameOrArray, moduleWithName);
  return getViewManagerConfig(nameOrArray);
};
var findFirstResolver = function findFirstResolver(namespace) {
  return function findFirstOnNamespace(nameOrArray) {
    if (!nameOrArray) return null;
    if (Array.isArray(nameOrArray)) return first(nameOrArray, findFirstOnNamespace);
    return nameOrArray in namespace ? nameOrArray : null;
  };
};
var findFirstViewName = findFirstResolver(_reactNative.UIManager);
var getPrimaryName = function getPrimaryName(nameOrArray) {
  return Array.isArray(nameOrArray) ? getPrimaryName(nameOrArray[0]) : nameOrArray;
};
var defaultGetVersion = function defaultGetVersion(module) {
  return module.VERSION;
};
function SafeComponentCreate(options) {
  if (!options) {
    throw new Error((0, _dedent2.default)(_templateObject));
  }
  var viewName = options.viewName,
    propOverrides = options.propOverrides,
    componentOverrides = options.componentOverrides,
    mockComponent = options.mockComponent,
    mock = options.mock;
  var getVersion = options.getVersion;
  if (!getVersion) {
    getVersion = defaultGetVersion;
  }
  if (!viewName) {
    throw new Error('\n      SafeModule.component(...) requires a viewName property to be specified.\n    ');
  }
  if (!mockComponent) {
    throw new Error('\n      SafeModule.component(...) requires a mockComponent property to be specified.\n    ');
  }
  var PRIMARY_VIEW_NAME = getPrimaryName(viewName);
  var realViewName = findFirstViewName(viewName);
  var realViewConfig = getViewManagerConfig(realViewName);
  if (!realViewName || !realViewConfig) {
    return mockComponent;
  }
  var moduleOptions = _extends({}, options, {
    mock: mock || {},
    moduleName: realViewName + 'Manager'
  });
  var nativeModule = (0, _SafeModule2.default)(moduleOptions);
  var version = getVersion(realViewConfig.Constants || {});
  if (propOverrides) {
    var overrides = propOverrides[version];
    var boundOverrides = {};
    if (overrides) {
      if (typeof overrides === 'function') {
        boundOverrides = overrides(realViewConfig.NativeProps, realViewConfig, nativeModule);
      } else {
        boundOverrides = _extends({}, overrides);
      }
    }
    _extends(realViewConfig.NativeProps, boundOverrides);
  }
  var nativeComponent = (0, _reactNative.requireNativeComponent)(realViewName);
  var result = nativeComponent;
  result.runCommand = function (instance, name) {
    for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
      args[_key - 2] = arguments[_key];
    }
    var native = function native() {
      return _reactNative.UIManager.dispatchViewManagerCommand((0, _reactNative.findNodeHandle)(instance), getViewManagerConfig(realViewName).Commands[name], args);
    };
    return _reactNative.Platform.select({
      android: native,
      ios: function ios() {
        return nativeModule[name].apply(nativeModule, [(0, _reactNative.findNodeHandle)(instance)].concat(args));
      },
      windows: native,
      default: function _default() {}
    })();
  };
  result.updateView = function (instance, props) {
    var native = function native() {
      return _reactNative.UIManager.updateView((0, _reactNative.findNodeHandle)(instance), realViewName, props);
    };
    _reactNative.Platform.select({
      ios: native,
      android: native,
      windows: native,
      default: function _default() {}
    })();
  };
  if (componentOverrides) {
    var _overrides = componentOverrides[version];
    if (_overrides) {
      if (__DEV__) {
        if (typeof _overrides !== 'function') {
          console.error((0, _dedent2.default)(_templateObject2, PRIMARY_VIEW_NAME, version, typeof _overrides));
        }
      }
      result = _overrides(nativeComponent, nativeModule);
      if (__DEV__) {
        if (typeof result !== 'function') {
          console.error((0, _dedent2.default)(_templateObject3, PRIMARY_VIEW_NAME, version, typeof result));
        }
      }
    }
  }
  return result;
}
module.exports = SafeComponentCreate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXh0ZW5kcyIsIk9iamVjdCIsImFzc2lnbiIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJfdGVtcGxhdGVPYmplY3QiLCJfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsIiwiX3RlbXBsYXRlT2JqZWN0MiIsIl90ZW1wbGF0ZU9iamVjdDMiLCJfcmVhY3ROYXRpdmUiLCJyZXF1aXJlIiwiX2RlZGVudCIsIl9kZWRlbnQyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9TYWZlTW9kdWxlIiwiX1NhZmVNb2R1bGUyIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJzdHJpbmdzIiwicmF3IiwiZnJlZXplIiwiZGVmaW5lUHJvcGVydGllcyIsInZhbHVlIiwiZmlyc3QiLCJhcnJheSIsImZuIiwicmVzdWx0IiwiZ2V0Vmlld01hbmFnZXJDb25maWciLCJtb2R1bGVOYW1lIiwiVUlNYW5hZ2VyIiwibW9kdWxlV2l0aE5hbWUiLCJuYW1lT3JBcnJheSIsIkFycmF5IiwiaXNBcnJheSIsImZpbmRGaXJzdFJlc29sdmVyIiwibmFtZXNwYWNlIiwiZmluZEZpcnN0T25OYW1lc3BhY2UiLCJmaW5kRmlyc3RWaWV3TmFtZSIsImdldFByaW1hcnlOYW1lIiwiZGVmYXVsdEdldFZlcnNpb24iLCJtb2R1bGUiLCJWRVJTSU9OIiwiU2FmZUNvbXBvbmVudENyZWF0ZSIsIm9wdGlvbnMiLCJFcnJvciIsInZpZXdOYW1lIiwicHJvcE92ZXJyaWRlcyIsImNvbXBvbmVudE92ZXJyaWRlcyIsIm1vY2tDb21wb25lbnQiLCJtb2NrIiwiZ2V0VmVyc2lvbiIsIlBSSU1BUllfVklFV19OQU1FIiwicmVhbFZpZXdOYW1lIiwicmVhbFZpZXdDb25maWciLCJtb2R1bGVPcHRpb25zIiwibmF0aXZlTW9kdWxlIiwidmVyc2lvbiIsIkNvbnN0YW50cyIsIm92ZXJyaWRlcyIsImJvdW5kT3ZlcnJpZGVzIiwiTmF0aXZlUHJvcHMiLCJuYXRpdmVDb21wb25lbnQiLCJyZXF1aXJlTmF0aXZlQ29tcG9uZW50IiwicnVuQ29tbWFuZCIsImluc3RhbmNlIiwibmFtZSIsIl9sZW4iLCJhcmdzIiwiX2tleSIsIm5hdGl2ZSIsImRpc3BhdGNoVmlld01hbmFnZXJDb21tYW5kIiwiZmluZE5vZGVIYW5kbGUiLCJDb21tYW5kcyIsIlBsYXRmb3JtIiwic2VsZWN0IiwiYW5kcm9pZCIsImlvcyIsImFwcGx5IiwiY29uY2F0Iiwid2luZG93cyIsIl9kZWZhdWx0IiwidXBkYXRlVmlldyIsInByb3BzIiwiX292ZXJyaWRlcyIsIl9fREVWX18iLCJjb25zb2xlIiwiZXJyb3IiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiTmF0aXZlU2FmZUNvbXBvbmVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX2V4dGVuZHM9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odGFyZ2V0KXtmb3IodmFyIGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt2YXIgc291cmNlPWFyZ3VtZW50c1tpXTtmb3IodmFyIGtleSBpbiBzb3VyY2Upe2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2Usa2V5KSl7dGFyZ2V0W2tleV09c291cmNlW2tleV07fX19cmV0dXJuIHRhcmdldDt9O3ZhciBfdGVtcGxhdGVPYmplY3Q9X3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbJ1xcbiAgICAgIFNhZmVNb2R1bGUuY3JlYXRlKC4uLikgd2FzIGludm9rZWQgd2l0aG91dCBhbnkgb3B0aW9ucyBwYXJhbWV0ZXIuXFxuICAgICddLFsnXFxuICAgICAgU2FmZU1vZHVsZS5jcmVhdGUoLi4uKSB3YXMgaW52b2tlZCB3aXRob3V0IGFueSBvcHRpb25zIHBhcmFtZXRlci5cXG4gICAgJ10pLF90ZW1wbGF0ZU9iamVjdDI9X3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbJ1xcbiAgICAgICAgICAgICBXaGVuIGF0dGVtcHRpbmcgdG8gcmVzb2x2ZSB0aGUgbmF0aXZlIGNvbXBvbmVudCAnLCcsXFxuICAgICAgICAgICAgIGNvbXBvbmVudE92ZXJyaWRlcy4nLCcgaXMgZXhwZWN0ZWQgdG8gYmUgYSBmdW5jdGlvbiwgYnV0IGZvdW5kXFxuICAgICAgICAgICAgICcsJyBpbnN0ZWFkLlxcbiAgICAgICAgICAnXSxbJ1xcbiAgICAgICAgICAgICBXaGVuIGF0dGVtcHRpbmcgdG8gcmVzb2x2ZSB0aGUgbmF0aXZlIGNvbXBvbmVudCAnLCcsXFxuICAgICAgICAgICAgIGNvbXBvbmVudE92ZXJyaWRlcy4nLCcgaXMgZXhwZWN0ZWQgdG8gYmUgYSBmdW5jdGlvbiwgYnV0IGZvdW5kXFxuICAgICAgICAgICAgICcsJyBpbnN0ZWFkLlxcbiAgICAgICAgICAnXSksX3RlbXBsYXRlT2JqZWN0Mz1fdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsnXFxuICAgICAgICAgICAgV2hlbiBhdHRlbXB0aW5nIHRvIHJlc29sdmUgdGhlIG5hdGl2ZSBjb21wb25lbnQgJywnLFxcbiAgICAgICAgICAgIGNvbXBvbmVudE92ZXJyaWRlcy4nLCcgaXMgZXhwZWN0ZWQgdG8gYmUgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBSZWFjdFxcbiAgICAgICAgICAgIGNvbXBvbmVudC4gSW5zdGVhZCwgJywnIHdhcyBmb3VuZC5cXG4gICAgICAgICAgJ10sWydcXG4gICAgICAgICAgICBXaGVuIGF0dGVtcHRpbmcgdG8gcmVzb2x2ZSB0aGUgbmF0aXZlIGNvbXBvbmVudCAnLCcsXFxuICAgICAgICAgICAgY29tcG9uZW50T3ZlcnJpZGVzLicsJyBpcyBleHBlY3RlZCB0byBiZSBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIFJlYWN0XFxuICAgICAgICAgICAgY29tcG9uZW50LiBJbnN0ZWFkLCAnLCcgd2FzIGZvdW5kLlxcbiAgICAgICAgICAnXSk7dmFyIF9yZWFjdE5hdGl2ZT1yZXF1aXJlKCdyZWFjdC1uYXRpdmUnKTtcblxuXG5cblxuXG52YXIgX2RlZGVudD1yZXF1aXJlKCdkZWRlbnQnKTt2YXIgX2RlZGVudDI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVkZW50KTtcbnZhciBfU2FmZU1vZHVsZT1yZXF1aXJlKCcuL1NhZmVNb2R1bGUnKTt2YXIgX1NhZmVNb2R1bGUyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1NhZmVNb2R1bGUpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9ZnVuY3Rpb24gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChzdHJpbmdzLHJhdyl7cmV0dXJuIE9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc3RyaW5ncyx7cmF3Ont2YWx1ZTpPYmplY3QuZnJlZXplKHJhdyl9fSkpO31cblxudmFyIGZpcnN0PWZ1bmN0aW9uIGZpcnN0KGFycmF5LGZuKXtcbnZhciByZXN1bHQ9dm9pZCAwO1xudmFyIGk9MDtcblxuZm9yKDtpPGFycmF5Lmxlbmd0aDtpKyspe1xucmVzdWx0PWZuKGFycmF5W2ldKTtcbmlmKHJlc3VsdClyZXR1cm4gcmVzdWx0O1xufVxucmV0dXJuIG51bGw7XG59O1xuXG52YXIgZ2V0Vmlld01hbmFnZXJDb25maWc9ZnVuY3Rpb24gZ2V0Vmlld01hbmFnZXJDb25maWcobW9kdWxlTmFtZSl7XG5pZihfcmVhY3ROYXRpdmUuVUlNYW5hZ2VyLmdldFZpZXdNYW5hZ2VyQ29uZmlnKXtcblxucmV0dXJuIF9yZWFjdE5hdGl2ZS5VSU1hbmFnZXIuZ2V0Vmlld01hbmFnZXJDb25maWcobW9kdWxlTmFtZSk7XG59XG5cblxucmV0dXJuIF9yZWFjdE5hdGl2ZS5VSU1hbmFnZXJbbW9kdWxlTmFtZV07XG59O1xuXG52YXIgbW9kdWxlV2l0aE5hbWU9ZnVuY3Rpb24gbW9kdWxlV2l0aE5hbWUobmFtZU9yQXJyYXkpe1xuaWYoIW5hbWVPckFycmF5KXJldHVybiBudWxsO1xuaWYoQXJyYXkuaXNBcnJheShuYW1lT3JBcnJheSkpcmV0dXJuIGZpcnN0KG5hbWVPckFycmF5LG1vZHVsZVdpdGhOYW1lKTtcbnJldHVybiBnZXRWaWV3TWFuYWdlckNvbmZpZyhuYW1lT3JBcnJheSk7XG59O1xuXG52YXIgZmluZEZpcnN0UmVzb2x2ZXI9ZnVuY3Rpb24gZmluZEZpcnN0UmVzb2x2ZXIobmFtZXNwYWNlKXtyZXR1cm4gZnVuY3Rpb24gZmluZEZpcnN0T25OYW1lc3BhY2UobmFtZU9yQXJyYXkpe1xuaWYoIW5hbWVPckFycmF5KXJldHVybiBudWxsO1xuaWYoQXJyYXkuaXNBcnJheShuYW1lT3JBcnJheSkpcmV0dXJuIGZpcnN0KG5hbWVPckFycmF5LGZpbmRGaXJzdE9uTmFtZXNwYWNlKTtcbnJldHVybiBuYW1lT3JBcnJheSBpbiBuYW1lc3BhY2U/bmFtZU9yQXJyYXk6bnVsbDtcbn07fTtcblxudmFyIGZpbmRGaXJzdFZpZXdOYW1lPWZpbmRGaXJzdFJlc29sdmVyKF9yZWFjdE5hdGl2ZS5VSU1hbmFnZXIpO1xuXG52YXIgZ2V0UHJpbWFyeU5hbWU9ZnVuY3Rpb24gZ2V0UHJpbWFyeU5hbWUobmFtZU9yQXJyYXkpe1xucmV0dXJuIEFycmF5LmlzQXJyYXkobmFtZU9yQXJyYXkpP2dldFByaW1hcnlOYW1lKG5hbWVPckFycmF5WzBdKTpuYW1lT3JBcnJheTtcbn07XG5cbnZhciBkZWZhdWx0R2V0VmVyc2lvbj1mdW5jdGlvbiBkZWZhdWx0R2V0VmVyc2lvbihtb2R1bGUpe3JldHVybiBtb2R1bGUuVkVSU0lPTjt9O1xuXG5mdW5jdGlvbiBTYWZlQ29tcG9uZW50Q3JlYXRlKG9wdGlvbnMpe1xuaWYoIW9wdGlvbnMpe1xudGhyb3cgbmV3IEVycm9yKCgwLF9kZWRlbnQyLmRlZmF1bHQpKF90ZW1wbGF0ZU9iamVjdCkpO1xuXG5cbn12YXJcblxudmlld05hbWU9XG5cblxuXG5cbm9wdGlvbnMudmlld05hbWUscHJvcE92ZXJyaWRlcz1vcHRpb25zLnByb3BPdmVycmlkZXMsY29tcG9uZW50T3ZlcnJpZGVzPW9wdGlvbnMuY29tcG9uZW50T3ZlcnJpZGVzLG1vY2tDb21wb25lbnQ9b3B0aW9ucy5tb2NrQ29tcG9uZW50LG1vY2s9b3B0aW9ucy5tb2NrO3ZhclxuXG5nZXRWZXJzaW9uPVxub3B0aW9ucy5nZXRWZXJzaW9uO1xuXG5pZighZ2V0VmVyc2lvbil7XG5nZXRWZXJzaW9uPWRlZmF1bHRHZXRWZXJzaW9uO1xufVxuXG5pZighdmlld05hbWUpe1xudGhyb3cgbmV3IEVycm9yKCdcXG4gICAgICBTYWZlTW9kdWxlLmNvbXBvbmVudCguLi4pIHJlcXVpcmVzIGEgdmlld05hbWUgcHJvcGVydHkgdG8gYmUgc3BlY2lmaWVkLlxcbiAgICAnKTtcblxuXG59XG5cbmlmKCFtb2NrQ29tcG9uZW50KXtcbnRocm93IG5ldyBFcnJvcignXFxuICAgICAgU2FmZU1vZHVsZS5jb21wb25lbnQoLi4uKSByZXF1aXJlcyBhIG1vY2tDb21wb25lbnQgcHJvcGVydHkgdG8gYmUgc3BlY2lmaWVkLlxcbiAgICAnKTtcblxuXG59XG5cbnZhciBQUklNQVJZX1ZJRVdfTkFNRT1nZXRQcmltYXJ5TmFtZSh2aWV3TmFtZSk7XG5cbnZhciByZWFsVmlld05hbWU9ZmluZEZpcnN0Vmlld05hbWUodmlld05hbWUpO1xudmFyIHJlYWxWaWV3Q29uZmlnPWdldFZpZXdNYW5hZ2VyQ29uZmlnKHJlYWxWaWV3TmFtZSk7XG5cbmlmKCFyZWFsVmlld05hbWV8fCFyZWFsVmlld0NvbmZpZyl7XG5yZXR1cm4gbW9ja0NvbXBvbmVudDtcbn1cblxudmFyIG1vZHVsZU9wdGlvbnM9X2V4dGVuZHMoe30sb3B0aW9ucyx7XG5tb2NrOm1vY2t8fHt9LFxubW9kdWxlTmFtZTpyZWFsVmlld05hbWUrJ01hbmFnZXInfSk7XG5cblxudmFyIG5hdGl2ZU1vZHVsZT0oMCxfU2FmZU1vZHVsZTIuZGVmYXVsdCkobW9kdWxlT3B0aW9ucyk7XG5cbnZhciB2ZXJzaW9uPWdldFZlcnNpb24ocmVhbFZpZXdDb25maWcuQ29uc3RhbnRzfHx7fSk7XG5cbmlmKHByb3BPdmVycmlkZXMpe1xudmFyIG92ZXJyaWRlcz1wcm9wT3ZlcnJpZGVzW3ZlcnNpb25dO1xudmFyIGJvdW5kT3ZlcnJpZGVzPXt9O1xuaWYob3ZlcnJpZGVzKXtcbmlmKHR5cGVvZiBvdmVycmlkZXM9PT0nZnVuY3Rpb24nKXtcbmJvdW5kT3ZlcnJpZGVzPW92ZXJyaWRlcyhyZWFsVmlld0NvbmZpZy5OYXRpdmVQcm9wcyxyZWFsVmlld0NvbmZpZyxuYXRpdmVNb2R1bGUpO1xufWVsc2V7XG5ib3VuZE92ZXJyaWRlcz1fZXh0ZW5kcyh7fSxvdmVycmlkZXMpO1xufVxufVxuX2V4dGVuZHMocmVhbFZpZXdDb25maWcuTmF0aXZlUHJvcHMsYm91bmRPdmVycmlkZXMpO1xufVxuXG52YXIgbmF0aXZlQ29tcG9uZW50PSgwLF9yZWFjdE5hdGl2ZS5yZXF1aXJlTmF0aXZlQ29tcG9uZW50KShyZWFsVmlld05hbWUpO1xuXG52YXIgcmVzdWx0PW5hdGl2ZUNvbXBvbmVudDtcblxucmVzdWx0LnJ1bkNvbW1hbmQ9ZnVuY3Rpb24oaW5zdGFuY2UsbmFtZSl7Zm9yKHZhciBfbGVuPWFyZ3VtZW50cy5sZW5ndGgsYXJncz1BcnJheShfbGVuPjI/X2xlbi0yOjApLF9rZXk9Mjtfa2V5PF9sZW47X2tleSsrKXthcmdzW19rZXktMl09YXJndW1lbnRzW19rZXldO31cbnZhciBuYXRpdmU9ZnVuY3Rpb24gbmF0aXZlKCl7cmV0dXJuIF9yZWFjdE5hdGl2ZS5VSU1hbmFnZXIuZGlzcGF0Y2hWaWV3TWFuYWdlckNvbW1hbmQoXG4oMCxfcmVhY3ROYXRpdmUuZmluZE5vZGVIYW5kbGUpKGluc3RhbmNlKSxcbmdldFZpZXdNYW5hZ2VyQ29uZmlnKHJlYWxWaWV3TmFtZSkuQ29tbWFuZHNbbmFtZV0sXG5hcmdzKTt9O1xuXG5yZXR1cm4gX3JlYWN0TmF0aXZlLlBsYXRmb3JtLnNlbGVjdCh7XG5hbmRyb2lkOm5hdGl2ZSxcbmlvczpmdW5jdGlvbiBpb3MoKXtyZXR1cm4gbmF0aXZlTW9kdWxlW25hbWVdLmFwcGx5KG5hdGl2ZU1vZHVsZSxbKDAsX3JlYWN0TmF0aXZlLmZpbmROb2RlSGFuZGxlKShpbnN0YW5jZSldLmNvbmNhdChhcmdzKSk7fSxcbndpbmRvd3M6bmF0aXZlLFxuZGVmYXVsdDpmdW5jdGlvbiBfZGVmYXVsdCgpe319KSgpO1xuXG59O1xuXG5yZXN1bHQudXBkYXRlVmlldz1mdW5jdGlvbihpbnN0YW5jZSxwcm9wcyl7XG52YXIgbmF0aXZlPWZ1bmN0aW9uIG5hdGl2ZSgpe3JldHVybiBfcmVhY3ROYXRpdmUuVUlNYW5hZ2VyLnVwZGF0ZVZpZXcoKDAsX3JlYWN0TmF0aXZlLmZpbmROb2RlSGFuZGxlKShpbnN0YW5jZSkscmVhbFZpZXdOYW1lLHByb3BzKTt9O1xuX3JlYWN0TmF0aXZlLlBsYXRmb3JtLnNlbGVjdCh7XG5pb3M6bmF0aXZlLFxuYW5kcm9pZDpuYXRpdmUsXG53aW5kb3dzOm5hdGl2ZSxcbmRlZmF1bHQ6ZnVuY3Rpb24gX2RlZmF1bHQoKXt9fSkoKTtcblxufTtcblxuaWYoY29tcG9uZW50T3ZlcnJpZGVzKXtcbnZhciBfb3ZlcnJpZGVzPWNvbXBvbmVudE92ZXJyaWRlc1t2ZXJzaW9uXTtcbmlmKF9vdmVycmlkZXMpe1xuaWYoX19ERVZfXyl7XG5pZih0eXBlb2YgX292ZXJyaWRlcyE9PSdmdW5jdGlvbicpe1xuY29uc29sZS5lcnJvcigoMCxfZGVkZW50Mi5kZWZhdWx0KShfdGVtcGxhdGVPYmplY3QyLFxuUFJJTUFSWV9WSUVXX05BTUUsXG52ZXJzaW9uLFxudHlwZW9mIF9vdmVycmlkZXMpKTtcblxufVxufVxuXG5yZXN1bHQ9X292ZXJyaWRlcyhuYXRpdmVDb21wb25lbnQsbmF0aXZlTW9kdWxlKTtcblxuaWYoX19ERVZfXyl7XG5pZih0eXBlb2YgcmVzdWx0IT09J2Z1bmN0aW9uJyl7XG5jb25zb2xlLmVycm9yKCgwLF9kZWRlbnQyLmRlZmF1bHQpKF90ZW1wbGF0ZU9iamVjdDMsXG5QUklNQVJZX1ZJRVdfTkFNRSxcbnZlcnNpb24sXG50eXBlb2YgcmVzdWx0KSk7XG5cbn1cbn1cbn1cbn1cblxu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