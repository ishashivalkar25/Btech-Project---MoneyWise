6f307f533d26167b289bbcd7ccf90683
'use strict';

var parseHermesStack = require('./parseHermesStack');
function convertHermesStack(stack) {
  var frames = [];
  for (var entry of stack.entries) {
    if (entry.type !== 'FRAME') {
      continue;
    }
    var location = entry.location,
      functionName = entry.functionName;
    if (location.type === 'NATIVE') {
      continue;
    }
    frames.push({
      methodName: functionName,
      file: location.sourceUrl,
      lineNumber: location.line1Based,
      column: location.type === 'SOURCE' ? location.column1Based - 1 : location.virtualOffset0Based
    });
  }
  return frames;
}
function parseErrorStack(errorStack) {
  if (errorStack == null) {
    return [];
  }
  var stacktraceParser = require('stacktrace-parser');
  var parsedStack = Array.isArray(errorStack) ? errorStack : global.HermesInternal ? convertHermesStack(parseHermesStack(errorStack)) : stacktraceParser.parse(errorStack).map(function (frame) {
    return Object.assign({}, frame, {
      column: frame.column != null ? frame.column - 1 : null
    });
  });
  return parsedStack;
}
module.exports = parseErrorStack;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwYXJzZUhlcm1lc1N0YWNrIiwicmVxdWlyZSIsImNvbnZlcnRIZXJtZXNTdGFjayIsInN0YWNrIiwiZnJhbWVzIiwiZW50cnkiLCJlbnRyaWVzIiwidHlwZSIsImxvY2F0aW9uIiwiZnVuY3Rpb25OYW1lIiwicHVzaCIsIm1ldGhvZE5hbWUiLCJmaWxlIiwic291cmNlVXJsIiwibGluZU51bWJlciIsImxpbmUxQmFzZWQiLCJjb2x1bW4iLCJjb2x1bW4xQmFzZWQiLCJ2aXJ0dWFsT2Zmc2V0MEJhc2VkIiwicGFyc2VFcnJvclN0YWNrIiwiZXJyb3JTdGFjayIsInN0YWNrdHJhY2VQYXJzZXIiLCJwYXJzZWRTdGFjayIsIkFycmF5IiwiaXNBcnJheSIsImdsb2JhbCIsIkhlcm1lc0ludGVybmFsIiwicGFyc2UiLCJtYXAiLCJmcmFtZSIsIk9iamVjdCIsImFzc2lnbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJwYXJzZUVycm9yU3RhY2suanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBmbG93IHN0cmljdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1N0YWNrRnJhbWV9IGZyb20gJy4uL05hdGl2ZUV4Y2VwdGlvbnNNYW5hZ2VyJztcbmltcG9ydCB0eXBlIHtIZXJtZXNQYXJzZWRTdGFja30gZnJvbSAnLi9wYXJzZUhlcm1lc1N0YWNrJztcblxuY29uc3QgcGFyc2VIZXJtZXNTdGFjayA9IHJlcXVpcmUoJy4vcGFyc2VIZXJtZXNTdGFjaycpO1xuXG5mdW5jdGlvbiBjb252ZXJ0SGVybWVzU3RhY2soc3RhY2s6IEhlcm1lc1BhcnNlZFN0YWNrKTogQXJyYXk8U3RhY2tGcmFtZT4ge1xuICBjb25zdCBmcmFtZXM6IEFycmF5PFN0YWNrRnJhbWU+ID0gW107XG4gIGZvciAoY29uc3QgZW50cnkgb2Ygc3RhY2suZW50cmllcykge1xuICAgIGlmIChlbnRyeS50eXBlICE9PSAnRlJBTUUnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3Qge2xvY2F0aW9uLCBmdW5jdGlvbk5hbWV9ID0gZW50cnk7XG4gICAgaWYgKGxvY2F0aW9uLnR5cGUgPT09ICdOQVRJVkUnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgZnJhbWVzLnB1c2goe1xuICAgICAgbWV0aG9kTmFtZTogZnVuY3Rpb25OYW1lLFxuICAgICAgZmlsZTogbG9jYXRpb24uc291cmNlVXJsLFxuICAgICAgbGluZU51bWJlcjogbG9jYXRpb24ubGluZTFCYXNlZCxcbiAgICAgIGNvbHVtbjpcbiAgICAgICAgbG9jYXRpb24udHlwZSA9PT0gJ1NPVVJDRSdcbiAgICAgICAgICA/IGxvY2F0aW9uLmNvbHVtbjFCYXNlZCAtIDFcbiAgICAgICAgICA6IGxvY2F0aW9uLnZpcnR1YWxPZmZzZXQwQmFzZWQsXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZyYW1lcztcbn1cblxuZnVuY3Rpb24gcGFyc2VFcnJvclN0YWNrKGVycm9yU3RhY2s/OiBzdHJpbmcpOiBBcnJheTxTdGFja0ZyYW1lPiB7XG4gIGlmIChlcnJvclN0YWNrID09IG51bGwpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBjb25zdCBzdGFja3RyYWNlUGFyc2VyID0gcmVxdWlyZSgnc3RhY2t0cmFjZS1wYXJzZXInKTtcbiAgY29uc3QgcGFyc2VkU3RhY2sgPSBBcnJheS5pc0FycmF5KGVycm9yU3RhY2spXG4gICAgPyBlcnJvclN0YWNrXG4gICAgOiBnbG9iYWwuSGVybWVzSW50ZXJuYWxcbiAgICA/IGNvbnZlcnRIZXJtZXNTdGFjayhwYXJzZUhlcm1lc1N0YWNrKGVycm9yU3RhY2spKVxuICAgIDogc3RhY2t0cmFjZVBhcnNlci5wYXJzZShlcnJvclN0YWNrKS5tYXAoZnJhbWUgPT4gKHtcbiAgICAgICAgLi4uZnJhbWUsXG4gICAgICAgIGNvbHVtbjogZnJhbWUuY29sdW1uICE9IG51bGwgPyBmcmFtZS5jb2x1bW4gLSAxIDogbnVsbCxcbiAgICAgIH0pKTtcblxuICByZXR1cm4gcGFyc2VkU3RhY2s7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcGFyc2VFcnJvclN0YWNrO1xuIl0sIm1hcHBpbmdzIjoiQUFVQSxZQUFZOztBQUtaLElBQU1BLGdCQUFnQixHQUFHQyxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFFdEQsU0FBU0Msa0JBQWtCQSxDQUFDQyxLQUF3QixFQUFxQjtFQUN2RSxJQUFNQyxNQUF5QixHQUFHLEVBQUU7RUFDcEMsS0FBSyxJQUFNQyxLQUFLLElBQUlGLEtBQUssQ0FBQ0csT0FBTyxFQUFFO0lBQ2pDLElBQUlELEtBQUssQ0FBQ0UsSUFBSSxLQUFLLE9BQU8sRUFBRTtNQUMxQjtJQUNGO0lBQ0EsSUFBT0MsUUFBUSxHQUFrQkgsS0FBSyxDQUEvQkcsUUFBUTtNQUFFQyxZQUFZLEdBQUlKLEtBQUssQ0FBckJJLFlBQVk7SUFDN0IsSUFBSUQsUUFBUSxDQUFDRCxJQUFJLEtBQUssUUFBUSxFQUFFO01BQzlCO0lBQ0Y7SUFDQUgsTUFBTSxDQUFDTSxJQUFJLENBQUM7TUFDVkMsVUFBVSxFQUFFRixZQUFZO01BQ3hCRyxJQUFJLEVBQUVKLFFBQVEsQ0FBQ0ssU0FBUztNQUN4QkMsVUFBVSxFQUFFTixRQUFRLENBQUNPLFVBQVU7TUFDL0JDLE1BQU0sRUFDSlIsUUFBUSxDQUFDRCxJQUFJLEtBQUssUUFBUSxHQUN0QkMsUUFBUSxDQUFDUyxZQUFZLEdBQUcsQ0FBQyxHQUN6QlQsUUFBUSxDQUFDVTtJQUNqQixDQUFDLENBQUM7RUFDSjtFQUNBLE9BQU9kLE1BQU07QUFDZjtBQUVBLFNBQVNlLGVBQWVBLENBQUNDLFVBQW1CLEVBQXFCO0VBQy9ELElBQUlBLFVBQVUsSUFBSSxJQUFJLEVBQUU7SUFDdEIsT0FBTyxFQUFFO0VBQ1g7RUFFQSxJQUFNQyxnQkFBZ0IsR0FBR3BCLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztFQUNyRCxJQUFNcUIsV0FBVyxHQUFHQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0osVUFBVSxDQUFDLEdBQ3pDQSxVQUFVLEdBQ1ZLLE1BQU0sQ0FBQ0MsY0FBYyxHQUNyQnhCLGtCQUFrQixDQUFDRixnQkFBZ0IsQ0FBQ29CLFVBQVUsQ0FBQyxDQUFDLEdBQ2hEQyxnQkFBZ0IsQ0FBQ00sS0FBSyxDQUFDUCxVQUFVLENBQUMsQ0FBQ1EsR0FBRyxDQUFDLFVBQUFDLEtBQUs7SUFBQSxPQUFBQyxNQUFBLENBQUFDLE1BQUEsS0FDdkNGLEtBQUs7TUFDUmIsTUFBTSxFQUFFYSxLQUFLLENBQUNiLE1BQU0sSUFBSSxJQUFJLEdBQUdhLEtBQUssQ0FBQ2IsTUFBTSxHQUFHLENBQUMsR0FBRztJQUFJO0VBQUEsQ0FDdEQsQ0FBQztFQUVQLE9BQU9NLFdBQVc7QUFDcEI7QUFFQVUsTUFBTSxDQUFDQyxPQUFPLEdBQUdkLGVBQWUifQ==