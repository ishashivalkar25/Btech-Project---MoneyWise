5322ce2d06ae1046b3c92c8f61e90cc2
'use strict';

var tslib = require('tslib');
var util = require('@firebase/util');
var app = require('@firebase/app');
var component = require('@firebase/component');
var fetchImpl = require('node-fetch');
var logger = require('@firebase/logger');
function _interopNamespace(e) {
  if (e && e.__esModule) return e;
  var n = Object.create(null);
  if (e) {
    Object.keys(e).forEach(function (k) {
      if (k !== 'default') {
        var d = Object.getOwnPropertyDescriptor(e, k);
        Object.defineProperty(n, k, d.get ? d : {
          enumerable: true,
          get: function get() {
            return e[k];
          }
        });
      }
    });
  }
  n["default"] = e;
  return Object.freeze(n);
}
var fetchImpl__namespace = _interopNamespace(fetchImpl);

/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FactorId = {
  PHONE: 'phone',
  TOTP: 'totp'
};
var ProviderId = {
  FACEBOOK: 'facebook.com',
  GITHUB: 'github.com',
  GOOGLE: 'google.com',
  PASSWORD: 'password',
  PHONE: 'phone',
  TWITTER: 'twitter.com'
};
var SignInMethod = {
  EMAIL_LINK: 'emailLink',
  EMAIL_PASSWORD: 'password',
  FACEBOOK: 'facebook.com',
  GITHUB: 'github.com',
  GOOGLE: 'google.com',
  PHONE: 'phone',
  TWITTER: 'twitter.com'
};
var OperationType = {
  LINK: 'link',
  REAUTHENTICATE: 'reauthenticate',
  SIGN_IN: 'signIn'
};
var ActionCodeOperation = {
  EMAIL_SIGNIN: 'EMAIL_SIGNIN',
  PASSWORD_RESET: 'PASSWORD_RESET',
  RECOVER_EMAIL: 'RECOVER_EMAIL',
  REVERT_SECOND_FACTOR_ADDITION: 'REVERT_SECOND_FACTOR_ADDITION',
  VERIFY_AND_CHANGE_EMAIL: 'VERIFY_AND_CHANGE_EMAIL',
  VERIFY_EMAIL: 'VERIFY_EMAIL'
};

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _debugErrorMap() {
  var _a;
  return _a = {}, _a["admin-restricted-operation"] = 'This operation is restricted to administrators only.', _a["argument-error"] = '', _a["app-not-authorized"] = "This app, identified by the domain where it's hosted, is not " + 'authorized to use Firebase Authentication with the provided API key. ' + 'Review your key configuration in the Google API console.', _a["app-not-installed"] = 'The requested mobile application corresponding to the identifier (' + 'Android package name or iOS bundle ID) provided is not installed on ' + 'this device.', _a["captcha-check-failed"] = 'The reCAPTCHA response token provided is either invalid, expired, ' + 'already used or the domain associated with it does not match the list ' + 'of whitelisted domains.', _a["code-expired"] = 'The SMS code has expired. Please re-send the verification code to try ' + 'again.', _a["cordova-not-ready"] = 'Cordova framework is not ready.', _a["cors-unsupported"] = 'This browser is not supported.', _a["credential-already-in-use"] = 'This credential is already associated with a different user account.', _a["custom-token-mismatch"] = 'The custom token corresponds to a different audience.', _a["requires-recent-login"] = 'This operation is sensitive and requires recent authentication. Log in ' + 'again before retrying this request.', _a["dependent-sdk-initialized-before-auth"] = 'Another Firebase SDK was initialized and is trying to use Auth before Auth is ' + 'initialized. Please be sure to call `initializeAuth` or `getAuth` before ' + 'starting any other Firebase SDK.', _a["dynamic-link-not-activated"] = 'Please activate Dynamic Links in the Firebase Console and agree to the terms and ' + 'conditions.', _a["email-change-needs-verification"] = 'Multi-factor users must always have a verified email.', _a["email-already-in-use"] = 'The email address is already in use by another account.', _a["emulator-config-failed"] = 'Auth instance has already been used to make a network call. Auth can ' + 'no longer be configured to use the emulator. Try calling ' + '"connectAuthEmulator()" sooner.', _a["expired-action-code"] = 'The action code has expired.', _a["cancelled-popup-request"] = 'This operation has been cancelled due to another conflicting popup being opened.', _a["internal-error"] = 'An internal AuthError has occurred.', _a["invalid-app-credential"] = 'The phone verification request contains an invalid application verifier.' + ' The reCAPTCHA token response is either invalid or expired.', _a["invalid-app-id"] = 'The mobile app identifier is not registed for the current project.', _a["invalid-user-token"] = "This user's credential isn't valid for this project. This can happen " + "if the user's token has been tampered with, or if the user isn't for " + 'the project associated with this API key.', _a["invalid-auth-event"] = 'An internal AuthError has occurred.', _a["invalid-verification-code"] = 'The SMS verification code used to create the phone auth credential is ' + 'invalid. Please resend the verification code sms and be sure to use the ' + 'verification code provided by the user.', _a["invalid-continue-uri"] = 'The continue URL provided in the request is invalid.', _a["invalid-cordova-configuration"] = 'The following Cordova plugins must be installed to enable OAuth sign-in: ' + 'cordova-plugin-buildinfo, cordova-universal-links-plugin, ' + 'cordova-plugin-browsertab, cordova-plugin-inappbrowser and ' + 'cordova-plugin-customurlscheme.', _a["invalid-custom-token"] = 'The custom token format is incorrect. Please check the documentation.', _a["invalid-dynamic-link-domain"] = 'The provided dynamic link domain is not configured or authorized for the current project.', _a["invalid-email"] = 'The email address is badly formatted.', _a["invalid-emulator-scheme"] = 'Emulator URL must start with a valid scheme (http:// or https://).', _a["invalid-api-key"] = 'Your API key is invalid, please check you have copied it correctly.', _a["invalid-cert-hash"] = 'The SHA-1 certificate hash provided is invalid.', _a["invalid-credential"] = 'The supplied auth credential is malformed or has expired.', _a["invalid-message-payload"] = 'The email template corresponding to this action contains invalid characters in its message. ' + 'Please fix by going to the Auth email templates section in the Firebase Console.', _a["invalid-multi-factor-session"] = 'The request does not contain a valid proof of first factor successful sign-in.', _a["invalid-oauth-provider"] = 'EmailAuthProvider is not supported for this operation. This operation ' + 'only supports OAuth providers.', _a["invalid-oauth-client-id"] = 'The OAuth client ID provided is either invalid or does not match the ' + 'specified API key.', _a["unauthorized-domain"] = 'This domain is not authorized for OAuth operations for your Firebase ' + 'project. Edit the list of authorized domains from the Firebase console.', _a["invalid-action-code"] = 'The action code is invalid. This can happen if the code is malformed, ' + 'expired, or has already been used.', _a["wrong-password"] = 'The password is invalid or the user does not have a password.', _a["invalid-persistence-type"] = 'The specified persistence type is invalid. It can only be local, session or none.', _a["invalid-phone-number"] = 'The format of the phone number provided is incorrect. Please enter the ' + 'phone number in a format that can be parsed into E.164 format. E.164 ' + 'phone numbers are written in the format [+][country code][subscriber ' + 'number including area code].', _a["invalid-provider-id"] = 'The specified provider ID is invalid.', _a["invalid-recipient-email"] = 'The email corresponding to this action failed to send as the provided ' + 'recipient email address is invalid.', _a["invalid-sender"] = 'The email template corresponding to this action contains an invalid sender email or name. ' + 'Please fix by going to the Auth email templates section in the Firebase Console.', _a["invalid-verification-id"] = 'The verification ID used to create the phone auth credential is invalid.', _a["invalid-tenant-id"] = "The Auth instance's tenant ID is invalid.", _a["login-blocked"] = 'Login blocked by user-provided method: {$originalMessage}', _a["missing-android-pkg-name"] = 'An Android Package Name must be provided if the Android App is required to be installed.', _a["auth-domain-config-required"] = 'Be sure to include authDomain when calling firebase.initializeApp(), ' + 'by following the instructions in the Firebase console.', _a["missing-app-credential"] = 'The phone verification request is missing an application verifier ' + 'assertion. A reCAPTCHA response token needs to be provided.', _a["missing-verification-code"] = 'The phone auth credential was created with an empty SMS verification code.', _a["missing-continue-uri"] = 'A continue URL must be provided in the request.', _a["missing-iframe-start"] = 'An internal AuthError has occurred.', _a["missing-ios-bundle-id"] = 'An iOS Bundle ID must be provided if an App Store ID is provided.', _a["missing-or-invalid-nonce"] = 'The request does not contain a valid nonce. This can occur if the ' + 'SHA-256 hash of the provided raw nonce does not match the hashed nonce ' + 'in the ID token payload.', _a["missing-password"] = 'A non-empty password must be provided', _a["missing-multi-factor-info"] = 'No second factor identifier is provided.', _a["missing-multi-factor-session"] = 'The request is missing proof of first factor successful sign-in.', _a["missing-phone-number"] = 'To send verification codes, provide a phone number for the recipient.', _a["missing-verification-id"] = 'The phone auth credential was created with an empty verification ID.', _a["app-deleted"] = 'This instance of FirebaseApp has been deleted.', _a["multi-factor-info-not-found"] = 'The user does not have a second factor matching the identifier provided.', _a["multi-factor-auth-required"] = 'Proof of ownership of a second factor is required to complete sign-in.', _a["account-exists-with-different-credential"] = 'An account already exists with the same email address but different ' + 'sign-in credentials. Sign in using a provider associated with this ' + 'email address.', _a["network-request-failed"] = 'A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.', _a["no-auth-event"] = 'An internal AuthError has occurred.', _a["no-such-provider"] = 'User was not linked to an account with the given provider.', _a["null-user"] = 'A null user object was provided as the argument for an operation which ' + 'requires a non-null user object.', _a["operation-not-allowed"] = 'The given sign-in provider is disabled for this Firebase project. ' + 'Enable it in the Firebase console, under the sign-in method tab of the ' + 'Auth section.', _a["operation-not-supported-in-this-environment"] = 'This operation is not supported in the environment this application is ' + 'running on. "location.protocol" must be http, https or chrome-extension' + ' and web storage must be enabled.', _a["popup-blocked"] = 'Unable to establish a connection with the popup. It may have been blocked by the browser.', _a["popup-closed-by-user"] = 'The popup has been closed by the user before finalizing the operation.', _a["provider-already-linked"] = 'User can only be linked to one identity for the given provider.', _a["quota-exceeded"] = "The project's quota for this operation has been exceeded.", _a["redirect-cancelled-by-user"] = 'The redirect operation has been cancelled by the user before finalizing.', _a["redirect-operation-pending"] = 'A redirect sign-in operation is already pending.', _a["rejected-credential"] = 'The request contains malformed or mismatching credentials.', _a["second-factor-already-in-use"] = 'The second factor is already enrolled on this account.', _a["maximum-second-factor-count-exceeded"] = 'The maximum allowed number of second factors on a user has been exceeded.', _a["tenant-id-mismatch"] = "The provided tenant ID does not match the Auth instance's tenant ID", _a["timeout"] = 'The operation has timed out.', _a["user-token-expired"] = "The user's credential is no longer valid. The user must sign in again.", _a["too-many-requests"] = 'We have blocked all requests from this device due to unusual activity. ' + 'Try again later.', _a["unauthorized-continue-uri"] = 'The domain of the continue URL is not whitelisted.  Please whitelist ' + 'the domain in the Firebase console.', _a["unsupported-first-factor"] = 'Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.', _a["unsupported-persistence-type"] = 'The current environment does not support the specified persistence type.', _a["unsupported-tenant-operation"] = 'This operation is not supported in a multi-tenant context.', _a["unverified-email"] = 'The operation requires a verified email.', _a["user-cancelled"] = 'The user did not grant your application the permissions it requested.', _a["user-not-found"] = 'There is no user record corresponding to this identifier. The user may ' + 'have been deleted.', _a["user-disabled"] = 'The user account has been disabled by an administrator.', _a["user-mismatch"] = 'The supplied credentials do not correspond to the previously signed in user.', _a["user-signed-out"] = '', _a["weak-password"] = 'The password must be 6 characters long or more.', _a["web-storage-unsupported"] = 'This browser is not supported or 3rd party cookies and data may be disabled.', _a["already-initialized"] = 'initializeAuth() has already been called with ' + 'different options. To avoid this error, call initializeAuth() with the ' + 'same options as when it was originally called, or call getAuth() to return the' + ' already initialized instance.', _a["missing-recaptcha-token"] = 'The reCAPTCHA token is missing when sending request to the backend.', _a["invalid-recaptcha-token"] = 'The reCAPTCHA token is invalid when sending request to the backend.', _a["invalid-recaptcha-action"] = 'The reCAPTCHA action is invalid when sending request to the backend.', _a["recaptcha-not-enabled"] = 'reCAPTCHA Enterprise integration is not enabled for this project.', _a["missing-client-type"] = 'The reCAPTCHA client type is missing when sending request to the backend.', _a["missing-recaptcha-version"] = 'The reCAPTCHA version is missing when sending request to the backend.', _a["invalid-req-type"] = 'Invalid request parameters.', _a["invalid-recaptcha-version"] = 'The reCAPTCHA version is invalid when sending request to the backend.', _a;
}
function _prodErrorMap() {
  var _a;
  return _a = {}, _a["dependent-sdk-initialized-before-auth"] = 'Another Firebase SDK was initialized and is trying to use Auth before Auth is ' + 'initialized. Please be sure to call `initializeAuth` or `getAuth` before ' + 'starting any other Firebase SDK.', _a;
}
var debugErrorMap = _debugErrorMap;
var prodErrorMap = _prodErrorMap;
var _DEFAULT_AUTH_ERROR_FACTORY = new util.ErrorFactory('auth', 'Firebase', _prodErrorMap());
var AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY = {
  ADMIN_ONLY_OPERATION: 'auth/admin-restricted-operation',
  ARGUMENT_ERROR: 'auth/argument-error',
  APP_NOT_AUTHORIZED: 'auth/app-not-authorized',
  APP_NOT_INSTALLED: 'auth/app-not-installed',
  CAPTCHA_CHECK_FAILED: 'auth/captcha-check-failed',
  CODE_EXPIRED: 'auth/code-expired',
  CORDOVA_NOT_READY: 'auth/cordova-not-ready',
  CORS_UNSUPPORTED: 'auth/cors-unsupported',
  CREDENTIAL_ALREADY_IN_USE: 'auth/credential-already-in-use',
  CREDENTIAL_MISMATCH: 'auth/custom-token-mismatch',
  CREDENTIAL_TOO_OLD_LOGIN_AGAIN: 'auth/requires-recent-login',
  DEPENDENT_SDK_INIT_BEFORE_AUTH: 'auth/dependent-sdk-initialized-before-auth',
  DYNAMIC_LINK_NOT_ACTIVATED: 'auth/dynamic-link-not-activated',
  EMAIL_CHANGE_NEEDS_VERIFICATION: 'auth/email-change-needs-verification',
  EMAIL_EXISTS: 'auth/email-already-in-use',
  EMULATOR_CONFIG_FAILED: 'auth/emulator-config-failed',
  EXPIRED_OOB_CODE: 'auth/expired-action-code',
  EXPIRED_POPUP_REQUEST: 'auth/cancelled-popup-request',
  INTERNAL_ERROR: 'auth/internal-error',
  INVALID_API_KEY: 'auth/invalid-api-key',
  INVALID_APP_CREDENTIAL: 'auth/invalid-app-credential',
  INVALID_APP_ID: 'auth/invalid-app-id',
  INVALID_AUTH: 'auth/invalid-user-token',
  INVALID_AUTH_EVENT: 'auth/invalid-auth-event',
  INVALID_CERT_HASH: 'auth/invalid-cert-hash',
  INVALID_CODE: 'auth/invalid-verification-code',
  INVALID_CONTINUE_URI: 'auth/invalid-continue-uri',
  INVALID_CORDOVA_CONFIGURATION: 'auth/invalid-cordova-configuration',
  INVALID_CUSTOM_TOKEN: 'auth/invalid-custom-token',
  INVALID_DYNAMIC_LINK_DOMAIN: 'auth/invalid-dynamic-link-domain',
  INVALID_EMAIL: 'auth/invalid-email',
  INVALID_EMULATOR_SCHEME: 'auth/invalid-emulator-scheme',
  INVALID_IDP_RESPONSE: 'auth/invalid-credential',
  INVALID_MESSAGE_PAYLOAD: 'auth/invalid-message-payload',
  INVALID_MFA_SESSION: 'auth/invalid-multi-factor-session',
  INVALID_OAUTH_CLIENT_ID: 'auth/invalid-oauth-client-id',
  INVALID_OAUTH_PROVIDER: 'auth/invalid-oauth-provider',
  INVALID_OOB_CODE: 'auth/invalid-action-code',
  INVALID_ORIGIN: 'auth/unauthorized-domain',
  INVALID_PASSWORD: 'auth/wrong-password',
  INVALID_PERSISTENCE: 'auth/invalid-persistence-type',
  INVALID_PHONE_NUMBER: 'auth/invalid-phone-number',
  INVALID_PROVIDER_ID: 'auth/invalid-provider-id',
  INVALID_RECIPIENT_EMAIL: 'auth/invalid-recipient-email',
  INVALID_SENDER: 'auth/invalid-sender',
  INVALID_SESSION_INFO: 'auth/invalid-verification-id',
  INVALID_TENANT_ID: 'auth/invalid-tenant-id',
  MFA_INFO_NOT_FOUND: 'auth/multi-factor-info-not-found',
  MFA_REQUIRED: 'auth/multi-factor-auth-required',
  MISSING_ANDROID_PACKAGE_NAME: 'auth/missing-android-pkg-name',
  MISSING_APP_CREDENTIAL: 'auth/missing-app-credential',
  MISSING_AUTH_DOMAIN: 'auth/auth-domain-config-required',
  MISSING_CODE: 'auth/missing-verification-code',
  MISSING_CONTINUE_URI: 'auth/missing-continue-uri',
  MISSING_IFRAME_START: 'auth/missing-iframe-start',
  MISSING_IOS_BUNDLE_ID: 'auth/missing-ios-bundle-id',
  MISSING_OR_INVALID_NONCE: 'auth/missing-or-invalid-nonce',
  MISSING_MFA_INFO: 'auth/missing-multi-factor-info',
  MISSING_MFA_SESSION: 'auth/missing-multi-factor-session',
  MISSING_PHONE_NUMBER: 'auth/missing-phone-number',
  MISSING_SESSION_INFO: 'auth/missing-verification-id',
  MODULE_DESTROYED: 'auth/app-deleted',
  NEED_CONFIRMATION: 'auth/account-exists-with-different-credential',
  NETWORK_REQUEST_FAILED: 'auth/network-request-failed',
  NULL_USER: 'auth/null-user',
  NO_AUTH_EVENT: 'auth/no-auth-event',
  NO_SUCH_PROVIDER: 'auth/no-such-provider',
  OPERATION_NOT_ALLOWED: 'auth/operation-not-allowed',
  OPERATION_NOT_SUPPORTED: 'auth/operation-not-supported-in-this-environment',
  POPUP_BLOCKED: 'auth/popup-blocked',
  POPUP_CLOSED_BY_USER: 'auth/popup-closed-by-user',
  PROVIDER_ALREADY_LINKED: 'auth/provider-already-linked',
  QUOTA_EXCEEDED: 'auth/quota-exceeded',
  REDIRECT_CANCELLED_BY_USER: 'auth/redirect-cancelled-by-user',
  REDIRECT_OPERATION_PENDING: 'auth/redirect-operation-pending',
  REJECTED_CREDENTIAL: 'auth/rejected-credential',
  SECOND_FACTOR_ALREADY_ENROLLED: 'auth/second-factor-already-in-use',
  SECOND_FACTOR_LIMIT_EXCEEDED: 'auth/maximum-second-factor-count-exceeded',
  TENANT_ID_MISMATCH: 'auth/tenant-id-mismatch',
  TIMEOUT: 'auth/timeout',
  TOKEN_EXPIRED: 'auth/user-token-expired',
  TOO_MANY_ATTEMPTS_TRY_LATER: 'auth/too-many-requests',
  UNAUTHORIZED_DOMAIN: 'auth/unauthorized-continue-uri',
  UNSUPPORTED_FIRST_FACTOR: 'auth/unsupported-first-factor',
  UNSUPPORTED_PERSISTENCE: 'auth/unsupported-persistence-type',
  UNSUPPORTED_TENANT_OPERATION: 'auth/unsupported-tenant-operation',
  UNVERIFIED_EMAIL: 'auth/unverified-email',
  USER_CANCELLED: 'auth/user-cancelled',
  USER_DELETED: 'auth/user-not-found',
  USER_DISABLED: 'auth/user-disabled',
  USER_MISMATCH: 'auth/user-mismatch',
  USER_SIGNED_OUT: 'auth/user-signed-out',
  WEAK_PASSWORD: 'auth/weak-password',
  WEB_STORAGE_UNSUPPORTED: 'auth/web-storage-unsupported',
  ALREADY_INITIALIZED: 'auth/already-initialized',
  RECAPTCHA_NOT_ENABLED: 'auth/recaptcha-not-enabled',
  MISSING_RECAPTCHA_TOKEN: 'auth/missing-recaptcha-token',
  INVALID_RECAPTCHA_TOKEN: 'auth/invalid-recaptcha-token',
  INVALID_RECAPTCHA_ACTION: 'auth/invalid-recaptcha-action',
  MISSING_CLIENT_TYPE: 'auth/missing-client-type',
  MISSING_RECAPTCHA_VERSION: 'auth/missing-recaptcha-version',
  INVALID_RECAPTCHA_VERSION: 'auth/invalid-recaptcha-version',
  INVALID_REQ_TYPE: 'auth/invalid-req-type'
};

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var logClient = new logger.Logger('@firebase/auth');
function _logWarn(msg) {
  var args = [];
  for (var _i = 1; _i < arguments.length; _i++) {
    args[_i - 1] = arguments[_i];
  }
  if (logClient.logLevel <= logger.LogLevel.WARN) {
    logClient.warn.apply(logClient, tslib.__spreadArray(["Auth (".concat(app.SDK_VERSION, "): ").concat(msg)], args, false));
  }
}
function _logError(msg) {
  var args = [];
  for (var _i = 1; _i < arguments.length; _i++) {
    args[_i - 1] = arguments[_i];
  }
  if (logClient.logLevel <= logger.LogLevel.ERROR) {
    logClient.error.apply(logClient, tslib.__spreadArray(["Auth (".concat(app.SDK_VERSION, "): ").concat(msg)], args, false));
  }
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _fail(authOrCode) {
  var rest = [];
  for (var _i = 1; _i < arguments.length; _i++) {
    rest[_i - 1] = arguments[_i];
  }
  throw createErrorInternal.apply(void 0, tslib.__spreadArray([authOrCode], rest, false));
}
function _createError(authOrCode) {
  var rest = [];
  for (var _i = 1; _i < arguments.length; _i++) {
    rest[_i - 1] = arguments[_i];
  }
  return createErrorInternal.apply(void 0, tslib.__spreadArray([authOrCode], rest, false));
}
function _errorWithCustomMessage(auth, code, message) {
  var _a;
  var errorMap = tslib.__assign(tslib.__assign({}, prodErrorMap()), (_a = {}, _a[code] = message, _a));
  var factory = new util.ErrorFactory('auth', 'Firebase', errorMap);
  return factory.create(code, {
    appName: auth.name
  });
}
function createErrorInternal(authOrCode) {
  var _a;
  var rest = [];
  for (var _i = 1; _i < arguments.length; _i++) {
    rest[_i - 1] = arguments[_i];
  }
  if (typeof authOrCode !== 'string') {
    var code = rest[0];
    var fullParams = tslib.__spreadArray([], rest.slice(1), true);
    if (fullParams[0]) {
      fullParams[0].appName = authOrCode.name;
    }
    return (_a = authOrCode._errorFactory).create.apply(_a, tslib.__spreadArray([code], fullParams, false));
  }
  return _DEFAULT_AUTH_ERROR_FACTORY.create.apply(_DEFAULT_AUTH_ERROR_FACTORY, tslib.__spreadArray([authOrCode], rest, false));
}
function _assert(assertion, authOrCode) {
  var rest = [];
  for (var _i = 2; _i < arguments.length; _i++) {
    rest[_i - 2] = arguments[_i];
  }
  if (!assertion) {
    throw createErrorInternal.apply(void 0, tslib.__spreadArray([authOrCode], rest, false));
  }
}
function debugFail(failure) {
  var message = "INTERNAL ASSERTION FAILED: " + failure;
  _logError(message);
  throw new Error(message);
}
function debugAssert(assertion, message) {
  if (!assertion) {
    debugFail(message);
  }
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _getCurrentUrl() {
  var _a;
  return typeof self !== 'undefined' && ((_a = self.location) === null || _a === void 0 ? void 0 : _a.href) || '';
}
function _isHttpOrHttps() {
  return _getCurrentScheme() === 'http:' || _getCurrentScheme() === 'https:';
}
function _getCurrentScheme() {
  var _a;
  return typeof self !== 'undefined' && ((_a = self.location) === null || _a === void 0 ? void 0 : _a.protocol) || null;
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _isOnline() {
  if (typeof navigator !== 'undefined' && navigator && 'onLine' in navigator && typeof navigator.onLine === 'boolean' && (_isHttpOrHttps() || util.isBrowserExtension() || 'connection' in navigator)) {
    return navigator.onLine;
  }
  return true;
}
function _getUserLanguage() {
  if (typeof navigator === 'undefined') {
    return null;
  }
  var navigatorLanguage = navigator;
  return navigatorLanguage.languages && navigatorLanguage.languages[0] || navigatorLanguage.language || null;
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Delay = function () {
  function Delay(shortDelay, longDelay) {
    this.shortDelay = shortDelay;
    this.longDelay = longDelay;
    debugAssert(longDelay > shortDelay, 'Short delay should be less than long delay!');
    this.isMobile = util.isMobileCordova() || util.isReactNative();
  }
  Delay.prototype.get = function () {
    if (!_isOnline()) {
      return Math.min(5000, this.shortDelay);
    }
    return this.isMobile ? this.longDelay : this.shortDelay;
  };
  return Delay;
}();

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _emulatorUrl(config, path) {
  debugAssert(config.emulator, 'Emulator should always be set here');
  var url = config.emulator.url;
  if (!path) {
    return url;
  }
  return "".concat(url).concat(path.startsWith('/') ? path.slice(1) : path);
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FetchProvider = function () {
  function FetchProvider() {}
  FetchProvider.initialize = function (fetchImpl, headersImpl, responseImpl) {
    this.fetchImpl = fetchImpl;
    if (headersImpl) {
      this.headersImpl = headersImpl;
    }
    if (responseImpl) {
      this.responseImpl = responseImpl;
    }
  };
  FetchProvider.fetch = function () {
    if (this.fetchImpl) {
      return this.fetchImpl;
    }
    if (typeof self !== 'undefined' && 'fetch' in self) {
      return self.fetch;
    }
    debugFail('Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill');
  };
  FetchProvider.headers = function () {
    if (this.headersImpl) {
      return this.headersImpl;
    }
    if (typeof self !== 'undefined' && 'Headers' in self) {
      return self.Headers;
    }
    debugFail('Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill');
  };
  FetchProvider.response = function () {
    if (this.responseImpl) {
      return this.responseImpl;
    }
    if (typeof self !== 'undefined' && 'Response' in self) {
      return self.Response;
    }
    debugFail('Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill');
  };
  return FetchProvider;
}();

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _a$1;
var SERVER_ERROR_MAP = (_a$1 = {}, _a$1["CREDENTIAL_MISMATCH"] = "custom-token-mismatch", _a$1["MISSING_CUSTOM_TOKEN"] = "internal-error", _a$1["INVALID_IDENTIFIER"] = "invalid-email", _a$1["MISSING_CONTINUE_URI"] = "internal-error", _a$1["INVALID_PASSWORD"] = "wrong-password", _a$1["MISSING_PASSWORD"] = "missing-password", _a$1["EMAIL_EXISTS"] = "email-already-in-use", _a$1["PASSWORD_LOGIN_DISABLED"] = "operation-not-allowed", _a$1["INVALID_IDP_RESPONSE"] = "invalid-credential", _a$1["INVALID_PENDING_TOKEN"] = "invalid-credential", _a$1["FEDERATED_USER_ID_ALREADY_LINKED"] = "credential-already-in-use", _a$1["MISSING_REQ_TYPE"] = "internal-error", _a$1["EMAIL_NOT_FOUND"] = "user-not-found", _a$1["RESET_PASSWORD_EXCEED_LIMIT"] = "too-many-requests", _a$1["EXPIRED_OOB_CODE"] = "expired-action-code", _a$1["INVALID_OOB_CODE"] = "invalid-action-code", _a$1["MISSING_OOB_CODE"] = "internal-error", _a$1["CREDENTIAL_TOO_OLD_LOGIN_AGAIN"] = "requires-recent-login", _a$1["INVALID_ID_TOKEN"] = "invalid-user-token", _a$1["TOKEN_EXPIRED"] = "user-token-expired", _a$1["USER_NOT_FOUND"] = "user-token-expired", _a$1["TOO_MANY_ATTEMPTS_TRY_LATER"] = "too-many-requests", _a$1["INVALID_CODE"] = "invalid-verification-code", _a$1["INVALID_SESSION_INFO"] = "invalid-verification-id", _a$1["INVALID_TEMPORARY_PROOF"] = "invalid-credential", _a$1["MISSING_SESSION_INFO"] = "missing-verification-id", _a$1["SESSION_EXPIRED"] = "code-expired", _a$1["MISSING_ANDROID_PACKAGE_NAME"] = "missing-android-pkg-name", _a$1["UNAUTHORIZED_DOMAIN"] = "unauthorized-continue-uri", _a$1["INVALID_OAUTH_CLIENT_ID"] = "invalid-oauth-client-id", _a$1["ADMIN_ONLY_OPERATION"] = "admin-restricted-operation", _a$1["INVALID_MFA_PENDING_CREDENTIAL"] = "invalid-multi-factor-session", _a$1["MFA_ENROLLMENT_NOT_FOUND"] = "multi-factor-info-not-found", _a$1["MISSING_MFA_ENROLLMENT_ID"] = "missing-multi-factor-info", _a$1["MISSING_MFA_PENDING_CREDENTIAL"] = "missing-multi-factor-session", _a$1["SECOND_FACTOR_EXISTS"] = "second-factor-already-in-use", _a$1["SECOND_FACTOR_LIMIT_EXCEEDED"] = "maximum-second-factor-count-exceeded", _a$1["BLOCKING_FUNCTION_ERROR_RESPONSE"] = "internal-error", _a$1["RECAPTCHA_NOT_ENABLED"] = "recaptcha-not-enabled", _a$1["MISSING_RECAPTCHA_TOKEN"] = "missing-recaptcha-token", _a$1["INVALID_RECAPTCHA_TOKEN"] = "invalid-recaptcha-token", _a$1["INVALID_RECAPTCHA_ACTION"] = "invalid-recaptcha-action", _a$1["MISSING_CLIENT_TYPE"] = "missing-client-type", _a$1["MISSING_RECAPTCHA_VERSION"] = "missing-recaptcha-version", _a$1["INVALID_RECAPTCHA_VERSION"] = "invalid-recaptcha-version", _a$1["INVALID_REQ_TYPE"] = "invalid-req-type", _a$1);

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DEFAULT_API_TIMEOUT_MS = new Delay(30000, 60000);
function _addTidIfNecessary(auth, request) {
  if (auth.tenantId && !request.tenantId) {
    return tslib.__assign(tslib.__assign({}, request), {
      tenantId: auth.tenantId
    });
  }
  return request;
}
function _performApiRequest(auth, method, path, request, customErrorMap) {
  if (customErrorMap === void 0) {
    customErrorMap = {};
  }
  return tslib.__awaiter(this, void 0, void 0, function () {
    var _this = this;
    return tslib.__generator(this, function (_a) {
      return [2, _performFetchWithErrorHandling(auth, customErrorMap, function () {
        return tslib.__awaiter(_this, void 0, void 0, function () {
          var body, params, query, headers;
          return tslib.__generator(this, function (_a) {
            switch (_a.label) {
              case 0:
                body = {};
                params = {};
                if (request) {
                  if (method === "GET") {
                    params = request;
                  } else {
                    body = {
                      body: JSON.stringify(request)
                    };
                  }
                }
                query = util.querystring(tslib.__assign({
                  key: auth.config.apiKey
                }, params)).slice(1);
                return [4, auth._getAdditionalHeaders()];
              case 1:
                headers = _a.sent();
                headers["Content-Type"] = 'application/json';
                if (auth.languageCode) {
                  headers["X-Firebase-Locale"] = auth.languageCode;
                }
                return [2, FetchProvider.fetch()(_getFinalTarget(auth, auth.config.apiHost, path, query), tslib.__assign({
                  method: method,
                  headers: headers,
                  referrerPolicy: 'no-referrer'
                }, body))];
            }
          });
        });
      })];
    });
  });
}
function _performFetchWithErrorHandling(auth, customErrorMap, fetchFn) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var errorMap, networkTimeout, response, json, errorMessage, _a, serverErrorCode, serverErrorMessage, authError, e_1;
    return tslib.__generator(this, function (_b) {
      switch (_b.label) {
        case 0:
          auth._canInitEmulator = false;
          errorMap = tslib.__assign(tslib.__assign({}, SERVER_ERROR_MAP), customErrorMap);
          _b.label = 1;
        case 1:
          _b.trys.push([1, 4,, 5]);
          networkTimeout = new NetworkTimeout(auth);
          return [4, Promise.race([fetchFn(), networkTimeout.promise])];
        case 2:
          response = _b.sent();
          networkTimeout.clearNetworkTimeout();
          return [4, response.json()];
        case 3:
          json = _b.sent();
          if ('needConfirmation' in json) {
            throw _makeTaggedError(auth, "account-exists-with-different-credential", json);
          }
          if (response.ok && !('errorMessage' in json)) {
            return [2, json];
          } else {
            errorMessage = response.ok ? json.errorMessage : json.error.message;
            _a = errorMessage.split(' : '), serverErrorCode = _a[0], serverErrorMessage = _a[1];
            if (serverErrorCode === "FEDERATED_USER_ID_ALREADY_LINKED") {
              throw _makeTaggedError(auth, "credential-already-in-use", json);
            } else if (serverErrorCode === "EMAIL_EXISTS") {
              throw _makeTaggedError(auth, "email-already-in-use", json);
            } else if (serverErrorCode === "USER_DISABLED") {
              throw _makeTaggedError(auth, "user-disabled", json);
            }
            authError = errorMap[serverErrorCode] || serverErrorCode.toLowerCase().replace(/[_\s]+/g, '-');
            if (serverErrorMessage) {
              throw _errorWithCustomMessage(auth, authError, serverErrorMessage);
            } else {
              _fail(auth, authError);
            }
          }
          return [3, 5];
        case 4:
          e_1 = _b.sent();
          if (e_1 instanceof util.FirebaseError) {
            throw e_1;
          }
          _fail(auth, "network-request-failed", {
            'message': String(e_1)
          });
          return [3, 5];
        case 5:
          return [2];
      }
    });
  });
}
function _performSignInRequest(auth, method, path, request, customErrorMap) {
  if (customErrorMap === void 0) {
    customErrorMap = {};
  }
  return tslib.__awaiter(this, void 0, void 0, function () {
    var serverResponse;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          return [4, _performApiRequest(auth, method, path, request, customErrorMap)];
        case 1:
          serverResponse = _a.sent();
          if ('mfaPendingCredential' in serverResponse) {
            _fail(auth, "multi-factor-auth-required", {
              _serverResponse: serverResponse
            });
          }
          return [2, serverResponse];
      }
    });
  });
}
function _getFinalTarget(auth, host, path, query) {
  var base = "".concat(host).concat(path, "?").concat(query);
  if (!auth.config.emulator) {
    return "".concat(auth.config.apiScheme, "://").concat(base);
  }
  return _emulatorUrl(auth.config, base);
}
var NetworkTimeout = function () {
  function NetworkTimeout(auth) {
    var _this = this;
    this.auth = auth;
    this.timer = null;
    this.promise = new Promise(function (_, reject) {
      _this.timer = setTimeout(function () {
        return reject(_createError(_this.auth, "network-request-failed"));
      }, DEFAULT_API_TIMEOUT_MS.get());
    });
  }
  NetworkTimeout.prototype.clearNetworkTimeout = function () {
    clearTimeout(this.timer);
  };
  return NetworkTimeout;
}();
function _makeTaggedError(auth, code, response) {
  var errorParams = {
    appName: auth.name
  };
  if (response.email) {
    errorParams.email = response.email;
  }
  if (response.phoneNumber) {
    errorParams.phoneNumber = response.phoneNumber;
  }
  var error = _createError(auth, code, errorParams);
  error.customData._tokenResponse = response;
  return error;
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function deleteAccount(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performApiRequest(auth, "POST", "/v1/accounts:delete", request)];
    });
  });
}
function deleteLinkedAccounts(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performApiRequest(auth, "POST", "/v1/accounts:update", request)];
    });
  });
}
function getAccountInfo(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performApiRequest(auth, "POST", "/v1/accounts:lookup", request)];
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function utcTimestampToDateString(utcTimestamp) {
  if (!utcTimestamp) {
    return undefined;
  }
  try {
    var date = new Date(Number(utcTimestamp));
    if (!isNaN(date.getTime())) {
      return date.toUTCString();
    }
  } catch (e) {}
  return undefined;
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function getIdToken(user, forceRefresh) {
  if (forceRefresh === void 0) {
    forceRefresh = false;
  }
  return util.getModularInstance(user).getIdToken(forceRefresh);
}
function getIdTokenResult(user, forceRefresh) {
  if (forceRefresh === void 0) {
    forceRefresh = false;
  }
  return tslib.__awaiter(this, void 0, void 0, function () {
    var userInternal, token, claims, firebase, signInProvider;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          userInternal = util.getModularInstance(user);
          return [4, userInternal.getIdToken(forceRefresh)];
        case 1:
          token = _a.sent();
          claims = _parseToken(token);
          _assert(claims && claims.exp && claims.auth_time && claims.iat, userInternal.auth, "internal-error");
          firebase = typeof claims.firebase === 'object' ? claims.firebase : undefined;
          signInProvider = firebase === null || firebase === void 0 ? void 0 : firebase['sign_in_provider'];
          return [2, {
            claims: claims,
            token: token,
            authTime: utcTimestampToDateString(secondsStringToMilliseconds(claims.auth_time)),
            issuedAtTime: utcTimestampToDateString(secondsStringToMilliseconds(claims.iat)),
            expirationTime: utcTimestampToDateString(secondsStringToMilliseconds(claims.exp)),
            signInProvider: signInProvider || null,
            signInSecondFactor: (firebase === null || firebase === void 0 ? void 0 : firebase['sign_in_second_factor']) || null
          }];
      }
    });
  });
}
function secondsStringToMilliseconds(seconds) {
  return Number(seconds) * 1000;
}
function _parseToken(token) {
  var _a = token.split('.'),
    algorithm = _a[0],
    payload = _a[1],
    signature = _a[2];
  if (algorithm === undefined || payload === undefined || signature === undefined) {
    _logError('JWT malformed, contained fewer than 3 sections');
    return null;
  }
  try {
    var decoded = util.base64Decode(payload);
    if (!decoded) {
      _logError('Failed to decode base64 JWT payload');
      return null;
    }
    return JSON.parse(decoded);
  } catch (e) {
    _logError('Caught error parsing JWT payload as JSON', e === null || e === void 0 ? void 0 : e.toString());
    return null;
  }
}
function _tokenExpiresIn(token) {
  var parsedToken = _parseToken(token);
  _assert(parsedToken, "internal-error");
  _assert(typeof parsedToken.exp !== 'undefined', "internal-error");
  _assert(typeof parsedToken.iat !== 'undefined', "internal-error");
  return Number(parsedToken.exp) - Number(parsedToken.iat);
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _logoutIfInvalidated(user, promise, bypassAuthState) {
  if (bypassAuthState === void 0) {
    bypassAuthState = false;
  }
  return tslib.__awaiter(this, void 0, void 0, function () {
    var e_1;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          if (bypassAuthState) {
            return [2, promise];
          }
          _a.label = 1;
        case 1:
          _a.trys.push([1, 3,, 6]);
          return [4, promise];
        case 2:
          return [2, _a.sent()];
        case 3:
          e_1 = _a.sent();
          if (!(e_1 instanceof util.FirebaseError && isUserInvalidated(e_1))) return [3, 5];
          if (!(user.auth.currentUser === user)) return [3, 5];
          return [4, user.auth.signOut()];
        case 4:
          _a.sent();
          _a.label = 5;
        case 5:
          throw e_1;
        case 6:
          return [2];
      }
    });
  });
}
function isUserInvalidated(_a) {
  var code = _a.code;
  return code === "auth/".concat("user-disabled") || code === "auth/".concat("user-token-expired");
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ProactiveRefresh = function () {
  function ProactiveRefresh(user) {
    this.user = user;
    this.isRunning = false;
    this.timerId = null;
    this.errorBackoff = 30000;
  }
  ProactiveRefresh.prototype._start = function () {
    if (this.isRunning) {
      return;
    }
    this.isRunning = true;
    this.schedule();
  };
  ProactiveRefresh.prototype._stop = function () {
    if (!this.isRunning) {
      return;
    }
    this.isRunning = false;
    if (this.timerId !== null) {
      clearTimeout(this.timerId);
    }
  };
  ProactiveRefresh.prototype.getInterval = function (wasError) {
    var _a;
    if (wasError) {
      var interval = this.errorBackoff;
      this.errorBackoff = Math.min(this.errorBackoff * 2, 960000);
      return interval;
    } else {
      this.errorBackoff = 30000;
      var expTime = (_a = this.user.stsTokenManager.expirationTime) !== null && _a !== void 0 ? _a : 0;
      var interval = expTime - Date.now() - 300000;
      return Math.max(0, interval);
    }
  };
  ProactiveRefresh.prototype.schedule = function (wasError) {
    var _this = this;
    if (wasError === void 0) {
      wasError = false;
    }
    if (!this.isRunning) {
      return;
    }
    var interval = this.getInterval(wasError);
    this.timerId = setTimeout(function () {
      return tslib.__awaiter(_this, void 0, void 0, function () {
        return tslib.__generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              return [4, this.iteration()];
            case 1:
              _a.sent();
              return [2];
          }
        });
      });
    }, interval);
  };
  ProactiveRefresh.prototype.iteration = function () {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var e_1;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            _a.trys.push([0, 2,, 3]);
            return [4, this.user.getIdToken(true)];
          case 1:
            _a.sent();
            return [3, 3];
          case 2:
            e_1 = _a.sent();
            if ((e_1 === null || e_1 === void 0 ? void 0 : e_1.code) === "auth/".concat("network-request-failed")) {
              this.schedule(true);
            }
            return [2];
          case 3:
            this.schedule();
            return [2];
        }
      });
    });
  };
  return ProactiveRefresh;
}();

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var UserMetadata = function () {
  function UserMetadata(createdAt, lastLoginAt) {
    this.createdAt = createdAt;
    this.lastLoginAt = lastLoginAt;
    this._initializeTime();
  }
  UserMetadata.prototype._initializeTime = function () {
    this.lastSignInTime = utcTimestampToDateString(this.lastLoginAt);
    this.creationTime = utcTimestampToDateString(this.createdAt);
  };
  UserMetadata.prototype._copy = function (metadata) {
    this.createdAt = metadata.createdAt;
    this.lastLoginAt = metadata.lastLoginAt;
    this._initializeTime();
  };
  UserMetadata.prototype.toJSON = function () {
    return {
      createdAt: this.createdAt,
      lastLoginAt: this.lastLoginAt
    };
  };
  return UserMetadata;
}();

/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _reloadWithoutSaving(user) {
  var _a;
  return tslib.__awaiter(this, void 0, void 0, function () {
    var auth, idToken, response, coreAccount, newProviderData, providerData, oldIsAnonymous, newIsAnonymous, isAnonymous, updates;
    return tslib.__generator(this, function (_b) {
      switch (_b.label) {
        case 0:
          auth = user.auth;
          return [4, user.getIdToken()];
        case 1:
          idToken = _b.sent();
          return [4, _logoutIfInvalidated(user, getAccountInfo(auth, {
            idToken: idToken
          }))];
        case 2:
          response = _b.sent();
          _assert(response === null || response === void 0 ? void 0 : response.users.length, auth, "internal-error");
          coreAccount = response.users[0];
          user._notifyReloadListener(coreAccount);
          newProviderData = ((_a = coreAccount.providerUserInfo) === null || _a === void 0 ? void 0 : _a.length) ? extractProviderData(coreAccount.providerUserInfo) : [];
          providerData = mergeProviderData(user.providerData, newProviderData);
          oldIsAnonymous = user.isAnonymous;
          newIsAnonymous = !(user.email && coreAccount.passwordHash) && !(providerData === null || providerData === void 0 ? void 0 : providerData.length);
          isAnonymous = !oldIsAnonymous ? false : newIsAnonymous;
          updates = {
            uid: coreAccount.localId,
            displayName: coreAccount.displayName || null,
            photoURL: coreAccount.photoUrl || null,
            email: coreAccount.email || null,
            emailVerified: coreAccount.emailVerified || false,
            phoneNumber: coreAccount.phoneNumber || null,
            tenantId: coreAccount.tenantId || null,
            providerData: providerData,
            metadata: new UserMetadata(coreAccount.createdAt, coreAccount.lastLoginAt),
            isAnonymous: isAnonymous
          };
          Object.assign(user, updates);
          return [2];
      }
    });
  });
}
function reload(user) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var userInternal;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          userInternal = util.getModularInstance(user);
          return [4, _reloadWithoutSaving(userInternal)];
        case 1:
          _a.sent();
          return [4, userInternal.auth._persistUserIfCurrent(userInternal)];
        case 2:
          _a.sent();
          userInternal.auth._notifyListenersIfCurrent(userInternal);
          return [2];
      }
    });
  });
}
function mergeProviderData(original, newData) {
  var deduped = original.filter(function (o) {
    return !newData.some(function (n) {
      return n.providerId === o.providerId;
    });
  });
  return tslib.__spreadArray(tslib.__spreadArray([], deduped, true), newData, true);
}
function extractProviderData(providers) {
  return providers.map(function (_a) {
    var providerId = _a.providerId,
      provider = tslib.__rest(_a, ["providerId"]);
    return {
      providerId: providerId,
      uid: provider.rawId || '',
      displayName: provider.displayName || null,
      email: provider.email || null,
      phoneNumber: provider.phoneNumber || null,
      photoURL: provider.photoUrl || null
    };
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function requestStsToken(auth, refreshToken) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var response;
    var _this = this;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          return [4, _performFetchWithErrorHandling(auth, {}, function () {
            return tslib.__awaiter(_this, void 0, void 0, function () {
              var body, _a, tokenApiHost, apiKey, url, headers;
              return tslib.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    body = util.querystring({
                      'grant_type': 'refresh_token',
                      'refresh_token': refreshToken
                    }).slice(1);
                    _a = auth.config, tokenApiHost = _a.tokenApiHost, apiKey = _a.apiKey;
                    url = _getFinalTarget(auth, tokenApiHost, "/v1/token", "key=".concat(apiKey));
                    return [4, auth._getAdditionalHeaders()];
                  case 1:
                    headers = _b.sent();
                    headers["Content-Type"] = 'application/x-www-form-urlencoded';
                    return [2, FetchProvider.fetch()(url, {
                      method: "POST",
                      headers: headers,
                      body: body
                    })];
                }
              });
            });
          })];
        case 1:
          response = _a.sent();
          return [2, {
            accessToken: response.access_token,
            expiresIn: response.expires_in,
            refreshToken: response.refresh_token
          }];
      }
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var StsTokenManager = function () {
  function StsTokenManager() {
    this.refreshToken = null;
    this.accessToken = null;
    this.expirationTime = null;
  }
  Object.defineProperty(StsTokenManager.prototype, "isExpired", {
    get: function get() {
      return !this.expirationTime || Date.now() > this.expirationTime - 30000;
    },
    enumerable: false,
    configurable: true
  });
  StsTokenManager.prototype.updateFromServerResponse = function (response) {
    _assert(response.idToken, "internal-error");
    _assert(typeof response.idToken !== 'undefined', "internal-error");
    _assert(typeof response.refreshToken !== 'undefined', "internal-error");
    var expiresIn = 'expiresIn' in response && typeof response.expiresIn !== 'undefined' ? Number(response.expiresIn) : _tokenExpiresIn(response.idToken);
    this.updateTokensAndExpiration(response.idToken, response.refreshToken, expiresIn);
  };
  StsTokenManager.prototype.getToken = function (auth, forceRefresh) {
    if (forceRefresh === void 0) {
      forceRefresh = false;
    }
    return tslib.__awaiter(this, void 0, void 0, function () {
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            _assert(!this.accessToken || this.refreshToken, auth, "user-token-expired");
            if (!forceRefresh && this.accessToken && !this.isExpired) {
              return [2, this.accessToken];
            }
            if (!this.refreshToken) return [3, 2];
            return [4, this.refresh(auth, this.refreshToken)];
          case 1:
            _a.sent();
            return [2, this.accessToken];
          case 2:
            return [2, null];
        }
      });
    });
  };
  StsTokenManager.prototype.clearRefreshToken = function () {
    this.refreshToken = null;
  };
  StsTokenManager.prototype.refresh = function (auth, oldToken) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var _a, accessToken, refreshToken, expiresIn;
      return tslib.__generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            return [4, requestStsToken(auth, oldToken)];
          case 1:
            _a = _b.sent(), accessToken = _a.accessToken, refreshToken = _a.refreshToken, expiresIn = _a.expiresIn;
            this.updateTokensAndExpiration(accessToken, refreshToken, Number(expiresIn));
            return [2];
        }
      });
    });
  };
  StsTokenManager.prototype.updateTokensAndExpiration = function (accessToken, refreshToken, expiresInSec) {
    this.refreshToken = refreshToken || null;
    this.accessToken = accessToken || null;
    this.expirationTime = Date.now() + expiresInSec * 1000;
  };
  StsTokenManager.fromJSON = function (appName, object) {
    var refreshToken = object.refreshToken,
      accessToken = object.accessToken,
      expirationTime = object.expirationTime;
    var manager = new StsTokenManager();
    if (refreshToken) {
      _assert(typeof refreshToken === 'string', "internal-error", {
        appName: appName
      });
      manager.refreshToken = refreshToken;
    }
    if (accessToken) {
      _assert(typeof accessToken === 'string', "internal-error", {
        appName: appName
      });
      manager.accessToken = accessToken;
    }
    if (expirationTime) {
      _assert(typeof expirationTime === 'number', "internal-error", {
        appName: appName
      });
      manager.expirationTime = expirationTime;
    }
    return manager;
  };
  StsTokenManager.prototype.toJSON = function () {
    return {
      refreshToken: this.refreshToken,
      accessToken: this.accessToken,
      expirationTime: this.expirationTime
    };
  };
  StsTokenManager.prototype._assign = function (stsTokenManager) {
    this.accessToken = stsTokenManager.accessToken;
    this.refreshToken = stsTokenManager.refreshToken;
    this.expirationTime = stsTokenManager.expirationTime;
  };
  StsTokenManager.prototype._clone = function () {
    return Object.assign(new StsTokenManager(), this.toJSON());
  };
  StsTokenManager.prototype._performRefresh = function () {
    return debugFail('not implemented');
  };
  return StsTokenManager;
}();

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function assertStringOrUndefined(assertion, appName) {
  _assert(typeof assertion === 'string' || typeof assertion === 'undefined', "internal-error", {
    appName: appName
  });
}
var UserImpl = function () {
  function UserImpl(_a) {
    var uid = _a.uid,
      auth = _a.auth,
      stsTokenManager = _a.stsTokenManager,
      opt = tslib.__rest(_a, ["uid", "auth", "stsTokenManager"]);
    this.providerId = "firebase";
    this.proactiveRefresh = new ProactiveRefresh(this);
    this.reloadUserInfo = null;
    this.reloadListener = null;
    this.uid = uid;
    this.auth = auth;
    this.stsTokenManager = stsTokenManager;
    this.accessToken = stsTokenManager.accessToken;
    this.displayName = opt.displayName || null;
    this.email = opt.email || null;
    this.emailVerified = opt.emailVerified || false;
    this.phoneNumber = opt.phoneNumber || null;
    this.photoURL = opt.photoURL || null;
    this.isAnonymous = opt.isAnonymous || false;
    this.tenantId = opt.tenantId || null;
    this.providerData = opt.providerData ? tslib.__spreadArray([], opt.providerData, true) : [];
    this.metadata = new UserMetadata(opt.createdAt || undefined, opt.lastLoginAt || undefined);
  }
  UserImpl.prototype.getIdToken = function (forceRefresh) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var accessToken;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4, _logoutIfInvalidated(this, this.stsTokenManager.getToken(this.auth, forceRefresh))];
          case 1:
            accessToken = _a.sent();
            _assert(accessToken, this.auth, "internal-error");
            if (!(this.accessToken !== accessToken)) return [3, 3];
            this.accessToken = accessToken;
            return [4, this.auth._persistUserIfCurrent(this)];
          case 2:
            _a.sent();
            this.auth._notifyListenersIfCurrent(this);
            _a.label = 3;
          case 3:
            return [2, accessToken];
        }
      });
    });
  };
  UserImpl.prototype.getIdTokenResult = function (forceRefresh) {
    return getIdTokenResult(this, forceRefresh);
  };
  UserImpl.prototype.reload = function () {
    return reload(this);
  };
  UserImpl.prototype._assign = function (user) {
    if (this === user) {
      return;
    }
    _assert(this.uid === user.uid, this.auth, "internal-error");
    this.displayName = user.displayName;
    this.photoURL = user.photoURL;
    this.email = user.email;
    this.emailVerified = user.emailVerified;
    this.phoneNumber = user.phoneNumber;
    this.isAnonymous = user.isAnonymous;
    this.tenantId = user.tenantId;
    this.providerData = user.providerData.map(function (userInfo) {
      return tslib.__assign({}, userInfo);
    });
    this.metadata._copy(user.metadata);
    this.stsTokenManager._assign(user.stsTokenManager);
  };
  UserImpl.prototype._clone = function (auth) {
    var newUser = new UserImpl(tslib.__assign(tslib.__assign({}, this), {
      auth: auth,
      stsTokenManager: this.stsTokenManager._clone()
    }));
    newUser.metadata._copy(this.metadata);
    return newUser;
  };
  UserImpl.prototype._onReload = function (callback) {
    _assert(!this.reloadListener, this.auth, "internal-error");
    this.reloadListener = callback;
    if (this.reloadUserInfo) {
      this._notifyReloadListener(this.reloadUserInfo);
      this.reloadUserInfo = null;
    }
  };
  UserImpl.prototype._notifyReloadListener = function (userInfo) {
    if (this.reloadListener) {
      this.reloadListener(userInfo);
    } else {
      this.reloadUserInfo = userInfo;
    }
  };
  UserImpl.prototype._startProactiveRefresh = function () {
    this.proactiveRefresh._start();
  };
  UserImpl.prototype._stopProactiveRefresh = function () {
    this.proactiveRefresh._stop();
  };
  UserImpl.prototype._updateTokensIfNecessary = function (response, reload) {
    if (reload === void 0) {
      reload = false;
    }
    return tslib.__awaiter(this, void 0, void 0, function () {
      var tokensRefreshed;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            tokensRefreshed = false;
            if (response.idToken && response.idToken !== this.stsTokenManager.accessToken) {
              this.stsTokenManager.updateFromServerResponse(response);
              tokensRefreshed = true;
            }
            if (!reload) return [3, 2];
            return [4, _reloadWithoutSaving(this)];
          case 1:
            _a.sent();
            _a.label = 2;
          case 2:
            return [4, this.auth._persistUserIfCurrent(this)];
          case 3:
            _a.sent();
            if (tokensRefreshed) {
              this.auth._notifyListenersIfCurrent(this);
            }
            return [2];
        }
      });
    });
  };
  UserImpl.prototype.delete = function () {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var idToken;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4, this.getIdToken()];
          case 1:
            idToken = _a.sent();
            return [4, _logoutIfInvalidated(this, deleteAccount(this.auth, {
              idToken: idToken
            }))];
          case 2:
            _a.sent();
            this.stsTokenManager.clearRefreshToken();
            return [2, this.auth.signOut()];
        }
      });
    });
  };
  UserImpl.prototype.toJSON = function () {
    return tslib.__assign(tslib.__assign({
      uid: this.uid,
      email: this.email || undefined,
      emailVerified: this.emailVerified,
      displayName: this.displayName || undefined,
      isAnonymous: this.isAnonymous,
      photoURL: this.photoURL || undefined,
      phoneNumber: this.phoneNumber || undefined,
      tenantId: this.tenantId || undefined,
      providerData: this.providerData.map(function (userInfo) {
        return tslib.__assign({}, userInfo);
      }),
      stsTokenManager: this.stsTokenManager.toJSON(),
      _redirectEventId: this._redirectEventId
    }, this.metadata.toJSON()), {
      apiKey: this.auth.config.apiKey,
      appName: this.auth.name
    });
  };
  Object.defineProperty(UserImpl.prototype, "refreshToken", {
    get: function get() {
      return this.stsTokenManager.refreshToken || '';
    },
    enumerable: false,
    configurable: true
  });
  UserImpl._fromJSON = function (auth, object) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    var displayName = (_a = object.displayName) !== null && _a !== void 0 ? _a : undefined;
    var email = (_b = object.email) !== null && _b !== void 0 ? _b : undefined;
    var phoneNumber = (_c = object.phoneNumber) !== null && _c !== void 0 ? _c : undefined;
    var photoURL = (_d = object.photoURL) !== null && _d !== void 0 ? _d : undefined;
    var tenantId = (_e = object.tenantId) !== null && _e !== void 0 ? _e : undefined;
    var _redirectEventId = (_f = object._redirectEventId) !== null && _f !== void 0 ? _f : undefined;
    var createdAt = (_g = object.createdAt) !== null && _g !== void 0 ? _g : undefined;
    var lastLoginAt = (_h = object.lastLoginAt) !== null && _h !== void 0 ? _h : undefined;
    var uid = object.uid,
      emailVerified = object.emailVerified,
      isAnonymous = object.isAnonymous,
      providerData = object.providerData,
      plainObjectTokenManager = object.stsTokenManager;
    _assert(uid && plainObjectTokenManager, auth, "internal-error");
    var stsTokenManager = StsTokenManager.fromJSON(this.name, plainObjectTokenManager);
    _assert(typeof uid === 'string', auth, "internal-error");
    assertStringOrUndefined(displayName, auth.name);
    assertStringOrUndefined(email, auth.name);
    _assert(typeof emailVerified === 'boolean', auth, "internal-error");
    _assert(typeof isAnonymous === 'boolean', auth, "internal-error");
    assertStringOrUndefined(phoneNumber, auth.name);
    assertStringOrUndefined(photoURL, auth.name);
    assertStringOrUndefined(tenantId, auth.name);
    assertStringOrUndefined(_redirectEventId, auth.name);
    assertStringOrUndefined(createdAt, auth.name);
    assertStringOrUndefined(lastLoginAt, auth.name);
    var user = new UserImpl({
      uid: uid,
      auth: auth,
      email: email,
      emailVerified: emailVerified,
      displayName: displayName,
      isAnonymous: isAnonymous,
      photoURL: photoURL,
      phoneNumber: phoneNumber,
      tenantId: tenantId,
      stsTokenManager: stsTokenManager,
      createdAt: createdAt,
      lastLoginAt: lastLoginAt
    });
    if (providerData && Array.isArray(providerData)) {
      user.providerData = providerData.map(function (userInfo) {
        return tslib.__assign({}, userInfo);
      });
    }
    if (_redirectEventId) {
      user._redirectEventId = _redirectEventId;
    }
    return user;
  };
  UserImpl._fromIdTokenResponse = function (auth, idTokenResponse, isAnonymous) {
    if (isAnonymous === void 0) {
      isAnonymous = false;
    }
    return tslib.__awaiter(this, void 0, void 0, function () {
      var stsTokenManager, user;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            stsTokenManager = new StsTokenManager();
            stsTokenManager.updateFromServerResponse(idTokenResponse);
            user = new UserImpl({
              uid: idTokenResponse.localId,
              auth: auth,
              stsTokenManager: stsTokenManager,
              isAnonymous: isAnonymous
            });
            return [4, _reloadWithoutSaving(user)];
          case 1:
            _a.sent();
            return [2, user];
        }
      });
    });
  };
  return UserImpl;
}();

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var instanceCache = new Map();
function _getInstance(cls) {
  debugAssert(cls instanceof Function, 'Expected a class definition');
  var instance = instanceCache.get(cls);
  if (instance) {
    debugAssert(instance instanceof cls, 'Instance stored in cache mismatched with class');
    return instance;
  }
  instance = new cls();
  instanceCache.set(cls, instance);
  return instance;
}

/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var InMemoryPersistence = function () {
  function InMemoryPersistence() {
    this.type = "NONE";
    this.storage = {};
  }
  InMemoryPersistence.prototype._isAvailable = function () {
    return tslib.__awaiter(this, void 0, void 0, function () {
      return tslib.__generator(this, function (_a) {
        return [2, true];
      });
    });
  };
  InMemoryPersistence.prototype._set = function (key, value) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      return tslib.__generator(this, function (_a) {
        this.storage[key] = value;
        return [2];
      });
    });
  };
  InMemoryPersistence.prototype._get = function (key) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var value;
      return tslib.__generator(this, function (_a) {
        value = this.storage[key];
        return [2, value === undefined ? null : value];
      });
    });
  };
  InMemoryPersistence.prototype._remove = function (key) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      return tslib.__generator(this, function (_a) {
        delete this.storage[key];
        return [2];
      });
    });
  };
  InMemoryPersistence.prototype._addListener = function (_key, _listener) {
    return;
  };
  InMemoryPersistence.prototype._removeListener = function (_key, _listener) {
    return;
  };
  InMemoryPersistence.type = 'NONE';
  return InMemoryPersistence;
}();
var inMemoryPersistence = InMemoryPersistence;

/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _persistenceKeyName(key, apiKey, appName) {
  return "".concat("firebase", ":").concat(key, ":").concat(apiKey, ":").concat(appName);
}
var PersistenceUserManager = function () {
  function PersistenceUserManager(persistence, auth, userKey) {
    this.persistence = persistence;
    this.auth = auth;
    this.userKey = userKey;
    var _a = this.auth,
      config = _a.config,
      name = _a.name;
    this.fullUserKey = _persistenceKeyName(this.userKey, config.apiKey, name);
    this.fullPersistenceKey = _persistenceKeyName("persistence", config.apiKey, name);
    this.boundEventHandler = auth._onStorageEvent.bind(auth);
    this.persistence._addListener(this.fullUserKey, this.boundEventHandler);
  }
  PersistenceUserManager.prototype.setCurrentUser = function (user) {
    return this.persistence._set(this.fullUserKey, user.toJSON());
  };
  PersistenceUserManager.prototype.getCurrentUser = function () {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var blob;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4, this.persistence._get(this.fullUserKey)];
          case 1:
            blob = _a.sent();
            return [2, blob ? UserImpl._fromJSON(this.auth, blob) : null];
        }
      });
    });
  };
  PersistenceUserManager.prototype.removeCurrentUser = function () {
    return this.persistence._remove(this.fullUserKey);
  };
  PersistenceUserManager.prototype.savePersistenceForRedirect = function () {
    return this.persistence._set(this.fullPersistenceKey, this.persistence.type);
  };
  PersistenceUserManager.prototype.setPersistence = function (newPersistence) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var currentUser;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (this.persistence === newPersistence) {
              return [2];
            }
            return [4, this.getCurrentUser()];
          case 1:
            currentUser = _a.sent();
            return [4, this.removeCurrentUser()];
          case 2:
            _a.sent();
            this.persistence = newPersistence;
            if (currentUser) {
              return [2, this.setCurrentUser(currentUser)];
            }
            return [2];
        }
      });
    });
  };
  PersistenceUserManager.prototype.delete = function () {
    this.persistence._removeListener(this.fullUserKey, this.boundEventHandler);
  };
  PersistenceUserManager.create = function (auth, persistenceHierarchy, userKey) {
    if (userKey === void 0) {
      userKey = "authUser";
    }
    return tslib.__awaiter(this, void 0, void 0, function () {
      var availablePersistences, selectedPersistence, key, userToMigrate, _i, persistenceHierarchy_1, persistence, blob, user, migrationHierarchy;
      var _this = this;
      return tslib.__generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            if (!persistenceHierarchy.length) {
              return [2, new PersistenceUserManager(_getInstance(inMemoryPersistence), auth, userKey)];
            }
            return [4, Promise.all(persistenceHierarchy.map(function (persistence) {
              return tslib.__awaiter(_this, void 0, void 0, function () {
                return tslib.__generator(this, function (_a) {
                  switch (_a.label) {
                    case 0:
                      return [4, persistence._isAvailable()];
                    case 1:
                      if (_a.sent()) {
                        return [2, persistence];
                      }
                      return [2, undefined];
                  }
                });
              });
            }))];
          case 1:
            availablePersistences = _b.sent().filter(function (persistence) {
              return persistence;
            });
            selectedPersistence = availablePersistences[0] || _getInstance(inMemoryPersistence);
            key = _persistenceKeyName(userKey, auth.config.apiKey, auth.name);
            userToMigrate = null;
            _i = 0, persistenceHierarchy_1 = persistenceHierarchy;
            _b.label = 2;
          case 2:
            if (!(_i < persistenceHierarchy_1.length)) return [3, 7];
            persistence = persistenceHierarchy_1[_i];
            _b.label = 3;
          case 3:
            _b.trys.push([3, 5,, 6]);
            return [4, persistence._get(key)];
          case 4:
            blob = _b.sent();
            if (blob) {
              user = UserImpl._fromJSON(auth, blob);
              if (persistence !== selectedPersistence) {
                userToMigrate = user;
              }
              selectedPersistence = persistence;
              return [3, 7];
            }
            return [3, 6];
          case 5:
            _b.sent();
            return [3, 6];
          case 6:
            _i++;
            return [3, 2];
          case 7:
            migrationHierarchy = availablePersistences.filter(function (p) {
              return p._shouldAllowMigration;
            });
            if (!selectedPersistence._shouldAllowMigration || !migrationHierarchy.length) {
              return [2, new PersistenceUserManager(selectedPersistence, auth, userKey)];
            }
            selectedPersistence = migrationHierarchy[0];
            if (!userToMigrate) return [3, 9];
            return [4, selectedPersistence._set(key, userToMigrate.toJSON())];
          case 8:
            _b.sent();
            _b.label = 9;
          case 9:
            return [4, Promise.all(persistenceHierarchy.map(function (persistence) {
              return tslib.__awaiter(_this, void 0, void 0, function () {
                return tslib.__generator(this, function (_b) {
                  switch (_b.label) {
                    case 0:
                      if (!(persistence !== selectedPersistence)) return [3, 4];
                      _b.label = 1;
                    case 1:
                      _b.trys.push([1, 3,, 4]);
                      return [4, persistence._remove(key)];
                    case 2:
                      _b.sent();
                      return [3, 4];
                    case 3:
                      _b.sent();
                      return [3, 4];
                    case 4:
                      return [2];
                  }
                });
              });
            }))];
          case 10:
            _b.sent();
            return [2, new PersistenceUserManager(selectedPersistence, auth, userKey)];
        }
      });
    });
  };
  return PersistenceUserManager;
}();

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _getBrowserName(userAgent) {
  var ua = userAgent.toLowerCase();
  if (ua.includes('opera/') || ua.includes('opr/') || ua.includes('opios/')) {
    return "Opera";
  } else if (_isIEMobile(ua)) {
    return "IEMobile";
  } else if (ua.includes('msie') || ua.includes('trident/')) {
    return "IE";
  } else if (ua.includes('edge/')) {
    return "Edge";
  } else if (_isFirefox(ua)) {
    return "Firefox";
  } else if (ua.includes('silk/')) {
    return "Silk";
  } else if (_isBlackBerry(ua)) {
    return "Blackberry";
  } else if (_isWebOS(ua)) {
    return "Webos";
  } else if (_isSafari(ua)) {
    return "Safari";
  } else if ((ua.includes('chrome/') || _isChromeIOS(ua)) && !ua.includes('edge/')) {
    return "Chrome";
  } else if (_isAndroid(ua)) {
    return "Android";
  } else {
    var re = /([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/;
    var matches = userAgent.match(re);
    if ((matches === null || matches === void 0 ? void 0 : matches.length) === 2) {
      return matches[1];
    }
  }
  return "Other";
}
function _isFirefox(ua) {
  if (ua === void 0) {
    ua = util.getUA();
  }
  return /firefox\//i.test(ua);
}
function _isSafari(userAgent) {
  if (userAgent === void 0) {
    userAgent = util.getUA();
  }
  var ua = userAgent.toLowerCase();
  return ua.includes('safari/') && !ua.includes('chrome/') && !ua.includes('crios/') && !ua.includes('android');
}
function _isChromeIOS(ua) {
  if (ua === void 0) {
    ua = util.getUA();
  }
  return /crios\//i.test(ua);
}
function _isIEMobile(ua) {
  if (ua === void 0) {
    ua = util.getUA();
  }
  return /iemobile/i.test(ua);
}
function _isAndroid(ua) {
  if (ua === void 0) {
    ua = util.getUA();
  }
  return /android/i.test(ua);
}
function _isBlackBerry(ua) {
  if (ua === void 0) {
    ua = util.getUA();
  }
  return /blackberry/i.test(ua);
}
function _isWebOS(ua) {
  if (ua === void 0) {
    ua = util.getUA();
  }
  return /webos/i.test(ua);
}
function _isIOS(ua) {
  if (ua === void 0) {
    ua = util.getUA();
  }
  return /iphone|ipad|ipod/i.test(ua) || /macintosh/i.test(ua) && /mobile/i.test(ua);
}
function _isIOS7Or8(ua) {
  if (ua === void 0) {
    ua = util.getUA();
  }
  return /(iPad|iPhone|iPod).*OS 7_\d/i.test(ua) || /(iPad|iPhone|iPod).*OS 8_\d/i.test(ua);
}
function _isIE10() {
  return util.isIE() && document.documentMode === 10;
}
function _isMobileBrowser(ua) {
  if (ua === void 0) {
    ua = util.getUA();
  }
  return _isIOS(ua) || _isAndroid(ua) || _isWebOS(ua) || _isBlackBerry(ua) || /windows phone/i.test(ua) || _isIEMobile(ua);
}
function _isIframe() {
  try {
    return !!(window && window !== window.top);
  } catch (e) {
    return false;
  }
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _getClientVersion(clientPlatform, frameworks) {
  if (frameworks === void 0) {
    frameworks = [];
  }
  var reportedPlatform;
  switch (clientPlatform) {
    case "Browser":
      reportedPlatform = _getBrowserName(util.getUA());
      break;
    case "Worker":
      reportedPlatform = "".concat(_getBrowserName(util.getUA()), "-").concat(clientPlatform);
      break;
    default:
      reportedPlatform = clientPlatform;
  }
  var reportedFrameworks = frameworks.length ? frameworks.join(',') : 'FirebaseCore-web';
  return "".concat(reportedPlatform, "/").concat("JsCore", "/").concat(app.SDK_VERSION, "/").concat(reportedFrameworks);
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function getRecaptchaConfig(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performApiRequest(auth, "GET", "/v2/recaptchaConfig", _addTidIfNecessary(auth, request))];
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function isEnterprise(grecaptcha) {
  return grecaptcha !== undefined && grecaptcha.enterprise !== undefined;
}
var RecaptchaConfig = function () {
  function RecaptchaConfig(response) {
    this.siteKey = '';
    this.emailPasswordEnabled = false;
    if (response.recaptchaKey === undefined) {
      throw new Error('recaptchaKey undefined');
    }
    this.siteKey = response.recaptchaKey.split('/')[3];
    this.emailPasswordEnabled = response.recaptchaEnforcementState.some(function (enforcementState) {
      return enforcementState.provider === 'EMAIL_PASSWORD_PROVIDER' && enforcementState.enforcementState !== 'OFF';
    });
  }
  return RecaptchaConfig;
}();

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function getScriptParentElement() {
  var _a, _b;
  return (_b = (_a = document.getElementsByTagName('head')) === null || _a === void 0 ? void 0 : _a[0]) !== null && _b !== void 0 ? _b : document;
}
function _loadJS(url) {
  return new Promise(function (resolve, reject) {
    var el = document.createElement('script');
    el.setAttribute('src', url);
    el.onload = resolve;
    el.onerror = function (e) {
      var error = _createError("internal-error");
      error.customData = e;
      reject(error);
    };
    el.type = 'text/javascript';
    el.charset = 'UTF-8';
    getScriptParentElement().appendChild(el);
  });
}
var RECAPTCHA_ENTERPRISE_URL = 'https://www.google.com/recaptcha/enterprise.js?render=';
var RECAPTCHA_ENTERPRISE_VERIFIER_TYPE = 'recaptcha-enterprise';
var FAKE_TOKEN = 'NO_RECAPTCHA';
var RecaptchaEnterpriseVerifier = function () {
  function RecaptchaEnterpriseVerifier(authExtern) {
    this.type = RECAPTCHA_ENTERPRISE_VERIFIER_TYPE;
    this.auth = _castAuth(authExtern);
  }
  RecaptchaEnterpriseVerifier.prototype.verify = function (action, forceRefresh) {
    if (action === void 0) {
      action = 'verify';
    }
    if (forceRefresh === void 0) {
      forceRefresh = false;
    }
    return tslib.__awaiter(this, void 0, void 0, function () {
      function retrieveSiteKey(auth) {
        return tslib.__awaiter(this, void 0, void 0, function () {
          var _this = this;
          return tslib.__generator(this, function (_a) {
            if (!forceRefresh) {
              if (auth.tenantId == null && auth._agentRecaptchaConfig != null) {
                return [2, auth._agentRecaptchaConfig.siteKey];
              }
              if (auth.tenantId != null && auth._tenantRecaptchaConfigs[auth.tenantId] !== undefined) {
                return [2, auth._tenantRecaptchaConfigs[auth.tenantId].siteKey];
              }
            }
            return [2, new Promise(function (resolve, reject) {
              return tslib.__awaiter(_this, void 0, void 0, function () {
                return tslib.__generator(this, function (_a) {
                  getRecaptchaConfig(auth, {
                    clientType: "CLIENT_TYPE_WEB",
                    version: "RECAPTCHA_ENTERPRISE"
                  }).then(function (response) {
                    if (response.recaptchaKey === undefined) {
                      reject(new Error('recaptcha Enterprise site key undefined'));
                    } else {
                      var config = new RecaptchaConfig(response);
                      if (auth.tenantId == null) {
                        auth._agentRecaptchaConfig = config;
                      } else {
                        auth._tenantRecaptchaConfigs[auth.tenantId] = config;
                      }
                      return resolve(config.siteKey);
                    }
                  }).catch(function (error) {
                    reject(error);
                  });
                  return [2];
                });
              });
            })];
          });
        });
      }
      function retrieveRecaptchaToken(siteKey, resolve, reject) {
        var grecaptcha = window.grecaptcha;
        if (isEnterprise(grecaptcha)) {
          grecaptcha.enterprise.ready(function () {
            grecaptcha.enterprise.execute(siteKey, {
              action: action
            }).then(function (token) {
              resolve(token);
            }).catch(function () {
              resolve(FAKE_TOKEN);
            });
          });
        } else {
          reject(Error('No reCAPTCHA enterprise script loaded.'));
        }
      }
      var _this = this;
      return tslib.__generator(this, function (_a) {
        return [2, new Promise(function (resolve, reject) {
          retrieveSiteKey(_this.auth).then(function (siteKey) {
            if (!forceRefresh && isEnterprise(window.grecaptcha)) {
              retrieveRecaptchaToken(siteKey, resolve, reject);
            } else {
              if (typeof window === 'undefined') {
                reject(new Error('RecaptchaVerifier is only supported in browser'));
                return;
              }
              _loadJS(RECAPTCHA_ENTERPRISE_URL + siteKey).then(function () {
                retrieveRecaptchaToken(siteKey, resolve, reject);
              }).catch(function (error) {
                reject(error);
              });
            }
          }).catch(function (error) {
            reject(error);
          });
        })];
      });
    });
  };
  return RecaptchaEnterpriseVerifier;
}();
function injectRecaptchaFields(auth, request, action, captchaResp) {
  if (captchaResp === void 0) {
    captchaResp = false;
  }
  return tslib.__awaiter(this, void 0, void 0, function () {
    var verifier, captchaResponse, newRequest;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          verifier = new RecaptchaEnterpriseVerifier(auth);
          _a.label = 1;
        case 1:
          _a.trys.push([1, 3,, 5]);
          return [4, verifier.verify(action)];
        case 2:
          captchaResponse = _a.sent();
          return [3, 5];
        case 3:
          _a.sent();
          return [4, verifier.verify(action, true)];
        case 4:
          captchaResponse = _a.sent();
          return [3, 5];
        case 5:
          newRequest = tslib.__assign({}, request);
          if (!captchaResp) {
            Object.assign(newRequest, {
              captchaResponse: captchaResponse
            });
          } else {
            Object.assign(newRequest, {
              'captchaResp': captchaResponse
            });
          }
          Object.assign(newRequest, {
            'clientType': "CLIENT_TYPE_WEB"
          });
          Object.assign(newRequest, {
            'recaptchaVersion': "RECAPTCHA_ENTERPRISE"
          });
          return [2, newRequest];
      }
    });
  });
}

/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AuthMiddlewareQueue = function () {
  function AuthMiddlewareQueue(auth) {
    this.auth = auth;
    this.queue = [];
  }
  AuthMiddlewareQueue.prototype.pushCallback = function (callback, onAbort) {
    var _this = this;
    var wrappedCallback = function wrappedCallback(user) {
      return new Promise(function (resolve, reject) {
        try {
          var result = callback(user);
          resolve(result);
        } catch (e) {
          reject(e);
        }
      });
    };
    wrappedCallback.onAbort = onAbort;
    this.queue.push(wrappedCallback);
    var index = this.queue.length - 1;
    return function () {
      _this.queue[index] = function () {
        return Promise.resolve();
      };
    };
  };
  AuthMiddlewareQueue.prototype.runMiddleware = function (nextUser) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var onAbortStack, _i, _a, beforeStateCallback, e_1, _b, onAbortStack_1, onAbort;
      return tslib.__generator(this, function (_c) {
        switch (_c.label) {
          case 0:
            if (this.auth.currentUser === nextUser) {
              return [2];
            }
            onAbortStack = [];
            _c.label = 1;
          case 1:
            _c.trys.push([1, 6,, 7]);
            _i = 0, _a = this.queue;
            _c.label = 2;
          case 2:
            if (!(_i < _a.length)) return [3, 5];
            beforeStateCallback = _a[_i];
            return [4, beforeStateCallback(nextUser)];
          case 3:
            _c.sent();
            if (beforeStateCallback.onAbort) {
              onAbortStack.push(beforeStateCallback.onAbort);
            }
            _c.label = 4;
          case 4:
            _i++;
            return [3, 2];
          case 5:
            return [3, 7];
          case 6:
            e_1 = _c.sent();
            onAbortStack.reverse();
            for (_b = 0, onAbortStack_1 = onAbortStack; _b < onAbortStack_1.length; _b++) {
              onAbort = onAbortStack_1[_b];
              try {
                onAbort();
              } catch (_) {}
            }
            throw this.auth._errorFactory.create("login-blocked", {
              originalMessage: e_1 === null || e_1 === void 0 ? void 0 : e_1.message
            });
          case 7:
            return [2];
        }
      });
    });
  };
  return AuthMiddlewareQueue;
}();

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AuthImpl = function () {
  function AuthImpl(app, heartbeatServiceProvider, appCheckServiceProvider, config) {
    this.app = app;
    this.heartbeatServiceProvider = heartbeatServiceProvider;
    this.appCheckServiceProvider = appCheckServiceProvider;
    this.config = config;
    this.currentUser = null;
    this.emulatorConfig = null;
    this.operations = Promise.resolve();
    this.authStateSubscription = new Subscription(this);
    this.idTokenSubscription = new Subscription(this);
    this.beforeStateQueue = new AuthMiddlewareQueue(this);
    this.redirectUser = null;
    this.isProactiveRefreshEnabled = false;
    this._canInitEmulator = true;
    this._isInitialized = false;
    this._deleted = false;
    this._initializationPromise = null;
    this._popupRedirectResolver = null;
    this._errorFactory = _DEFAULT_AUTH_ERROR_FACTORY;
    this._agentRecaptchaConfig = null;
    this._tenantRecaptchaConfigs = {};
    this.lastNotifiedUid = undefined;
    this.languageCode = null;
    this.tenantId = null;
    this.settings = {
      appVerificationDisabledForTesting: false
    };
    this.frameworks = [];
    this.name = app.name;
    this.clientVersion = config.sdkClientVersion;
  }
  AuthImpl.prototype._initializeWithPersistence = function (persistenceHierarchy, popupRedirectResolver) {
    var _this = this;
    if (popupRedirectResolver) {
      this._popupRedirectResolver = _getInstance(popupRedirectResolver);
    }
    this._initializationPromise = this.queue(function () {
      return tslib.__awaiter(_this, void 0, void 0, function () {
        var _a;
        var _b, _c;
        return tslib.__generator(this, function (_d) {
          switch (_d.label) {
            case 0:
              if (this._deleted) {
                return [2];
              }
              _a = this;
              return [4, PersistenceUserManager.create(this, persistenceHierarchy)];
            case 1:
              _a.persistenceManager = _d.sent();
              if (this._deleted) {
                return [2];
              }
              if (!((_b = this._popupRedirectResolver) === null || _b === void 0 ? void 0 : _b._shouldInitProactively)) return [3, 5];
              _d.label = 2;
            case 2:
              _d.trys.push([2, 4,, 5]);
              return [4, this._popupRedirectResolver._initialize(this)];
            case 3:
              _d.sent();
              return [3, 5];
            case 4:
              _d.sent();
              return [3, 5];
            case 5:
              return [4, this.initializeCurrentUser(popupRedirectResolver)];
            case 6:
              _d.sent();
              this.lastNotifiedUid = ((_c = this.currentUser) === null || _c === void 0 ? void 0 : _c.uid) || null;
              if (this._deleted) {
                return [2];
              }
              this._isInitialized = true;
              return [2];
          }
        });
      });
    });
    return this._initializationPromise;
  };
  AuthImpl.prototype._onStorageEvent = function () {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var user;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (this._deleted) {
              return [2];
            }
            return [4, this.assertedPersistence.getCurrentUser()];
          case 1:
            user = _a.sent();
            if (!this.currentUser && !user) {
              return [2];
            }
            if (!(this.currentUser && user && this.currentUser.uid === user.uid)) return [3, 3];
            this._currentUser._assign(user);
            return [4, this.currentUser.getIdToken()];
          case 2:
            _a.sent();
            return [2];
          case 3:
            return [4, this._updateCurrentUser(user, true)];
          case 4:
            _a.sent();
            return [2];
        }
      });
    });
  };
  AuthImpl.prototype.initializeCurrentUser = function (popupRedirectResolver) {
    var _a;
    return tslib.__awaiter(this, void 0, void 0, function () {
      var previouslyStoredUser, futureCurrentUser, needsTocheckMiddleware, redirectUserEventId, storedUserEventId, result, e_2;
      return tslib.__generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            return [4, this.assertedPersistence.getCurrentUser()];
          case 1:
            previouslyStoredUser = _b.sent();
            futureCurrentUser = previouslyStoredUser;
            needsTocheckMiddleware = false;
            if (!(popupRedirectResolver && this.config.authDomain)) return [3, 4];
            return [4, this.getOrInitRedirectPersistenceManager()];
          case 2:
            _b.sent();
            redirectUserEventId = (_a = this.redirectUser) === null || _a === void 0 ? void 0 : _a._redirectEventId;
            storedUserEventId = futureCurrentUser === null || futureCurrentUser === void 0 ? void 0 : futureCurrentUser._redirectEventId;
            return [4, this.tryRedirectSignIn(popupRedirectResolver)];
          case 3:
            result = _b.sent();
            if ((!redirectUserEventId || redirectUserEventId === storedUserEventId) && (result === null || result === void 0 ? void 0 : result.user)) {
              futureCurrentUser = result.user;
              needsTocheckMiddleware = true;
            }
            _b.label = 4;
          case 4:
            if (!futureCurrentUser) {
              return [2, this.directlySetCurrentUser(null)];
            }
            if (!!futureCurrentUser._redirectEventId) return [3, 9];
            if (!needsTocheckMiddleware) return [3, 8];
            _b.label = 5;
          case 5:
            _b.trys.push([5, 7,, 8]);
            return [4, this.beforeStateQueue.runMiddleware(futureCurrentUser)];
          case 6:
            _b.sent();
            return [3, 8];
          case 7:
            e_2 = _b.sent();
            futureCurrentUser = previouslyStoredUser;
            this._popupRedirectResolver._overrideRedirectResult(this, function () {
              return Promise.reject(e_2);
            });
            return [3, 8];
          case 8:
            if (futureCurrentUser) {
              return [2, this.reloadAndSetCurrentUserOrClear(futureCurrentUser)];
            } else {
              return [2, this.directlySetCurrentUser(null)];
            }
          case 9:
            _assert(this._popupRedirectResolver, this, "argument-error");
            return [4, this.getOrInitRedirectPersistenceManager()];
          case 10:
            _b.sent();
            if (this.redirectUser && this.redirectUser._redirectEventId === futureCurrentUser._redirectEventId) {
              return [2, this.directlySetCurrentUser(futureCurrentUser)];
            }
            return [2, this.reloadAndSetCurrentUserOrClear(futureCurrentUser)];
        }
      });
    });
  };
  AuthImpl.prototype.tryRedirectSignIn = function (redirectResolver) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var result;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            result = null;
            _a.label = 1;
          case 1:
            _a.trys.push([1, 3,, 5]);
            return [4, this._popupRedirectResolver._completeRedirectFn(this, redirectResolver, true)];
          case 2:
            result = _a.sent();
            return [3, 5];
          case 3:
            _a.sent();
            return [4, this._setRedirectUser(null)];
          case 4:
            _a.sent();
            return [3, 5];
          case 5:
            return [2, result];
        }
      });
    });
  };
  AuthImpl.prototype.reloadAndSetCurrentUserOrClear = function (user) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var e_4;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            _a.trys.push([0, 2,, 3]);
            return [4, _reloadWithoutSaving(user)];
          case 1:
            _a.sent();
            return [3, 3];
          case 2:
            e_4 = _a.sent();
            if ((e_4 === null || e_4 === void 0 ? void 0 : e_4.code) !== "auth/".concat("network-request-failed")) {
              return [2, this.directlySetCurrentUser(null)];
            }
            return [3, 3];
          case 3:
            return [2, this.directlySetCurrentUser(user)];
        }
      });
    });
  };
  AuthImpl.prototype.useDeviceLanguage = function () {
    this.languageCode = _getUserLanguage();
  };
  AuthImpl.prototype._delete = function () {
    return tslib.__awaiter(this, void 0, void 0, function () {
      return tslib.__generator(this, function (_a) {
        this._deleted = true;
        return [2];
      });
    });
  };
  AuthImpl.prototype.updateCurrentUser = function (userExtern) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var user;
      return tslib.__generator(this, function (_a) {
        user = userExtern ? util.getModularInstance(userExtern) : null;
        if (user) {
          _assert(user.auth.config.apiKey === this.config.apiKey, this, "invalid-user-token");
        }
        return [2, this._updateCurrentUser(user && user._clone(this))];
      });
    });
  };
  AuthImpl.prototype._updateCurrentUser = function (user, skipBeforeStateCallbacks) {
    if (skipBeforeStateCallbacks === void 0) {
      skipBeforeStateCallbacks = false;
    }
    return tslib.__awaiter(this, void 0, void 0, function () {
      var _this = this;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (this._deleted) {
              return [2];
            }
            if (user) {
              _assert(this.tenantId === user.tenantId, this, "tenant-id-mismatch");
            }
            if (!!skipBeforeStateCallbacks) return [3, 2];
            return [4, this.beforeStateQueue.runMiddleware(user)];
          case 1:
            _a.sent();
            _a.label = 2;
          case 2:
            return [2, this.queue(function () {
              return tslib.__awaiter(_this, void 0, void 0, function () {
                return tslib.__generator(this, function (_a) {
                  switch (_a.label) {
                    case 0:
                      return [4, this.directlySetCurrentUser(user)];
                    case 1:
                      _a.sent();
                      this.notifyAuthListeners();
                      return [2];
                  }
                });
              });
            })];
        }
      });
    });
  };
  AuthImpl.prototype.signOut = function () {
    return tslib.__awaiter(this, void 0, void 0, function () {
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4, this.beforeStateQueue.runMiddleware(null)];
          case 1:
            _a.sent();
            if (!(this.redirectPersistenceManager || this._popupRedirectResolver)) return [3, 3];
            return [4, this._setRedirectUser(null)];
          case 2:
            _a.sent();
            _a.label = 3;
          case 3:
            return [2, this._updateCurrentUser(null, true)];
        }
      });
    });
  };
  AuthImpl.prototype.setPersistence = function (persistence) {
    var _this = this;
    return this.queue(function () {
      return tslib.__awaiter(_this, void 0, void 0, function () {
        return tslib.__generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              return [4, this.assertedPersistence.setPersistence(_getInstance(persistence))];
            case 1:
              _a.sent();
              return [2];
          }
        });
      });
    });
  };
  AuthImpl.prototype.initializeRecaptchaConfig = function () {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var response, config, verifier;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4, getRecaptchaConfig(this, {
              clientType: "CLIENT_TYPE_WEB",
              version: "RECAPTCHA_ENTERPRISE"
            })];
          case 1:
            response = _a.sent();
            config = new RecaptchaConfig(response);
            if (this.tenantId == null) {
              this._agentRecaptchaConfig = config;
            } else {
              this._tenantRecaptchaConfigs[this.tenantId] = config;
            }
            if (config.emailPasswordEnabled) {
              verifier = new RecaptchaEnterpriseVerifier(this);
              void verifier.verify();
            }
            return [2];
        }
      });
    });
  };
  AuthImpl.prototype._getRecaptchaConfig = function () {
    if (this.tenantId == null) {
      return this._agentRecaptchaConfig;
    } else {
      return this._tenantRecaptchaConfigs[this.tenantId];
    }
  };
  AuthImpl.prototype._getPersistence = function () {
    return this.assertedPersistence.persistence.type;
  };
  AuthImpl.prototype._updateErrorMap = function (errorMap) {
    this._errorFactory = new util.ErrorFactory('auth', 'Firebase', errorMap());
  };
  AuthImpl.prototype.onAuthStateChanged = function (nextOrObserver, error, completed) {
    return this.registerStateListener(this.authStateSubscription, nextOrObserver, error, completed);
  };
  AuthImpl.prototype.beforeAuthStateChanged = function (callback, onAbort) {
    return this.beforeStateQueue.pushCallback(callback, onAbort);
  };
  AuthImpl.prototype.onIdTokenChanged = function (nextOrObserver, error, completed) {
    return this.registerStateListener(this.idTokenSubscription, nextOrObserver, error, completed);
  };
  AuthImpl.prototype.toJSON = function () {
    var _a;
    return {
      apiKey: this.config.apiKey,
      authDomain: this.config.authDomain,
      appName: this.name,
      currentUser: (_a = this._currentUser) === null || _a === void 0 ? void 0 : _a.toJSON()
    };
  };
  AuthImpl.prototype._setRedirectUser = function (user, popupRedirectResolver) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var redirectManager;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4, this.getOrInitRedirectPersistenceManager(popupRedirectResolver)];
          case 1:
            redirectManager = _a.sent();
            return [2, user === null ? redirectManager.removeCurrentUser() : redirectManager.setCurrentUser(user)];
        }
      });
    });
  };
  AuthImpl.prototype.getOrInitRedirectPersistenceManager = function (popupRedirectResolver) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var resolver, _a, _b;
      return tslib.__generator(this, function (_c) {
        switch (_c.label) {
          case 0:
            if (!!this.redirectPersistenceManager) return [3, 3];
            resolver = popupRedirectResolver && _getInstance(popupRedirectResolver) || this._popupRedirectResolver;
            _assert(resolver, this, "argument-error");
            _a = this;
            return [4, PersistenceUserManager.create(this, [_getInstance(resolver._redirectPersistence)], "redirectUser")];
          case 1:
            _a.redirectPersistenceManager = _c.sent();
            _b = this;
            return [4, this.redirectPersistenceManager.getCurrentUser()];
          case 2:
            _b.redirectUser = _c.sent();
            _c.label = 3;
          case 3:
            return [2, this.redirectPersistenceManager];
        }
      });
    });
  };
  AuthImpl.prototype._redirectUserForId = function (id) {
    var _a, _b;
    return tslib.__awaiter(this, void 0, void 0, function () {
      var _this = this;
      return tslib.__generator(this, function (_c) {
        switch (_c.label) {
          case 0:
            if (!this._isInitialized) return [3, 2];
            return [4, this.queue(function () {
              return tslib.__awaiter(_this, void 0, void 0, function () {
                return tslib.__generator(this, function (_a) {
                  return [2];
                });
              });
            })];
          case 1:
            _c.sent();
            _c.label = 2;
          case 2:
            if (((_a = this._currentUser) === null || _a === void 0 ? void 0 : _a._redirectEventId) === id) {
              return [2, this._currentUser];
            }
            if (((_b = this.redirectUser) === null || _b === void 0 ? void 0 : _b._redirectEventId) === id) {
              return [2, this.redirectUser];
            }
            return [2, null];
        }
      });
    });
  };
  AuthImpl.prototype._persistUserIfCurrent = function (user) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var _this = this;
      return tslib.__generator(this, function (_a) {
        if (user === this.currentUser) {
          return [2, this.queue(function () {
            return tslib.__awaiter(_this, void 0, void 0, function () {
              return tslib.__generator(this, function (_a) {
                return [2, this.directlySetCurrentUser(user)];
              });
            });
          })];
        }
        return [2];
      });
    });
  };
  AuthImpl.prototype._notifyListenersIfCurrent = function (user) {
    if (user === this.currentUser) {
      this.notifyAuthListeners();
    }
  };
  AuthImpl.prototype._key = function () {
    return "".concat(this.config.authDomain, ":").concat(this.config.apiKey, ":").concat(this.name);
  };
  AuthImpl.prototype._startProactiveRefresh = function () {
    this.isProactiveRefreshEnabled = true;
    if (this.currentUser) {
      this._currentUser._startProactiveRefresh();
    }
  };
  AuthImpl.prototype._stopProactiveRefresh = function () {
    this.isProactiveRefreshEnabled = false;
    if (this.currentUser) {
      this._currentUser._stopProactiveRefresh();
    }
  };
  Object.defineProperty(AuthImpl.prototype, "_currentUser", {
    get: function get() {
      return this.currentUser;
    },
    enumerable: false,
    configurable: true
  });
  AuthImpl.prototype.notifyAuthListeners = function () {
    var _a, _b;
    if (!this._isInitialized) {
      return;
    }
    this.idTokenSubscription.next(this.currentUser);
    var currentUid = (_b = (_a = this.currentUser) === null || _a === void 0 ? void 0 : _a.uid) !== null && _b !== void 0 ? _b : null;
    if (this.lastNotifiedUid !== currentUid) {
      this.lastNotifiedUid = currentUid;
      this.authStateSubscription.next(this.currentUser);
    }
  };
  AuthImpl.prototype.registerStateListener = function (subscription, nextOrObserver, error, completed) {
    var _this = this;
    if (this._deleted) {
      return function () {};
    }
    var cb = typeof nextOrObserver === 'function' ? nextOrObserver : nextOrObserver.next.bind(nextOrObserver);
    var promise = this._isInitialized ? Promise.resolve() : this._initializationPromise;
    _assert(promise, this, "internal-error");
    promise.then(function () {
      return cb(_this.currentUser);
    });
    if (typeof nextOrObserver === 'function') {
      return subscription.addObserver(nextOrObserver, error, completed);
    } else {
      return subscription.addObserver(nextOrObserver);
    }
  };
  AuthImpl.prototype.directlySetCurrentUser = function (user) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            if (this.currentUser && this.currentUser !== user) {
              this._currentUser._stopProactiveRefresh();
            }
            if (user && this.isProactiveRefreshEnabled) {
              user._startProactiveRefresh();
            }
            this.currentUser = user;
            if (!user) return [3, 2];
            return [4, this.assertedPersistence.setCurrentUser(user)];
          case 1:
            _a.sent();
            return [3, 4];
          case 2:
            return [4, this.assertedPersistence.removeCurrentUser()];
          case 3:
            _a.sent();
            _a.label = 4;
          case 4:
            return [2];
        }
      });
    });
  };
  AuthImpl.prototype.queue = function (action) {
    this.operations = this.operations.then(action, action);
    return this.operations;
  };
  Object.defineProperty(AuthImpl.prototype, "assertedPersistence", {
    get: function get() {
      _assert(this.persistenceManager, this, "internal-error");
      return this.persistenceManager;
    },
    enumerable: false,
    configurable: true
  });
  AuthImpl.prototype._logFramework = function (framework) {
    if (!framework || this.frameworks.includes(framework)) {
      return;
    }
    this.frameworks.push(framework);
    this.frameworks.sort();
    this.clientVersion = _getClientVersion(this.config.clientPlatform, this._getFrameworks());
  };
  AuthImpl.prototype._getFrameworks = function () {
    return this.frameworks;
  };
  AuthImpl.prototype._getAdditionalHeaders = function () {
    var _a;
    return tslib.__awaiter(this, void 0, void 0, function () {
      var headers, heartbeatsHeader, appCheckToken;
      var _b;
      return tslib.__generator(this, function (_c) {
        switch (_c.label) {
          case 0:
            headers = (_b = {}, _b["X-Client-Version"] = this.clientVersion, _b);
            if (this.app.options.appId) {
              headers["X-Firebase-gmpid"] = this.app.options.appId;
            }
            return [4, (_a = this.heartbeatServiceProvider.getImmediate({
              optional: true
            })) === null || _a === void 0 ? void 0 : _a.getHeartbeatsHeader()];
          case 1:
            heartbeatsHeader = _c.sent();
            if (heartbeatsHeader) {
              headers["X-Firebase-Client"] = heartbeatsHeader;
            }
            return [4, this._getAppCheckToken()];
          case 2:
            appCheckToken = _c.sent();
            if (appCheckToken) {
              headers["X-Firebase-AppCheck"] = appCheckToken;
            }
            return [2, headers];
        }
      });
    });
  };
  AuthImpl.prototype._getAppCheckToken = function () {
    var _a;
    return tslib.__awaiter(this, void 0, void 0, function () {
      var appCheckTokenResult;
      return tslib.__generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            return [4, (_a = this.appCheckServiceProvider.getImmediate({
              optional: true
            })) === null || _a === void 0 ? void 0 : _a.getToken()];
          case 1:
            appCheckTokenResult = _b.sent();
            if (appCheckTokenResult === null || appCheckTokenResult === void 0 ? void 0 : appCheckTokenResult.error) {
              _logWarn("Error while retrieving App Check token: ".concat(appCheckTokenResult.error));
            }
            return [2, appCheckTokenResult === null || appCheckTokenResult === void 0 ? void 0 : appCheckTokenResult.token];
        }
      });
    });
  };
  return AuthImpl;
}();
function _castAuth(auth) {
  return util.getModularInstance(auth);
}
var Subscription = function () {
  function Subscription(auth) {
    var _this = this;
    this.auth = auth;
    this.observer = null;
    this.addObserver = util.createSubscribe(function (observer) {
      return _this.observer = observer;
    });
  }
  Object.defineProperty(Subscription.prototype, "next", {
    get: function get() {
      _assert(this.observer, this.auth, "internal-error");
      return this.observer.next.bind(this.observer);
    },
    enumerable: false,
    configurable: true
  });
  return Subscription;
}();

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function initializeAuth(app$1, deps) {
  var provider = app._getProvider(app$1, 'auth');
  if (provider.isInitialized()) {
    var auth_1 = provider.getImmediate();
    var initialOptions = provider.getOptions();
    if (util.deepEqual(initialOptions, deps !== null && deps !== void 0 ? deps : {})) {
      return auth_1;
    } else {
      _fail(auth_1, "already-initialized");
    }
  }
  var auth = provider.initialize({
    options: deps
  });
  return auth;
}
function _initializeAuthInstance(auth, deps) {
  var persistence = (deps === null || deps === void 0 ? void 0 : deps.persistence) || [];
  var hierarchy = (Array.isArray(persistence) ? persistence : [persistence]).map(_getInstance);
  if (deps === null || deps === void 0 ? void 0 : deps.errorMap) {
    auth._updateErrorMap(deps.errorMap);
  }
  auth._initializeWithPersistence(hierarchy, deps === null || deps === void 0 ? void 0 : deps.popupRedirectResolver);
}
function connectAuthEmulator(auth, url, options) {
  var authInternal = _castAuth(auth);
  _assert(authInternal._canInitEmulator, authInternal, "emulator-config-failed");
  _assert(/^https?:\/\//.test(url), authInternal, "invalid-emulator-scheme");
  var disableWarnings = !!(options === null || options === void 0 ? void 0 : options.disableWarnings);
  var protocol = extractProtocol(url);
  var _a = extractHostAndPort(url),
    host = _a.host,
    port = _a.port;
  var portStr = port === null ? '' : ":".concat(port);
  authInternal.config.emulator = {
    url: "".concat(protocol, "//").concat(host).concat(portStr, "/")
  };
  authInternal.settings.appVerificationDisabledForTesting = true;
  authInternal.emulatorConfig = Object.freeze({
    host: host,
    port: port,
    protocol: protocol.replace(':', ''),
    options: Object.freeze({
      disableWarnings: disableWarnings
    })
  });
  if (!disableWarnings) {
    emitEmulatorWarning();
  }
}
function extractProtocol(url) {
  var protocolEnd = url.indexOf(':');
  return protocolEnd < 0 ? '' : url.substr(0, protocolEnd + 1);
}
function extractHostAndPort(url) {
  var protocol = extractProtocol(url);
  var authority = /(\/\/)?([^?#/]+)/.exec(url.substr(protocol.length));
  if (!authority) {
    return {
      host: '',
      port: null
    };
  }
  var hostAndPort = authority[2].split('@').pop() || '';
  var bracketedIPv6 = /^(\[[^\]]+\])(:|$)/.exec(hostAndPort);
  if (bracketedIPv6) {
    var host = bracketedIPv6[1];
    return {
      host: host,
      port: parsePort(hostAndPort.substr(host.length + 1))
    };
  } else {
    var _a = hostAndPort.split(':'),
      host = _a[0],
      port = _a[1];
    return {
      host: host,
      port: parsePort(port)
    };
  }
}
function parsePort(portStr) {
  if (!portStr) {
    return null;
  }
  var port = Number(portStr);
  if (isNaN(port)) {
    return null;
  }
  return port;
}
function emitEmulatorWarning() {
  function attachBanner() {
    var el = document.createElement('p');
    var sty = el.style;
    el.innerText = 'Running in emulator mode. Do not use with production credentials.';
    sty.position = 'fixed';
    sty.width = '100%';
    sty.backgroundColor = '#ffffff';
    sty.border = '.1em solid #000000';
    sty.color = '#b50000';
    sty.bottom = '0px';
    sty.left = '0px';
    sty.margin = '0px';
    sty.zIndex = '10000';
    sty.textAlign = 'center';
    el.classList.add('firebase-emulator-warning');
    document.body.appendChild(el);
  }
  if (typeof console !== 'undefined' && typeof console.info === 'function') {
    console.info('WARNING: You are using the Auth Emulator,' + ' which is intended for local testing only.  Do not use with' + ' production credentials.');
  }
  if (typeof window !== 'undefined' && typeof document !== 'undefined') {
    if (document.readyState === 'loading') {
      window.addEventListener('DOMContentLoaded', attachBanner);
    } else {
      attachBanner();
    }
  }
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AuthCredential = function () {
  function AuthCredential(providerId, signInMethod) {
    this.providerId = providerId;
    this.signInMethod = signInMethod;
  }
  AuthCredential.prototype.toJSON = function () {
    return debugFail('not implemented');
  };
  AuthCredential.prototype._getIdTokenResponse = function (_auth) {
    return debugFail('not implemented');
  };
  AuthCredential.prototype._linkToIdToken = function (_auth, _idToken) {
    return debugFail('not implemented');
  };
  AuthCredential.prototype._getReauthenticationResolver = function (_auth) {
    return debugFail('not implemented');
  };
  return AuthCredential;
}();

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function resetPassword(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performApiRequest(auth, "POST", "/v1/accounts:resetPassword", _addTidIfNecessary(auth, request))];
    });
  });
}
function updateEmailPassword(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performApiRequest(auth, "POST", "/v1/accounts:update", request)];
    });
  });
}
function applyActionCode$1(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performApiRequest(auth, "POST", "/v1/accounts:update", _addTidIfNecessary(auth, request))];
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function signInWithPassword(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performSignInRequest(auth, "POST", "/v1/accounts:signInWithPassword", _addTidIfNecessary(auth, request))];
    });
  });
}
function sendOobCode(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performApiRequest(auth, "POST", "/v1/accounts:sendOobCode", _addTidIfNecessary(auth, request))];
    });
  });
}
function sendEmailVerification$1(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, sendOobCode(auth, request)];
    });
  });
}
function sendPasswordResetEmail$1(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, sendOobCode(auth, request)];
    });
  });
}
function sendSignInLinkToEmail$1(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, sendOobCode(auth, request)];
    });
  });
}
function verifyAndChangeEmail(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, sendOobCode(auth, request)];
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function signInWithEmailLink$1(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performSignInRequest(auth, "POST", "/v1/accounts:signInWithEmailLink", _addTidIfNecessary(auth, request))];
    });
  });
}
function signInWithEmailLinkForLinking(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performSignInRequest(auth, "POST", "/v1/accounts:signInWithEmailLink", _addTidIfNecessary(auth, request))];
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EmailAuthCredential = function (_super) {
  tslib.__extends(EmailAuthCredential, _super);
  function EmailAuthCredential(_email, _password, signInMethod, _tenantId) {
    if (_tenantId === void 0) {
      _tenantId = null;
    }
    var _this = _super.call(this, "password", signInMethod) || this;
    _this._email = _email;
    _this._password = _password;
    _this._tenantId = _tenantId;
    return _this;
  }
  EmailAuthCredential._fromEmailAndPassword = function (email, password) {
    return new EmailAuthCredential(email, password, "password");
  };
  EmailAuthCredential._fromEmailAndCode = function (email, oobCode, tenantId) {
    if (tenantId === void 0) {
      tenantId = null;
    }
    return new EmailAuthCredential(email, oobCode, "emailLink", tenantId);
  };
  EmailAuthCredential.prototype.toJSON = function () {
    return {
      email: this._email,
      password: this._password,
      signInMethod: this.signInMethod,
      tenantId: this._tenantId
    };
  };
  EmailAuthCredential.fromJSON = function (json) {
    var obj = typeof json === 'string' ? JSON.parse(json) : json;
    if ((obj === null || obj === void 0 ? void 0 : obj.email) && (obj === null || obj === void 0 ? void 0 : obj.password)) {
      if (obj.signInMethod === "password") {
        return this._fromEmailAndPassword(obj.email, obj.password);
      } else if (obj.signInMethod === "emailLink") {
        return this._fromEmailAndCode(obj.email, obj.password, obj.tenantId);
      }
    }
    return null;
  };
  EmailAuthCredential.prototype._getIdTokenResponse = function (auth) {
    var _a;
    return tslib.__awaiter(this, void 0, void 0, function () {
      var _b, request_1, requestWithRecaptcha;
      var _this = this;
      return tslib.__generator(this, function (_c) {
        switch (_c.label) {
          case 0:
            _b = this.signInMethod;
            switch (_b) {
              case "password":
                return [3, 1];
              case "emailLink":
                return [3, 4];
            }
            return [3, 5];
          case 1:
            request_1 = {
              returnSecureToken: true,
              email: this._email,
              password: this._password,
              clientType: "CLIENT_TYPE_WEB"
            };
            if (!((_a = auth._getRecaptchaConfig()) === null || _a === void 0 ? void 0 : _a.emailPasswordEnabled)) return [3, 3];
            return [4, injectRecaptchaFields(auth, request_1, "signInWithPassword")];
          case 2:
            requestWithRecaptcha = _c.sent();
            return [2, signInWithPassword(auth, requestWithRecaptcha)];
          case 3:
            return [2, signInWithPassword(auth, request_1).catch(function (error) {
              return tslib.__awaiter(_this, void 0, void 0, function () {
                var requestWithRecaptcha;
                return tslib.__generator(this, function (_a) {
                  switch (_a.label) {
                    case 0:
                      if (!(error.code === "auth/".concat("missing-recaptcha-token"))) return [3, 2];
                      console.log('Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.');
                      return [4, injectRecaptchaFields(auth, request_1, "signInWithPassword")];
                    case 1:
                      requestWithRecaptcha = _a.sent();
                      return [2, signInWithPassword(auth, requestWithRecaptcha)];
                    case 2:
                      return [2, Promise.reject(error)];
                  }
                });
              });
            })];
          case 4:
            return [2, signInWithEmailLink$1(auth, {
              email: this._email,
              oobCode: this._password
            })];
          case 5:
            _fail(auth, "internal-error");
            _c.label = 6;
          case 6:
            return [2];
        }
      });
    });
  };
  EmailAuthCredential.prototype._linkToIdToken = function (auth, idToken) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      return tslib.__generator(this, function (_a) {
        switch (this.signInMethod) {
          case "password":
            return [2, updateEmailPassword(auth, {
              idToken: idToken,
              returnSecureToken: true,
              email: this._email,
              password: this._password
            })];
          case "emailLink":
            return [2, signInWithEmailLinkForLinking(auth, {
              idToken: idToken,
              email: this._email,
              oobCode: this._password
            })];
          default:
            _fail(auth, "internal-error");
        }
        return [2];
      });
    });
  };
  EmailAuthCredential.prototype._getReauthenticationResolver = function (auth) {
    return this._getIdTokenResponse(auth);
  };
  return EmailAuthCredential;
}(AuthCredential);

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function signInWithIdp(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performSignInRequest(auth, "POST", "/v1/accounts:signInWithIdp", _addTidIfNecessary(auth, request))];
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var IDP_REQUEST_URI$1 = 'http://localhost';
var OAuthCredential = function (_super) {
  tslib.__extends(OAuthCredential, _super);
  function OAuthCredential() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.pendingToken = null;
    return _this;
  }
  OAuthCredential._fromParams = function (params) {
    var cred = new OAuthCredential(params.providerId, params.signInMethod);
    if (params.idToken || params.accessToken) {
      if (params.idToken) {
        cred.idToken = params.idToken;
      }
      if (params.accessToken) {
        cred.accessToken = params.accessToken;
      }
      if (params.nonce && !params.pendingToken) {
        cred.nonce = params.nonce;
      }
      if (params.pendingToken) {
        cred.pendingToken = params.pendingToken;
      }
    } else if (params.oauthToken && params.oauthTokenSecret) {
      cred.accessToken = params.oauthToken;
      cred.secret = params.oauthTokenSecret;
    } else {
      _fail("argument-error");
    }
    return cred;
  };
  OAuthCredential.prototype.toJSON = function () {
    return {
      idToken: this.idToken,
      accessToken: this.accessToken,
      secret: this.secret,
      nonce: this.nonce,
      pendingToken: this.pendingToken,
      providerId: this.providerId,
      signInMethod: this.signInMethod
    };
  };
  OAuthCredential.fromJSON = function (json) {
    var obj = typeof json === 'string' ? JSON.parse(json) : json;
    var providerId = obj.providerId,
      signInMethod = obj.signInMethod,
      rest = tslib.__rest(obj, ["providerId", "signInMethod"]);
    if (!providerId || !signInMethod) {
      return null;
    }
    var cred = new OAuthCredential(providerId, signInMethod);
    cred.idToken = rest.idToken || undefined;
    cred.accessToken = rest.accessToken || undefined;
    cred.secret = rest.secret;
    cred.nonce = rest.nonce;
    cred.pendingToken = rest.pendingToken || null;
    return cred;
  };
  OAuthCredential.prototype._getIdTokenResponse = function (auth) {
    var request = this.buildRequest();
    return signInWithIdp(auth, request);
  };
  OAuthCredential.prototype._linkToIdToken = function (auth, idToken) {
    var request = this.buildRequest();
    request.idToken = idToken;
    return signInWithIdp(auth, request);
  };
  OAuthCredential.prototype._getReauthenticationResolver = function (auth) {
    var request = this.buildRequest();
    request.autoCreate = false;
    return signInWithIdp(auth, request);
  };
  OAuthCredential.prototype.buildRequest = function () {
    var request = {
      requestUri: IDP_REQUEST_URI$1,
      returnSecureToken: true
    };
    if (this.pendingToken) {
      request.pendingToken = this.pendingToken;
    } else {
      var postBody = {};
      if (this.idToken) {
        postBody['id_token'] = this.idToken;
      }
      if (this.accessToken) {
        postBody['access_token'] = this.accessToken;
      }
      if (this.secret) {
        postBody['oauth_token_secret'] = this.secret;
      }
      postBody['providerId'] = this.providerId;
      if (this.nonce && !this.pendingToken) {
        postBody['nonce'] = this.nonce;
      }
      request.postBody = util.querystring(postBody);
    }
    return request;
  };
  return OAuthCredential;
}(AuthCredential);

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _a;
function signInWithPhoneNumber$1(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performSignInRequest(auth, "POST", "/v1/accounts:signInWithPhoneNumber", _addTidIfNecessary(auth, request))];
    });
  });
}
function linkWithPhoneNumber$1(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var response;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          return [4, _performSignInRequest(auth, "POST", "/v1/accounts:signInWithPhoneNumber", _addTidIfNecessary(auth, request))];
        case 1:
          response = _a.sent();
          if (response.temporaryProof) {
            throw _makeTaggedError(auth, "account-exists-with-different-credential", response);
          }
          return [2, response];
      }
    });
  });
}
var VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_ = (_a = {}, _a["USER_NOT_FOUND"] = "user-not-found", _a);
function verifyPhoneNumberForExisting(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var apiRequest;
    return tslib.__generator(this, function (_a) {
      apiRequest = tslib.__assign(tslib.__assign({}, request), {
        operation: 'REAUTH'
      });
      return [2, _performSignInRequest(auth, "POST", "/v1/accounts:signInWithPhoneNumber", _addTidIfNecessary(auth, apiRequest), VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_)];
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var PhoneAuthCredential = function (_super) {
  tslib.__extends(PhoneAuthCredential, _super);
  function PhoneAuthCredential(params) {
    var _this = _super.call(this, "phone", "phone") || this;
    _this.params = params;
    return _this;
  }
  PhoneAuthCredential._fromVerification = function (verificationId, verificationCode) {
    return new PhoneAuthCredential({
      verificationId: verificationId,
      verificationCode: verificationCode
    });
  };
  PhoneAuthCredential._fromTokenResponse = function (phoneNumber, temporaryProof) {
    return new PhoneAuthCredential({
      phoneNumber: phoneNumber,
      temporaryProof: temporaryProof
    });
  };
  PhoneAuthCredential.prototype._getIdTokenResponse = function (auth) {
    return signInWithPhoneNumber$1(auth, this._makeVerificationRequest());
  };
  PhoneAuthCredential.prototype._linkToIdToken = function (auth, idToken) {
    return linkWithPhoneNumber$1(auth, tslib.__assign({
      idToken: idToken
    }, this._makeVerificationRequest()));
  };
  PhoneAuthCredential.prototype._getReauthenticationResolver = function (auth) {
    return verifyPhoneNumberForExisting(auth, this._makeVerificationRequest());
  };
  PhoneAuthCredential.prototype._makeVerificationRequest = function () {
    var _a = this.params,
      temporaryProof = _a.temporaryProof,
      phoneNumber = _a.phoneNumber,
      verificationId = _a.verificationId,
      verificationCode = _a.verificationCode;
    if (temporaryProof && phoneNumber) {
      return {
        temporaryProof: temporaryProof,
        phoneNumber: phoneNumber
      };
    }
    return {
      sessionInfo: verificationId,
      code: verificationCode
    };
  };
  PhoneAuthCredential.prototype.toJSON = function () {
    var obj = {
      providerId: this.providerId
    };
    if (this.params.phoneNumber) {
      obj.phoneNumber = this.params.phoneNumber;
    }
    if (this.params.temporaryProof) {
      obj.temporaryProof = this.params.temporaryProof;
    }
    if (this.params.verificationCode) {
      obj.verificationCode = this.params.verificationCode;
    }
    if (this.params.verificationId) {
      obj.verificationId = this.params.verificationId;
    }
    return obj;
  };
  PhoneAuthCredential.fromJSON = function (json) {
    if (typeof json === 'string') {
      json = JSON.parse(json);
    }
    var _a = json,
      verificationId = _a.verificationId,
      verificationCode = _a.verificationCode,
      phoneNumber = _a.phoneNumber,
      temporaryProof = _a.temporaryProof;
    if (!verificationCode && !verificationId && !phoneNumber && !temporaryProof) {
      return null;
    }
    return new PhoneAuthCredential({
      verificationId: verificationId,
      verificationCode: verificationCode,
      phoneNumber: phoneNumber,
      temporaryProof: temporaryProof
    });
  };
  return PhoneAuthCredential;
}(AuthCredential);

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function parseMode(mode) {
  switch (mode) {
    case 'recoverEmail':
      return "RECOVER_EMAIL";
    case 'resetPassword':
      return "PASSWORD_RESET";
    case 'signIn':
      return "EMAIL_SIGNIN";
    case 'verifyEmail':
      return "VERIFY_EMAIL";
    case 'verifyAndChangeEmail':
      return "VERIFY_AND_CHANGE_EMAIL";
    case 'revertSecondFactorAddition':
      return "REVERT_SECOND_FACTOR_ADDITION";
    default:
      return null;
  }
}
function parseDeepLink(url) {
  var link = util.querystringDecode(util.extractQuerystring(url))['link'];
  var doubleDeepLink = link ? util.querystringDecode(util.extractQuerystring(link))['deep_link_id'] : null;
  var iOSDeepLink = util.querystringDecode(util.extractQuerystring(url))['deep_link_id'];
  var iOSDoubleDeepLink = iOSDeepLink ? util.querystringDecode(util.extractQuerystring(iOSDeepLink))['link'] : null;
  return iOSDoubleDeepLink || iOSDeepLink || doubleDeepLink || link || url;
}
var ActionCodeURL = function () {
  function ActionCodeURL(actionLink) {
    var _a, _b, _c, _d, _e, _f;
    var searchParams = util.querystringDecode(util.extractQuerystring(actionLink));
    var apiKey = (_a = searchParams["apiKey"]) !== null && _a !== void 0 ? _a : null;
    var code = (_b = searchParams["oobCode"]) !== null && _b !== void 0 ? _b : null;
    var operation = parseMode((_c = searchParams["mode"]) !== null && _c !== void 0 ? _c : null);
    _assert(apiKey && code && operation, "argument-error");
    this.apiKey = apiKey;
    this.operation = operation;
    this.code = code;
    this.continueUrl = (_d = searchParams["continueUrl"]) !== null && _d !== void 0 ? _d : null;
    this.languageCode = (_e = searchParams["languageCode"]) !== null && _e !== void 0 ? _e : null;
    this.tenantId = (_f = searchParams["tenantId"]) !== null && _f !== void 0 ? _f : null;
  }
  ActionCodeURL.parseLink = function (link) {
    var actionLink = parseDeepLink(link);
    try {
      return new ActionCodeURL(actionLink);
    } catch (_a) {
      return null;
    }
  };
  return ActionCodeURL;
}();
function parseActionCodeURL(link) {
  return ActionCodeURL.parseLink(link);
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EmailAuthProvider = function () {
  function EmailAuthProvider() {
    this.providerId = EmailAuthProvider.PROVIDER_ID;
  }
  EmailAuthProvider.credential = function (email, password) {
    return EmailAuthCredential._fromEmailAndPassword(email, password);
  };
  EmailAuthProvider.credentialWithLink = function (email, emailLink) {
    var actionCodeUrl = ActionCodeURL.parseLink(emailLink);
    _assert(actionCodeUrl, "argument-error");
    return EmailAuthCredential._fromEmailAndCode(email, actionCodeUrl.code, actionCodeUrl.tenantId);
  };
  EmailAuthProvider.PROVIDER_ID = "password";
  EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD = "password";
  EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD = "emailLink";
  return EmailAuthProvider;
}();

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FederatedAuthProvider = function () {
  function FederatedAuthProvider(providerId) {
    this.providerId = providerId;
    this.defaultLanguageCode = null;
    this.customParameters = {};
  }
  FederatedAuthProvider.prototype.setDefaultLanguage = function (languageCode) {
    this.defaultLanguageCode = languageCode;
  };
  FederatedAuthProvider.prototype.setCustomParameters = function (customOAuthParameters) {
    this.customParameters = customOAuthParameters;
    return this;
  };
  FederatedAuthProvider.prototype.getCustomParameters = function () {
    return this.customParameters;
  };
  return FederatedAuthProvider;
}();

/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var BaseOAuthProvider = function (_super) {
  tslib.__extends(BaseOAuthProvider, _super);
  function BaseOAuthProvider() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.scopes = [];
    return _this;
  }
  BaseOAuthProvider.prototype.addScope = function (scope) {
    if (!this.scopes.includes(scope)) {
      this.scopes.push(scope);
    }
    return this;
  };
  BaseOAuthProvider.prototype.getScopes = function () {
    return tslib.__spreadArray([], this.scopes, true);
  };
  return BaseOAuthProvider;
}(FederatedAuthProvider);
var OAuthProvider = function (_super) {
  tslib.__extends(OAuthProvider, _super);
  function OAuthProvider() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  OAuthProvider.credentialFromJSON = function (json) {
    var obj = typeof json === 'string' ? JSON.parse(json) : json;
    _assert('providerId' in obj && 'signInMethod' in obj, "argument-error");
    return OAuthCredential._fromParams(obj);
  };
  OAuthProvider.prototype.credential = function (params) {
    return this._credential(tslib.__assign(tslib.__assign({}, params), {
      nonce: params.rawNonce
    }));
  };
  OAuthProvider.prototype._credential = function (params) {
    _assert(params.idToken || params.accessToken, "argument-error");
    return OAuthCredential._fromParams(tslib.__assign(tslib.__assign({}, params), {
      providerId: this.providerId,
      signInMethod: this.providerId
    }));
  };
  OAuthProvider.credentialFromResult = function (userCredential) {
    return OAuthProvider.oauthCredentialFromTaggedObject(userCredential);
  };
  OAuthProvider.credentialFromError = function (error) {
    return OAuthProvider.oauthCredentialFromTaggedObject(error.customData || {});
  };
  OAuthProvider.oauthCredentialFromTaggedObject = function (_a) {
    var tokenResponse = _a._tokenResponse;
    if (!tokenResponse) {
      return null;
    }
    var _b = tokenResponse,
      oauthIdToken = _b.oauthIdToken,
      oauthAccessToken = _b.oauthAccessToken,
      oauthTokenSecret = _b.oauthTokenSecret,
      pendingToken = _b.pendingToken,
      nonce = _b.nonce,
      providerId = _b.providerId;
    if (!oauthAccessToken && !oauthTokenSecret && !oauthIdToken && !pendingToken) {
      return null;
    }
    if (!providerId) {
      return null;
    }
    try {
      return new OAuthProvider(providerId)._credential({
        idToken: oauthIdToken,
        accessToken: oauthAccessToken,
        nonce: nonce,
        pendingToken: pendingToken
      });
    } catch (e) {
      return null;
    }
  };
  return OAuthProvider;
}(BaseOAuthProvider);

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var FacebookAuthProvider = function (_super) {
  tslib.__extends(FacebookAuthProvider, _super);
  function FacebookAuthProvider() {
    return _super.call(this, "facebook.com") || this;
  }
  FacebookAuthProvider.credential = function (accessToken) {
    return OAuthCredential._fromParams({
      providerId: FacebookAuthProvider.PROVIDER_ID,
      signInMethod: FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,
      accessToken: accessToken
    });
  };
  FacebookAuthProvider.credentialFromResult = function (userCredential) {
    return FacebookAuthProvider.credentialFromTaggedObject(userCredential);
  };
  FacebookAuthProvider.credentialFromError = function (error) {
    return FacebookAuthProvider.credentialFromTaggedObject(error.customData || {});
  };
  FacebookAuthProvider.credentialFromTaggedObject = function (_a) {
    var tokenResponse = _a._tokenResponse;
    if (!tokenResponse || !('oauthAccessToken' in tokenResponse)) {
      return null;
    }
    if (!tokenResponse.oauthAccessToken) {
      return null;
    }
    try {
      return FacebookAuthProvider.credential(tokenResponse.oauthAccessToken);
    } catch (_b) {
      return null;
    }
  };
  FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD = "facebook.com";
  FacebookAuthProvider.PROVIDER_ID = "facebook.com";
  return FacebookAuthProvider;
}(BaseOAuthProvider);

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var GoogleAuthProvider = function (_super) {
  tslib.__extends(GoogleAuthProvider, _super);
  function GoogleAuthProvider() {
    var _this = _super.call(this, "google.com") || this;
    _this.addScope('profile');
    return _this;
  }
  GoogleAuthProvider.credential = function (idToken, accessToken) {
    return OAuthCredential._fromParams({
      providerId: GoogleAuthProvider.PROVIDER_ID,
      signInMethod: GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,
      idToken: idToken,
      accessToken: accessToken
    });
  };
  GoogleAuthProvider.credentialFromResult = function (userCredential) {
    return GoogleAuthProvider.credentialFromTaggedObject(userCredential);
  };
  GoogleAuthProvider.credentialFromError = function (error) {
    return GoogleAuthProvider.credentialFromTaggedObject(error.customData || {});
  };
  GoogleAuthProvider.credentialFromTaggedObject = function (_a) {
    var tokenResponse = _a._tokenResponse;
    if (!tokenResponse) {
      return null;
    }
    var _b = tokenResponse,
      oauthIdToken = _b.oauthIdToken,
      oauthAccessToken = _b.oauthAccessToken;
    if (!oauthIdToken && !oauthAccessToken) {
      return null;
    }
    try {
      return GoogleAuthProvider.credential(oauthIdToken, oauthAccessToken);
    } catch (_c) {
      return null;
    }
  };
  GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD = "google.com";
  GoogleAuthProvider.PROVIDER_ID = "google.com";
  return GoogleAuthProvider;
}(BaseOAuthProvider);

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var GithubAuthProvider = function (_super) {
  tslib.__extends(GithubAuthProvider, _super);
  function GithubAuthProvider() {
    return _super.call(this, "github.com") || this;
  }
  GithubAuthProvider.credential = function (accessToken) {
    return OAuthCredential._fromParams({
      providerId: GithubAuthProvider.PROVIDER_ID,
      signInMethod: GithubAuthProvider.GITHUB_SIGN_IN_METHOD,
      accessToken: accessToken
    });
  };
  GithubAuthProvider.credentialFromResult = function (userCredential) {
    return GithubAuthProvider.credentialFromTaggedObject(userCredential);
  };
  GithubAuthProvider.credentialFromError = function (error) {
    return GithubAuthProvider.credentialFromTaggedObject(error.customData || {});
  };
  GithubAuthProvider.credentialFromTaggedObject = function (_a) {
    var tokenResponse = _a._tokenResponse;
    if (!tokenResponse || !('oauthAccessToken' in tokenResponse)) {
      return null;
    }
    if (!tokenResponse.oauthAccessToken) {
      return null;
    }
    try {
      return GithubAuthProvider.credential(tokenResponse.oauthAccessToken);
    } catch (_b) {
      return null;
    }
  };
  GithubAuthProvider.GITHUB_SIGN_IN_METHOD = "github.com";
  GithubAuthProvider.PROVIDER_ID = "github.com";
  return GithubAuthProvider;
}(BaseOAuthProvider);

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var IDP_REQUEST_URI = 'http://localhost';
var SAMLAuthCredential = function (_super) {
  tslib.__extends(SAMLAuthCredential, _super);
  function SAMLAuthCredential(providerId, pendingToken) {
    var _this = _super.call(this, providerId, providerId) || this;
    _this.pendingToken = pendingToken;
    return _this;
  }
  SAMLAuthCredential.prototype._getIdTokenResponse = function (auth) {
    var request = this.buildRequest();
    return signInWithIdp(auth, request);
  };
  SAMLAuthCredential.prototype._linkToIdToken = function (auth, idToken) {
    var request = this.buildRequest();
    request.idToken = idToken;
    return signInWithIdp(auth, request);
  };
  SAMLAuthCredential.prototype._getReauthenticationResolver = function (auth) {
    var request = this.buildRequest();
    request.autoCreate = false;
    return signInWithIdp(auth, request);
  };
  SAMLAuthCredential.prototype.toJSON = function () {
    return {
      signInMethod: this.signInMethod,
      providerId: this.providerId,
      pendingToken: this.pendingToken
    };
  };
  SAMLAuthCredential.fromJSON = function (json) {
    var obj = typeof json === 'string' ? JSON.parse(json) : json;
    var providerId = obj.providerId,
      signInMethod = obj.signInMethod,
      pendingToken = obj.pendingToken;
    if (!providerId || !signInMethod || !pendingToken || providerId !== signInMethod) {
      return null;
    }
    return new SAMLAuthCredential(providerId, pendingToken);
  };
  SAMLAuthCredential._create = function (providerId, pendingToken) {
    return new SAMLAuthCredential(providerId, pendingToken);
  };
  SAMLAuthCredential.prototype.buildRequest = function () {
    return {
      requestUri: IDP_REQUEST_URI,
      returnSecureToken: true,
      pendingToken: this.pendingToken
    };
  };
  return SAMLAuthCredential;
}(AuthCredential);

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var SAML_PROVIDER_PREFIX = 'saml.';
var SAMLAuthProvider = function (_super) {
  tslib.__extends(SAMLAuthProvider, _super);
  function SAMLAuthProvider(providerId) {
    _assert(providerId.startsWith(SAML_PROVIDER_PREFIX), "argument-error");
    return _super.call(this, providerId) || this;
  }
  SAMLAuthProvider.credentialFromResult = function (userCredential) {
    return SAMLAuthProvider.samlCredentialFromTaggedObject(userCredential);
  };
  SAMLAuthProvider.credentialFromError = function (error) {
    return SAMLAuthProvider.samlCredentialFromTaggedObject(error.customData || {});
  };
  SAMLAuthProvider.credentialFromJSON = function (json) {
    var credential = SAMLAuthCredential.fromJSON(json);
    _assert(credential, "argument-error");
    return credential;
  };
  SAMLAuthProvider.samlCredentialFromTaggedObject = function (_a) {
    var tokenResponse = _a._tokenResponse;
    if (!tokenResponse) {
      return null;
    }
    var _b = tokenResponse,
      pendingToken = _b.pendingToken,
      providerId = _b.providerId;
    if (!pendingToken || !providerId) {
      return null;
    }
    try {
      return SAMLAuthCredential._create(providerId, pendingToken);
    } catch (e) {
      return null;
    }
  };
  return SAMLAuthProvider;
}(FederatedAuthProvider);

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var TwitterAuthProvider = function (_super) {
  tslib.__extends(TwitterAuthProvider, _super);
  function TwitterAuthProvider() {
    return _super.call(this, "twitter.com") || this;
  }
  TwitterAuthProvider.credential = function (token, secret) {
    return OAuthCredential._fromParams({
      providerId: TwitterAuthProvider.PROVIDER_ID,
      signInMethod: TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,
      oauthToken: token,
      oauthTokenSecret: secret
    });
  };
  TwitterAuthProvider.credentialFromResult = function (userCredential) {
    return TwitterAuthProvider.credentialFromTaggedObject(userCredential);
  };
  TwitterAuthProvider.credentialFromError = function (error) {
    return TwitterAuthProvider.credentialFromTaggedObject(error.customData || {});
  };
  TwitterAuthProvider.credentialFromTaggedObject = function (_a) {
    var tokenResponse = _a._tokenResponse;
    if (!tokenResponse) {
      return null;
    }
    var _b = tokenResponse,
      oauthAccessToken = _b.oauthAccessToken,
      oauthTokenSecret = _b.oauthTokenSecret;
    if (!oauthAccessToken || !oauthTokenSecret) {
      return null;
    }
    try {
      return TwitterAuthProvider.credential(oauthAccessToken, oauthTokenSecret);
    } catch (_c) {
      return null;
    }
  };
  TwitterAuthProvider.TWITTER_SIGN_IN_METHOD = "twitter.com";
  TwitterAuthProvider.PROVIDER_ID = "twitter.com";
  return TwitterAuthProvider;
}(BaseOAuthProvider);

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function signUp(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performSignInRequest(auth, "POST", "/v1/accounts:signUp", _addTidIfNecessary(auth, request))];
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var UserCredentialImpl = function () {
  function UserCredentialImpl(params) {
    this.user = params.user;
    this.providerId = params.providerId;
    this._tokenResponse = params._tokenResponse;
    this.operationType = params.operationType;
  }
  UserCredentialImpl._fromIdTokenResponse = function (auth, operationType, idTokenResponse, isAnonymous) {
    if (isAnonymous === void 0) {
      isAnonymous = false;
    }
    return tslib.__awaiter(this, void 0, void 0, function () {
      var user, providerId, userCred;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4, UserImpl._fromIdTokenResponse(auth, idTokenResponse, isAnonymous)];
          case 1:
            user = _a.sent();
            providerId = providerIdForResponse(idTokenResponse);
            userCred = new UserCredentialImpl({
              user: user,
              providerId: providerId,
              _tokenResponse: idTokenResponse,
              operationType: operationType
            });
            return [2, userCred];
        }
      });
    });
  };
  UserCredentialImpl._forOperation = function (user, operationType, response) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var providerId;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            return [4, user._updateTokensIfNecessary(response, true)];
          case 1:
            _a.sent();
            providerId = providerIdForResponse(response);
            return [2, new UserCredentialImpl({
              user: user,
              providerId: providerId,
              _tokenResponse: response,
              operationType: operationType
            })];
        }
      });
    });
  };
  return UserCredentialImpl;
}();
function providerIdForResponse(response) {
  if (response.providerId) {
    return response.providerId;
  }
  if ('phoneNumber' in response) {
    return "phone";
  }
  return null;
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function signInAnonymously(auth) {
  var _a;
  return tslib.__awaiter(this, void 0, void 0, function () {
    var authInternal, response, userCredential;
    return tslib.__generator(this, function (_b) {
      switch (_b.label) {
        case 0:
          authInternal = _castAuth(auth);
          return [4, authInternal._initializationPromise];
        case 1:
          _b.sent();
          if ((_a = authInternal.currentUser) === null || _a === void 0 ? void 0 : _a.isAnonymous) {
            return [2, new UserCredentialImpl({
              user: authInternal.currentUser,
              providerId: null,
              operationType: "signIn"
            })];
          }
          return [4, signUp(authInternal, {
            returnSecureToken: true
          })];
        case 2:
          response = _b.sent();
          return [4, UserCredentialImpl._fromIdTokenResponse(authInternal, "signIn", response, true)];
        case 3:
          userCredential = _b.sent();
          return [4, authInternal._updateCurrentUser(userCredential.user)];
        case 4:
          _b.sent();
          return [2, userCredential];
      }
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var MultiFactorError = function (_super) {
  tslib.__extends(MultiFactorError, _super);
  function MultiFactorError(auth, error, operationType, user) {
    var _this = this;
    var _a;
    _this = _super.call(this, error.code, error.message) || this;
    _this.operationType = operationType;
    _this.user = user;
    Object.setPrototypeOf(_this, MultiFactorError.prototype);
    _this.customData = {
      appName: auth.name,
      tenantId: (_a = auth.tenantId) !== null && _a !== void 0 ? _a : undefined,
      _serverResponse: error.customData._serverResponse,
      operationType: operationType
    };
    return _this;
  }
  MultiFactorError._fromErrorAndOperation = function (auth, error, operationType, user) {
    return new MultiFactorError(auth, error, operationType, user);
  };
  return MultiFactorError;
}(util.FirebaseError);
function _processCredentialSavingMfaContextIfNecessary(auth, operationType, credential, user) {
  var idTokenProvider = operationType === "reauthenticate" ? credential._getReauthenticationResolver(auth) : credential._getIdTokenResponse(auth);
  return idTokenProvider.catch(function (error) {
    if (error.code === "auth/".concat("multi-factor-auth-required")) {
      throw MultiFactorError._fromErrorAndOperation(auth, error, operationType, user);
    }
    throw error;
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function providerDataAsNames(providerData) {
  return new Set(providerData.map(function (_a) {
    var providerId = _a.providerId;
    return providerId;
  }).filter(function (pid) {
    return !!pid;
  }));
}

/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function unlink(user, providerId) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var userInternal, providerUserInfo, _a, _b, providersLeft;
    var _c;
    return tslib.__generator(this, function (_d) {
      switch (_d.label) {
        case 0:
          userInternal = util.getModularInstance(user);
          return [4, _assertLinkedStatus(true, userInternal, providerId)];
        case 1:
          _d.sent();
          _a = deleteLinkedAccounts;
          _b = [userInternal.auth];
          _c = {};
          return [4, userInternal.getIdToken()];
        case 2:
          return [4, _a.apply(void 0, _b.concat([(_c.idToken = _d.sent(), _c.deleteProvider = [providerId], _c)]))];
        case 3:
          providerUserInfo = _d.sent().providerUserInfo;
          providersLeft = providerDataAsNames(providerUserInfo || []);
          userInternal.providerData = userInternal.providerData.filter(function (pd) {
            return providersLeft.has(pd.providerId);
          });
          if (!providersLeft.has("phone")) {
            userInternal.phoneNumber = null;
          }
          return [4, userInternal.auth._persistUserIfCurrent(userInternal)];
        case 4:
          _d.sent();
          return [2, userInternal];
      }
    });
  });
}
function _link(user, credential, bypassAuthState) {
  if (bypassAuthState === void 0) {
    bypassAuthState = false;
  }
  return tslib.__awaiter(this, void 0, void 0, function () {
    var response, _a, _b, _c, _d, _e;
    return tslib.__generator(this, function (_f) {
      switch (_f.label) {
        case 0:
          _a = _logoutIfInvalidated;
          _b = [user];
          _d = (_c = credential)._linkToIdToken;
          _e = [user.auth];
          return [4, user.getIdToken()];
        case 1:
          return [4, _a.apply(void 0, _b.concat([_d.apply(_c, _e.concat([_f.sent()])), bypassAuthState]))];
        case 2:
          response = _f.sent();
          return [2, UserCredentialImpl._forOperation(user, "link", response)];
      }
    });
  });
}
function _assertLinkedStatus(expected, user, provider) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var providerIds, code;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          return [4, _reloadWithoutSaving(user)];
        case 1:
          _a.sent();
          providerIds = providerDataAsNames(user.providerData);
          code = expected === false ? "provider-already-linked" : "no-such-provider";
          _assert(providerIds.has(provider) === expected, user.auth, code);
          return [2];
      }
    });
  });
}

/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _reauthenticate(user, credential, bypassAuthState) {
  if (bypassAuthState === void 0) {
    bypassAuthState = false;
  }
  return tslib.__awaiter(this, void 0, void 0, function () {
    var auth, operationType, response, parsed, localId, e_1;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          auth = user.auth;
          operationType = "reauthenticate";
          _a.label = 1;
        case 1:
          _a.trys.push([1, 3,, 4]);
          return [4, _logoutIfInvalidated(user, _processCredentialSavingMfaContextIfNecessary(auth, operationType, credential, user), bypassAuthState)];
        case 2:
          response = _a.sent();
          _assert(response.idToken, auth, "internal-error");
          parsed = _parseToken(response.idToken);
          _assert(parsed, auth, "internal-error");
          localId = parsed.sub;
          _assert(user.uid === localId, auth, "user-mismatch");
          return [2, UserCredentialImpl._forOperation(user, operationType, response)];
        case 3:
          e_1 = _a.sent();
          if ((e_1 === null || e_1 === void 0 ? void 0 : e_1.code) === "auth/".concat("user-not-found")) {
            _fail(auth, "user-mismatch");
          }
          throw e_1;
        case 4:
          return [2];
      }
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _signInWithCredential(auth, credential, bypassAuthState) {
  if (bypassAuthState === void 0) {
    bypassAuthState = false;
  }
  return tslib.__awaiter(this, void 0, void 0, function () {
    var operationType, response, userCredential;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          operationType = "signIn";
          return [4, _processCredentialSavingMfaContextIfNecessary(auth, operationType, credential)];
        case 1:
          response = _a.sent();
          return [4, UserCredentialImpl._fromIdTokenResponse(auth, operationType, response)];
        case 2:
          userCredential = _a.sent();
          if (!!bypassAuthState) return [3, 4];
          return [4, auth._updateCurrentUser(userCredential.user)];
        case 3:
          _a.sent();
          _a.label = 4;
        case 4:
          return [2, userCredential];
      }
    });
  });
}
function signInWithCredential(auth, credential) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _signInWithCredential(_castAuth(auth), credential)];
    });
  });
}
function linkWithCredential(user, credential) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var userInternal;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          userInternal = util.getModularInstance(user);
          return [4, _assertLinkedStatus(false, userInternal, credential.providerId)];
        case 1:
          _a.sent();
          return [2, _link(userInternal, credential)];
      }
    });
  });
}
function reauthenticateWithCredential(user, credential) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _reauthenticate(util.getModularInstance(user), credential)];
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function signInWithCustomToken$1(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performSignInRequest(auth, "POST", "/v1/accounts:signInWithCustomToken", _addTidIfNecessary(auth, request))];
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function signInWithCustomToken(auth, customToken) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var authInternal, response, cred;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          authInternal = _castAuth(auth);
          return [4, signInWithCustomToken$1(authInternal, {
            token: customToken,
            returnSecureToken: true
          })];
        case 1:
          response = _a.sent();
          return [4, UserCredentialImpl._fromIdTokenResponse(authInternal, "signIn", response)];
        case 2:
          cred = _a.sent();
          return [4, authInternal._updateCurrentUser(cred.user)];
        case 3:
          _a.sent();
          return [2, cred];
      }
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var MultiFactorInfoImpl = function () {
  function MultiFactorInfoImpl(factorId, response) {
    this.factorId = factorId;
    this.uid = response.mfaEnrollmentId;
    this.enrollmentTime = new Date(response.enrolledAt).toUTCString();
    this.displayName = response.displayName;
  }
  MultiFactorInfoImpl._fromServerResponse = function (auth, enrollment) {
    if ('phoneInfo' in enrollment) {
      return PhoneMultiFactorInfoImpl._fromServerResponse(auth, enrollment);
    } else if ('totpInfo' in enrollment) {
      return TotpMultiFactorInfoImpl._fromServerResponse(auth, enrollment);
    }
    return _fail(auth, "internal-error");
  };
  return MultiFactorInfoImpl;
}();
var PhoneMultiFactorInfoImpl = function (_super) {
  tslib.__extends(PhoneMultiFactorInfoImpl, _super);
  function PhoneMultiFactorInfoImpl(response) {
    var _this = _super.call(this, "phone", response) || this;
    _this.phoneNumber = response.phoneInfo;
    return _this;
  }
  PhoneMultiFactorInfoImpl._fromServerResponse = function (_auth, enrollment) {
    return new PhoneMultiFactorInfoImpl(enrollment);
  };
  return PhoneMultiFactorInfoImpl;
}(MultiFactorInfoImpl);
var TotpMultiFactorInfoImpl = function (_super) {
  tslib.__extends(TotpMultiFactorInfoImpl, _super);
  function TotpMultiFactorInfoImpl(response) {
    return _super.call(this, "totp", response) || this;
  }
  TotpMultiFactorInfoImpl._fromServerResponse = function (_auth, enrollment) {
    return new TotpMultiFactorInfoImpl(enrollment);
  };
  return TotpMultiFactorInfoImpl;
}(MultiFactorInfoImpl);

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _setActionCodeSettingsOnRequest(auth, request, actionCodeSettings) {
  var _a;
  _assert(((_a = actionCodeSettings.url) === null || _a === void 0 ? void 0 : _a.length) > 0, auth, "invalid-continue-uri");
  _assert(typeof actionCodeSettings.dynamicLinkDomain === 'undefined' || actionCodeSettings.dynamicLinkDomain.length > 0, auth, "invalid-dynamic-link-domain");
  request.continueUrl = actionCodeSettings.url;
  request.dynamicLinkDomain = actionCodeSettings.dynamicLinkDomain;
  request.canHandleCodeInApp = actionCodeSettings.handleCodeInApp;
  if (actionCodeSettings.iOS) {
    _assert(actionCodeSettings.iOS.bundleId.length > 0, auth, "missing-ios-bundle-id");
    request.iOSBundleId = actionCodeSettings.iOS.bundleId;
  }
  if (actionCodeSettings.android) {
    _assert(actionCodeSettings.android.packageName.length > 0, auth, "missing-android-pkg-name");
    request.androidInstallApp = actionCodeSettings.android.installApp;
    request.androidMinimumVersionCode = actionCodeSettings.android.minimumVersion;
    request.androidPackageName = actionCodeSettings.android.packageName;
  }
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function sendPasswordResetEmail(auth, email, actionCodeSettings) {
  var _a;
  return tslib.__awaiter(this, void 0, void 0, function () {
    var authInternal, request, requestWithRecaptcha;
    var _this = this;
    return tslib.__generator(this, function (_b) {
      switch (_b.label) {
        case 0:
          authInternal = _castAuth(auth);
          request = {
            requestType: "PASSWORD_RESET",
            email: email,
            clientType: "CLIENT_TYPE_WEB"
          };
          if (!((_a = authInternal._getRecaptchaConfig()) === null || _a === void 0 ? void 0 : _a.emailPasswordEnabled)) return [3, 3];
          return [4, injectRecaptchaFields(authInternal, request, "getOobCode", true)];
        case 1:
          requestWithRecaptcha = _b.sent();
          if (actionCodeSettings) {
            _setActionCodeSettingsOnRequest(authInternal, requestWithRecaptcha, actionCodeSettings);
          }
          return [4, sendPasswordResetEmail$1(authInternal, requestWithRecaptcha)];
        case 2:
          _b.sent();
          return [3, 5];
        case 3:
          if (actionCodeSettings) {
            _setActionCodeSettingsOnRequest(authInternal, request, actionCodeSettings);
          }
          return [4, sendPasswordResetEmail$1(authInternal, request).catch(function (error) {
            return tslib.__awaiter(_this, void 0, void 0, function () {
              var requestWithRecaptcha;
              return tslib.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    if (!(error.code === "auth/".concat("missing-recaptcha-token"))) return [3, 3];
                    console.log('Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.');
                    return [4, injectRecaptchaFields(authInternal, request, "getOobCode", true)];
                  case 1:
                    requestWithRecaptcha = _a.sent();
                    if (actionCodeSettings) {
                      _setActionCodeSettingsOnRequest(authInternal, requestWithRecaptcha, actionCodeSettings);
                    }
                    return [4, sendPasswordResetEmail$1(authInternal, requestWithRecaptcha)];
                  case 2:
                    _a.sent();
                    return [3, 4];
                  case 3:
                    return [2, Promise.reject(error)];
                  case 4:
                    return [2];
                }
              });
            });
          })];
        case 4:
          _b.sent();
          _b.label = 5;
        case 5:
          return [2];
      }
    });
  });
}
function confirmPasswordReset(auth, oobCode, newPassword) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          return [4, resetPassword(util.getModularInstance(auth), {
            oobCode: oobCode,
            newPassword: newPassword
          })];
        case 1:
          _a.sent();
          return [2];
      }
    });
  });
}
function applyActionCode(auth, oobCode) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          return [4, applyActionCode$1(util.getModularInstance(auth), {
            oobCode: oobCode
          })];
        case 1:
          _a.sent();
          return [2];
      }
    });
  });
}
function checkActionCode(auth, oobCode) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var authModular, response, operation, multiFactorInfo;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          authModular = util.getModularInstance(auth);
          return [4, resetPassword(authModular, {
            oobCode: oobCode
          })];
        case 1:
          response = _a.sent();
          operation = response.requestType;
          _assert(operation, authModular, "internal-error");
          switch (operation) {
            case "EMAIL_SIGNIN":
              break;
            case "VERIFY_AND_CHANGE_EMAIL":
              _assert(response.newEmail, authModular, "internal-error");
              break;
            case "REVERT_SECOND_FACTOR_ADDITION":
              _assert(response.mfaInfo, authModular, "internal-error");
            default:
              _assert(response.email, authModular, "internal-error");
          }
          multiFactorInfo = null;
          if (response.mfaInfo) {
            multiFactorInfo = MultiFactorInfoImpl._fromServerResponse(_castAuth(authModular), response.mfaInfo);
          }
          return [2, {
            data: {
              email: (response.requestType === "VERIFY_AND_CHANGE_EMAIL" ? response.newEmail : response.email) || null,
              previousEmail: (response.requestType === "VERIFY_AND_CHANGE_EMAIL" ? response.email : response.newEmail) || null,
              multiFactorInfo: multiFactorInfo
            },
            operation: operation
          }];
      }
    });
  });
}
function verifyPasswordResetCode(auth, code) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var data;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          return [4, checkActionCode(util.getModularInstance(auth), code)];
        case 1:
          data = _a.sent().data;
          return [2, data.email];
      }
    });
  });
}
function createUserWithEmailAndPassword(auth, email, password) {
  var _a;
  return tslib.__awaiter(this, void 0, void 0, function () {
    var authInternal, request, signUpResponse, requestWithRecaptcha, response, userCredential;
    var _this = this;
    return tslib.__generator(this, function (_b) {
      switch (_b.label) {
        case 0:
          authInternal = _castAuth(auth);
          request = {
            returnSecureToken: true,
            email: email,
            password: password,
            clientType: "CLIENT_TYPE_WEB"
          };
          if (!((_a = authInternal._getRecaptchaConfig()) === null || _a === void 0 ? void 0 : _a.emailPasswordEnabled)) return [3, 2];
          return [4, injectRecaptchaFields(authInternal, request, "signUpPassword")];
        case 1:
          requestWithRecaptcha = _b.sent();
          signUpResponse = signUp(authInternal, requestWithRecaptcha);
          return [3, 3];
        case 2:
          signUpResponse = signUp(authInternal, request).catch(function (error) {
            return tslib.__awaiter(_this, void 0, void 0, function () {
              var requestWithRecaptcha;
              return tslib.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    if (!(error.code === "auth/".concat("missing-recaptcha-token"))) return [3, 2];
                    console.log('Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.');
                    return [4, injectRecaptchaFields(authInternal, request, "signUpPassword")];
                  case 1:
                    requestWithRecaptcha = _a.sent();
                    return [2, signUp(authInternal, requestWithRecaptcha)];
                  case 2:
                    return [2, Promise.reject(error)];
                }
              });
            });
          });
          _b.label = 3;
        case 3:
          return [4, signUpResponse.catch(function (error) {
            return Promise.reject(error);
          })];
        case 4:
          response = _b.sent();
          return [4, UserCredentialImpl._fromIdTokenResponse(authInternal, "signIn", response)];
        case 5:
          userCredential = _b.sent();
          return [4, authInternal._updateCurrentUser(userCredential.user)];
        case 6:
          _b.sent();
          return [2, userCredential];
      }
    });
  });
}
function signInWithEmailAndPassword(auth, email, password) {
  return signInWithCredential(util.getModularInstance(auth), EmailAuthProvider.credential(email, password));
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function sendSignInLinkToEmail(auth, email, actionCodeSettings) {
  var _a;
  return tslib.__awaiter(this, void 0, void 0, function () {
    function setActionCodeSettings(request, actionCodeSettings) {
      _assert(actionCodeSettings.handleCodeInApp, authInternal, "argument-error");
      if (actionCodeSettings) {
        _setActionCodeSettingsOnRequest(authInternal, request, actionCodeSettings);
      }
    }
    var authInternal, request, requestWithRecaptcha;
    var _this = this;
    return tslib.__generator(this, function (_b) {
      switch (_b.label) {
        case 0:
          authInternal = _castAuth(auth);
          request = {
            requestType: "EMAIL_SIGNIN",
            email: email,
            clientType: "CLIENT_TYPE_WEB"
          };
          if (!((_a = authInternal._getRecaptchaConfig()) === null || _a === void 0 ? void 0 : _a.emailPasswordEnabled)) return [3, 3];
          return [4, injectRecaptchaFields(authInternal, request, "getOobCode", true)];
        case 1:
          requestWithRecaptcha = _b.sent();
          setActionCodeSettings(requestWithRecaptcha, actionCodeSettings);
          return [4, sendSignInLinkToEmail$1(authInternal, requestWithRecaptcha)];
        case 2:
          _b.sent();
          return [3, 5];
        case 3:
          setActionCodeSettings(request, actionCodeSettings);
          return [4, sendSignInLinkToEmail$1(authInternal, request).catch(function (error) {
            return tslib.__awaiter(_this, void 0, void 0, function () {
              var requestWithRecaptcha;
              return tslib.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    if (!(error.code === "auth/".concat("missing-recaptcha-token"))) return [3, 3];
                    console.log('Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.');
                    return [4, injectRecaptchaFields(authInternal, request, "getOobCode", true)];
                  case 1:
                    requestWithRecaptcha = _a.sent();
                    setActionCodeSettings(requestWithRecaptcha, actionCodeSettings);
                    return [4, sendSignInLinkToEmail$1(authInternal, requestWithRecaptcha)];
                  case 2:
                    _a.sent();
                    return [3, 4];
                  case 3:
                    return [2, Promise.reject(error)];
                  case 4:
                    return [2];
                }
              });
            });
          })];
        case 4:
          _b.sent();
          _b.label = 5;
        case 5:
          return [2];
      }
    });
  });
}
function isSignInWithEmailLink(auth, emailLink) {
  var actionCodeUrl = ActionCodeURL.parseLink(emailLink);
  return (actionCodeUrl === null || actionCodeUrl === void 0 ? void 0 : actionCodeUrl.operation) === "EMAIL_SIGNIN";
}
function signInWithEmailLink(auth, email, emailLink) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var authModular, credential;
    return tslib.__generator(this, function (_a) {
      authModular = util.getModularInstance(auth);
      credential = EmailAuthProvider.credentialWithLink(email, emailLink || _getCurrentUrl());
      _assert(credential._tenantId === (authModular.tenantId || null), authModular, "tenant-id-mismatch");
      return [2, signInWithCredential(authModular, credential)];
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function createAuthUri(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performApiRequest(auth, "POST", "/v1/accounts:createAuthUri", _addTidIfNecessary(auth, request))];
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function fetchSignInMethodsForEmail(auth, email) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var continueUri, request, signinMethods;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          continueUri = _isHttpOrHttps() ? _getCurrentUrl() : 'http://localhost';
          request = {
            identifier: email,
            continueUri: continueUri
          };
          return [4, createAuthUri(util.getModularInstance(auth), request)];
        case 1:
          signinMethods = _a.sent().signinMethods;
          return [2, signinMethods || []];
      }
    });
  });
}
function sendEmailVerification(user, actionCodeSettings) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var userInternal, idToken, request, email;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          userInternal = util.getModularInstance(user);
          return [4, user.getIdToken()];
        case 1:
          idToken = _a.sent();
          request = {
            requestType: "VERIFY_EMAIL",
            idToken: idToken
          };
          if (actionCodeSettings) {
            _setActionCodeSettingsOnRequest(userInternal.auth, request, actionCodeSettings);
          }
          return [4, sendEmailVerification$1(userInternal.auth, request)];
        case 2:
          email = _a.sent().email;
          if (!(email !== user.email)) return [3, 4];
          return [4, user.reload()];
        case 3:
          _a.sent();
          _a.label = 4;
        case 4:
          return [2];
      }
    });
  });
}
function verifyBeforeUpdateEmail(user, newEmail, actionCodeSettings) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var userInternal, idToken, request, email;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          userInternal = util.getModularInstance(user);
          return [4, user.getIdToken()];
        case 1:
          idToken = _a.sent();
          request = {
            requestType: "VERIFY_AND_CHANGE_EMAIL",
            idToken: idToken,
            newEmail: newEmail
          };
          if (actionCodeSettings) {
            _setActionCodeSettingsOnRequest(userInternal.auth, request, actionCodeSettings);
          }
          return [4, verifyAndChangeEmail(userInternal.auth, request)];
        case 2:
          email = _a.sent().email;
          if (!(email !== user.email)) return [3, 4];
          return [4, user.reload()];
        case 3:
          _a.sent();
          _a.label = 4;
        case 4:
          return [2];
      }
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function updateProfile$1(auth, request) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, _performApiRequest(auth, "POST", "/v1/accounts:update", request)];
    });
  });
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function updateProfile(user, _a) {
  var displayName = _a.displayName,
    photoUrl = _a.photoURL;
  return tslib.__awaiter(this, void 0, void 0, function () {
    var userInternal, idToken, profileRequest, response, passwordProvider;
    return tslib.__generator(this, function (_b) {
      switch (_b.label) {
        case 0:
          if (displayName === undefined && photoUrl === undefined) {
            return [2];
          }
          userInternal = util.getModularInstance(user);
          return [4, userInternal.getIdToken()];
        case 1:
          idToken = _b.sent();
          profileRequest = {
            idToken: idToken,
            displayName: displayName,
            photoUrl: photoUrl,
            returnSecureToken: true
          };
          return [4, _logoutIfInvalidated(userInternal, updateProfile$1(userInternal.auth, profileRequest))];
        case 2:
          response = _b.sent();
          userInternal.displayName = response.displayName || null;
          userInternal.photoURL = response.photoUrl || null;
          passwordProvider = userInternal.providerData.find(function (_a) {
            var providerId = _a.providerId;
            return providerId === "password";
          });
          if (passwordProvider) {
            passwordProvider.displayName = userInternal.displayName;
            passwordProvider.photoURL = userInternal.photoURL;
          }
          return [4, userInternal._updateTokensIfNecessary(response)];
        case 3:
          _b.sent();
          return [2];
      }
    });
  });
}
function updateEmail(user, newEmail) {
  return updateEmailOrPassword(util.getModularInstance(user), newEmail, null);
}
function updatePassword(user, newPassword) {
  return updateEmailOrPassword(util.getModularInstance(user), null, newPassword);
}
function updateEmailOrPassword(user, email, password) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    var auth, idToken, request, response;
    return tslib.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          auth = user.auth;
          return [4, user.getIdToken()];
        case 1:
          idToken = _a.sent();
          request = {
            idToken: idToken,
            returnSecureToken: true
          };
          if (email) {
            request.email = email;
          }
          if (password) {
            request.password = password;
          }
          return [4, _logoutIfInvalidated(user, updateEmailPassword(auth, request))];
        case 2:
          response = _a.sent();
          return [4, user._updateTokensIfNecessary(response, true)];
        case 3:
          _a.sent();
          return [2];
      }
    });
  });
}

/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _fromIdTokenResponse(idTokenResponse) {
  var _a, _b;
  if (!idTokenResponse) {
    return null;
  }
  var providerId = idTokenResponse.providerId;
  var profile = idTokenResponse.rawUserInfo ? JSON.parse(idTokenResponse.rawUserInfo) : {};
  var isNewUser = idTokenResponse.isNewUser || idTokenResponse.kind === "identitytoolkit#SignupNewUserResponse";
  if (!providerId && (idTokenResponse === null || idTokenResponse === void 0 ? void 0 : idTokenResponse.idToken)) {
    var signInProvider = (_b = (_a = _parseToken(idTokenResponse.idToken)) === null || _a === void 0 ? void 0 : _a.firebase) === null || _b === void 0 ? void 0 : _b['sign_in_provider'];
    if (signInProvider) {
      var filteredProviderId = signInProvider !== "anonymous" && signInProvider !== "custom" ? signInProvider : null;
      return new GenericAdditionalUserInfo(isNewUser, filteredProviderId);
    }
  }
  if (!providerId) {
    return null;
  }
  switch (providerId) {
    case "facebook.com":
      return new FacebookAdditionalUserInfo(isNewUser, profile);
    case "github.com":
      return new GithubAdditionalUserInfo(isNewUser, profile);
    case "google.com":
      return new GoogleAdditionalUserInfo(isNewUser, profile);
    case "twitter.com":
      return new TwitterAdditionalUserInfo(isNewUser, profile, idTokenResponse.screenName || null);
    case "custom":
    case "anonymous":
      return new GenericAdditionalUserInfo(isNewUser, null);
    default:
      return new GenericAdditionalUserInfo(isNewUser, providerId, profile);
  }
}
var GenericAdditionalUserInfo = function () {
  function GenericAdditionalUserInfo(isNewUser, providerId, profile) {
    if (profile === void 0) {
      profile = {};
    }
    this.isNewUser = isNewUser;
    this.providerId = providerId;
    this.profile = profile;
  }
  return GenericAdditionalUserInfo;
}();
var FederatedAdditionalUserInfoWithUsername = function (_super) {
  tslib.__extends(FederatedAdditionalUserInfoWithUsername, _super);
  function FederatedAdditionalUserInfoWithUsername(isNewUser, providerId, profile, username) {
    var _this = _super.call(this, isNewUser, providerId, profile) || this;
    _this.username = username;
    return _this;
  }
  return FederatedAdditionalUserInfoWithUsername;
}(GenericAdditionalUserInfo);
var FacebookAdditionalUserInfo = function (_super) {
  tslib.__extends(FacebookAdditionalUserInfo, _super);
  function FacebookAdditionalUserInfo(isNewUser, profile) {
    return _super.call(this, isNewUser, "facebook.com", profile) || this;
  }
  return FacebookAdditionalUserInfo;
}(GenericAdditionalUserInfo);
var GithubAdditionalUserInfo = function (_super) {
  tslib.__extends(GithubAdditionalUserInfo, _super);
  function GithubAdditionalUserInfo(isNewUser, profile) {
    return _super.call(this, isNewUser, "github.com", profile, typeof (profile === null || profile === void 0 ? void 0 : profile.login) === 'string' ? profile === null || profile === void 0 ? void 0 : profile.login : null) || this;
  }
  return GithubAdditionalUserInfo;
}(FederatedAdditionalUserInfoWithUsername);
var GoogleAdditionalUserInfo = function (_super) {
  tslib.__extends(GoogleAdditionalUserInfo, _super);
  function GoogleAdditionalUserInfo(isNewUser, profile) {
    return _super.call(this, isNewUser, "google.com", profile) || this;
  }
  return GoogleAdditionalUserInfo;
}(GenericAdditionalUserInfo);
var TwitterAdditionalUserInfo = function (_super) {
  tslib.__extends(TwitterAdditionalUserInfo, _super);
  function TwitterAdditionalUserInfo(isNewUser, profile, screenName) {
    return _super.call(this, isNewUser, "twitter.com", profile, screenName) || this;
  }
  return TwitterAdditionalUserInfo;
}(FederatedAdditionalUserInfoWithUsername);
function getAdditionalUserInfo(userCredential) {
  var _a = userCredential,
    user = _a.user,
    _tokenResponse = _a._tokenResponse;
  if (user.isAnonymous && !_tokenResponse) {
    return {
      providerId: null,
      isNewUser: false,
      profile: null
    };
  }
  return _fromIdTokenResponse(_tokenResponse);
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function setPersistence(auth, persistence) {
  return util.getModularInstance(auth).setPersistence(persistence);
}
function initializeRecaptchaConfig(auth) {
  var authInternal = _castAuth(auth);
  return authInternal.initializeRecaptchaConfig();
}
function onIdTokenChanged(auth, nextOrObserver, error, completed) {
  return util.getModularInstance(auth).onIdTokenChanged(nextOrObserver, error, completed);
}
function beforeAuthStateChanged(auth, callback, onAbort) {
  return util.getModularInstance(auth).beforeAuthStateChanged(callback, onAbort);
}
function onAuthStateChanged(auth, nextOrObserver, error, completed) {
  return util.getModularInstance(auth).onAuthStateChanged(nextOrObserver, error, completed);
}
function useDeviceLanguage(auth) {
  util.getModularInstance(auth).useDeviceLanguage();
}
function updateCurrentUser(auth, user) {
  return util.getModularInstance(auth).updateCurrentUser(user);
}
function signOut(auth) {
  return util.getModularInstance(auth).signOut();
}
function deleteUser(user) {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2, util.getModularInstance(user).delete()];
    });
  });
}
var MultiFactorSessionImpl = function () {
  function MultiFactorSessionImpl(type, credential, auth) {
    this.type = type;
    this.credential = credential;
    this.auth = auth;
  }
  MultiFactorSessionImpl._fromIdtoken = function (idToken, auth) {
    return new MultiFactorSessionImpl("enroll", idToken, auth);
  };
  MultiFactorSessionImpl._fromMfaPendingCredential = function (mfaPendingCredential) {
    return new MultiFactorSessionImpl("signin", mfaPendingCredential);
  };
  MultiFactorSessionImpl.prototype.toJSON = function () {
    var _a;
    var key = this.type === "enroll" ? 'idToken' : 'pendingCredential';
    return {
      multiFactorSession: (_a = {}, _a[key] = this.credential, _a)
    };
  };
  MultiFactorSessionImpl.fromJSON = function (obj) {
    var _a, _b;
    if (obj === null || obj === void 0 ? void 0 : obj.multiFactorSession) {
      if ((_a = obj.multiFactorSession) === null || _a === void 0 ? void 0 : _a.pendingCredential) {
        return MultiFactorSessionImpl._fromMfaPendingCredential(obj.multiFactorSession.pendingCredential);
      } else if ((_b = obj.multiFactorSession) === null || _b === void 0 ? void 0 : _b.idToken) {
        return MultiFactorSessionImpl._fromIdtoken(obj.multiFactorSession.idToken);
      }
    }
    return null;
  };
  return MultiFactorSessionImpl;
}();

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var MultiFactorResolverImpl = function () {
  function MultiFactorResolverImpl(session, hints, signInResolver) {
    this.session = session;
    this.hints = hints;
    this.signInResolver = signInResolver;
  }
  MultiFactorResolverImpl._fromError = function (authExtern, error) {
    var _this = this;
    var auth = _castAuth(authExtern);
    var serverResponse = error.customData._serverResponse;
    var hints = (serverResponse.mfaInfo || []).map(function (enrollment) {
      return MultiFactorInfoImpl._fromServerResponse(auth, enrollment);
    });
    _assert(serverResponse.mfaPendingCredential, auth, "internal-error");
    var session = MultiFactorSessionImpl._fromMfaPendingCredential(serverResponse.mfaPendingCredential);
    return new MultiFactorResolverImpl(session, hints, function (assertion) {
      return tslib.__awaiter(_this, void 0, void 0, function () {
        var mfaResponse, idTokenResponse, _a, userCredential;
        return tslib.__generator(this, function (_b) {
          switch (_b.label) {
            case 0:
              return [4, assertion._process(auth, session)];
            case 1:
              mfaResponse = _b.sent();
              delete serverResponse.mfaInfo;
              delete serverResponse.mfaPendingCredential;
              idTokenResponse = tslib.__assign(tslib.__assign({}, serverResponse), {
                idToken: mfaResponse.idToken,
                refreshToken: mfaResponse.refreshToken
              });
              _a = error.operationType;
              switch (_a) {
                case "signIn":
                  return [3, 2];
                case "reauthenticate":
                  return [3, 5];
              }
              return [3, 6];
            case 2:
              return [4, UserCredentialImpl._fromIdTokenResponse(auth, error.operationType, idTokenResponse)];
            case 3:
              userCredential = _b.sent();
              return [4, auth._updateCurrentUser(userCredential.user)];
            case 4:
              _b.sent();
              return [2, userCredential];
            case 5:
              _assert(error.user, auth, "internal-error");
              return [2, UserCredentialImpl._forOperation(error.user, error.operationType, idTokenResponse)];
            case 6:
              _fail(auth, "internal-error");
              _b.label = 7;
            case 7:
              return [2];
          }
        });
      });
    });
  };
  MultiFactorResolverImpl.prototype.resolveSignIn = function (assertionExtern) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var assertion;
      return tslib.__generator(this, function (_a) {
        assertion = assertionExtern;
        return [2, this.signInResolver(assertion)];
      });
    });
  };
  return MultiFactorResolverImpl;
}();
function getMultiFactorResolver(auth, error) {
  var _a;
  var authModular = util.getModularInstance(auth);
  var errorInternal = error;
  _assert(error.customData.operationType, authModular, "argument-error");
  _assert((_a = errorInternal.customData._serverResponse) === null || _a === void 0 ? void 0 : _a.mfaPendingCredential, authModular, "argument-error");
  return MultiFactorResolverImpl._fromError(authModular, errorInternal);
}

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function startEnrollTotpMfa(auth, request) {
  return _performApiRequest(auth, "POST", "/v2/accounts/mfaEnrollment:start", _addTidIfNecessary(auth, request));
}
function finalizeEnrollTotpMfa(auth, request) {
  return _performApiRequest(auth, "POST", "/v2/accounts/mfaEnrollment:finalize", _addTidIfNecessary(auth, request));
}
function withdrawMfa(auth, request) {
  return _performApiRequest(auth, "POST", "/v2/accounts/mfaEnrollment:withdraw", _addTidIfNecessary(auth, request));
}
var MultiFactorUserImpl = function () {
  function MultiFactorUserImpl(user) {
    var _this = this;
    this.user = user;
    this.enrolledFactors = [];
    user._onReload(function (userInfo) {
      if (userInfo.mfaInfo) {
        _this.enrolledFactors = userInfo.mfaInfo.map(function (enrollment) {
          return MultiFactorInfoImpl._fromServerResponse(user.auth, enrollment);
        });
      }
    });
  }
  MultiFactorUserImpl._fromUser = function (user) {
    return new MultiFactorUserImpl(user);
  };
  MultiFactorUserImpl.prototype.getSession = function () {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var _a, _b;
      return tslib.__generator(this, function (_c) {
        switch (_c.label) {
          case 0:
            _b = (_a = MultiFactorSessionImpl)._fromIdtoken;
            return [4, this.user.getIdToken()];
          case 1:
            return [2, _b.apply(_a, [_c.sent(), this.user.auth])];
        }
      });
    });
  };
  MultiFactorUserImpl.prototype.enroll = function (assertionExtern, displayName) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var assertion, session, finalizeMfaResponse;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            assertion = assertionExtern;
            return [4, this.getSession()];
          case 1:
            session = _a.sent();
            return [4, _logoutIfInvalidated(this.user, assertion._process(this.user.auth, session, displayName))];
          case 2:
            finalizeMfaResponse = _a.sent();
            return [4, this.user._updateTokensIfNecessary(finalizeMfaResponse)];
          case 3:
            _a.sent();
            return [2, this.user.reload()];
        }
      });
    });
  };
  MultiFactorUserImpl.prototype.unenroll = function (infoOrUid) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var mfaEnrollmentId, idToken, idTokenResponse, e_1;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            mfaEnrollmentId = typeof infoOrUid === 'string' ? infoOrUid : infoOrUid.uid;
            return [4, this.user.getIdToken()];
          case 1:
            idToken = _a.sent();
            _a.label = 2;
          case 2:
            _a.trys.push([2, 6,, 7]);
            return [4, _logoutIfInvalidated(this.user, withdrawMfa(this.user.auth, {
              idToken: idToken,
              mfaEnrollmentId: mfaEnrollmentId
            }))];
          case 3:
            idTokenResponse = _a.sent();
            this.enrolledFactors = this.enrolledFactors.filter(function (_a) {
              var uid = _a.uid;
              return uid !== mfaEnrollmentId;
            });
            return [4, this.user._updateTokensIfNecessary(idTokenResponse)];
          case 4:
            _a.sent();
            return [4, this.user.reload()];
          case 5:
            _a.sent();
            return [3, 7];
          case 6:
            e_1 = _a.sent();
            throw e_1;
          case 7:
            return [2];
        }
      });
    });
  };
  return MultiFactorUserImpl;
}();
var multiFactorUserCache = new WeakMap();
function multiFactor(user) {
  var userModular = util.getModularInstance(user);
  if (!multiFactorUserCache.has(userModular)) {
    multiFactorUserCache.set(userModular, MultiFactorUserImpl._fromUser(userModular));
  }
  return multiFactorUserCache.get(userModular);
}
var name = "@firebase/auth";
var version = "0.23.1";

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AuthInterop = function () {
  function AuthInterop(auth) {
    this.auth = auth;
    this.internalListeners = new Map();
  }
  AuthInterop.prototype.getUid = function () {
    var _a;
    this.assertAuthConfigured();
    return ((_a = this.auth.currentUser) === null || _a === void 0 ? void 0 : _a.uid) || null;
  };
  AuthInterop.prototype.getToken = function (forceRefresh) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var accessToken;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            this.assertAuthConfigured();
            return [4, this.auth._initializationPromise];
          case 1:
            _a.sent();
            if (!this.auth.currentUser) {
              return [2, null];
            }
            return [4, this.auth.currentUser.getIdToken(forceRefresh)];
          case 2:
            accessToken = _a.sent();
            return [2, {
              accessToken: accessToken
            }];
        }
      });
    });
  };
  AuthInterop.prototype.addAuthTokenListener = function (listener) {
    this.assertAuthConfigured();
    if (this.internalListeners.has(listener)) {
      return;
    }
    var unsubscribe = this.auth.onIdTokenChanged(function (user) {
      listener((user === null || user === void 0 ? void 0 : user.stsTokenManager.accessToken) || null);
    });
    this.internalListeners.set(listener, unsubscribe);
    this.updateProactiveRefresh();
  };
  AuthInterop.prototype.removeAuthTokenListener = function (listener) {
    this.assertAuthConfigured();
    var unsubscribe = this.internalListeners.get(listener);
    if (!unsubscribe) {
      return;
    }
    this.internalListeners.delete(listener);
    unsubscribe();
    this.updateProactiveRefresh();
  };
  AuthInterop.prototype.assertAuthConfigured = function () {
    _assert(this.auth._initializationPromise, "dependent-sdk-initialized-before-auth");
  };
  AuthInterop.prototype.updateProactiveRefresh = function () {
    if (this.internalListeners.size > 0) {
      this.auth._startProactiveRefresh();
    } else {
      this.auth._stopProactiveRefresh();
    }
  };
  return AuthInterop;
}();

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function getVersionForPlatform(clientPlatform) {
  switch (clientPlatform) {
    case "Node":
      return 'node';
    case "ReactNative":
      return 'rn';
    case "Worker":
      return 'webworker';
    case "Cordova":
      return 'cordova';
    default:
      return undefined;
  }
}
function registerAuth(clientPlatform) {
  app._registerComponent(new component.Component("auth", function (container, _a) {
    var deps = _a.options;
    var app = container.getProvider('app').getImmediate();
    var heartbeatServiceProvider = container.getProvider('heartbeat');
    var appCheckServiceProvider = container.getProvider('app-check-internal');
    var _b = app.options,
      apiKey = _b.apiKey,
      authDomain = _b.authDomain;
    _assert(apiKey && !apiKey.includes(':'), "invalid-api-key", {
      appName: app.name
    });
    _assert(!(authDomain === null || authDomain === void 0 ? void 0 : authDomain.includes(':')), "argument-error", {
      appName: app.name
    });
    var config = {
      apiKey: apiKey,
      authDomain: authDomain,
      clientPlatform: clientPlatform,
      apiHost: "identitytoolkit.googleapis.com",
      tokenApiHost: "securetoken.googleapis.com",
      apiScheme: "https",
      sdkClientVersion: _getClientVersion(clientPlatform)
    };
    var authInstance = new AuthImpl(app, heartbeatServiceProvider, appCheckServiceProvider, config);
    _initializeAuthInstance(authInstance, deps);
    return authInstance;
  }, "PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function (container, _instanceIdentifier, _instance) {
    var authInternalProvider = container.getProvider("auth-internal");
    authInternalProvider.initialize();
  }));
  app._registerComponent(new component.Component("auth-internal", function (container) {
    var auth = _castAuth(container.getProvider("auth").getImmediate());
    return function (auth) {
      return new AuthInterop(auth);
    }(auth);
  }, "PRIVATE").setInstantiationMode("EXPLICIT"));
  app.registerVersion(name, version, getVersionForPlatform(clientPlatform));
  app.registerVersion(name, version, 'cjs5');
}

/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
FetchProvider.initialize(fetchImpl__namespace.default, fetchImpl__namespace.Headers, fetchImpl__namespace.Response);
function getAuth(app$1) {
  if (app$1 === void 0) {
    app$1 = app.getApp();
  }
  var provider = app._getProvider(app$1, 'auth');
  if (provider.isInitialized()) {
    return provider.getImmediate();
  }
  var auth = initializeAuth(app$1);
  var authEmulatorHost = util.getDefaultEmulatorHost('auth');
  if (authEmulatorHost) {
    connectAuthEmulator(auth, "http://".concat(authEmulatorHost));
  }
  return auth;
}
registerAuth("Node");
var NOT_AVAILABLE_ERROR = _createError("operation-not-supported-in-this-environment");
function fail() {
  return tslib.__awaiter(this, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      throw NOT_AVAILABLE_ERROR;
    });
  });
}
var FailClass = function () {
  function FailClass() {
    throw NOT_AVAILABLE_ERROR;
  }
  return FailClass;
}();
var browserLocalPersistence = inMemoryPersistence;
var browserSessionPersistence = inMemoryPersistence;
var indexedDBLocalPersistence = inMemoryPersistence;
var browserPopupRedirectResolver = NOT_AVAILABLE_ERROR;
var PhoneAuthProvider = FailClass;
var signInWithPhoneNumber = fail;
var linkWithPhoneNumber = fail;
var reauthenticateWithPhoneNumber = fail;
var updatePhoneNumber = fail;
var signInWithPopup = fail;
var linkWithPopup = fail;
var reauthenticateWithPopup = fail;
var signInWithRedirect = fail;
var linkWithRedirect = fail;
var reauthenticateWithRedirect = fail;
var getRedirectResult = fail;
var RecaptchaVerifier = FailClass;
var PhoneMultiFactorGenerator = function () {
  function PhoneMultiFactorGenerator() {}
  PhoneMultiFactorGenerator.assertion = function () {
    throw NOT_AVAILABLE_ERROR;
  };
  return PhoneMultiFactorGenerator;
}();
AuthImpl.prototype.setPersistence = function () {
  return tslib.__awaiter(void 0, void 0, void 0, function () {
    return tslib.__generator(this, function (_a) {
      return [2];
    });
  });
};

/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function finalizeSignInTotpMfa(auth, request) {
  return _performApiRequest(auth, "POST", "/v2/accounts/mfaSignIn:finalize", _addTidIfNecessary(auth, request));
}
var MultiFactorAssertionImpl = function () {
  function MultiFactorAssertionImpl(factorId) {
    this.factorId = factorId;
  }
  MultiFactorAssertionImpl.prototype._process = function (auth, session, displayName) {
    switch (session.type) {
      case "enroll":
        return this._finalizeEnroll(auth, session.credential, displayName);
      case "signin":
        return this._finalizeSignIn(auth, session.credential);
      default:
        return debugFail('unexpected MultiFactorSessionType');
    }
  };
  return MultiFactorAssertionImpl;
}();
var TotpMultiFactorGenerator = function () {
  function TotpMultiFactorGenerator() {}
  TotpMultiFactorGenerator.assertionForEnrollment = function (secret, oneTimePassword) {
    return TotpMultiFactorAssertionImpl._fromSecret(secret, oneTimePassword);
  };
  TotpMultiFactorGenerator.assertionForSignIn = function (enrollmentId, oneTimePassword) {
    return TotpMultiFactorAssertionImpl._fromEnrollmentId(enrollmentId, oneTimePassword);
  };
  TotpMultiFactorGenerator.generateSecret = function (session) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var mfaSession, response;
      return tslib.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            mfaSession = session;
            _assert(typeof mfaSession.auth !== 'undefined', "internal-error");
            return [4, startEnrollTotpMfa(mfaSession.auth, {
              idToken: mfaSession.credential,
              totpEnrollmentInfo: {}
            })];
          case 1:
            response = _a.sent();
            return [2, TotpSecret._fromStartTotpMfaEnrollmentResponse(response, mfaSession.auth)];
        }
      });
    });
  };
  TotpMultiFactorGenerator.FACTOR_ID = "totp";
  return TotpMultiFactorGenerator;
}();
var TotpMultiFactorAssertionImpl = function (_super) {
  tslib.__extends(TotpMultiFactorAssertionImpl, _super);
  function TotpMultiFactorAssertionImpl(otp, enrollmentId, secret) {
    var _this = _super.call(this, "totp") || this;
    _this.otp = otp;
    _this.enrollmentId = enrollmentId;
    _this.secret = secret;
    return _this;
  }
  TotpMultiFactorAssertionImpl._fromSecret = function (secret, otp) {
    return new TotpMultiFactorAssertionImpl(otp, undefined, secret);
  };
  TotpMultiFactorAssertionImpl._fromEnrollmentId = function (enrollmentId, otp) {
    return new TotpMultiFactorAssertionImpl(otp, enrollmentId);
  };
  TotpMultiFactorAssertionImpl.prototype._finalizeEnroll = function (auth, idToken, displayName) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      return tslib.__generator(this, function (_a) {
        _assert(typeof this.secret !== 'undefined', auth, "argument-error");
        return [2, finalizeEnrollTotpMfa(auth, {
          idToken: idToken,
          displayName: displayName,
          totpVerificationInfo: this.secret._makeTotpVerificationInfo(this.otp)
        })];
      });
    });
  };
  TotpMultiFactorAssertionImpl.prototype._finalizeSignIn = function (auth, mfaPendingCredential) {
    return tslib.__awaiter(this, void 0, void 0, function () {
      var totpVerificationInfo;
      return tslib.__generator(this, function (_a) {
        _assert(this.enrollmentId !== undefined && this.otp !== undefined, auth, "argument-error");
        totpVerificationInfo = {
          verificationCode: this.otp
        };
        return [2, finalizeSignInTotpMfa(auth, {
          mfaPendingCredential: mfaPendingCredential,
          mfaEnrollmentId: this.enrollmentId,
          totpVerificationInfo: totpVerificationInfo
        })];
      });
    });
  };
  return TotpMultiFactorAssertionImpl;
}(MultiFactorAssertionImpl);
var TotpSecret = function () {
  function TotpSecret(secretKey, hashingAlgorithm, codeLength, codeIntervalSeconds, enrollmentCompletionDeadline, sessionInfo, auth) {
    this.sessionInfo = sessionInfo;
    this.auth = auth;
    this.secretKey = secretKey;
    this.hashingAlgorithm = hashingAlgorithm;
    this.codeLength = codeLength;
    this.codeIntervalSeconds = codeIntervalSeconds;
    this.enrollmentCompletionDeadline = enrollmentCompletionDeadline;
  }
  TotpSecret._fromStartTotpMfaEnrollmentResponse = function (response, auth) {
    return new TotpSecret(response.totpSessionInfo.sharedSecretKey, response.totpSessionInfo.hashingAlgorithm, response.totpSessionInfo.verificationCodeLength, response.totpSessionInfo.periodSec, new Date(response.totpSessionInfo.finalizeEnrollmentTime).toUTCString(), response.totpSessionInfo.sessionInfo, auth);
  };
  TotpSecret.prototype._makeTotpVerificationInfo = function (otp) {
    return {
      sessionInfo: this.sessionInfo,
      verificationCode: otp
    };
  };
  TotpSecret.prototype.generateQrCodeUrl = function (accountName, issuer) {
    var _a;
    var useDefaults = false;
    if (_isEmptyString(accountName) || _isEmptyString(issuer)) {
      useDefaults = true;
    }
    if (useDefaults) {
      if (_isEmptyString(accountName)) {
        accountName = ((_a = this.auth.currentUser) === null || _a === void 0 ? void 0 : _a.email) || 'unknownuser';
      }
      if (_isEmptyString(issuer)) {
        issuer = this.auth.name;
      }
    }
    return "otpauth://totp/".concat(issuer, ":").concat(accountName, "?secret=").concat(this.secretKey, "&issuer=").concat(issuer, "&algorithm=").concat(this.hashingAlgorithm, "&digits=").concat(this.codeLength);
  };
  return TotpSecret;
}();
function _isEmptyString(input) {
  return typeof input === 'undefined' || (input === null || input === void 0 ? void 0 : input.length) === 0;
}
exports.AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY = AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY;
exports.ActionCodeOperation = ActionCodeOperation;
exports.ActionCodeURL = ActionCodeURL;
exports.AuthCredential = AuthCredential;
exports.AuthImpl = AuthImpl;
exports.BaseOAuthProvider = BaseOAuthProvider;
exports.EmailAuthCredential = EmailAuthCredential;
exports.EmailAuthProvider = EmailAuthProvider;
exports.FacebookAuthProvider = FacebookAuthProvider;
exports.FactorId = FactorId;
exports.FederatedAuthProvider = FederatedAuthProvider;
exports.FetchProvider = FetchProvider;
exports.GithubAuthProvider = GithubAuthProvider;
exports.GoogleAuthProvider = GoogleAuthProvider;
exports.OAuthCredential = OAuthCredential;
exports.OAuthProvider = OAuthProvider;
exports.OperationType = OperationType;
exports.PhoneAuthCredential = PhoneAuthCredential;
exports.PhoneAuthProvider = PhoneAuthProvider;
exports.PhoneMultiFactorGenerator = PhoneMultiFactorGenerator;
exports.ProviderId = ProviderId;
exports.RecaptchaVerifier = RecaptchaVerifier;
exports.SAMLAuthCredential = SAMLAuthCredential;
exports.SAMLAuthProvider = SAMLAuthProvider;
exports.SignInMethod = SignInMethod;
exports.TotpMultiFactorGenerator = TotpMultiFactorGenerator;
exports.TotpSecret = TotpSecret;
exports.TwitterAuthProvider = TwitterAuthProvider;
exports.UserImpl = UserImpl;
exports._assert = _assert;
exports._castAuth = _castAuth;
exports._createError = _createError;
exports._emulatorUrl = _emulatorUrl;
exports._fail = _fail;
exports._getClientVersion = _getClientVersion;
exports._getInstance = _getInstance;
exports._isAndroid = _isAndroid;
exports._isIE10 = _isIE10;
exports._isIOS = _isIOS;
exports._isIOS7Or8 = _isIOS7Or8;
exports._isIframe = _isIframe;
exports._isMobileBrowser = _isMobileBrowser;
exports._isSafari = _isSafari;
exports._link = _link;
exports._performApiRequest = _performApiRequest;
exports._persistenceKeyName = _persistenceKeyName;
exports._reauthenticate = _reauthenticate;
exports._signInWithCredential = _signInWithCredential;
exports.applyActionCode = applyActionCode;
exports.beforeAuthStateChanged = beforeAuthStateChanged;
exports.browserLocalPersistence = browserLocalPersistence;
exports.browserPopupRedirectResolver = browserPopupRedirectResolver;
exports.browserSessionPersistence = browserSessionPersistence;
exports.checkActionCode = checkActionCode;
exports.confirmPasswordReset = confirmPasswordReset;
exports.connectAuthEmulator = connectAuthEmulator;
exports.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
exports.debugAssert = debugAssert;
exports.debugErrorMap = debugErrorMap;
exports.deleteUser = deleteUser;
exports.fetchSignInMethodsForEmail = fetchSignInMethodsForEmail;
exports.getAdditionalUserInfo = getAdditionalUserInfo;
exports.getAuth = getAuth;
exports.getIdToken = getIdToken;
exports.getIdTokenResult = getIdTokenResult;
exports.getMultiFactorResolver = getMultiFactorResolver;
exports.getRedirectResult = getRedirectResult;
exports.inMemoryPersistence = inMemoryPersistence;
exports.indexedDBLocalPersistence = indexedDBLocalPersistence;
exports.initializeAuth = initializeAuth;
exports.initializeRecaptchaConfig = initializeRecaptchaConfig;
exports.isSignInWithEmailLink = isSignInWithEmailLink;
exports.linkWithCredential = linkWithCredential;
exports.linkWithPhoneNumber = linkWithPhoneNumber;
exports.linkWithPopup = linkWithPopup;
exports.linkWithRedirect = linkWithRedirect;
exports.multiFactor = multiFactor;
exports.onAuthStateChanged = onAuthStateChanged;
exports.onIdTokenChanged = onIdTokenChanged;
exports.parseActionCodeURL = parseActionCodeURL;
exports.prodErrorMap = prodErrorMap;
exports.reauthenticateWithCredential = reauthenticateWithCredential;
exports.reauthenticateWithPhoneNumber = reauthenticateWithPhoneNumber;
exports.reauthenticateWithPopup = reauthenticateWithPopup;
exports.reauthenticateWithRedirect = reauthenticateWithRedirect;
exports.reload = reload;
exports.sendEmailVerification = sendEmailVerification;
exports.sendPasswordResetEmail = sendPasswordResetEmail;
exports.sendSignInLinkToEmail = sendSignInLinkToEmail;
exports.setPersistence = setPersistence;
exports.signInAnonymously = signInAnonymously;
exports.signInWithCredential = signInWithCredential;
exports.signInWithCustomToken = signInWithCustomToken;
exports.signInWithEmailAndPassword = signInWithEmailAndPassword;
exports.signInWithEmailLink = signInWithEmailLink;
exports.signInWithIdp = signInWithIdp;
exports.signInWithPhoneNumber = signInWithPhoneNumber;
exports.signInWithPopup = signInWithPopup;
exports.signInWithRedirect = signInWithRedirect;
exports.signOut = signOut;
exports.unlink = unlink;
exports.updateCurrentUser = updateCurrentUser;
exports.updateEmail = updateEmail;
exports.updatePassword = updatePassword;
exports.updatePhoneNumber = updatePhoneNumber;
exports.updateProfile = updateProfile;
exports.useDeviceLanguage = useDeviceLanguage;
exports.verifyBeforeUpdateEmail = verifyBeforeUpdateEmail;
exports.verifyPasswordResetCode = verifyPasswordResetCode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJGYWN0b3JJZCIsIlBIT05FIiwiVE9UUCIsIlByb3ZpZGVySWQiLCJGQUNFQk9PSyIsIkdJVEhVQiIsIkdPT0dMRSIsIlBBU1NXT1JEIiwiVFdJVFRFUiIsIlNpZ25Jbk1ldGhvZCIsIkVNQUlMX0xJTksiLCJFTUFJTF9QQVNTV09SRCIsIk9wZXJhdGlvblR5cGUiLCJMSU5LIiwiUkVBVVRIRU5USUNBVEUiLCJTSUdOX0lOIiwiQWN0aW9uQ29kZU9wZXJhdGlvbiIsIkVNQUlMX1NJR05JTiIsIlBBU1NXT1JEX1JFU0VUIiwiUkVDT1ZFUl9FTUFJTCIsIlJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OIiwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwiLCJWRVJJRllfRU1BSUwiLCJfZGVidWdFcnJvck1hcCIsIl9hIiwiX3Byb2RFcnJvck1hcCIsImRlYnVnRXJyb3JNYXAiLCJwcm9kRXJyb3JNYXAiLCJfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlkiLCJ1dGlsIiwiRXJyb3JGYWN0b3J5IiwiQVVUSF9FUlJPUl9DT0RFU19NQVBfRE9fTk9UX1VTRV9JTlRFUk5BTExZIiwiQURNSU5fT05MWV9PUEVSQVRJT04iLCJBUkdVTUVOVF9FUlJPUiIsIkFQUF9OT1RfQVVUSE9SSVpFRCIsIkFQUF9OT1RfSU5TVEFMTEVEIiwiQ0FQVENIQV9DSEVDS19GQUlMRUQiLCJDT0RFX0VYUElSRUQiLCJDT1JET1ZBX05PVF9SRUFEWSIsIkNPUlNfVU5TVVBQT1JURUQiLCJDUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFIiwiQ1JFREVOVElBTF9NSVNNQVRDSCIsIkNSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTiIsIkRFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSCIsIkRZTkFNSUNfTElOS19OT1RfQUNUSVZBVEVEIiwiRU1BSUxfQ0hBTkdFX05FRURTX1ZFUklGSUNBVElPTiIsIkVNQUlMX0VYSVNUUyIsIkVNVUxBVE9SX0NPTkZJR19GQUlMRUQiLCJFWFBJUkVEX09PQl9DT0RFIiwiRVhQSVJFRF9QT1BVUF9SRVFVRVNUIiwiSU5URVJOQUxfRVJST1IiLCJJTlZBTElEX0FQSV9LRVkiLCJJTlZBTElEX0FQUF9DUkVERU5USUFMIiwiSU5WQUxJRF9BUFBfSUQiLCJJTlZBTElEX0FVVEgiLCJJTlZBTElEX0FVVEhfRVZFTlQiLCJJTlZBTElEX0NFUlRfSEFTSCIsIklOVkFMSURfQ09ERSIsIklOVkFMSURfQ09OVElOVUVfVVJJIiwiSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT04iLCJJTlZBTElEX0NVU1RPTV9UT0tFTiIsIklOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTiIsIklOVkFMSURfRU1BSUwiLCJJTlZBTElEX0VNVUxBVE9SX1NDSEVNRSIsIklOVkFMSURfSURQX1JFU1BPTlNFIiwiSU5WQUxJRF9NRVNTQUdFX1BBWUxPQUQiLCJJTlZBTElEX01GQV9TRVNTSU9OIiwiSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQiLCJJTlZBTElEX09BVVRIX1BST1ZJREVSIiwiSU5WQUxJRF9PT0JfQ09ERSIsIklOVkFMSURfT1JJR0lOIiwiSU5WQUxJRF9QQVNTV09SRCIsIklOVkFMSURfUEVSU0lTVEVOQ0UiLCJJTlZBTElEX1BIT05FX05VTUJFUiIsIklOVkFMSURfUFJPVklERVJfSUQiLCJJTlZBTElEX1JFQ0lQSUVOVF9FTUFJTCIsIklOVkFMSURfU0VOREVSIiwiSU5WQUxJRF9TRVNTSU9OX0lORk8iLCJJTlZBTElEX1RFTkFOVF9JRCIsIk1GQV9JTkZPX05PVF9GT1VORCIsIk1GQV9SRVFVSVJFRCIsIk1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUiLCJNSVNTSU5HX0FQUF9DUkVERU5USUFMIiwiTUlTU0lOR19BVVRIX0RPTUFJTiIsIk1JU1NJTkdfQ09ERSIsIk1JU1NJTkdfQ09OVElOVUVfVVJJIiwiTUlTU0lOR19JRlJBTUVfU1RBUlQiLCJNSVNTSU5HX0lPU19CVU5ETEVfSUQiLCJNSVNTSU5HX09SX0lOVkFMSURfTk9OQ0UiLCJNSVNTSU5HX01GQV9JTkZPIiwiTUlTU0lOR19NRkFfU0VTU0lPTiIsIk1JU1NJTkdfUEhPTkVfTlVNQkVSIiwiTUlTU0lOR19TRVNTSU9OX0lORk8iLCJNT0RVTEVfREVTVFJPWUVEIiwiTkVFRF9DT05GSVJNQVRJT04iLCJORVRXT1JLX1JFUVVFU1RfRkFJTEVEIiwiTlVMTF9VU0VSIiwiTk9fQVVUSF9FVkVOVCIsIk5PX1NVQ0hfUFJPVklERVIiLCJPUEVSQVRJT05fTk9UX0FMTE9XRUQiLCJPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCIsIlBPUFVQX0JMT0NLRUQiLCJQT1BVUF9DTE9TRURfQllfVVNFUiIsIlBST1ZJREVSX0FMUkVBRFlfTElOS0VEIiwiUVVPVEFfRVhDRUVERUQiLCJSRURJUkVDVF9DQU5DRUxMRURfQllfVVNFUiIsIlJFRElSRUNUX09QRVJBVElPTl9QRU5ESU5HIiwiUkVKRUNURURfQ1JFREVOVElBTCIsIlNFQ09ORF9GQUNUT1JfQUxSRUFEWV9FTlJPTExFRCIsIlNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQiLCJURU5BTlRfSURfTUlTTUFUQ0giLCJUSU1FT1VUIiwiVE9LRU5fRVhQSVJFRCIsIlRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiIsIlVOQVVUSE9SSVpFRF9ET01BSU4iLCJVTlNVUFBPUlRFRF9GSVJTVF9GQUNUT1IiLCJVTlNVUFBPUlRFRF9QRVJTSVNURU5DRSIsIlVOU1VQUE9SVEVEX1RFTkFOVF9PUEVSQVRJT04iLCJVTlZFUklGSUVEX0VNQUlMIiwiVVNFUl9DQU5DRUxMRUQiLCJVU0VSX0RFTEVURUQiLCJVU0VSX0RJU0FCTEVEIiwiVVNFUl9NSVNNQVRDSCIsIlVTRVJfU0lHTkVEX09VVCIsIldFQUtfUEFTU1dPUkQiLCJXRUJfU1RPUkFHRV9VTlNVUFBPUlRFRCIsIkFMUkVBRFlfSU5JVElBTElaRUQiLCJSRUNBUFRDSEFfTk9UX0VOQUJMRUQiLCJNSVNTSU5HX1JFQ0FQVENIQV9UT0tFTiIsIklOVkFMSURfUkVDQVBUQ0hBX1RPS0VOIiwiSU5WQUxJRF9SRUNBUFRDSEFfQUNUSU9OIiwiTUlTU0lOR19DTElFTlRfVFlQRSIsIk1JU1NJTkdfUkVDQVBUQ0hBX1ZFUlNJT04iLCJJTlZBTElEX1JFQ0FQVENIQV9WRVJTSU9OIiwiSU5WQUxJRF9SRVFfVFlQRSIsImxvZ0NsaWVudCIsImxvZ2dlciIsIkxvZ2dlciIsIl9sb2dXYXJuIiwibXNnIiwiYXJncyIsIl9pIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwibG9nTGV2ZWwiLCJMb2dMZXZlbCIsIldBUk4iLCJ3YXJuIiwiYXBwbHkiLCJ0c2xpYiIsIl9fc3ByZWFkQXJyYXkiLCJjb25jYXQiLCJhcHAiLCJTREtfVkVSU0lPTiIsIl9sb2dFcnJvciIsIkVSUk9SIiwiZXJyb3IiLCJfZmFpbCIsImF1dGhPckNvZGUiLCJyZXN0IiwiY3JlYXRlRXJyb3JJbnRlcm5hbCIsIl9jcmVhdGVFcnJvciIsIl9lcnJvcldpdGhDdXN0b21NZXNzYWdlIiwiYXV0aCIsImNvZGUiLCJtZXNzYWdlIiwiZXJyb3JNYXAiLCJfX2Fzc2lnbiIsImZhY3RvcnkiLCJjcmVhdGUiLCJhcHBOYW1lIiwibmFtZSIsImZ1bGxQYXJhbXMiLCJzbGljZSIsIl9lcnJvckZhY3RvcnkiLCJfYXNzZXJ0IiwiYXNzZXJ0aW9uIiwiZGVidWdGYWlsIiwiZmFpbHVyZSIsIkVycm9yIiwiZGVidWdBc3NlcnQiLCJfZ2V0Q3VycmVudFVybCIsInNlbGYiLCJsb2NhdGlvbiIsImhyZWYiLCJfaXNIdHRwT3JIdHRwcyIsIl9nZXRDdXJyZW50U2NoZW1lIiwicHJvdG9jb2wiLCJfaXNPbmxpbmUiLCJuYXZpZ2F0b3IiLCJvbkxpbmUiLCJpc0Jyb3dzZXJFeHRlbnNpb24iLCJfZ2V0VXNlckxhbmd1YWdlIiwibmF2aWdhdG9yTGFuZ3VhZ2UiLCJsYW5ndWFnZXMiLCJsYW5ndWFnZSIsIkRlbGF5Iiwic2hvcnREZWxheSIsImxvbmdEZWxheSIsImlzTW9iaWxlIiwiaXNNb2JpbGVDb3Jkb3ZhIiwiaXNSZWFjdE5hdGl2ZSIsInByb3RvdHlwZSIsImdldCIsIk1hdGgiLCJtaW4iLCJfZW11bGF0b3JVcmwiLCJjb25maWciLCJwYXRoIiwiZW11bGF0b3IiLCJ1cmwiLCJzdGFydHNXaXRoIiwiRmV0Y2hQcm92aWRlciIsImluaXRpYWxpemUiLCJmZXRjaEltcGwiLCJoZWFkZXJzSW1wbCIsInJlc3BvbnNlSW1wbCIsImZldGNoIiwiaGVhZGVycyIsIkhlYWRlcnMiLCJyZXNwb25zZSIsIlJlc3BvbnNlIiwiU0VSVkVSX0VSUk9SX01BUCIsIl9hJDEiLCJERUZBVUxUX0FQSV9USU1FT1VUX01TIiwiX2FkZFRpZElmTmVjZXNzYXJ5IiwicmVxdWVzdCIsInRlbmFudElkIiwiX3BlcmZvcm1BcGlSZXF1ZXN0IiwibWV0aG9kIiwiY3VzdG9tRXJyb3JNYXAiLCJfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmciLCJfX2F3YWl0ZXIiLCJfdGhpcyIsImJvZHkiLCJwYXJhbXMiLCJKU09OIiwic3RyaW5naWZ5IiwicXVlcnkiLCJxdWVyeXN0cmluZyIsImtleSIsImFwaUtleSIsIl9nZXRBZGRpdGlvbmFsSGVhZGVycyIsInNlbnQiLCJsYW5ndWFnZUNvZGUiLCJfZ2V0RmluYWxUYXJnZXQiLCJhcGlIb3N0IiwicmVmZXJyZXJQb2xpY3kiLCJmZXRjaEZuIiwiX2NhbkluaXRFbXVsYXRvciIsIm5ldHdvcmtUaW1lb3V0IiwiTmV0d29ya1RpbWVvdXQiLCJQcm9taXNlIiwicmFjZSIsInByb21pc2UiLCJfYiIsImNsZWFyTmV0d29ya1RpbWVvdXQiLCJqc29uIiwiX21ha2VUYWdnZWRFcnJvciIsIm9rIiwiZXJyb3JNZXNzYWdlIiwic3BsaXQiLCJzZXJ2ZXJFcnJvckNvZGUiLCJzZXJ2ZXJFcnJvck1lc3NhZ2UiLCJhdXRoRXJyb3IiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJlXzEiLCJGaXJlYmFzZUVycm9yIiwiU3RyaW5nIiwiX3BlcmZvcm1TaWduSW5SZXF1ZXN0Iiwic2VydmVyUmVzcG9uc2UiLCJfc2VydmVyUmVzcG9uc2UiLCJob3N0IiwiYmFzZSIsImFwaVNjaGVtZSIsInRpbWVyIiwiXyIsInJlamVjdCIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJlcnJvclBhcmFtcyIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJjdXN0b21EYXRhIiwiX3Rva2VuUmVzcG9uc2UiLCJkZWxldGVBY2NvdW50IiwiZGVsZXRlTGlua2VkQWNjb3VudHMiLCJnZXRBY2NvdW50SW5mbyIsInV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyIsInV0Y1RpbWVzdGFtcCIsInVuZGVmaW5lZCIsImRhdGUiLCJEYXRlIiwiTnVtYmVyIiwiaXNOYU4iLCJnZXRUaW1lIiwidG9VVENTdHJpbmciLCJlIiwiZ2V0SWRUb2tlbiIsInVzZXIiLCJmb3JjZVJlZnJlc2giLCJnZXRNb2R1bGFySW5zdGFuY2UiLCJnZXRJZFRva2VuUmVzdWx0IiwidXNlckludGVybmFsIiwidG9rZW4iLCJjbGFpbXMiLCJfcGFyc2VUb2tlbiIsImV4cCIsImF1dGhfdGltZSIsImlhdCIsImZpcmViYXNlIiwic2lnbkluUHJvdmlkZXIiLCJhdXRoVGltZSIsInNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyIsImlzc3VlZEF0VGltZSIsImV4cGlyYXRpb25UaW1lIiwic2lnbkluU2Vjb25kRmFjdG9yIiwic2Vjb25kcyIsImFsZ29yaXRobSIsInBheWxvYWQiLCJzaWduYXR1cmUiLCJkZWNvZGVkIiwiYmFzZTY0RGVjb2RlIiwicGFyc2UiLCJ0b1N0cmluZyIsIl90b2tlbkV4cGlyZXNJbiIsInBhcnNlZFRva2VuIiwiX2xvZ291dElmSW52YWxpZGF0ZWQiLCJieXBhc3NBdXRoU3RhdGUiLCJpc1VzZXJJbnZhbGlkYXRlZCIsImN1cnJlbnRVc2VyIiwic2lnbk91dCIsIlByb2FjdGl2ZVJlZnJlc2giLCJpc1J1bm5pbmciLCJ0aW1lcklkIiwiZXJyb3JCYWNrb2ZmIiwiX3N0YXJ0Iiwic2NoZWR1bGUiLCJfc3RvcCIsImdldEludGVydmFsIiwid2FzRXJyb3IiLCJpbnRlcnZhbCIsImV4cFRpbWUiLCJzdHNUb2tlbk1hbmFnZXIiLCJub3ciLCJtYXgiLCJpdGVyYXRpb24iLCJVc2VyTWV0YWRhdGEiLCJjcmVhdGVkQXQiLCJsYXN0TG9naW5BdCIsIl9pbml0aWFsaXplVGltZSIsImxhc3RTaWduSW5UaW1lIiwiY3JlYXRpb25UaW1lIiwiX2NvcHkiLCJtZXRhZGF0YSIsInRvSlNPTiIsIl9yZWxvYWRXaXRob3V0U2F2aW5nIiwiaWRUb2tlbiIsInVzZXJzIiwiY29yZUFjY291bnQiLCJfbm90aWZ5UmVsb2FkTGlzdGVuZXIiLCJuZXdQcm92aWRlckRhdGEiLCJwcm92aWRlclVzZXJJbmZvIiwiZXh0cmFjdFByb3ZpZGVyRGF0YSIsInByb3ZpZGVyRGF0YSIsIm1lcmdlUHJvdmlkZXJEYXRhIiwib2xkSXNBbm9ueW1vdXMiLCJpc0Fub255bW91cyIsIm5ld0lzQW5vbnltb3VzIiwicGFzc3dvcmRIYXNoIiwidXBkYXRlcyIsInVpZCIsImxvY2FsSWQiLCJkaXNwbGF5TmFtZSIsInBob3RvVVJMIiwicGhvdG9VcmwiLCJlbWFpbFZlcmlmaWVkIiwiT2JqZWN0IiwiYXNzaWduIiwicmVsb2FkIiwiX3BlcnNpc3RVc2VySWZDdXJyZW50IiwiX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCIsIm9yaWdpbmFsIiwibmV3RGF0YSIsImRlZHVwZWQiLCJmaWx0ZXIiLCJvIiwic29tZSIsIm4iLCJwcm92aWRlcklkIiwicHJvdmlkZXJzIiwibWFwIiwicHJvdmlkZXIiLCJfX3Jlc3QiLCJyYXdJZCIsInJlcXVlc3RTdHNUb2tlbiIsInJlZnJlc2hUb2tlbiIsInRva2VuQXBpSG9zdCIsImFjY2Vzc1Rva2VuIiwiYWNjZXNzX3Rva2VuIiwiZXhwaXJlc0luIiwiZXhwaXJlc19pbiIsInJlZnJlc2hfdG9rZW4iLCJTdHNUb2tlbk1hbmFnZXIiLCJkZWZpbmVQcm9wZXJ0eSIsInVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZSIsInVwZGF0ZVRva2Vuc0FuZEV4cGlyYXRpb24iLCJnZXRUb2tlbiIsImlzRXhwaXJlZCIsInJlZnJlc2giLCJjbGVhclJlZnJlc2hUb2tlbiIsIm9sZFRva2VuIiwiZXhwaXJlc0luU2VjIiwiZnJvbUpTT04iLCJvYmplY3QiLCJtYW5hZ2VyIiwiX2Fzc2lnbiIsIl9jbG9uZSIsIl9wZXJmb3JtUmVmcmVzaCIsImFzc2VydFN0cmluZ09yVW5kZWZpbmVkIiwiVXNlckltcGwiLCJvcHQiLCJwcm9hY3RpdmVSZWZyZXNoIiwicmVsb2FkVXNlckluZm8iLCJyZWxvYWRMaXN0ZW5lciIsInVzZXJJbmZvIiwibmV3VXNlciIsIl9vblJlbG9hZCIsImNhbGxiYWNrIiwiX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCIsIl9zdG9wUHJvYWN0aXZlUmVmcmVzaCIsIl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeSIsInRva2Vuc1JlZnJlc2hlZCIsImRlbGV0ZSIsIl9yZWRpcmVjdEV2ZW50SWQiLCJfZnJvbUpTT04iLCJfYyIsIl9kIiwiX2UiLCJfZiIsIl9nIiwiX2giLCJwbGFpbk9iamVjdFRva2VuTWFuYWdlciIsIkFycmF5IiwiaXNBcnJheSIsIl9mcm9tSWRUb2tlblJlc3BvbnNlIiwiaWRUb2tlblJlc3BvbnNlIiwiaW5zdGFuY2VDYWNoZSIsIk1hcCIsIl9nZXRJbnN0YW5jZSIsImNscyIsIkZ1bmN0aW9uIiwiaW5zdGFuY2UiLCJzZXQiLCJJbk1lbW9yeVBlcnNpc3RlbmNlIiwidHlwZSIsInN0b3JhZ2UiLCJfaXNBdmFpbGFibGUiLCJfc2V0IiwidmFsdWUiLCJfZ2V0IiwiX3JlbW92ZSIsIl9hZGRMaXN0ZW5lciIsIl9rZXkiLCJfbGlzdGVuZXIiLCJfcmVtb3ZlTGlzdGVuZXIiLCJpbk1lbW9yeVBlcnNpc3RlbmNlIiwiX3BlcnNpc3RlbmNlS2V5TmFtZSIsIlBlcnNpc3RlbmNlVXNlck1hbmFnZXIiLCJwZXJzaXN0ZW5jZSIsInVzZXJLZXkiLCJmdWxsVXNlcktleSIsImZ1bGxQZXJzaXN0ZW5jZUtleSIsImJvdW5kRXZlbnRIYW5kbGVyIiwiX29uU3RvcmFnZUV2ZW50IiwiYmluZCIsInNldEN1cnJlbnRVc2VyIiwiZ2V0Q3VycmVudFVzZXIiLCJibG9iIiwicmVtb3ZlQ3VycmVudFVzZXIiLCJzYXZlUGVyc2lzdGVuY2VGb3JSZWRpcmVjdCIsInNldFBlcnNpc3RlbmNlIiwibmV3UGVyc2lzdGVuY2UiLCJwZXJzaXN0ZW5jZUhpZXJhcmNoeSIsImFsbCIsImF2YWlsYWJsZVBlcnNpc3RlbmNlcyIsInNlbGVjdGVkUGVyc2lzdGVuY2UiLCJ1c2VyVG9NaWdyYXRlIiwicGVyc2lzdGVuY2VIaWVyYXJjaHlfMSIsIm1pZ3JhdGlvbkhpZXJhcmNoeSIsInAiLCJfc2hvdWxkQWxsb3dNaWdyYXRpb24iLCJfZ2V0QnJvd3Nlck5hbWUiLCJ1c2VyQWdlbnQiLCJ1YSIsImluY2x1ZGVzIiwiX2lzSUVNb2JpbGUiLCJfaXNGaXJlZm94IiwiX2lzQmxhY2tCZXJyeSIsIl9pc1dlYk9TIiwiX2lzU2FmYXJpIiwiX2lzQ2hyb21lSU9TIiwiX2lzQW5kcm9pZCIsInJlIiwibWF0Y2hlcyIsIm1hdGNoIiwiZ2V0VUEiLCJ0ZXN0IiwiX2lzSU9TIiwiX2lzSU9TN09yOCIsIl9pc0lFMTAiLCJpc0lFIiwiZG9jdW1lbnQiLCJkb2N1bWVudE1vZGUiLCJfaXNNb2JpbGVCcm93c2VyIiwiX2lzSWZyYW1lIiwid2luZG93IiwidG9wIiwiX2dldENsaWVudFZlcnNpb24iLCJjbGllbnRQbGF0Zm9ybSIsImZyYW1ld29ya3MiLCJyZXBvcnRlZFBsYXRmb3JtIiwicmVwb3J0ZWRGcmFtZXdvcmtzIiwiam9pbiIsImdldFJlY2FwdGNoYUNvbmZpZyIsImlzRW50ZXJwcmlzZSIsImdyZWNhcHRjaGEiLCJlbnRlcnByaXNlIiwiUmVjYXB0Y2hhQ29uZmlnIiwic2l0ZUtleSIsImVtYWlsUGFzc3dvcmRFbmFibGVkIiwicmVjYXB0Y2hhS2V5IiwicmVjYXB0Y2hhRW5mb3JjZW1lbnRTdGF0ZSIsImVuZm9yY2VtZW50U3RhdGUiLCJnZXRTY3JpcHRQYXJlbnRFbGVtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJfbG9hZEpTIiwicmVzb2x2ZSIsImVsIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm9ubG9hZCIsIm9uZXJyb3IiLCJjaGFyc2V0IiwiYXBwZW5kQ2hpbGQiLCJSRUNBUFRDSEFfRU5URVJQUklTRV9VUkwiLCJSRUNBUFRDSEFfRU5URVJQUklTRV9WRVJJRklFUl9UWVBFIiwiRkFLRV9UT0tFTiIsIlJlY2FwdGNoYUVudGVycHJpc2VWZXJpZmllciIsImF1dGhFeHRlcm4iLCJfY2FzdEF1dGgiLCJ2ZXJpZnkiLCJhY3Rpb24iLCJyZXRyaWV2ZVNpdGVLZXkiLCJfYWdlbnRSZWNhcHRjaGFDb25maWciLCJfdGVuYW50UmVjYXB0Y2hhQ29uZmlncyIsImNsaWVudFR5cGUiLCJ2ZXJzaW9uIiwidGhlbiIsImNhdGNoIiwicmV0cmlldmVSZWNhcHRjaGFUb2tlbiIsInJlYWR5IiwiZXhlY3V0ZSIsImluamVjdFJlY2FwdGNoYUZpZWxkcyIsImNhcHRjaGFSZXNwIiwidmVyaWZpZXIiLCJjYXB0Y2hhUmVzcG9uc2UiLCJuZXdSZXF1ZXN0IiwiQXV0aE1pZGRsZXdhcmVRdWV1ZSIsInF1ZXVlIiwicHVzaENhbGxiYWNrIiwib25BYm9ydCIsIndyYXBwZWRDYWxsYmFjayIsInJlc3VsdCIsInB1c2giLCJpbmRleCIsInJ1bk1pZGRsZXdhcmUiLCJuZXh0VXNlciIsIm9uQWJvcnRTdGFjayIsImJlZm9yZVN0YXRlQ2FsbGJhY2siLCJyZXZlcnNlIiwib25BYm9ydFN0YWNrXzEiLCJvcmlnaW5hbE1lc3NhZ2UiLCJBdXRoSW1wbCIsImhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciIsImFwcENoZWNrU2VydmljZVByb3ZpZGVyIiwiZW11bGF0b3JDb25maWciLCJvcGVyYXRpb25zIiwiYXV0aFN0YXRlU3Vic2NyaXB0aW9uIiwiU3Vic2NyaXB0aW9uIiwiaWRUb2tlblN1YnNjcmlwdGlvbiIsImJlZm9yZVN0YXRlUXVldWUiLCJyZWRpcmVjdFVzZXIiLCJpc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkIiwiX2lzSW5pdGlhbGl6ZWQiLCJfZGVsZXRlZCIsIl9pbml0aWFsaXphdGlvblByb21pc2UiLCJfcG9wdXBSZWRpcmVjdFJlc29sdmVyIiwibGFzdE5vdGlmaWVkVWlkIiwic2V0dGluZ3MiLCJhcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmciLCJjbGllbnRWZXJzaW9uIiwic2RrQ2xpZW50VmVyc2lvbiIsIl9pbml0aWFsaXplV2l0aFBlcnNpc3RlbmNlIiwicG9wdXBSZWRpcmVjdFJlc29sdmVyIiwicGVyc2lzdGVuY2VNYW5hZ2VyIiwiX3Nob3VsZEluaXRQcm9hY3RpdmVseSIsIl9pbml0aWFsaXplIiwiaW5pdGlhbGl6ZUN1cnJlbnRVc2VyIiwiYXNzZXJ0ZWRQZXJzaXN0ZW5jZSIsIl9jdXJyZW50VXNlciIsIl91cGRhdGVDdXJyZW50VXNlciIsInByZXZpb3VzbHlTdG9yZWRVc2VyIiwiZnV0dXJlQ3VycmVudFVzZXIiLCJuZWVkc1RvY2hlY2tNaWRkbGV3YXJlIiwiYXV0aERvbWFpbiIsImdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyIiwicmVkaXJlY3RVc2VyRXZlbnRJZCIsInN0b3JlZFVzZXJFdmVudElkIiwidHJ5UmVkaXJlY3RTaWduSW4iLCJkaXJlY3RseVNldEN1cnJlbnRVc2VyIiwiX292ZXJyaWRlUmVkaXJlY3RSZXN1bHQiLCJlXzIiLCJyZWxvYWRBbmRTZXRDdXJyZW50VXNlck9yQ2xlYXIiLCJyZWRpcmVjdFJlc29sdmVyIiwiX2NvbXBsZXRlUmVkaXJlY3RGbiIsIl9zZXRSZWRpcmVjdFVzZXIiLCJlXzQiLCJ1c2VEZXZpY2VMYW5ndWFnZSIsIl9kZWxldGUiLCJ1cGRhdGVDdXJyZW50VXNlciIsInVzZXJFeHRlcm4iLCJza2lwQmVmb3JlU3RhdGVDYWxsYmFja3MiLCJub3RpZnlBdXRoTGlzdGVuZXJzIiwicmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIiLCJpbml0aWFsaXplUmVjYXB0Y2hhQ29uZmlnIiwiX2dldFJlY2FwdGNoYUNvbmZpZyIsIl9nZXRQZXJzaXN0ZW5jZSIsIl91cGRhdGVFcnJvck1hcCIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsIm5leHRPck9ic2VydmVyIiwiY29tcGxldGVkIiwicmVnaXN0ZXJTdGF0ZUxpc3RlbmVyIiwiYmVmb3JlQXV0aFN0YXRlQ2hhbmdlZCIsIm9uSWRUb2tlbkNoYW5nZWQiLCJyZWRpcmVjdE1hbmFnZXIiLCJyZXNvbHZlciIsIl9yZWRpcmVjdFBlcnNpc3RlbmNlIiwiX3JlZGlyZWN0VXNlckZvcklkIiwiaWQiLCJfX2dlbmVyYXRvciIsIm5leHQiLCJjdXJyZW50VWlkIiwic3Vic2NyaXB0aW9uIiwiY2IiLCJhZGRPYnNlcnZlciIsIl9sb2dGcmFtZXdvcmsiLCJmcmFtZXdvcmsiLCJzb3J0IiwiX2dldEZyYW1ld29ya3MiLCJvcHRpb25zIiwiYXBwSWQiLCJnZXRJbW1lZGlhdGUiLCJvcHRpb25hbCIsImdldEhlYXJ0YmVhdHNIZWFkZXIiLCJoZWFydGJlYXRzSGVhZGVyIiwiX2dldEFwcENoZWNrVG9rZW4iLCJhcHBDaGVja1Rva2VuIiwiYXBwQ2hlY2tUb2tlblJlc3VsdCIsIm9ic2VydmVyIiwiY3JlYXRlU3Vic2NyaWJlIiwiaW5pdGlhbGl6ZUF1dGgiLCJhcHAkMSIsImRlcHMiLCJfZ2V0UHJvdmlkZXIiLCJpc0luaXRpYWxpemVkIiwiYXV0aF8xIiwiaW5pdGlhbE9wdGlvbnMiLCJnZXRPcHRpb25zIiwiZGVlcEVxdWFsIiwiX2luaXRpYWxpemVBdXRoSW5zdGFuY2UiLCJoaWVyYXJjaHkiLCJjb25uZWN0QXV0aEVtdWxhdG9yIiwiYXV0aEludGVybmFsIiwiZGlzYWJsZVdhcm5pbmdzIiwiZXh0cmFjdFByb3RvY29sIiwiZXh0cmFjdEhvc3RBbmRQb3J0IiwicG9ydCIsInBvcnRTdHIiLCJmcmVlemUiLCJlbWl0RW11bGF0b3JXYXJuaW5nIiwicHJvdG9jb2xFbmQiLCJpbmRleE9mIiwic3Vic3RyIiwiYXV0aG9yaXR5IiwiZXhlYyIsImhvc3RBbmRQb3J0IiwicG9wIiwiYnJhY2tldGVkSVB2NiIsInBhcnNlUG9ydCIsImF0dGFjaEJhbm5lciIsInN0eSIsInN0eWxlIiwiaW5uZXJUZXh0IiwicG9zaXRpb24iLCJ3aWR0aCIsImJhY2tncm91bmRDb2xvciIsImJvcmRlciIsImNvbG9yIiwiYm90dG9tIiwibGVmdCIsIm1hcmdpbiIsInpJbmRleCIsInRleHRBbGlnbiIsImNsYXNzTGlzdCIsImFkZCIsImNvbnNvbGUiLCJpbmZvIiwicmVhZHlTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJBdXRoQ3JlZGVudGlhbCIsInNpZ25Jbk1ldGhvZCIsIl9nZXRJZFRva2VuUmVzcG9uc2UiLCJfYXV0aCIsIl9saW5rVG9JZFRva2VuIiwiX2lkVG9rZW4iLCJfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyIiwicmVzZXRQYXNzd29yZCIsInVwZGF0ZUVtYWlsUGFzc3dvcmQiLCJhcHBseUFjdGlvbkNvZGUkMSIsImFwcGx5QWN0aW9uQ29kZSIsInNpZ25JbldpdGhQYXNzd29yZCIsInNlbmRPb2JDb2RlIiwic2VuZEVtYWlsVmVyaWZpY2F0aW9uJDEiLCJzZW5kRW1haWxWZXJpZmljYXRpb24iLCJzZW5kUGFzc3dvcmRSZXNldEVtYWlsJDEiLCJzZW5kUGFzc3dvcmRSZXNldEVtYWlsIiwic2VuZFNpZ25JbkxpbmtUb0VtYWlsJDEiLCJzZW5kU2lnbkluTGlua1RvRW1haWwiLCJ2ZXJpZnlBbmRDaGFuZ2VFbWFpbCIsInNpZ25JbldpdGhFbWFpbExpbmskMSIsInNpZ25JbldpdGhFbWFpbExpbmsiLCJzaWduSW5XaXRoRW1haWxMaW5rRm9yTGlua2luZyIsIkVtYWlsQXV0aENyZWRlbnRpYWwiLCJfc3VwZXIiLCJfX2V4dGVuZHMiLCJfZW1haWwiLCJfcGFzc3dvcmQiLCJfdGVuYW50SWQiLCJjYWxsIiwiX2Zyb21FbWFpbEFuZFBhc3N3b3JkIiwicGFzc3dvcmQiLCJfZnJvbUVtYWlsQW5kQ29kZSIsIm9vYkNvZGUiLCJvYmoiLCJyZXF1ZXN0XzEiLCJyZXR1cm5TZWN1cmVUb2tlbiIsInJlcXVlc3RXaXRoUmVjYXB0Y2hhIiwibG9nIiwic2lnbkluV2l0aElkcCIsIklEUF9SRVFVRVNUX1VSSSQxIiwiT0F1dGhDcmVkZW50aWFsIiwicGVuZGluZ1Rva2VuIiwiX2Zyb21QYXJhbXMiLCJjcmVkIiwibm9uY2UiLCJvYXV0aFRva2VuIiwib2F1dGhUb2tlblNlY3JldCIsInNlY3JldCIsImJ1aWxkUmVxdWVzdCIsImF1dG9DcmVhdGUiLCJyZXF1ZXN0VXJpIiwicG9zdEJvZHkiLCJzaWduSW5XaXRoUGhvbmVOdW1iZXIkMSIsInNpZ25JbldpdGhQaG9uZU51bWJlciIsImxpbmtXaXRoUGhvbmVOdW1iZXIkMSIsImxpbmtXaXRoUGhvbmVOdW1iZXIiLCJ0ZW1wb3JhcnlQcm9vZiIsIlZFUklGWV9QSE9ORV9OVU1CRVJfRk9SX0VYSVNUSU5HX0VSUk9SX01BUF8iLCJ2ZXJpZnlQaG9uZU51bWJlckZvckV4aXN0aW5nIiwiYXBpUmVxdWVzdCIsIm9wZXJhdGlvbiIsIlBob25lQXV0aENyZWRlbnRpYWwiLCJfZnJvbVZlcmlmaWNhdGlvbiIsInZlcmlmaWNhdGlvbklkIiwidmVyaWZpY2F0aW9uQ29kZSIsIl9mcm9tVG9rZW5SZXNwb25zZSIsIl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCIsInNlc3Npb25JbmZvIiwicGFyc2VNb2RlIiwibW9kZSIsInBhcnNlRGVlcExpbmsiLCJsaW5rIiwicXVlcnlzdHJpbmdEZWNvZGUiLCJleHRyYWN0UXVlcnlzdHJpbmciLCJkb3VibGVEZWVwTGluayIsImlPU0RlZXBMaW5rIiwiaU9TRG91YmxlRGVlcExpbmsiLCJBY3Rpb25Db2RlVVJMIiwiYWN0aW9uTGluayIsInNlYXJjaFBhcmFtcyIsImNvbnRpbnVlVXJsIiwicGFyc2VMaW5rIiwicGFyc2VBY3Rpb25Db2RlVVJMIiwiRW1haWxBdXRoUHJvdmlkZXIiLCJQUk9WSURFUl9JRCIsImNyZWRlbnRpYWwiLCJjcmVkZW50aWFsV2l0aExpbmsiLCJlbWFpbExpbmsiLCJhY3Rpb25Db2RlVXJsIiwiRU1BSUxfUEFTU1dPUkRfU0lHTl9JTl9NRVRIT0QiLCJFTUFJTF9MSU5LX1NJR05fSU5fTUVUSE9EIiwiRmVkZXJhdGVkQXV0aFByb3ZpZGVyIiwiZGVmYXVsdExhbmd1YWdlQ29kZSIsImN1c3RvbVBhcmFtZXRlcnMiLCJzZXREZWZhdWx0TGFuZ3VhZ2UiLCJzZXRDdXN0b21QYXJhbWV0ZXJzIiwiY3VzdG9tT0F1dGhQYXJhbWV0ZXJzIiwiZ2V0Q3VzdG9tUGFyYW1ldGVycyIsIkJhc2VPQXV0aFByb3ZpZGVyIiwic2NvcGVzIiwiYWRkU2NvcGUiLCJzY29wZSIsImdldFNjb3BlcyIsIk9BdXRoUHJvdmlkZXIiLCJjcmVkZW50aWFsRnJvbUpTT04iLCJfY3JlZGVudGlhbCIsInJhd05vbmNlIiwiY3JlZGVudGlhbEZyb21SZXN1bHQiLCJ1c2VyQ3JlZGVudGlhbCIsIm9hdXRoQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QiLCJjcmVkZW50aWFsRnJvbUVycm9yIiwidG9rZW5SZXNwb25zZSIsIm9hdXRoSWRUb2tlbiIsIm9hdXRoQWNjZXNzVG9rZW4iLCJGYWNlYm9va0F1dGhQcm92aWRlciIsIkZBQ0VCT09LX1NJR05fSU5fTUVUSE9EIiwiY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QiLCJHb29nbGVBdXRoUHJvdmlkZXIiLCJHT09HTEVfU0lHTl9JTl9NRVRIT0QiLCJHaXRodWJBdXRoUHJvdmlkZXIiLCJHSVRIVUJfU0lHTl9JTl9NRVRIT0QiLCJJRFBfUkVRVUVTVF9VUkkiLCJTQU1MQXV0aENyZWRlbnRpYWwiLCJfY3JlYXRlIiwiU0FNTF9QUk9WSURFUl9QUkVGSVgiLCJTQU1MQXV0aFByb3ZpZGVyIiwic2FtbENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0IiwiVHdpdHRlckF1dGhQcm92aWRlciIsIlRXSVRURVJfU0lHTl9JTl9NRVRIT0QiLCJzaWduVXAiLCJVc2VyQ3JlZGVudGlhbEltcGwiLCJvcGVyYXRpb25UeXBlIiwicHJvdmlkZXJJZEZvclJlc3BvbnNlIiwidXNlckNyZWQiLCJfZm9yT3BlcmF0aW9uIiwic2lnbkluQW5vbnltb3VzbHkiLCJNdWx0aUZhY3RvckVycm9yIiwic2V0UHJvdG90eXBlT2YiLCJfZnJvbUVycm9yQW5kT3BlcmF0aW9uIiwiX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5IiwiaWRUb2tlblByb3ZpZGVyIiwicHJvdmlkZXJEYXRhQXNOYW1lcyIsIlNldCIsInBpZCIsInVubGluayIsIl9hc3NlcnRMaW5rZWRTdGF0dXMiLCJkZWxldGVQcm92aWRlciIsInByb3ZpZGVyc0xlZnQiLCJwZCIsImhhcyIsIl9saW5rIiwiZXhwZWN0ZWQiLCJwcm92aWRlcklkcyIsIl9yZWF1dGhlbnRpY2F0ZSIsInBhcnNlZCIsInN1YiIsIl9zaWduSW5XaXRoQ3JlZGVudGlhbCIsInNpZ25JbldpdGhDcmVkZW50aWFsIiwibGlua1dpdGhDcmVkZW50aWFsIiwicmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCIsInNpZ25JbldpdGhDdXN0b21Ub2tlbiQxIiwic2lnbkluV2l0aEN1c3RvbVRva2VuIiwiY3VzdG9tVG9rZW4iLCJNdWx0aUZhY3RvckluZm9JbXBsIiwiZmFjdG9ySWQiLCJtZmFFbnJvbGxtZW50SWQiLCJlbnJvbGxtZW50VGltZSIsImVucm9sbGVkQXQiLCJfZnJvbVNlcnZlclJlc3BvbnNlIiwiZW5yb2xsbWVudCIsIlBob25lTXVsdGlGYWN0b3JJbmZvSW1wbCIsIlRvdHBNdWx0aUZhY3RvckluZm9JbXBsIiwicGhvbmVJbmZvIiwiX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdCIsImFjdGlvbkNvZGVTZXR0aW5ncyIsImR5bmFtaWNMaW5rRG9tYWluIiwiY2FuSGFuZGxlQ29kZUluQXBwIiwiaGFuZGxlQ29kZUluQXBwIiwiaU9TIiwiYnVuZGxlSWQiLCJpT1NCdW5kbGVJZCIsImFuZHJvaWQiLCJwYWNrYWdlTmFtZSIsImFuZHJvaWRJbnN0YWxsQXBwIiwiaW5zdGFsbEFwcCIsImFuZHJvaWRNaW5pbXVtVmVyc2lvbkNvZGUiLCJtaW5pbXVtVmVyc2lvbiIsImFuZHJvaWRQYWNrYWdlTmFtZSIsInJlcXVlc3RUeXBlIiwiY29uZmlybVBhc3N3b3JkUmVzZXQiLCJuZXdQYXNzd29yZCIsImNoZWNrQWN0aW9uQ29kZSIsImF1dGhNb2R1bGFyIiwibmV3RW1haWwiLCJtZmFJbmZvIiwibXVsdGlGYWN0b3JJbmZvIiwiZGF0YSIsInByZXZpb3VzRW1haWwiLCJ2ZXJpZnlQYXNzd29yZFJlc2V0Q29kZSIsImNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCIsInNpZ25VcFJlc3BvbnNlIiwic2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJzZXRBY3Rpb25Db2RlU2V0dGluZ3MiLCJpc1NpZ25JbldpdGhFbWFpbExpbmsiLCJjcmVhdGVBdXRoVXJpIiwiZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwiLCJjb250aW51ZVVyaSIsImlkZW50aWZpZXIiLCJzaWduaW5NZXRob2RzIiwidmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwiLCJ1cGRhdGVQcm9maWxlJDEiLCJ1cGRhdGVQcm9maWxlIiwicHJvZmlsZVJlcXVlc3QiLCJwYXNzd29yZFByb3ZpZGVyIiwiZmluZCIsInVwZGF0ZUVtYWlsIiwidXBkYXRlRW1haWxPclBhc3N3b3JkIiwidXBkYXRlUGFzc3dvcmQiLCJwcm9maWxlIiwicmF3VXNlckluZm8iLCJpc05ld1VzZXIiLCJraW5kIiwiZmlsdGVyZWRQcm92aWRlcklkIiwiR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyIsIkZhY2Vib29rQWRkaXRpb25hbFVzZXJJbmZvIiwiR2l0aHViQWRkaXRpb25hbFVzZXJJbmZvIiwiR29vZ2xlQWRkaXRpb25hbFVzZXJJbmZvIiwiVHdpdHRlckFkZGl0aW9uYWxVc2VySW5mbyIsInNjcmVlbk5hbWUiLCJGZWRlcmF0ZWRBZGRpdGlvbmFsVXNlckluZm9XaXRoVXNlcm5hbWUiLCJ1c2VybmFtZSIsImxvZ2luIiwiZ2V0QWRkaXRpb25hbFVzZXJJbmZvIiwiZGVsZXRlVXNlciIsIk11bHRpRmFjdG9yU2Vzc2lvbkltcGwiLCJfZnJvbUlkdG9rZW4iLCJfZnJvbU1mYVBlbmRpbmdDcmVkZW50aWFsIiwibWZhUGVuZGluZ0NyZWRlbnRpYWwiLCJtdWx0aUZhY3RvclNlc3Npb24iLCJwZW5kaW5nQ3JlZGVudGlhbCIsIk11bHRpRmFjdG9yUmVzb2x2ZXJJbXBsIiwic2Vzc2lvbiIsImhpbnRzIiwic2lnbkluUmVzb2x2ZXIiLCJfZnJvbUVycm9yIiwiX3Byb2Nlc3MiLCJtZmFSZXNwb25zZSIsInJlc29sdmVTaWduSW4iLCJhc3NlcnRpb25FeHRlcm4iLCJnZXRNdWx0aUZhY3RvclJlc29sdmVyIiwiZXJyb3JJbnRlcm5hbCIsInN0YXJ0RW5yb2xsVG90cE1mYSIsImZpbmFsaXplRW5yb2xsVG90cE1mYSIsIndpdGhkcmF3TWZhIiwiTXVsdGlGYWN0b3JVc2VySW1wbCIsImVucm9sbGVkRmFjdG9ycyIsIl9mcm9tVXNlciIsImdldFNlc3Npb24iLCJlbnJvbGwiLCJmaW5hbGl6ZU1mYVJlc3BvbnNlIiwidW5lbnJvbGwiLCJpbmZvT3JVaWQiLCJtdWx0aUZhY3RvclVzZXJDYWNoZSIsIldlYWtNYXAiLCJtdWx0aUZhY3RvciIsInVzZXJNb2R1bGFyIiwiQXV0aEludGVyb3AiLCJpbnRlcm5hbExpc3RlbmVycyIsImdldFVpZCIsImFzc2VydEF1dGhDb25maWd1cmVkIiwiYWRkQXV0aFRva2VuTGlzdGVuZXIiLCJsaXN0ZW5lciIsInVuc3Vic2NyaWJlIiwidXBkYXRlUHJvYWN0aXZlUmVmcmVzaCIsInJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyIiwic2l6ZSIsImdldFZlcnNpb25Gb3JQbGF0Zm9ybSIsInJlZ2lzdGVyQXV0aCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudCIsIkNvbXBvbmVudCIsImNvbnRhaW5lciIsImdldFByb3ZpZGVyIiwiYXV0aEluc3RhbmNlIiwic2V0SW5zdGFudGlhdGlvbk1vZGUiLCJzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayIsIl9pbnN0YW5jZUlkZW50aWZpZXIiLCJfaW5zdGFuY2UiLCJhdXRoSW50ZXJuYWxQcm92aWRlciIsInJlZ2lzdGVyVmVyc2lvbiIsImZldGNoSW1wbF9fbmFtZXNwYWNlIiwiZGVmYXVsdCIsImdldEF1dGgiLCJnZXRBcHAiLCJhdXRoRW11bGF0b3JIb3N0IiwiZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCIsIk5PVF9BVkFJTEFCTEVfRVJST1IiLCJmYWlsIiwiRmFpbENsYXNzIiwiYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UiLCJicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIiwiaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSIsImJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJQaG9uZUF1dGhQcm92aWRlciIsInJlYXV0aGVudGljYXRlV2l0aFBob25lTnVtYmVyIiwidXBkYXRlUGhvbmVOdW1iZXIiLCJzaWduSW5XaXRoUG9wdXAiLCJsaW5rV2l0aFBvcHVwIiwicmVhdXRoZW50aWNhdGVXaXRoUG9wdXAiLCJzaWduSW5XaXRoUmVkaXJlY3QiLCJsaW5rV2l0aFJlZGlyZWN0IiwicmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QiLCJnZXRSZWRpcmVjdFJlc3VsdCIsIlJlY2FwdGNoYVZlcmlmaWVyIiwiUGhvbmVNdWx0aUZhY3RvckdlbmVyYXRvciIsImZpbmFsaXplU2lnbkluVG90cE1mYSIsIk11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbCIsIl9maW5hbGl6ZUVucm9sbCIsIl9maW5hbGl6ZVNpZ25JbiIsIlRvdHBNdWx0aUZhY3RvckdlbmVyYXRvciIsImFzc2VydGlvbkZvckVucm9sbG1lbnQiLCJvbmVUaW1lUGFzc3dvcmQiLCJUb3RwTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIiwiX2Zyb21TZWNyZXQiLCJhc3NlcnRpb25Gb3JTaWduSW4iLCJlbnJvbGxtZW50SWQiLCJfZnJvbUVucm9sbG1lbnRJZCIsImdlbmVyYXRlU2VjcmV0IiwibWZhU2Vzc2lvbiIsInRvdHBFbnJvbGxtZW50SW5mbyIsIlRvdHBTZWNyZXQiLCJfZnJvbVN0YXJ0VG90cE1mYUVucm9sbG1lbnRSZXNwb25zZSIsIkZBQ1RPUl9JRCIsIm90cCIsInRvdHBWZXJpZmljYXRpb25JbmZvIiwiX21ha2VUb3RwVmVyaWZpY2F0aW9uSW5mbyIsInNlY3JldEtleSIsImhhc2hpbmdBbGdvcml0aG0iLCJjb2RlTGVuZ3RoIiwiY29kZUludGVydmFsU2Vjb25kcyIsImVucm9sbG1lbnRDb21wbGV0aW9uRGVhZGxpbmUiLCJ0b3RwU2Vzc2lvbkluZm8iLCJzaGFyZWRTZWNyZXRLZXkiLCJ2ZXJpZmljYXRpb25Db2RlTGVuZ3RoIiwicGVyaW9kU2VjIiwiZmluYWxpemVFbnJvbGxtZW50VGltZSIsImdlbmVyYXRlUXJDb2RlVXJsIiwiYWNjb3VudE5hbWUiLCJpc3N1ZXIiLCJ1c2VEZWZhdWx0cyIsIl9pc0VtcHR5U3RyaW5nIiwiaW5wdXQiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvbW9kZWwvZW51bV9tYXBzLnRzIiwiLi4vLi4vc3JjL2NvcmUvZXJyb3JzLnRzIiwiLi4vLi4vc3JjL2NvcmUvdXRpbC9sb2cudHMiLCIuLi8uLi9zcmMvY29yZS91dGlsL2Fzc2VydC50cyIsIi4uLy4uL3NyYy9jb3JlL3V0aWwvbG9jYXRpb24udHMiLCIuLi8uLi9zcmMvY29yZS91dGlsL25hdmlnYXRvci50cyIsIi4uLy4uL3NyYy9jb3JlL3V0aWwvZGVsYXkudHMiLCIuLi8uLi9zcmMvY29yZS91dGlsL2VtdWxhdG9yLnRzIiwiLi4vLi4vc3JjL2NvcmUvdXRpbC9mZXRjaF9wcm92aWRlci50cyIsIi4uLy4uL3NyYy9hcGkvZXJyb3JzLnRzIiwiLi4vLi4vc3JjL2FwaS9pbmRleC50cyIsIi4uLy4uL3NyYy9hcGkvYWNjb3VudF9tYW5hZ2VtZW50L2FjY291bnQudHMiLCIuLi8uLi9zcmMvY29yZS91dGlsL3RpbWUudHMiLCIuLi8uLi9zcmMvY29yZS91c2VyL2lkX3Rva2VuX3Jlc3VsdC50cyIsIi4uLy4uL3NyYy9jb3JlL3VzZXIvaW52YWxpZGF0aW9uLnRzIiwiLi4vLi4vc3JjL2NvcmUvdXNlci9wcm9hY3RpdmVfcmVmcmVzaC50cyIsIi4uLy4uL3NyYy9jb3JlL3VzZXIvdXNlcl9tZXRhZGF0YS50cyIsIi4uLy4uL3NyYy9jb3JlL3VzZXIvcmVsb2FkLnRzIiwiLi4vLi4vc3JjL2FwaS9hdXRoZW50aWNhdGlvbi90b2tlbi50cyIsIi4uLy4uL3NyYy9jb3JlL3VzZXIvdG9rZW5fbWFuYWdlci50cyIsIi4uLy4uL3NyYy9jb3JlL3VzZXIvdXNlcl9pbXBsLnRzIiwiLi4vLi4vc3JjL2NvcmUvdXRpbC9pbnN0YW50aWF0b3IudHMiLCIuLi8uLi9zcmMvY29yZS9wZXJzaXN0ZW5jZS9pbl9tZW1vcnkudHMiLCIuLi8uLi9zcmMvY29yZS9wZXJzaXN0ZW5jZS9wZXJzaXN0ZW5jZV91c2VyX21hbmFnZXIudHMiLCIuLi8uLi9zcmMvY29yZS91dGlsL2Jyb3dzZXIudHMiLCIuLi8uLi9zcmMvY29yZS91dGlsL3ZlcnNpb24udHMiLCIuLi8uLi9zcmMvYXBpL2F1dGhlbnRpY2F0aW9uL3JlY2FwdGNoYS50cyIsIi4uLy4uL3NyYy9wbGF0Zm9ybV9icm93c2VyL3JlY2FwdGNoYS9yZWNhcHRjaGEudHMiLCIuLi8uLi9zcmMvcGxhdGZvcm1fYnJvd3Nlci9sb2FkX2pzLnRzIiwiLi4vLi4vc3JjL3BsYXRmb3JtX2Jyb3dzZXIvcmVjYXB0Y2hhL3JlY2FwdGNoYV9lbnRlcnByaXNlX3ZlcmlmaWVyLnRzIiwiLi4vLi4vc3JjL2NvcmUvYXV0aC9taWRkbGV3YXJlLnRzIiwiLi4vLi4vc3JjL2NvcmUvYXV0aC9hdXRoX2ltcGwudHMiLCIuLi8uLi9zcmMvY29yZS9hdXRoL2luaXRpYWxpemUudHMiLCIuLi8uLi9zcmMvY29yZS9hdXRoL2VtdWxhdG9yLnRzIiwiLi4vLi4vc3JjL2NvcmUvY3JlZGVudGlhbHMvYXV0aF9jcmVkZW50aWFsLnRzIiwiLi4vLi4vc3JjL2FwaS9hY2NvdW50X21hbmFnZW1lbnQvZW1haWxfYW5kX3Bhc3N3b3JkLnRzIiwiLi4vLi4vc3JjL2FwaS9hdXRoZW50aWNhdGlvbi9lbWFpbF9hbmRfcGFzc3dvcmQudHMiLCIuLi8uLi9zcmMvYXBpL2F1dGhlbnRpY2F0aW9uL2VtYWlsX2xpbmsudHMiLCIuLi8uLi9zcmMvY29yZS9jcmVkZW50aWFscy9lbWFpbC50cyIsIi4uLy4uL3NyYy9hcGkvYXV0aGVudGljYXRpb24vaWRwLnRzIiwiLi4vLi4vc3JjL2NvcmUvY3JlZGVudGlhbHMvb2F1dGgudHMiLCIuLi8uLi9zcmMvYXBpL2F1dGhlbnRpY2F0aW9uL3Ntcy50cyIsIi4uLy4uL3NyYy9jb3JlL2NyZWRlbnRpYWxzL3Bob25lLnRzIiwiLi4vLi4vc3JjL2NvcmUvYWN0aW9uX2NvZGVfdXJsLnRzIiwiLi4vLi4vc3JjL2NvcmUvcHJvdmlkZXJzL2VtYWlsLnRzIiwiLi4vLi4vc3JjL2NvcmUvcHJvdmlkZXJzL2ZlZGVyYXRlZC50cyIsIi4uLy4uL3NyYy9jb3JlL3Byb3ZpZGVycy9vYXV0aC50cyIsIi4uLy4uL3NyYy9jb3JlL3Byb3ZpZGVycy9mYWNlYm9vay50cyIsIi4uLy4uL3NyYy9jb3JlL3Byb3ZpZGVycy9nb29nbGUudHMiLCIuLi8uLi9zcmMvY29yZS9wcm92aWRlcnMvZ2l0aHViLnRzIiwiLi4vLi4vc3JjL2NvcmUvY3JlZGVudGlhbHMvc2FtbC50cyIsIi4uLy4uL3NyYy9jb3JlL3Byb3ZpZGVycy9zYW1sLnRzIiwiLi4vLi4vc3JjL2NvcmUvcHJvdmlkZXJzL3R3aXR0ZXIudHMiLCIuLi8uLi9zcmMvYXBpL2F1dGhlbnRpY2F0aW9uL3NpZ25fdXAudHMiLCIuLi8uLi9zcmMvY29yZS91c2VyL3VzZXJfY3JlZGVudGlhbF9pbXBsLnRzIiwiLi4vLi4vc3JjL2NvcmUvc3RyYXRlZ2llcy9hbm9ueW1vdXMudHMiLCIuLi8uLi9zcmMvbWZhL21mYV9lcnJvci50cyIsIi4uLy4uL3NyYy9jb3JlL3V0aWwvcHJvdmlkZXJzLnRzIiwiLi4vLi4vc3JjL2NvcmUvdXNlci9saW5rX3VubGluay50cyIsIi4uLy4uL3NyYy9jb3JlL3VzZXIvcmVhdXRoZW50aWNhdGUudHMiLCIuLi8uLi9zcmMvY29yZS9zdHJhdGVnaWVzL2NyZWRlbnRpYWwudHMiLCIuLi8uLi9zcmMvYXBpL2F1dGhlbnRpY2F0aW9uL2N1c3RvbV90b2tlbi50cyIsIi4uLy4uL3NyYy9jb3JlL3N0cmF0ZWdpZXMvY3VzdG9tX3Rva2VuLnRzIiwiLi4vLi4vc3JjL21mYS9tZmFfaW5mby50cyIsIi4uLy4uL3NyYy9jb3JlL3N0cmF0ZWdpZXMvYWN0aW9uX2NvZGVfc2V0dGluZ3MudHMiLCIuLi8uLi9zcmMvY29yZS9zdHJhdGVnaWVzL2VtYWlsX2FuZF9wYXNzd29yZC50cyIsIi4uLy4uL3NyYy9jb3JlL3N0cmF0ZWdpZXMvZW1haWxfbGluay50cyIsIi4uLy4uL3NyYy9hcGkvYXV0aGVudGljYXRpb24vY3JlYXRlX2F1dGhfdXJpLnRzIiwiLi4vLi4vc3JjL2NvcmUvc3RyYXRlZ2llcy9lbWFpbC50cyIsIi4uLy4uL3NyYy9hcGkvYWNjb3VudF9tYW5hZ2VtZW50L3Byb2ZpbGUudHMiLCIuLi8uLi9zcmMvY29yZS91c2VyL2FjY291bnRfaW5mby50cyIsIi4uLy4uL3NyYy9jb3JlL3VzZXIvYWRkaXRpb25hbF91c2VyX2luZm8udHMiLCIuLi8uLi9zcmMvY29yZS9pbmRleC50cyIsIi4uLy4uL3NyYy9tZmEvbWZhX3Nlc3Npb24udHMiLCIuLi8uLi9zcmMvbWZhL21mYV9yZXNvbHZlci50cyIsIi4uLy4uL3NyYy9hcGkvYWNjb3VudF9tYW5hZ2VtZW50L21mYS50cyIsIi4uLy4uL3NyYy9tZmEvbWZhX3VzZXIudHMiLCIuLi8uLi9zcmMvY29yZS9hdXRoL2ZpcmViYXNlX2ludGVybmFsLnRzIiwiLi4vLi4vc3JjL2NvcmUvYXV0aC9yZWdpc3Rlci50cyIsIi4uLy4uL3NyYy9wbGF0Zm9ybV9ub2RlL2luZGV4LnRzIiwiLi4vLi4vc3JjL2FwaS9hdXRoZW50aWNhdGlvbi9tZmEudHMiLCIuLi8uLi9zcmMvbWZhL21mYV9hc3NlcnRpb24udHMiLCIuLi8uLi9zcmMvbWZhL2Fzc2VydGlvbnMvdG90cC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEFuIGVudW0gb2YgZmFjdG9ycyB0aGF0IG1heSBiZSB1c2VkIGZvciBtdWx0aWZhY3RvciBhdXRoZW50aWNhdGlvbi5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBGYWN0b3JJZCA9IHtcbiAgLyoqIFBob25lIGFzIHNlY29uZCBmYWN0b3IgKi9cbiAgUEhPTkU6ICdwaG9uZScsXG4gIFRPVFA6ICd0b3RwJ1xufSBhcyBjb25zdDtcblxuLyoqXG4gKiBFbnVtZXJhdGlvbiBvZiBzdXBwb3J0ZWQgcHJvdmlkZXJzLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IFByb3ZpZGVySWQgPSB7XG4gIC8qKiBGYWNlYm9vayBwcm92aWRlciBJRCAqL1xuICBGQUNFQk9PSzogJ2ZhY2Vib29rLmNvbScsXG4gIC8qKiBHaXRIdWIgcHJvdmlkZXIgSUQgKi9cbiAgR0lUSFVCOiAnZ2l0aHViLmNvbScsXG4gIC8qKiBHb29nbGUgcHJvdmlkZXIgSUQgKi9cbiAgR09PR0xFOiAnZ29vZ2xlLmNvbScsXG4gIC8qKiBQYXNzd29yZCBwcm92aWRlciAqL1xuICBQQVNTV09SRDogJ3Bhc3N3b3JkJyxcbiAgLyoqIFBob25lIHByb3ZpZGVyICovXG4gIFBIT05FOiAncGhvbmUnLFxuICAvKiogVHdpdHRlciBwcm92aWRlciBJRCAqL1xuICBUV0lUVEVSOiAndHdpdHRlci5jb20nXG59IGFzIGNvbnN0O1xuXG4vKipcbiAqIEVudW1lcmF0aW9uIG9mIHN1cHBvcnRlZCBzaWduLWluIG1ldGhvZHMuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgU2lnbkluTWV0aG9kID0ge1xuICAvKiogRW1haWwgbGluayBzaWduIGluIG1ldGhvZCAqL1xuICBFTUFJTF9MSU5LOiAnZW1haWxMaW5rJyxcbiAgLyoqIEVtYWlsL3Bhc3N3b3JkIHNpZ24gaW4gbWV0aG9kICovXG4gIEVNQUlMX1BBU1NXT1JEOiAncGFzc3dvcmQnLFxuICAvKiogRmFjZWJvb2sgc2lnbiBpbiBtZXRob2QgKi9cbiAgRkFDRUJPT0s6ICdmYWNlYm9vay5jb20nLFxuICAvKiogR2l0SHViIHNpZ24gaW4gbWV0aG9kICovXG4gIEdJVEhVQjogJ2dpdGh1Yi5jb20nLFxuICAvKiogR29vZ2xlIHNpZ24gaW4gbWV0aG9kICovXG4gIEdPT0dMRTogJ2dvb2dsZS5jb20nLFxuICAvKiogUGhvbmUgc2lnbiBpbiBtZXRob2QgKi9cbiAgUEhPTkU6ICdwaG9uZScsXG4gIC8qKiBUd2l0dGVyIHNpZ24gaW4gbWV0aG9kICovXG4gIFRXSVRURVI6ICd0d2l0dGVyLmNvbSdcbn0gYXMgY29uc3Q7XG5cbi8qKlxuICogRW51bWVyYXRpb24gb2Ygc3VwcG9ydGVkIG9wZXJhdGlvbiB0eXBlcy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBPcGVyYXRpb25UeXBlID0ge1xuICAvKiogT3BlcmF0aW9uIGludm9sdmluZyBsaW5raW5nIGFuIGFkZGl0aW9uYWwgcHJvdmlkZXIgdG8gYW4gYWxyZWFkeSBzaWduZWQtaW4gdXNlci4gKi9cbiAgTElOSzogJ2xpbmsnLFxuICAvKiogT3BlcmF0aW9uIGludm9sdmluZyB1c2luZyBhIHByb3ZpZGVyIHRvIHJlYXV0aGVudGljYXRlIGFuIGFscmVhZHkgc2lnbmVkLWluIHVzZXIuICovXG4gIFJFQVVUSEVOVElDQVRFOiAncmVhdXRoZW50aWNhdGUnLFxuICAvKiogT3BlcmF0aW9uIGludm9sdmluZyBzaWduaW5nIGluIGEgdXNlci4gKi9cbiAgU0lHTl9JTjogJ3NpZ25Jbidcbn0gYXMgY29uc3Q7XG5cbi8qKlxuICogQW4gZW51bWVyYXRpb24gb2YgdGhlIHBvc3NpYmxlIGVtYWlsIGFjdGlvbiB0eXBlcy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBBY3Rpb25Db2RlT3BlcmF0aW9uID0ge1xuICAvKiogVGhlIGVtYWlsIGxpbmsgc2lnbi1pbiBhY3Rpb24uICovXG4gIEVNQUlMX1NJR05JTjogJ0VNQUlMX1NJR05JTicsXG4gIC8qKiBUaGUgcGFzc3dvcmQgcmVzZXQgYWN0aW9uLiAqL1xuICBQQVNTV09SRF9SRVNFVDogJ1BBU1NXT1JEX1JFU0VUJyxcbiAgLyoqIFRoZSBlbWFpbCByZXZvY2F0aW9uIGFjdGlvbi4gKi9cbiAgUkVDT1ZFUl9FTUFJTDogJ1JFQ09WRVJfRU1BSUwnLFxuICAvKiogVGhlIHJldmVydCBzZWNvbmQgZmFjdG9yIGFkZGl0aW9uIGVtYWlsIGFjdGlvbi4gKi9cbiAgUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT046ICdSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTicsXG4gIC8qKiBUaGUgcmV2ZXJ0IHNlY29uZCBmYWN0b3IgYWRkaXRpb24gZW1haWwgYWN0aW9uLiAqL1xuICBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTDogJ1ZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMJyxcbiAgLyoqIFRoZSBlbWFpbCB2ZXJpZmljYXRpb24gYWN0aW9uLiAqL1xuICBWRVJJRllfRU1BSUw6ICdWRVJJRllfRU1BSUwnXG59IGFzIGNvbnN0O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQXV0aEVycm9yTWFwLCBVc2VyIH0gZnJvbSAnLi4vbW9kZWwvcHVibGljX3R5cGVzJztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgRXJyb3JNYXAgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbmltcG9ydCB7IElkVG9rZW5NZmFSZXNwb25zZSB9IGZyb20gJy4uL2FwaS9hdXRoZW50aWNhdGlvbi9tZmEnO1xuaW1wb3J0IHsgQXBwTmFtZSB9IGZyb20gJy4uL21vZGVsL2F1dGgnO1xuaW1wb3J0IHsgQXV0aENyZWRlbnRpYWwgfSBmcm9tICcuL2NyZWRlbnRpYWxzJztcblxuLyoqXG4gKiBFbnVtZXJhdGlvbiBvZiBGaXJlYmFzZSBBdXRoIGVycm9yIGNvZGVzLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY29uc3QgZW51bSBBdXRoRXJyb3JDb2RlIHtcbiAgQURNSU5fT05MWV9PUEVSQVRJT04gPSAnYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb24nLFxuICBBUkdVTUVOVF9FUlJPUiA9ICdhcmd1bWVudC1lcnJvcicsXG4gIEFQUF9OT1RfQVVUSE9SSVpFRCA9ICdhcHAtbm90LWF1dGhvcml6ZWQnLFxuICBBUFBfTk9UX0lOU1RBTExFRCA9ICdhcHAtbm90LWluc3RhbGxlZCcsXG4gIENBUFRDSEFfQ0hFQ0tfRkFJTEVEID0gJ2NhcHRjaGEtY2hlY2stZmFpbGVkJyxcbiAgQ09ERV9FWFBJUkVEID0gJ2NvZGUtZXhwaXJlZCcsXG4gIENPUkRPVkFfTk9UX1JFQURZID0gJ2NvcmRvdmEtbm90LXJlYWR5JyxcbiAgQ09SU19VTlNVUFBPUlRFRCA9ICdjb3JzLXVuc3VwcG9ydGVkJyxcbiAgQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRSA9ICdjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlJyxcbiAgQ1JFREVOVElBTF9NSVNNQVRDSCA9ICdjdXN0b20tdG9rZW4tbWlzbWF0Y2gnLFxuICBDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU4gPSAncmVxdWlyZXMtcmVjZW50LWxvZ2luJyxcbiAgREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIID0gJ2RlcGVuZGVudC1zZGstaW5pdGlhbGl6ZWQtYmVmb3JlLWF1dGgnLFxuICBEWU5BTUlDX0xJTktfTk9UX0FDVElWQVRFRCA9ICdkeW5hbWljLWxpbmstbm90LWFjdGl2YXRlZCcsXG4gIEVNQUlMX0NIQU5HRV9ORUVEU19WRVJJRklDQVRJT04gPSAnZW1haWwtY2hhbmdlLW5lZWRzLXZlcmlmaWNhdGlvbicsXG4gIEVNQUlMX0VYSVNUUyA9ICdlbWFpbC1hbHJlYWR5LWluLXVzZScsXG4gIEVNVUxBVE9SX0NPTkZJR19GQUlMRUQgPSAnZW11bGF0b3ItY29uZmlnLWZhaWxlZCcsXG4gIEVYUElSRURfT09CX0NPREUgPSAnZXhwaXJlZC1hY3Rpb24tY29kZScsXG4gIEVYUElSRURfUE9QVVBfUkVRVUVTVCA9ICdjYW5jZWxsZWQtcG9wdXAtcmVxdWVzdCcsXG4gIElOVEVSTkFMX0VSUk9SID0gJ2ludGVybmFsLWVycm9yJyxcbiAgSU5WQUxJRF9BUElfS0VZID0gJ2ludmFsaWQtYXBpLWtleScsXG4gIElOVkFMSURfQVBQX0NSRURFTlRJQUwgPSAnaW52YWxpZC1hcHAtY3JlZGVudGlhbCcsXG4gIElOVkFMSURfQVBQX0lEID0gJ2ludmFsaWQtYXBwLWlkJyxcbiAgSU5WQUxJRF9BVVRIID0gJ2ludmFsaWQtdXNlci10b2tlbicsXG4gIElOVkFMSURfQVVUSF9FVkVOVCA9ICdpbnZhbGlkLWF1dGgtZXZlbnQnLFxuICBJTlZBTElEX0NFUlRfSEFTSCA9ICdpbnZhbGlkLWNlcnQtaGFzaCcsXG4gIElOVkFMSURfQ09ERSA9ICdpbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlJyxcbiAgSU5WQUxJRF9DT05USU5VRV9VUkkgPSAnaW52YWxpZC1jb250aW51ZS11cmknLFxuICBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTiA9ICdpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvbicsXG4gIElOVkFMSURfQ1VTVE9NX1RPS0VOID0gJ2ludmFsaWQtY3VzdG9tLXRva2VuJyxcbiAgSU5WQUxJRF9EWU5BTUlDX0xJTktfRE9NQUlOID0gJ2ludmFsaWQtZHluYW1pYy1saW5rLWRvbWFpbicsXG4gIElOVkFMSURfRU1BSUwgPSAnaW52YWxpZC1lbWFpbCcsXG4gIElOVkFMSURfRU1VTEFUT1JfU0NIRU1FID0gJ2ludmFsaWQtZW11bGF0b3Itc2NoZW1lJyxcbiAgSU5WQUxJRF9JRFBfUkVTUE9OU0UgPSAnaW52YWxpZC1jcmVkZW50aWFsJyxcbiAgSU5WQUxJRF9NRVNTQUdFX1BBWUxPQUQgPSAnaW52YWxpZC1tZXNzYWdlLXBheWxvYWQnLFxuICBJTlZBTElEX01GQV9TRVNTSU9OID0gJ2ludmFsaWQtbXVsdGktZmFjdG9yLXNlc3Npb24nLFxuICBJTlZBTElEX09BVVRIX0NMSUVOVF9JRCA9ICdpbnZhbGlkLW9hdXRoLWNsaWVudC1pZCcsXG4gIElOVkFMSURfT0FVVEhfUFJPVklERVIgPSAnaW52YWxpZC1vYXV0aC1wcm92aWRlcicsXG4gIElOVkFMSURfT09CX0NPREUgPSAnaW52YWxpZC1hY3Rpb24tY29kZScsXG4gIElOVkFMSURfT1JJR0lOID0gJ3VuYXV0aG9yaXplZC1kb21haW4nLFxuICBJTlZBTElEX1BBU1NXT1JEID0gJ3dyb25nLXBhc3N3b3JkJyxcbiAgSU5WQUxJRF9QRVJTSVNURU5DRSA9ICdpbnZhbGlkLXBlcnNpc3RlbmNlLXR5cGUnLFxuICBJTlZBTElEX1BIT05FX05VTUJFUiA9ICdpbnZhbGlkLXBob25lLW51bWJlcicsXG4gIElOVkFMSURfUFJPVklERVJfSUQgPSAnaW52YWxpZC1wcm92aWRlci1pZCcsXG4gIElOVkFMSURfUkVDSVBJRU5UX0VNQUlMID0gJ2ludmFsaWQtcmVjaXBpZW50LWVtYWlsJyxcbiAgSU5WQUxJRF9TRU5ERVIgPSAnaW52YWxpZC1zZW5kZXInLFxuICBJTlZBTElEX1NFU1NJT05fSU5GTyA9ICdpbnZhbGlkLXZlcmlmaWNhdGlvbi1pZCcsXG4gIElOVkFMSURfVEVOQU5UX0lEID0gJ2ludmFsaWQtdGVuYW50LWlkJyxcbiAgTE9HSU5fQkxPQ0tFRCA9ICdsb2dpbi1ibG9ja2VkJyxcbiAgTUZBX0lORk9fTk9UX0ZPVU5EID0gJ211bHRpLWZhY3Rvci1pbmZvLW5vdC1mb3VuZCcsXG4gIE1GQV9SRVFVSVJFRCA9ICdtdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZCcsXG4gIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgPSAnbWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lJyxcbiAgTUlTU0lOR19BUFBfQ1JFREVOVElBTCA9ICdtaXNzaW5nLWFwcC1jcmVkZW50aWFsJyxcbiAgTUlTU0lOR19BVVRIX0RPTUFJTiA9ICdhdXRoLWRvbWFpbi1jb25maWctcmVxdWlyZWQnLFxuICBNSVNTSU5HX0NPREUgPSAnbWlzc2luZy12ZXJpZmljYXRpb24tY29kZScsXG4gIE1JU1NJTkdfQ09OVElOVUVfVVJJID0gJ21pc3NpbmctY29udGludWUtdXJpJyxcbiAgTUlTU0lOR19JRlJBTUVfU1RBUlQgPSAnbWlzc2luZy1pZnJhbWUtc3RhcnQnLFxuICBNSVNTSU5HX0lPU19CVU5ETEVfSUQgPSAnbWlzc2luZy1pb3MtYnVuZGxlLWlkJyxcbiAgTUlTU0lOR19PUl9JTlZBTElEX05PTkNFID0gJ21pc3Npbmctb3ItaW52YWxpZC1ub25jZScsXG4gIE1JU1NJTkdfTUZBX0lORk8gPSAnbWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mbycsXG4gIE1JU1NJTkdfTUZBX1NFU1NJT04gPSAnbWlzc2luZy1tdWx0aS1mYWN0b3Itc2Vzc2lvbicsXG4gIE1JU1NJTkdfUEhPTkVfTlVNQkVSID0gJ21pc3NpbmctcGhvbmUtbnVtYmVyJyxcbiAgTUlTU0lOR19QQVNTV09SRCA9ICdtaXNzaW5nLXBhc3N3b3JkJyxcbiAgTUlTU0lOR19TRVNTSU9OX0lORk8gPSAnbWlzc2luZy12ZXJpZmljYXRpb24taWQnLFxuICBNT0RVTEVfREVTVFJPWUVEID0gJ2FwcC1kZWxldGVkJyxcbiAgTkVFRF9DT05GSVJNQVRJT04gPSAnYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbCcsXG4gIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgPSAnbmV0d29yay1yZXF1ZXN0LWZhaWxlZCcsXG4gIE5VTExfVVNFUiA9ICdudWxsLXVzZXInLFxuICBOT19BVVRIX0VWRU5UID0gJ25vLWF1dGgtZXZlbnQnLFxuICBOT19TVUNIX1BST1ZJREVSID0gJ25vLXN1Y2gtcHJvdmlkZXInLFxuICBPUEVSQVRJT05fTk9UX0FMTE9XRUQgPSAnb3BlcmF0aW9uLW5vdC1hbGxvd2VkJyxcbiAgT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgPSAnb3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudCcsXG4gIFBPUFVQX0JMT0NLRUQgPSAncG9wdXAtYmxvY2tlZCcsXG4gIFBPUFVQX0NMT1NFRF9CWV9VU0VSID0gJ3BvcHVwLWNsb3NlZC1ieS11c2VyJyxcbiAgUFJPVklERVJfQUxSRUFEWV9MSU5LRUQgPSAncHJvdmlkZXItYWxyZWFkeS1saW5rZWQnLFxuICBRVU9UQV9FWENFRURFRCA9ICdxdW90YS1leGNlZWRlZCcsXG4gIFJFRElSRUNUX0NBTkNFTExFRF9CWV9VU0VSID0gJ3JlZGlyZWN0LWNhbmNlbGxlZC1ieS11c2VyJyxcbiAgUkVESVJFQ1RfT1BFUkFUSU9OX1BFTkRJTkcgPSAncmVkaXJlY3Qtb3BlcmF0aW9uLXBlbmRpbmcnLFxuICBSRUpFQ1RFRF9DUkVERU5USUFMID0gJ3JlamVjdGVkLWNyZWRlbnRpYWwnLFxuICBTRUNPTkRfRkFDVE9SX0FMUkVBRFlfRU5ST0xMRUQgPSAnc2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZScsXG4gIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQgPSAnbWF4aW11bS1zZWNvbmQtZmFjdG9yLWNvdW50LWV4Y2VlZGVkJyxcbiAgVEVOQU5UX0lEX01JU01BVENIID0gJ3RlbmFudC1pZC1taXNtYXRjaCcsXG4gIFRJTUVPVVQgPSAndGltZW91dCcsXG4gIFRPS0VOX0VYUElSRUQgPSAndXNlci10b2tlbi1leHBpcmVkJyxcbiAgVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSID0gJ3Rvby1tYW55LXJlcXVlc3RzJyxcbiAgVU5BVVRIT1JJWkVEX0RPTUFJTiA9ICd1bmF1dGhvcml6ZWQtY29udGludWUtdXJpJyxcbiAgVU5TVVBQT1JURURfRklSU1RfRkFDVE9SID0gJ3Vuc3VwcG9ydGVkLWZpcnN0LWZhY3RvcicsXG4gIFVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFID0gJ3Vuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGUnLFxuICBVTlNVUFBPUlRFRF9URU5BTlRfT1BFUkFUSU9OID0gJ3Vuc3VwcG9ydGVkLXRlbmFudC1vcGVyYXRpb24nLFxuICBVTlZFUklGSUVEX0VNQUlMID0gJ3VudmVyaWZpZWQtZW1haWwnLFxuICBVU0VSX0NBTkNFTExFRCA9ICd1c2VyLWNhbmNlbGxlZCcsXG4gIFVTRVJfREVMRVRFRCA9ICd1c2VyLW5vdC1mb3VuZCcsXG4gIFVTRVJfRElTQUJMRUQgPSAndXNlci1kaXNhYmxlZCcsXG4gIFVTRVJfTUlTTUFUQ0ggPSAndXNlci1taXNtYXRjaCcsXG4gIFVTRVJfU0lHTkVEX09VVCA9ICd1c2VyLXNpZ25lZC1vdXQnLFxuICBXRUFLX1BBU1NXT1JEID0gJ3dlYWstcGFzc3dvcmQnLFxuICBXRUJfU1RPUkFHRV9VTlNVUFBPUlRFRCA9ICd3ZWItc3RvcmFnZS11bnN1cHBvcnRlZCcsXG4gIEFMUkVBRFlfSU5JVElBTElaRUQgPSAnYWxyZWFkeS1pbml0aWFsaXplZCcsXG4gIFJFQ0FQVENIQV9OT1RfRU5BQkxFRCA9ICdyZWNhcHRjaGEtbm90LWVuYWJsZWQnLFxuICBNSVNTSU5HX1JFQ0FQVENIQV9UT0tFTiA9ICdtaXNzaW5nLXJlY2FwdGNoYS10b2tlbicsXG4gIElOVkFMSURfUkVDQVBUQ0hBX1RPS0VOID0gJ2ludmFsaWQtcmVjYXB0Y2hhLXRva2VuJyxcbiAgSU5WQUxJRF9SRUNBUFRDSEFfQUNUSU9OID0gJ2ludmFsaWQtcmVjYXB0Y2hhLWFjdGlvbicsXG4gIE1JU1NJTkdfQ0xJRU5UX1RZUEUgPSAnbWlzc2luZy1jbGllbnQtdHlwZScsXG4gIE1JU1NJTkdfUkVDQVBUQ0hBX1ZFUlNJT04gPSAnbWlzc2luZy1yZWNhcHRjaGEtdmVyc2lvbicsXG4gIElOVkFMSURfUkVDQVBUQ0hBX1ZFUlNJT04gPSAnaW52YWxpZC1yZWNhcHRjaGEtdmVyc2lvbicsXG4gIElOVkFMSURfUkVRX1RZUEUgPSAnaW52YWxpZC1yZXEtdHlwZSdcbn1cblxuZnVuY3Rpb24gX2RlYnVnRXJyb3JNYXAoKTogRXJyb3JNYXA8QXV0aEVycm9yQ29kZT4ge1xuICByZXR1cm4ge1xuICAgIFtBdXRoRXJyb3JDb2RlLkFETUlOX09OTFlfT1BFUkFUSU9OXTpcbiAgICAgICdUaGlzIG9wZXJhdGlvbiBpcyByZXN0cmljdGVkIHRvIGFkbWluaXN0cmF0b3JzIG9ubHkuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUl06ICcnLFxuICAgIFtBdXRoRXJyb3JDb2RlLkFQUF9OT1RfQVVUSE9SSVpFRF06XG4gICAgICBcIlRoaXMgYXBwLCBpZGVudGlmaWVkIGJ5IHRoZSBkb21haW4gd2hlcmUgaXQncyBob3N0ZWQsIGlzIG5vdCBcIiArXG4gICAgICAnYXV0aG9yaXplZCB0byB1c2UgRmlyZWJhc2UgQXV0aGVudGljYXRpb24gd2l0aCB0aGUgcHJvdmlkZWQgQVBJIGtleS4gJyArXG4gICAgICAnUmV2aWV3IHlvdXIga2V5IGNvbmZpZ3VyYXRpb24gaW4gdGhlIEdvb2dsZSBBUEkgY29uc29sZS4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLkFQUF9OT1RfSU5TVEFMTEVEXTpcbiAgICAgICdUaGUgcmVxdWVzdGVkIG1vYmlsZSBhcHBsaWNhdGlvbiBjb3JyZXNwb25kaW5nIHRvIHRoZSBpZGVudGlmaWVyICgnICtcbiAgICAgICdBbmRyb2lkIHBhY2thZ2UgbmFtZSBvciBpT1MgYnVuZGxlIElEKSBwcm92aWRlZCBpcyBub3QgaW5zdGFsbGVkIG9uICcgK1xuICAgICAgJ3RoaXMgZGV2aWNlLicsXG4gICAgW0F1dGhFcnJvckNvZGUuQ0FQVENIQV9DSEVDS19GQUlMRURdOlxuICAgICAgJ1RoZSByZUNBUFRDSEEgcmVzcG9uc2UgdG9rZW4gcHJvdmlkZWQgaXMgZWl0aGVyIGludmFsaWQsIGV4cGlyZWQsICcgK1xuICAgICAgJ2FscmVhZHkgdXNlZCBvciB0aGUgZG9tYWluIGFzc29jaWF0ZWQgd2l0aCBpdCBkb2VzIG5vdCBtYXRjaCB0aGUgbGlzdCAnICtcbiAgICAgICdvZiB3aGl0ZWxpc3RlZCBkb21haW5zLicsXG4gICAgW0F1dGhFcnJvckNvZGUuQ09ERV9FWFBJUkVEXTpcbiAgICAgICdUaGUgU01TIGNvZGUgaGFzIGV4cGlyZWQuIFBsZWFzZSByZS1zZW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0byB0cnkgJyArXG4gICAgICAnYWdhaW4uJyxcbiAgICBbQXV0aEVycm9yQ29kZS5DT1JET1ZBX05PVF9SRUFEWV06ICdDb3Jkb3ZhIGZyYW1ld29yayBpcyBub3QgcmVhZHkuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5DT1JTX1VOU1VQUE9SVEVEXTogJ1RoaXMgYnJvd3NlciBpcyBub3Qgc3VwcG9ydGVkLicsXG4gICAgW0F1dGhFcnJvckNvZGUuQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRV06XG4gICAgICAnVGhpcyBjcmVkZW50aWFsIGlzIGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIGEgZGlmZmVyZW50IHVzZXIgYWNjb3VudC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLkNSRURFTlRJQUxfTUlTTUFUQ0hdOlxuICAgICAgJ1RoZSBjdXN0b20gdG9rZW4gY29ycmVzcG9uZHMgdG8gYSBkaWZmZXJlbnQgYXVkaWVuY2UuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5DUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU5dOlxuICAgICAgJ1RoaXMgb3BlcmF0aW9uIGlzIHNlbnNpdGl2ZSBhbmQgcmVxdWlyZXMgcmVjZW50IGF1dGhlbnRpY2F0aW9uLiBMb2cgaW4gJyArXG4gICAgICAnYWdhaW4gYmVmb3JlIHJldHJ5aW5nIHRoaXMgcmVxdWVzdC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLkRFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSF06XG4gICAgICAnQW5vdGhlciBGaXJlYmFzZSBTREsgd2FzIGluaXRpYWxpemVkIGFuZCBpcyB0cnlpbmcgdG8gdXNlIEF1dGggYmVmb3JlIEF1dGggaXMgJyArXG4gICAgICAnaW5pdGlhbGl6ZWQuIFBsZWFzZSBiZSBzdXJlIHRvIGNhbGwgYGluaXRpYWxpemVBdXRoYCBvciBgZ2V0QXV0aGAgYmVmb3JlICcgK1xuICAgICAgJ3N0YXJ0aW5nIGFueSBvdGhlciBGaXJlYmFzZSBTREsuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5EWU5BTUlDX0xJTktfTk9UX0FDVElWQVRFRF06XG4gICAgICAnUGxlYXNlIGFjdGl2YXRlIER5bmFtaWMgTGlua3MgaW4gdGhlIEZpcmViYXNlIENvbnNvbGUgYW5kIGFncmVlIHRvIHRoZSB0ZXJtcyBhbmQgJyArXG4gICAgICAnY29uZGl0aW9ucy4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLkVNQUlMX0NIQU5HRV9ORUVEU19WRVJJRklDQVRJT05dOlxuICAgICAgJ011bHRpLWZhY3RvciB1c2VycyBtdXN0IGFsd2F5cyBoYXZlIGEgdmVyaWZpZWQgZW1haWwuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5FTUFJTF9FWElTVFNdOlxuICAgICAgJ1RoZSBlbWFpbCBhZGRyZXNzIGlzIGFscmVhZHkgaW4gdXNlIGJ5IGFub3RoZXIgYWNjb3VudC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLkVNVUxBVE9SX0NPTkZJR19GQUlMRURdOlxuICAgICAgJ0F1dGggaW5zdGFuY2UgaGFzIGFscmVhZHkgYmVlbiB1c2VkIHRvIG1ha2UgYSBuZXR3b3JrIGNhbGwuIEF1dGggY2FuICcgK1xuICAgICAgJ25vIGxvbmdlciBiZSBjb25maWd1cmVkIHRvIHVzZSB0aGUgZW11bGF0b3IuIFRyeSBjYWxsaW5nICcgK1xuICAgICAgJ1wiY29ubmVjdEF1dGhFbXVsYXRvcigpXCIgc29vbmVyLicsXG4gICAgW0F1dGhFcnJvckNvZGUuRVhQSVJFRF9PT0JfQ09ERV06ICdUaGUgYWN0aW9uIGNvZGUgaGFzIGV4cGlyZWQuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5FWFBJUkVEX1BPUFVQX1JFUVVFU1RdOlxuICAgICAgJ1RoaXMgb3BlcmF0aW9uIGhhcyBiZWVuIGNhbmNlbGxlZCBkdWUgdG8gYW5vdGhlciBjb25mbGljdGluZyBwb3B1cCBiZWluZyBvcGVuZWQuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUl06ICdBbiBpbnRlcm5hbCBBdXRoRXJyb3IgaGFzIG9jY3VycmVkLicsXG4gICAgW0F1dGhFcnJvckNvZGUuSU5WQUxJRF9BUFBfQ1JFREVOVElBTF06XG4gICAgICAnVGhlIHBob25lIHZlcmlmaWNhdGlvbiByZXF1ZXN0IGNvbnRhaW5zIGFuIGludmFsaWQgYXBwbGljYXRpb24gdmVyaWZpZXIuJyArXG4gICAgICAnIFRoZSByZUNBUFRDSEEgdG9rZW4gcmVzcG9uc2UgaXMgZWl0aGVyIGludmFsaWQgb3IgZXhwaXJlZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLklOVkFMSURfQVBQX0lEXTpcbiAgICAgICdUaGUgbW9iaWxlIGFwcCBpZGVudGlmaWVyIGlzIG5vdCByZWdpc3RlZCBmb3IgdGhlIGN1cnJlbnQgcHJvamVjdC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLklOVkFMSURfQVVUSF06XG4gICAgICBcIlRoaXMgdXNlcidzIGNyZWRlbnRpYWwgaXNuJ3QgdmFsaWQgZm9yIHRoaXMgcHJvamVjdC4gVGhpcyBjYW4gaGFwcGVuIFwiICtcbiAgICAgIFwiaWYgdGhlIHVzZXIncyB0b2tlbiBoYXMgYmVlbiB0YW1wZXJlZCB3aXRoLCBvciBpZiB0aGUgdXNlciBpc24ndCBmb3IgXCIgK1xuICAgICAgJ3RoZSBwcm9qZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGlzIEFQSSBrZXkuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5JTlZBTElEX0FVVEhfRVZFTlRdOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLklOVkFMSURfQ09ERV06XG4gICAgICAnVGhlIFNNUyB2ZXJpZmljYXRpb24gY29kZSB1c2VkIHRvIGNyZWF0ZSB0aGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIGlzICcgK1xuICAgICAgJ2ludmFsaWQuIFBsZWFzZSByZXNlbmQgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHNtcyBhbmQgYmUgc3VyZSB0byB1c2UgdGhlICcgK1xuICAgICAgJ3ZlcmlmaWNhdGlvbiBjb2RlIHByb3ZpZGVkIGJ5IHRoZSB1c2VyLicsXG4gICAgW0F1dGhFcnJvckNvZGUuSU5WQUxJRF9DT05USU5VRV9VUkldOlxuICAgICAgJ1RoZSBjb250aW51ZSBVUkwgcHJvdmlkZWQgaW4gdGhlIHJlcXVlc3QgaXMgaW52YWxpZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLklOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OXTpcbiAgICAgICdUaGUgZm9sbG93aW5nIENvcmRvdmEgcGx1Z2lucyBtdXN0IGJlIGluc3RhbGxlZCB0byBlbmFibGUgT0F1dGggc2lnbi1pbjogJyArXG4gICAgICAnY29yZG92YS1wbHVnaW4tYnVpbGRpbmZvLCBjb3Jkb3ZhLXVuaXZlcnNhbC1saW5rcy1wbHVnaW4sICcgK1xuICAgICAgJ2NvcmRvdmEtcGx1Z2luLWJyb3dzZXJ0YWIsIGNvcmRvdmEtcGx1Z2luLWluYXBwYnJvd3NlciBhbmQgJyArXG4gICAgICAnY29yZG92YS1wbHVnaW4tY3VzdG9tdXJsc2NoZW1lLicsXG4gICAgW0F1dGhFcnJvckNvZGUuSU5WQUxJRF9DVVNUT01fVE9LRU5dOlxuICAgICAgJ1RoZSBjdXN0b20gdG9rZW4gZm9ybWF0IGlzIGluY29ycmVjdC4gUGxlYXNlIGNoZWNrIHRoZSBkb2N1bWVudGF0aW9uLicsXG4gICAgW0F1dGhFcnJvckNvZGUuSU5WQUxJRF9EWU5BTUlDX0xJTktfRE9NQUlOXTpcbiAgICAgICdUaGUgcHJvdmlkZWQgZHluYW1pYyBsaW5rIGRvbWFpbiBpcyBub3QgY29uZmlndXJlZCBvciBhdXRob3JpemVkIGZvciB0aGUgY3VycmVudCBwcm9qZWN0LicsXG4gICAgW0F1dGhFcnJvckNvZGUuSU5WQUxJRF9FTUFJTF06ICdUaGUgZW1haWwgYWRkcmVzcyBpcyBiYWRseSBmb3JtYXR0ZWQuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5JTlZBTElEX0VNVUxBVE9SX1NDSEVNRV06XG4gICAgICAnRW11bGF0b3IgVVJMIG11c3Qgc3RhcnQgd2l0aCBhIHZhbGlkIHNjaGVtZSAoaHR0cDovLyBvciBodHRwczovLykuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5JTlZBTElEX0FQSV9LRVldOlxuICAgICAgJ1lvdXIgQVBJIGtleSBpcyBpbnZhbGlkLCBwbGVhc2UgY2hlY2sgeW91IGhhdmUgY29waWVkIGl0IGNvcnJlY3RseS4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLklOVkFMSURfQ0VSVF9IQVNIXTpcbiAgICAgICdUaGUgU0hBLTEgY2VydGlmaWNhdGUgaGFzaCBwcm92aWRlZCBpcyBpbnZhbGlkLicsXG4gICAgW0F1dGhFcnJvckNvZGUuSU5WQUxJRF9JRFBfUkVTUE9OU0VdOlxuICAgICAgJ1RoZSBzdXBwbGllZCBhdXRoIGNyZWRlbnRpYWwgaXMgbWFsZm9ybWVkIG9yIGhhcyBleHBpcmVkLicsXG4gICAgW0F1dGhFcnJvckNvZGUuSU5WQUxJRF9NRVNTQUdFX1BBWUxPQURdOlxuICAgICAgJ1RoZSBlbWFpbCB0ZW1wbGF0ZSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgYWN0aW9uIGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycyBpbiBpdHMgbWVzc2FnZS4gJyArXG4gICAgICAnUGxlYXNlIGZpeCBieSBnb2luZyB0byB0aGUgQXV0aCBlbWFpbCB0ZW1wbGF0ZXMgc2VjdGlvbiBpbiB0aGUgRmlyZWJhc2UgQ29uc29sZS4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLklOVkFMSURfTUZBX1NFU1NJT05dOlxuICAgICAgJ1RoZSByZXF1ZXN0IGRvZXMgbm90IGNvbnRhaW4gYSB2YWxpZCBwcm9vZiBvZiBmaXJzdCBmYWN0b3Igc3VjY2Vzc2Z1bCBzaWduLWluLicsXG4gICAgW0F1dGhFcnJvckNvZGUuSU5WQUxJRF9PQVVUSF9QUk9WSURFUl06XG4gICAgICAnRW1haWxBdXRoUHJvdmlkZXIgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBvcGVyYXRpb24uIFRoaXMgb3BlcmF0aW9uICcgK1xuICAgICAgJ29ubHkgc3VwcG9ydHMgT0F1dGggcHJvdmlkZXJzLicsXG4gICAgW0F1dGhFcnJvckNvZGUuSU5WQUxJRF9PQVVUSF9DTElFTlRfSURdOlxuICAgICAgJ1RoZSBPQXV0aCBjbGllbnQgSUQgcHJvdmlkZWQgaXMgZWl0aGVyIGludmFsaWQgb3IgZG9lcyBub3QgbWF0Y2ggdGhlICcgK1xuICAgICAgJ3NwZWNpZmllZCBBUEkga2V5LicsXG4gICAgW0F1dGhFcnJvckNvZGUuSU5WQUxJRF9PUklHSU5dOlxuICAgICAgJ1RoaXMgZG9tYWluIGlzIG5vdCBhdXRob3JpemVkIGZvciBPQXV0aCBvcGVyYXRpb25zIGZvciB5b3VyIEZpcmViYXNlICcgK1xuICAgICAgJ3Byb2plY3QuIEVkaXQgdGhlIGxpc3Qgb2YgYXV0aG9yaXplZCBkb21haW5zIGZyb20gdGhlIEZpcmViYXNlIGNvbnNvbGUuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5JTlZBTElEX09PQl9DT0RFXTpcbiAgICAgICdUaGUgYWN0aW9uIGNvZGUgaXMgaW52YWxpZC4gVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBjb2RlIGlzIG1hbGZvcm1lZCwgJyArXG4gICAgICAnZXhwaXJlZCwgb3IgaGFzIGFscmVhZHkgYmVlbiB1c2VkLicsXG4gICAgW0F1dGhFcnJvckNvZGUuSU5WQUxJRF9QQVNTV09SRF06XG4gICAgICAnVGhlIHBhc3N3b3JkIGlzIGludmFsaWQgb3IgdGhlIHVzZXIgZG9lcyBub3QgaGF2ZSBhIHBhc3N3b3JkLicsXG4gICAgW0F1dGhFcnJvckNvZGUuSU5WQUxJRF9QRVJTSVNURU5DRV06XG4gICAgICAnVGhlIHNwZWNpZmllZCBwZXJzaXN0ZW5jZSB0eXBlIGlzIGludmFsaWQuIEl0IGNhbiBvbmx5IGJlIGxvY2FsLCBzZXNzaW9uIG9yIG5vbmUuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5JTlZBTElEX1BIT05FX05VTUJFUl06XG4gICAgICAnVGhlIGZvcm1hdCBvZiB0aGUgcGhvbmUgbnVtYmVyIHByb3ZpZGVkIGlzIGluY29ycmVjdC4gUGxlYXNlIGVudGVyIHRoZSAnICtcbiAgICAgICdwaG9uZSBudW1iZXIgaW4gYSBmb3JtYXQgdGhhdCBjYW4gYmUgcGFyc2VkIGludG8gRS4xNjQgZm9ybWF0LiBFLjE2NCAnICtcbiAgICAgICdwaG9uZSBudW1iZXJzIGFyZSB3cml0dGVuIGluIHRoZSBmb3JtYXQgWytdW2NvdW50cnkgY29kZV1bc3Vic2NyaWJlciAnICtcbiAgICAgICdudW1iZXIgaW5jbHVkaW5nIGFyZWEgY29kZV0uJyxcbiAgICBbQXV0aEVycm9yQ29kZS5JTlZBTElEX1BST1ZJREVSX0lEXTpcbiAgICAgICdUaGUgc3BlY2lmaWVkIHByb3ZpZGVyIElEIGlzIGludmFsaWQuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5JTlZBTElEX1JFQ0lQSUVOVF9FTUFJTF06XG4gICAgICAnVGhlIGVtYWlsIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gZmFpbGVkIHRvIHNlbmQgYXMgdGhlIHByb3ZpZGVkICcgK1xuICAgICAgJ3JlY2lwaWVudCBlbWFpbCBhZGRyZXNzIGlzIGludmFsaWQuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5JTlZBTElEX1NFTkRFUl06XG4gICAgICAnVGhlIGVtYWlsIHRlbXBsYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gY29udGFpbnMgYW4gaW52YWxpZCBzZW5kZXIgZW1haWwgb3IgbmFtZS4gJyArXG4gICAgICAnUGxlYXNlIGZpeCBieSBnb2luZyB0byB0aGUgQXV0aCBlbWFpbCB0ZW1wbGF0ZXMgc2VjdGlvbiBpbiB0aGUgRmlyZWJhc2UgQ29uc29sZS4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLklOVkFMSURfU0VTU0lPTl9JTkZPXTpcbiAgICAgICdUaGUgdmVyaWZpY2F0aW9uIElEIHVzZWQgdG8gY3JlYXRlIHRoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgaXMgaW52YWxpZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLklOVkFMSURfVEVOQU5UX0lEXTpcbiAgICAgIFwiVGhlIEF1dGggaW5zdGFuY2UncyB0ZW5hbnQgSUQgaXMgaW52YWxpZC5cIixcbiAgICBbQXV0aEVycm9yQ29kZS5MT0dJTl9CTE9DS0VEXTpcbiAgICAgICdMb2dpbiBibG9ja2VkIGJ5IHVzZXItcHJvdmlkZWQgbWV0aG9kOiB7JG9yaWdpbmFsTWVzc2FnZX0nLFxuICAgIFtBdXRoRXJyb3JDb2RlLk1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUVdOlxuICAgICAgJ0FuIEFuZHJvaWQgUGFja2FnZSBOYW1lIG11c3QgYmUgcHJvdmlkZWQgaWYgdGhlIEFuZHJvaWQgQXBwIGlzIHJlcXVpcmVkIHRvIGJlIGluc3RhbGxlZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLk1JU1NJTkdfQVVUSF9ET01BSU5dOlxuICAgICAgJ0JlIHN1cmUgdG8gaW5jbHVkZSBhdXRoRG9tYWluIHdoZW4gY2FsbGluZyBmaXJlYmFzZS5pbml0aWFsaXplQXBwKCksICcgK1xuICAgICAgJ2J5IGZvbGxvd2luZyB0aGUgaW5zdHJ1Y3Rpb25zIGluIHRoZSBGaXJlYmFzZSBjb25zb2xlLicsXG4gICAgW0F1dGhFcnJvckNvZGUuTUlTU0lOR19BUFBfQ1JFREVOVElBTF06XG4gICAgICAnVGhlIHBob25lIHZlcmlmaWNhdGlvbiByZXF1ZXN0IGlzIG1pc3NpbmcgYW4gYXBwbGljYXRpb24gdmVyaWZpZXIgJyArXG4gICAgICAnYXNzZXJ0aW9uLiBBIHJlQ0FQVENIQSByZXNwb25zZSB0b2tlbiBuZWVkcyB0byBiZSBwcm92aWRlZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLk1JU1NJTkdfQ09ERV06XG4gICAgICAnVGhlIHBob25lIGF1dGggY3JlZGVudGlhbCB3YXMgY3JlYXRlZCB3aXRoIGFuIGVtcHR5IFNNUyB2ZXJpZmljYXRpb24gY29kZS4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLk1JU1NJTkdfQ09OVElOVUVfVVJJXTpcbiAgICAgICdBIGNvbnRpbnVlIFVSTCBtdXN0IGJlIHByb3ZpZGVkIGluIHRoZSByZXF1ZXN0LicsXG4gICAgW0F1dGhFcnJvckNvZGUuTUlTU0lOR19JRlJBTUVfU1RBUlRdOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLk1JU1NJTkdfSU9TX0JVTkRMRV9JRF06XG4gICAgICAnQW4gaU9TIEJ1bmRsZSBJRCBtdXN0IGJlIHByb3ZpZGVkIGlmIGFuIEFwcCBTdG9yZSBJRCBpcyBwcm92aWRlZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLk1JU1NJTkdfT1JfSU5WQUxJRF9OT05DRV06XG4gICAgICAnVGhlIHJlcXVlc3QgZG9lcyBub3QgY29udGFpbiBhIHZhbGlkIG5vbmNlLiBUaGlzIGNhbiBvY2N1ciBpZiB0aGUgJyArXG4gICAgICAnU0hBLTI1NiBoYXNoIG9mIHRoZSBwcm92aWRlZCByYXcgbm9uY2UgZG9lcyBub3QgbWF0Y2ggdGhlIGhhc2hlZCBub25jZSAnICtcbiAgICAgICdpbiB0aGUgSUQgdG9rZW4gcGF5bG9hZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLk1JU1NJTkdfUEFTU1dPUkRdOiAnQSBub24tZW1wdHkgcGFzc3dvcmQgbXVzdCBiZSBwcm92aWRlZCcsXG4gICAgW0F1dGhFcnJvckNvZGUuTUlTU0lOR19NRkFfSU5GT106XG4gICAgICAnTm8gc2Vjb25kIGZhY3RvciBpZGVudGlmaWVyIGlzIHByb3ZpZGVkLicsXG4gICAgW0F1dGhFcnJvckNvZGUuTUlTU0lOR19NRkFfU0VTU0lPTl06XG4gICAgICAnVGhlIHJlcXVlc3QgaXMgbWlzc2luZyBwcm9vZiBvZiBmaXJzdCBmYWN0b3Igc3VjY2Vzc2Z1bCBzaWduLWluLicsXG4gICAgW0F1dGhFcnJvckNvZGUuTUlTU0lOR19QSE9ORV9OVU1CRVJdOlxuICAgICAgJ1RvIHNlbmQgdmVyaWZpY2F0aW9uIGNvZGVzLCBwcm92aWRlIGEgcGhvbmUgbnVtYmVyIGZvciB0aGUgcmVjaXBpZW50LicsXG4gICAgW0F1dGhFcnJvckNvZGUuTUlTU0lOR19TRVNTSU9OX0lORk9dOlxuICAgICAgJ1RoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgd2FzIGNyZWF0ZWQgd2l0aCBhbiBlbXB0eSB2ZXJpZmljYXRpb24gSUQuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5NT0RVTEVfREVTVFJPWUVEXTpcbiAgICAgICdUaGlzIGluc3RhbmNlIG9mIEZpcmViYXNlQXBwIGhhcyBiZWVuIGRlbGV0ZWQuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5NRkFfSU5GT19OT1RfRk9VTkRdOlxuICAgICAgJ1RoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSBzZWNvbmQgZmFjdG9yIG1hdGNoaW5nIHRoZSBpZGVudGlmaWVyIHByb3ZpZGVkLicsXG4gICAgW0F1dGhFcnJvckNvZGUuTUZBX1JFUVVJUkVEXTpcbiAgICAgICdQcm9vZiBvZiBvd25lcnNoaXAgb2YgYSBzZWNvbmQgZmFjdG9yIGlzIHJlcXVpcmVkIHRvIGNvbXBsZXRlIHNpZ24taW4uJyxcbiAgICBbQXV0aEVycm9yQ29kZS5ORUVEX0NPTkZJUk1BVElPTl06XG4gICAgICAnQW4gYWNjb3VudCBhbHJlYWR5IGV4aXN0cyB3aXRoIHRoZSBzYW1lIGVtYWlsIGFkZHJlc3MgYnV0IGRpZmZlcmVudCAnICtcbiAgICAgICdzaWduLWluIGNyZWRlbnRpYWxzLiBTaWduIGluIHVzaW5nIGEgcHJvdmlkZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgJyArXG4gICAgICAnZW1haWwgYWRkcmVzcy4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLk5FVFdPUktfUkVRVUVTVF9GQUlMRURdOlxuICAgICAgJ0EgbmV0d29yayBBdXRoRXJyb3IgKHN1Y2ggYXMgdGltZW91dCwgaW50ZXJydXB0ZWQgY29ubmVjdGlvbiBvciB1bnJlYWNoYWJsZSBob3N0KSBoYXMgb2NjdXJyZWQuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5OT19BVVRIX0VWRU5UXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5OT19TVUNIX1BST1ZJREVSXTpcbiAgICAgICdVc2VyIHdhcyBub3QgbGlua2VkIHRvIGFuIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gcHJvdmlkZXIuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5OVUxMX1VTRVJdOlxuICAgICAgJ0EgbnVsbCB1c2VyIG9iamVjdCB3YXMgcHJvdmlkZWQgYXMgdGhlIGFyZ3VtZW50IGZvciBhbiBvcGVyYXRpb24gd2hpY2ggJyArXG4gICAgICAncmVxdWlyZXMgYSBub24tbnVsbCB1c2VyIG9iamVjdC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLk9QRVJBVElPTl9OT1RfQUxMT1dFRF06XG4gICAgICAnVGhlIGdpdmVuIHNpZ24taW4gcHJvdmlkZXIgaXMgZGlzYWJsZWQgZm9yIHRoaXMgRmlyZWJhc2UgcHJvamVjdC4gJyArXG4gICAgICAnRW5hYmxlIGl0IGluIHRoZSBGaXJlYmFzZSBjb25zb2xlLCB1bmRlciB0aGUgc2lnbi1pbiBtZXRob2QgdGFiIG9mIHRoZSAnICtcbiAgICAgICdBdXRoIHNlY3Rpb24uJyxcbiAgICBbQXV0aEVycm9yQ29kZS5PUEVSQVRJT05fTk9UX1NVUFBPUlRFRF06XG4gICAgICAnVGhpcyBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiB0aGUgZW52aXJvbm1lbnQgdGhpcyBhcHBsaWNhdGlvbiBpcyAnICtcbiAgICAgICdydW5uaW5nIG9uLiBcImxvY2F0aW9uLnByb3RvY29sXCIgbXVzdCBiZSBodHRwLCBodHRwcyBvciBjaHJvbWUtZXh0ZW5zaW9uJyArXG4gICAgICAnIGFuZCB3ZWIgc3RvcmFnZSBtdXN0IGJlIGVuYWJsZWQuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5QT1BVUF9CTE9DS0VEXTpcbiAgICAgICdVbmFibGUgdG8gZXN0YWJsaXNoIGEgY29ubmVjdGlvbiB3aXRoIHRoZSBwb3B1cC4gSXQgbWF5IGhhdmUgYmVlbiBibG9ja2VkIGJ5IHRoZSBicm93c2VyLicsXG4gICAgW0F1dGhFcnJvckNvZGUuUE9QVVBfQ0xPU0VEX0JZX1VTRVJdOlxuICAgICAgJ1RoZSBwb3B1cCBoYXMgYmVlbiBjbG9zZWQgYnkgdGhlIHVzZXIgYmVmb3JlIGZpbmFsaXppbmcgdGhlIG9wZXJhdGlvbi4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlBST1ZJREVSX0FMUkVBRFlfTElOS0VEXTpcbiAgICAgICdVc2VyIGNhbiBvbmx5IGJlIGxpbmtlZCB0byBvbmUgaWRlbnRpdHkgZm9yIHRoZSBnaXZlbiBwcm92aWRlci4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlFVT1RBX0VYQ0VFREVEXTpcbiAgICAgIFwiVGhlIHByb2plY3QncyBxdW90YSBmb3IgdGhpcyBvcGVyYXRpb24gaGFzIGJlZW4gZXhjZWVkZWQuXCIsXG4gICAgW0F1dGhFcnJvckNvZGUuUkVESVJFQ1RfQ0FOQ0VMTEVEX0JZX1VTRVJdOlxuICAgICAgJ1RoZSByZWRpcmVjdCBvcGVyYXRpb24gaGFzIGJlZW4gY2FuY2VsbGVkIGJ5IHRoZSB1c2VyIGJlZm9yZSBmaW5hbGl6aW5nLicsXG4gICAgW0F1dGhFcnJvckNvZGUuUkVESVJFQ1RfT1BFUkFUSU9OX1BFTkRJTkddOlxuICAgICAgJ0EgcmVkaXJlY3Qgc2lnbi1pbiBvcGVyYXRpb24gaXMgYWxyZWFkeSBwZW5kaW5nLicsXG4gICAgW0F1dGhFcnJvckNvZGUuUkVKRUNURURfQ1JFREVOVElBTF06XG4gICAgICAnVGhlIHJlcXVlc3QgY29udGFpbnMgbWFsZm9ybWVkIG9yIG1pc21hdGNoaW5nIGNyZWRlbnRpYWxzLicsXG4gICAgW0F1dGhFcnJvckNvZGUuU0VDT05EX0ZBQ1RPUl9BTFJFQURZX0VOUk9MTEVEXTpcbiAgICAgICdUaGUgc2Vjb25kIGZhY3RvciBpcyBhbHJlYWR5IGVucm9sbGVkIG9uIHRoaXMgYWNjb3VudC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERURdOlxuICAgICAgJ1RoZSBtYXhpbXVtIGFsbG93ZWQgbnVtYmVyIG9mIHNlY29uZCBmYWN0b3JzIG9uIGEgdXNlciBoYXMgYmVlbiBleGNlZWRlZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlRFTkFOVF9JRF9NSVNNQVRDSF06XG4gICAgICBcIlRoZSBwcm92aWRlZCB0ZW5hbnQgSUQgZG9lcyBub3QgbWF0Y2ggdGhlIEF1dGggaW5zdGFuY2UncyB0ZW5hbnQgSURcIixcbiAgICBbQXV0aEVycm9yQ29kZS5USU1FT1VUXTogJ1RoZSBvcGVyYXRpb24gaGFzIHRpbWVkIG91dC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlRPS0VOX0VYUElSRURdOlxuICAgICAgXCJUaGUgdXNlcidzIGNyZWRlbnRpYWwgaXMgbm8gbG9uZ2VyIHZhbGlkLiBUaGUgdXNlciBtdXN0IHNpZ24gaW4gYWdhaW4uXCIsXG4gICAgW0F1dGhFcnJvckNvZGUuVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSXTpcbiAgICAgICdXZSBoYXZlIGJsb2NrZWQgYWxsIHJlcXVlc3RzIGZyb20gdGhpcyBkZXZpY2UgZHVlIHRvIHVudXN1YWwgYWN0aXZpdHkuICcgK1xuICAgICAgJ1RyeSBhZ2FpbiBsYXRlci4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlVOQVVUSE9SSVpFRF9ET01BSU5dOlxuICAgICAgJ1RoZSBkb21haW4gb2YgdGhlIGNvbnRpbnVlIFVSTCBpcyBub3Qgd2hpdGVsaXN0ZWQuICBQbGVhc2Ugd2hpdGVsaXN0ICcgK1xuICAgICAgJ3RoZSBkb21haW4gaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5VTlNVUFBPUlRFRF9GSVJTVF9GQUNUT1JdOlxuICAgICAgJ0Vucm9sbGluZyBhIHNlY29uZCBmYWN0b3Igb3Igc2lnbmluZyBpbiB3aXRoIGEgbXVsdGktZmFjdG9yIGFjY291bnQgcmVxdWlyZXMgc2lnbi1pbiB3aXRoIGEgc3VwcG9ydGVkIGZpcnN0IGZhY3Rvci4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFXTpcbiAgICAgICdUaGUgY3VycmVudCBlbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IHRoZSBzcGVjaWZpZWQgcGVyc2lzdGVuY2UgdHlwZS4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlVOU1VQUE9SVEVEX1RFTkFOVF9PUEVSQVRJT05dOlxuICAgICAgJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gYSBtdWx0aS10ZW5hbnQgY29udGV4dC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlVOVkVSSUZJRURfRU1BSUxdOlxuICAgICAgJ1RoZSBvcGVyYXRpb24gcmVxdWlyZXMgYSB2ZXJpZmllZCBlbWFpbC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlVTRVJfQ0FOQ0VMTEVEXTpcbiAgICAgICdUaGUgdXNlciBkaWQgbm90IGdyYW50IHlvdXIgYXBwbGljYXRpb24gdGhlIHBlcm1pc3Npb25zIGl0IHJlcXVlc3RlZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlVTRVJfREVMRVRFRF06XG4gICAgICAnVGhlcmUgaXMgbm8gdXNlciByZWNvcmQgY29ycmVzcG9uZGluZyB0byB0aGlzIGlkZW50aWZpZXIuIFRoZSB1c2VyIG1heSAnICtcbiAgICAgICdoYXZlIGJlZW4gZGVsZXRlZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlVTRVJfRElTQUJMRURdOlxuICAgICAgJ1RoZSB1c2VyIGFjY291bnQgaGFzIGJlZW4gZGlzYWJsZWQgYnkgYW4gYWRtaW5pc3RyYXRvci4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlVTRVJfTUlTTUFUQ0hdOlxuICAgICAgJ1RoZSBzdXBwbGllZCBjcmVkZW50aWFscyBkbyBub3QgY29ycmVzcG9uZCB0byB0aGUgcHJldmlvdXNseSBzaWduZWQgaW4gdXNlci4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlVTRVJfU0lHTkVEX09VVF06ICcnLFxuICAgIFtBdXRoRXJyb3JDb2RlLldFQUtfUEFTU1dPUkRdOlxuICAgICAgJ1RoZSBwYXNzd29yZCBtdXN0IGJlIDYgY2hhcmFjdGVycyBsb25nIG9yIG1vcmUuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5XRUJfU1RPUkFHRV9VTlNVUFBPUlRFRF06XG4gICAgICAnVGhpcyBicm93c2VyIGlzIG5vdCBzdXBwb3J0ZWQgb3IgM3JkIHBhcnR5IGNvb2tpZXMgYW5kIGRhdGEgbWF5IGJlIGRpc2FibGVkLicsXG4gICAgW0F1dGhFcnJvckNvZGUuQUxSRUFEWV9JTklUSUFMSVpFRF06XG4gICAgICAnaW5pdGlhbGl6ZUF1dGgoKSBoYXMgYWxyZWFkeSBiZWVuIGNhbGxlZCB3aXRoICcgK1xuICAgICAgJ2RpZmZlcmVudCBvcHRpb25zLiBUbyBhdm9pZCB0aGlzIGVycm9yLCBjYWxsIGluaXRpYWxpemVBdXRoKCkgd2l0aCB0aGUgJyArXG4gICAgICAnc2FtZSBvcHRpb25zIGFzIHdoZW4gaXQgd2FzIG9yaWdpbmFsbHkgY2FsbGVkLCBvciBjYWxsIGdldEF1dGgoKSB0byByZXR1cm4gdGhlJyArXG4gICAgICAnIGFscmVhZHkgaW5pdGlhbGl6ZWQgaW5zdGFuY2UuJyxcbiAgICBbQXV0aEVycm9yQ29kZS5NSVNTSU5HX1JFQ0FQVENIQV9UT0tFTl06XG4gICAgICAnVGhlIHJlQ0FQVENIQSB0b2tlbiBpcyBtaXNzaW5nIHdoZW4gc2VuZGluZyByZXF1ZXN0IHRvIHRoZSBiYWNrZW5kLicsXG4gICAgW0F1dGhFcnJvckNvZGUuSU5WQUxJRF9SRUNBUFRDSEFfVE9LRU5dOlxuICAgICAgJ1RoZSByZUNBUFRDSEEgdG9rZW4gaXMgaW52YWxpZCB3aGVuIHNlbmRpbmcgcmVxdWVzdCB0byB0aGUgYmFja2VuZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLklOVkFMSURfUkVDQVBUQ0hBX0FDVElPTl06XG4gICAgICAnVGhlIHJlQ0FQVENIQSBhY3Rpb24gaXMgaW52YWxpZCB3aGVuIHNlbmRpbmcgcmVxdWVzdCB0byB0aGUgYmFja2VuZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLlJFQ0FQVENIQV9OT1RfRU5BQkxFRF06XG4gICAgICAncmVDQVBUQ0hBIEVudGVycHJpc2UgaW50ZWdyYXRpb24gaXMgbm90IGVuYWJsZWQgZm9yIHRoaXMgcHJvamVjdC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLk1JU1NJTkdfQ0xJRU5UX1RZUEVdOlxuICAgICAgJ1RoZSByZUNBUFRDSEEgY2xpZW50IHR5cGUgaXMgbWlzc2luZyB3aGVuIHNlbmRpbmcgcmVxdWVzdCB0byB0aGUgYmFja2VuZC4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLk1JU1NJTkdfUkVDQVBUQ0hBX1ZFUlNJT05dOlxuICAgICAgJ1RoZSByZUNBUFRDSEEgdmVyc2lvbiBpcyBtaXNzaW5nIHdoZW4gc2VuZGluZyByZXF1ZXN0IHRvIHRoZSBiYWNrZW5kLicsXG4gICAgW0F1dGhFcnJvckNvZGUuSU5WQUxJRF9SRVFfVFlQRV06ICdJbnZhbGlkIHJlcXVlc3QgcGFyYW1ldGVycy4nLFxuICAgIFtBdXRoRXJyb3JDb2RlLklOVkFMSURfUkVDQVBUQ0hBX1ZFUlNJT05dOlxuICAgICAgJ1RoZSByZUNBUFRDSEEgdmVyc2lvbiBpcyBpbnZhbGlkIHdoZW4gc2VuZGluZyByZXF1ZXN0IHRvIHRoZSBiYWNrZW5kLidcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFcnJvck1hcFJldHJpZXZlciBleHRlbmRzIEF1dGhFcnJvck1hcCB7XG4gICgpOiBFcnJvck1hcDxBdXRoRXJyb3JDb2RlPjtcbn1cblxuZnVuY3Rpb24gX3Byb2RFcnJvck1hcCgpOiBFcnJvck1hcDxBdXRoRXJyb3JDb2RlPiB7XG4gIC8vIFdlIHdpbGwgaW5jbHVkZSB0aGlzIG9uZSBtZXNzYWdlIGluIHRoZSBwcm9kIGVycm9yIG1hcCBzaW5jZSBieSB0aGUgdmVyeVxuICAvLyBuYXR1cmUgb2YgdGhpcyBlcnJvciwgZGV2ZWxvcGVycyB3aWxsIG5ldmVyIGJlIGFibGUgdG8gc2VlIHRoZSBtZXNzYWdlXG4gIC8vIHVzaW5nIHRoZSBkZWJ1Z0Vycm9yTWFwICh3aGljaCBpcyBpbnN0YWxsZWQgZHVyaW5nIGF1dGggaW5pdGlhbGl6YXRpb24pLlxuICByZXR1cm4ge1xuICAgIFtBdXRoRXJyb3JDb2RlLkRFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSF06XG4gICAgICAnQW5vdGhlciBGaXJlYmFzZSBTREsgd2FzIGluaXRpYWxpemVkIGFuZCBpcyB0cnlpbmcgdG8gdXNlIEF1dGggYmVmb3JlIEF1dGggaXMgJyArXG4gICAgICAnaW5pdGlhbGl6ZWQuIFBsZWFzZSBiZSBzdXJlIHRvIGNhbGwgYGluaXRpYWxpemVBdXRoYCBvciBgZ2V0QXV0aGAgYmVmb3JlICcgK1xuICAgICAgJ3N0YXJ0aW5nIGFueSBvdGhlciBGaXJlYmFzZSBTREsuJ1xuICB9IGFzIEVycm9yTWFwPEF1dGhFcnJvckNvZGU+O1xufVxuXG4vKipcbiAqIEEgdmVyYm9zZSBlcnJvciBtYXAgd2l0aCBkZXRhaWxlZCBkZXNjcmlwdGlvbnMgZm9yIG1vc3QgZXJyb3IgY29kZXMuXG4gKlxuICogU2VlIGRpc2N1c3Npb24gYXQge0BsaW5rIEF1dGhFcnJvck1hcH1cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBkZWJ1Z0Vycm9yTWFwOiBBdXRoRXJyb3JNYXAgPSBfZGVidWdFcnJvck1hcDtcblxuLyoqXG4gKiBBIG1pbmltYWwgZXJyb3IgbWFwIHdpdGggYWxsIHZlcmJvc2UgZXJyb3IgbWVzc2FnZXMgc3RyaXBwZWQuXG4gKlxuICogU2VlIGRpc2N1c3Npb24gYXQge0BsaW5rIEF1dGhFcnJvck1hcH1cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBwcm9kRXJyb3JNYXA6IEF1dGhFcnJvck1hcCA9IF9wcm9kRXJyb3JNYXA7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTmFtZWRFcnJvclBhcmFtcyB7XG4gIGFwcE5hbWU6IEFwcE5hbWU7XG4gIGNyZWRlbnRpYWw/OiBBdXRoQ3JlZGVudGlhbDtcbiAgZW1haWw/OiBzdHJpbmc7XG4gIHBob25lTnVtYmVyPzogc3RyaW5nO1xuICB0ZW5hbnRJZD86IHN0cmluZztcbiAgdXNlcj86IFVzZXI7XG4gIF9zZXJ2ZXJSZXNwb25zZT86IG9iamVjdDtcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xudHlwZSBHZW5lcmljQXV0aEVycm9yUGFyYW1zID0ge1xuICBba2V5IGluIEV4Y2x1ZGU8XG4gICAgQXV0aEVycm9yQ29kZSxcbiAgICB8IEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1JcbiAgICB8IEF1dGhFcnJvckNvZGUuREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIXG4gICAgfCBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SXG4gICAgfCBBdXRoRXJyb3JDb2RlLk1GQV9SRVFVSVJFRFxuICAgIHwgQXV0aEVycm9yQ29kZS5OT19BVVRIX0VWRU5UXG4gICAgfCBBdXRoRXJyb3JDb2RlLk9QRVJBVElPTl9OT1RfU1VQUE9SVEVEXG4gID5dOiB7XG4gICAgYXBwTmFtZT86IEFwcE5hbWU7XG4gICAgZW1haWw/OiBzdHJpbmc7XG4gICAgcGhvbmVOdW1iZXI/OiBzdHJpbmc7XG4gICAgbWVzc2FnZT86IHN0cmluZztcbiAgfTtcbn07XG5cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aEVycm9yUGFyYW1zIGV4dGVuZHMgR2VuZXJpY0F1dGhFcnJvclBhcmFtcyB7XG4gIFtBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SXTogeyBhcHBOYW1lPzogQXBwTmFtZSB9O1xuICBbQXV0aEVycm9yQ29kZS5ERVBFTkRFTlRfU0RLX0lOSVRfQkVGT1JFX0FVVEhdOiB7IGFwcE5hbWU/OiBBcHBOYW1lIH07XG4gIFtBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SXTogeyBhcHBOYW1lPzogQXBwTmFtZSB9O1xuICBbQXV0aEVycm9yQ29kZS5MT0dJTl9CTE9DS0VEXToge1xuICAgIGFwcE5hbWU/OiBBcHBOYW1lO1xuICAgIG9yaWdpbmFsTWVzc2FnZT86IHN0cmluZztcbiAgfTtcbiAgW0F1dGhFcnJvckNvZGUuT1BFUkFUSU9OX05PVF9TVVBQT1JURURdOiB7IGFwcE5hbWU/OiBBcHBOYW1lIH07XG4gIFtBdXRoRXJyb3JDb2RlLk5PX0FVVEhfRVZFTlRdOiB7IGFwcE5hbWU/OiBBcHBOYW1lIH07XG4gIFtBdXRoRXJyb3JDb2RlLk1GQV9SRVFVSVJFRF06IHtcbiAgICBhcHBOYW1lOiBBcHBOYW1lO1xuICAgIF9zZXJ2ZXJSZXNwb25zZTogSWRUb2tlbk1mYVJlc3BvbnNlO1xuICB9O1xuICBbQXV0aEVycm9yQ29kZS5JTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTl06IHtcbiAgICBhcHBOYW1lOiBBcHBOYW1lO1xuICAgIG1pc3NpbmdQbHVnaW4/OiBzdHJpbmc7XG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5PFxuICBBdXRoRXJyb3JDb2RlLFxuICBBdXRoRXJyb3JQYXJhbXNcbj4oJ2F1dGgnLCAnRmlyZWJhc2UnLCBfcHJvZEVycm9yTWFwKCkpO1xuXG4vKipcbiAqIEEgbWFwIG9mIHBvdGVudGlhbCBgQXV0aGAgZXJyb3IgY29kZXMsIGZvciBlYXNpZXIgY29tcGFyaXNvbiB3aXRoIGVycm9yc1xuICogdGhyb3duIGJ5IHRoZSBTREsuXG4gKlxuICogQHJlbWFya3NcbiAqIE5vdGUgdGhhdCB5b3UgY2FuJ3QgdHJlZS1zaGFrZSBpbmRpdmlkdWFsIGtleXNcbiAqIGluIHRoZSBtYXAsIHNvIGJ5IHVzaW5nIHRoZSBtYXAgeW91IG1pZ2h0IHN1YnN0YW50aWFsbHkgaW5jcmVhc2UgeW91clxuICogYnVuZGxlIHNpemUuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgQVVUSF9FUlJPUl9DT0RFU19NQVBfRE9fTk9UX1VTRV9JTlRFUk5BTExZID0ge1xuICBBRE1JTl9PTkxZX09QRVJBVElPTjogJ2F1dGgvYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb24nLFxuICBBUkdVTUVOVF9FUlJPUjogJ2F1dGgvYXJndW1lbnQtZXJyb3InLFxuICBBUFBfTk9UX0FVVEhPUklaRUQ6ICdhdXRoL2FwcC1ub3QtYXV0aG9yaXplZCcsXG4gIEFQUF9OT1RfSU5TVEFMTEVEOiAnYXV0aC9hcHAtbm90LWluc3RhbGxlZCcsXG4gIENBUFRDSEFfQ0hFQ0tfRkFJTEVEOiAnYXV0aC9jYXB0Y2hhLWNoZWNrLWZhaWxlZCcsXG4gIENPREVfRVhQSVJFRDogJ2F1dGgvY29kZS1leHBpcmVkJyxcbiAgQ09SRE9WQV9OT1RfUkVBRFk6ICdhdXRoL2NvcmRvdmEtbm90LXJlYWR5JyxcbiAgQ09SU19VTlNVUFBPUlRFRDogJ2F1dGgvY29ycy11bnN1cHBvcnRlZCcsXG4gIENSRURFTlRJQUxfQUxSRUFEWV9JTl9VU0U6ICdhdXRoL2NyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2UnLFxuICBDUkVERU5USUFMX01JU01BVENIOiAnYXV0aC9jdXN0b20tdG9rZW4tbWlzbWF0Y2gnLFxuICBDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU46ICdhdXRoL3JlcXVpcmVzLXJlY2VudC1sb2dpbicsXG4gIERFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSDogJ2F1dGgvZGVwZW5kZW50LXNkay1pbml0aWFsaXplZC1iZWZvcmUtYXV0aCcsXG4gIERZTkFNSUNfTElOS19OT1RfQUNUSVZBVEVEOiAnYXV0aC9keW5hbWljLWxpbmstbm90LWFjdGl2YXRlZCcsXG4gIEVNQUlMX0NIQU5HRV9ORUVEU19WRVJJRklDQVRJT046ICdhdXRoL2VtYWlsLWNoYW5nZS1uZWVkcy12ZXJpZmljYXRpb24nLFxuICBFTUFJTF9FWElTVFM6ICdhdXRoL2VtYWlsLWFscmVhZHktaW4tdXNlJyxcbiAgRU1VTEFUT1JfQ09ORklHX0ZBSUxFRDogJ2F1dGgvZW11bGF0b3ItY29uZmlnLWZhaWxlZCcsXG4gIEVYUElSRURfT09CX0NPREU6ICdhdXRoL2V4cGlyZWQtYWN0aW9uLWNvZGUnLFxuICBFWFBJUkVEX1BPUFVQX1JFUVVFU1Q6ICdhdXRoL2NhbmNlbGxlZC1wb3B1cC1yZXF1ZXN0JyxcbiAgSU5URVJOQUxfRVJST1I6ICdhdXRoL2ludGVybmFsLWVycm9yJyxcbiAgSU5WQUxJRF9BUElfS0VZOiAnYXV0aC9pbnZhbGlkLWFwaS1rZXknLFxuICBJTlZBTElEX0FQUF9DUkVERU5USUFMOiAnYXV0aC9pbnZhbGlkLWFwcC1jcmVkZW50aWFsJyxcbiAgSU5WQUxJRF9BUFBfSUQ6ICdhdXRoL2ludmFsaWQtYXBwLWlkJyxcbiAgSU5WQUxJRF9BVVRIOiAnYXV0aC9pbnZhbGlkLXVzZXItdG9rZW4nLFxuICBJTlZBTElEX0FVVEhfRVZFTlQ6ICdhdXRoL2ludmFsaWQtYXV0aC1ldmVudCcsXG4gIElOVkFMSURfQ0VSVF9IQVNIOiAnYXV0aC9pbnZhbGlkLWNlcnQtaGFzaCcsXG4gIElOVkFMSURfQ09ERTogJ2F1dGgvaW52YWxpZC12ZXJpZmljYXRpb24tY29kZScsXG4gIElOVkFMSURfQ09OVElOVUVfVVJJOiAnYXV0aC9pbnZhbGlkLWNvbnRpbnVlLXVyaScsXG4gIElOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OOiAnYXV0aC9pbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvbicsXG4gIElOVkFMSURfQ1VTVE9NX1RPS0VOOiAnYXV0aC9pbnZhbGlkLWN1c3RvbS10b2tlbicsXG4gIElOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTjogJ2F1dGgvaW52YWxpZC1keW5hbWljLWxpbmstZG9tYWluJyxcbiAgSU5WQUxJRF9FTUFJTDogJ2F1dGgvaW52YWxpZC1lbWFpbCcsXG4gIElOVkFMSURfRU1VTEFUT1JfU0NIRU1FOiAnYXV0aC9pbnZhbGlkLWVtdWxhdG9yLXNjaGVtZScsXG4gIElOVkFMSURfSURQX1JFU1BPTlNFOiAnYXV0aC9pbnZhbGlkLWNyZWRlbnRpYWwnLFxuICBJTlZBTElEX01FU1NBR0VfUEFZTE9BRDogJ2F1dGgvaW52YWxpZC1tZXNzYWdlLXBheWxvYWQnLFxuICBJTlZBTElEX01GQV9TRVNTSU9OOiAnYXV0aC9pbnZhbGlkLW11bHRpLWZhY3Rvci1zZXNzaW9uJyxcbiAgSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQ6ICdhdXRoL2ludmFsaWQtb2F1dGgtY2xpZW50LWlkJyxcbiAgSU5WQUxJRF9PQVVUSF9QUk9WSURFUjogJ2F1dGgvaW52YWxpZC1vYXV0aC1wcm92aWRlcicsXG4gIElOVkFMSURfT09CX0NPREU6ICdhdXRoL2ludmFsaWQtYWN0aW9uLWNvZGUnLFxuICBJTlZBTElEX09SSUdJTjogJ2F1dGgvdW5hdXRob3JpemVkLWRvbWFpbicsXG4gIElOVkFMSURfUEFTU1dPUkQ6ICdhdXRoL3dyb25nLXBhc3N3b3JkJyxcbiAgSU5WQUxJRF9QRVJTSVNURU5DRTogJ2F1dGgvaW52YWxpZC1wZXJzaXN0ZW5jZS10eXBlJyxcbiAgSU5WQUxJRF9QSE9ORV9OVU1CRVI6ICdhdXRoL2ludmFsaWQtcGhvbmUtbnVtYmVyJyxcbiAgSU5WQUxJRF9QUk9WSURFUl9JRDogJ2F1dGgvaW52YWxpZC1wcm92aWRlci1pZCcsXG4gIElOVkFMSURfUkVDSVBJRU5UX0VNQUlMOiAnYXV0aC9pbnZhbGlkLXJlY2lwaWVudC1lbWFpbCcsXG4gIElOVkFMSURfU0VOREVSOiAnYXV0aC9pbnZhbGlkLXNlbmRlcicsXG4gIElOVkFMSURfU0VTU0lPTl9JTkZPOiAnYXV0aC9pbnZhbGlkLXZlcmlmaWNhdGlvbi1pZCcsXG4gIElOVkFMSURfVEVOQU5UX0lEOiAnYXV0aC9pbnZhbGlkLXRlbmFudC1pZCcsXG4gIE1GQV9JTkZPX05PVF9GT1VORDogJ2F1dGgvbXVsdGktZmFjdG9yLWluZm8tbm90LWZvdW5kJyxcbiAgTUZBX1JFUVVJUkVEOiAnYXV0aC9tdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZCcsXG4gIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUU6ICdhdXRoL21pc3NpbmctYW5kcm9pZC1wa2ctbmFtZScsXG4gIE1JU1NJTkdfQVBQX0NSRURFTlRJQUw6ICdhdXRoL21pc3NpbmctYXBwLWNyZWRlbnRpYWwnLFxuICBNSVNTSU5HX0FVVEhfRE9NQUlOOiAnYXV0aC9hdXRoLWRvbWFpbi1jb25maWctcmVxdWlyZWQnLFxuICBNSVNTSU5HX0NPREU6ICdhdXRoL21pc3NpbmctdmVyaWZpY2F0aW9uLWNvZGUnLFxuICBNSVNTSU5HX0NPTlRJTlVFX1VSSTogJ2F1dGgvbWlzc2luZy1jb250aW51ZS11cmknLFxuICBNSVNTSU5HX0lGUkFNRV9TVEFSVDogJ2F1dGgvbWlzc2luZy1pZnJhbWUtc3RhcnQnLFxuICBNSVNTSU5HX0lPU19CVU5ETEVfSUQ6ICdhdXRoL21pc3NpbmctaW9zLWJ1bmRsZS1pZCcsXG4gIE1JU1NJTkdfT1JfSU5WQUxJRF9OT05DRTogJ2F1dGgvbWlzc2luZy1vci1pbnZhbGlkLW5vbmNlJyxcbiAgTUlTU0lOR19NRkFfSU5GTzogJ2F1dGgvbWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mbycsXG4gIE1JU1NJTkdfTUZBX1NFU1NJT046ICdhdXRoL21pc3NpbmctbXVsdGktZmFjdG9yLXNlc3Npb24nLFxuICBNSVNTSU5HX1BIT05FX05VTUJFUjogJ2F1dGgvbWlzc2luZy1waG9uZS1udW1iZXInLFxuICBNSVNTSU5HX1NFU1NJT05fSU5GTzogJ2F1dGgvbWlzc2luZy12ZXJpZmljYXRpb24taWQnLFxuICBNT0RVTEVfREVTVFJPWUVEOiAnYXV0aC9hcHAtZGVsZXRlZCcsXG4gIE5FRURfQ09ORklSTUFUSU9OOiAnYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsJyxcbiAgTkVUV09SS19SRVFVRVNUX0ZBSUxFRDogJ2F1dGgvbmV0d29yay1yZXF1ZXN0LWZhaWxlZCcsXG4gIE5VTExfVVNFUjogJ2F1dGgvbnVsbC11c2VyJyxcbiAgTk9fQVVUSF9FVkVOVDogJ2F1dGgvbm8tYXV0aC1ldmVudCcsXG4gIE5PX1NVQ0hfUFJPVklERVI6ICdhdXRoL25vLXN1Y2gtcHJvdmlkZXInLFxuICBPUEVSQVRJT05fTk9UX0FMTE9XRUQ6ICdhdXRoL29wZXJhdGlvbi1ub3QtYWxsb3dlZCcsXG4gIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEOiAnYXV0aC9vcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50JyxcbiAgUE9QVVBfQkxPQ0tFRDogJ2F1dGgvcG9wdXAtYmxvY2tlZCcsXG4gIFBPUFVQX0NMT1NFRF9CWV9VU0VSOiAnYXV0aC9wb3B1cC1jbG9zZWQtYnktdXNlcicsXG4gIFBST1ZJREVSX0FMUkVBRFlfTElOS0VEOiAnYXV0aC9wcm92aWRlci1hbHJlYWR5LWxpbmtlZCcsXG4gIFFVT1RBX0VYQ0VFREVEOiAnYXV0aC9xdW90YS1leGNlZWRlZCcsXG4gIFJFRElSRUNUX0NBTkNFTExFRF9CWV9VU0VSOiAnYXV0aC9yZWRpcmVjdC1jYW5jZWxsZWQtYnktdXNlcicsXG4gIFJFRElSRUNUX09QRVJBVElPTl9QRU5ESU5HOiAnYXV0aC9yZWRpcmVjdC1vcGVyYXRpb24tcGVuZGluZycsXG4gIFJFSkVDVEVEX0NSRURFTlRJQUw6ICdhdXRoL3JlamVjdGVkLWNyZWRlbnRpYWwnLFxuICBTRUNPTkRfRkFDVE9SX0FMUkVBRFlfRU5ST0xMRUQ6ICdhdXRoL3NlY29uZC1mYWN0b3ItYWxyZWFkeS1pbi11c2UnLFxuICBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEOiAnYXV0aC9tYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWQnLFxuICBURU5BTlRfSURfTUlTTUFUQ0g6ICdhdXRoL3RlbmFudC1pZC1taXNtYXRjaCcsXG4gIFRJTUVPVVQ6ICdhdXRoL3RpbWVvdXQnLFxuICBUT0tFTl9FWFBJUkVEOiAnYXV0aC91c2VyLXRva2VuLWV4cGlyZWQnLFxuICBUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVI6ICdhdXRoL3Rvby1tYW55LXJlcXVlc3RzJyxcbiAgVU5BVVRIT1JJWkVEX0RPTUFJTjogJ2F1dGgvdW5hdXRob3JpemVkLWNvbnRpbnVlLXVyaScsXG4gIFVOU1VQUE9SVEVEX0ZJUlNUX0ZBQ1RPUjogJ2F1dGgvdW5zdXBwb3J0ZWQtZmlyc3QtZmFjdG9yJyxcbiAgVU5TVVBQT1JURURfUEVSU0lTVEVOQ0U6ICdhdXRoL3Vuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGUnLFxuICBVTlNVUFBPUlRFRF9URU5BTlRfT1BFUkFUSU9OOiAnYXV0aC91bnN1cHBvcnRlZC10ZW5hbnQtb3BlcmF0aW9uJyxcbiAgVU5WRVJJRklFRF9FTUFJTDogJ2F1dGgvdW52ZXJpZmllZC1lbWFpbCcsXG4gIFVTRVJfQ0FOQ0VMTEVEOiAnYXV0aC91c2VyLWNhbmNlbGxlZCcsXG4gIFVTRVJfREVMRVRFRDogJ2F1dGgvdXNlci1ub3QtZm91bmQnLFxuICBVU0VSX0RJU0FCTEVEOiAnYXV0aC91c2VyLWRpc2FibGVkJyxcbiAgVVNFUl9NSVNNQVRDSDogJ2F1dGgvdXNlci1taXNtYXRjaCcsXG4gIFVTRVJfU0lHTkVEX09VVDogJ2F1dGgvdXNlci1zaWduZWQtb3V0JyxcbiAgV0VBS19QQVNTV09SRDogJ2F1dGgvd2Vhay1wYXNzd29yZCcsXG4gIFdFQl9TVE9SQUdFX1VOU1VQUE9SVEVEOiAnYXV0aC93ZWItc3RvcmFnZS11bnN1cHBvcnRlZCcsXG4gIEFMUkVBRFlfSU5JVElBTElaRUQ6ICdhdXRoL2FscmVhZHktaW5pdGlhbGl6ZWQnLFxuICBSRUNBUFRDSEFfTk9UX0VOQUJMRUQ6ICdhdXRoL3JlY2FwdGNoYS1ub3QtZW5hYmxlZCcsXG4gIE1JU1NJTkdfUkVDQVBUQ0hBX1RPS0VOOiAnYXV0aC9taXNzaW5nLXJlY2FwdGNoYS10b2tlbicsXG4gIElOVkFMSURfUkVDQVBUQ0hBX1RPS0VOOiAnYXV0aC9pbnZhbGlkLXJlY2FwdGNoYS10b2tlbicsXG4gIElOVkFMSURfUkVDQVBUQ0hBX0FDVElPTjogJ2F1dGgvaW52YWxpZC1yZWNhcHRjaGEtYWN0aW9uJyxcbiAgTUlTU0lOR19DTElFTlRfVFlQRTogJ2F1dGgvbWlzc2luZy1jbGllbnQtdHlwZScsXG4gIE1JU1NJTkdfUkVDQVBUQ0hBX1ZFUlNJT046ICdhdXRoL21pc3NpbmctcmVjYXB0Y2hhLXZlcnNpb24nLFxuICBJTlZBTElEX1JFQ0FQVENIQV9WRVJTSU9OOiAnYXV0aC9pbnZhbGlkLXJlY2FwdGNoYS12ZXJzaW9uJyxcbiAgSU5WQUxJRF9SRVFfVFlQRTogJ2F1dGgvaW52YWxpZC1yZXEtdHlwZSdcbn0gYXMgY29uc3Q7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBMb2dnZXIsIExvZ0xldmVsIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBTREtfVkVSU0lPTiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuXG5leHBvcnQgeyBMb2dMZXZlbCB9O1xuXG5jb25zdCBsb2dDbGllbnQgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXV0aCcpO1xuXG4vLyBIZWxwZXIgbWV0aG9kcyBhcmUgbmVlZGVkIGJlY2F1c2UgdmFyaWFibGVzIGNhbid0IGJlIGV4cG9ydGVkIGFzIHJlYWQvd3JpdGVcbmV4cG9ydCBmdW5jdGlvbiBfZ2V0TG9nTGV2ZWwoKTogTG9nTGV2ZWwge1xuICByZXR1cm4gbG9nQ2xpZW50LmxvZ0xldmVsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX3NldExvZ0xldmVsKG5ld0xldmVsOiBMb2dMZXZlbCk6IHZvaWQge1xuICBsb2dDbGllbnQubG9nTGV2ZWwgPSBuZXdMZXZlbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9sb2dEZWJ1Zyhtc2c6IHN0cmluZywgLi4uYXJnczogc3RyaW5nW10pOiB2b2lkIHtcbiAgaWYgKGxvZ0NsaWVudC5sb2dMZXZlbCA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgIGxvZ0NsaWVudC5kZWJ1ZyhgQXV0aCAoJHtTREtfVkVSU0lPTn0pOiAke21zZ31gLCAuLi5hcmdzKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gX2xvZ1dhcm4obXNnOiBzdHJpbmcsIC4uLmFyZ3M6IHN0cmluZ1tdKTogdm9pZCB7XG4gIGlmIChsb2dDbGllbnQubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuV0FSTikge1xuICAgIGxvZ0NsaWVudC53YXJuKGBBdXRoICgke1NES19WRVJTSU9OfSk6ICR7bXNnfWAsIC4uLmFyZ3MpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfbG9nRXJyb3IobXNnOiBzdHJpbmcsIC4uLmFyZ3M6IHN0cmluZ1tdKTogdm9pZCB7XG4gIGlmIChsb2dDbGllbnQubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuRVJST1IpIHtcbiAgICBsb2dDbGllbnQuZXJyb3IoYEF1dGggKCR7U0RLX1ZFUlNJT059KTogJHttc2d9YCwgLi4uYXJncyk7XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEF1dGggfSBmcm9tICcuLi8uLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQXV0aEludGVybmFsIH0gZnJvbSAnLi4vLi4vbW9kZWwvYXV0aCc7XG5pbXBvcnQge1xuICBfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlksXG4gIEF1dGhFcnJvckNvZGUsXG4gIEF1dGhFcnJvclBhcmFtcyxcbiAgcHJvZEVycm9yTWFwLFxuICBFcnJvck1hcFJldHJpZXZlclxufSBmcm9tICcuLi9lcnJvcnMnO1xuaW1wb3J0IHsgX2xvZ0Vycm9yIH0gZnJvbSAnLi9sb2cnO1xuXG50eXBlIEF1dGhFcnJvckxpc3RQYXJhbXM8Sz4gPSBLIGV4dGVuZHMga2V5b2YgQXV0aEVycm9yUGFyYW1zXG4gID8gW0F1dGhFcnJvclBhcmFtc1tLXV1cbiAgOiBbXTtcbnR5cGUgTGVzc0FwcE5hbWU8SyBleHRlbmRzIEF1dGhFcnJvckNvZGU+ID0gT21pdDxBdXRoRXJyb3JQYXJhbXNbS10sICdhcHBOYW1lJz47XG5cbi8qKlxuICogVW5jb25kaXRpb25hbGx5IGZhaWxzLCB0aHJvd2luZyBhIGRldmVsb3BlciBmYWNpbmcgSU5URVJOQUxfRVJST1JcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgamF2YXNjcmlwdFxuICogZmFpbChhdXRoLCBBdXRoRXJyb3JDb2RlLk1GQV9SRVFVSVJFRCk7ICAvLyBFcnJvcjogdGhlIE1GQV9SRVFVSVJFRCBlcnJvciBuZWVkcyBtb3JlIHBhcmFtcyB0aGFuIGFwcE5hbWVcbiAqIGZhaWwoYXV0aCwgQXV0aEVycm9yQ29kZS5NRkFfUkVRVUlSRUQsIHtzZXJ2ZXJSZXNwb25zZX0pOyAgLy8gQ29tcGlsZXNcbiAqIGZhaWwoQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUik7ICAvLyBDb21waWxlczsgaW50ZXJuYWwgZXJyb3IgZG9lcyBub3QgbmVlZCBhcHBOYW1lXG4gKiBmYWlsKEF1dGhFcnJvckNvZGUuVVNFUl9ERUxFVEVEKTsgIC8vIEVycm9yOiBVU0VSX0RFTEVURUQgcmVxdWlyZXMgYXBwIG5hbWVcbiAqIGZhaWwoYXV0aCwgQXV0aEVycm9yQ29kZS5VU0VSX0RFTEVURUQpOyAgLy8gQ29tcGlsZXM7IFVTRVJfREVMRVRFRCBfb25seV8gbmVlZHMgYXBwIG5hbWVcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBhcHBOYW1lIEFwcCBuYW1lIGZvciB0YWdnaW5nIHRoZSBlcnJvclxuICogQHRocm93cyBGaXJlYmFzZUVycm9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfZmFpbDxLIGV4dGVuZHMgQXV0aEVycm9yQ29kZT4oXG4gIGNvZGU6IEssXG4gIC4uLmRhdGE6IHt9IGV4dGVuZHMgQXV0aEVycm9yUGFyYW1zW0tdXG4gICAgPyBbQXV0aEVycm9yUGFyYW1zW0tdP11cbiAgICA6IFtBdXRoRXJyb3JQYXJhbXNbS11dXG4pOiBuZXZlcjtcbmV4cG9ydCBmdW5jdGlvbiBfZmFpbDxLIGV4dGVuZHMgQXV0aEVycm9yQ29kZT4oXG4gIGF1dGg6IEF1dGgsXG4gIGNvZGU6IEssXG4gIC4uLmRhdGE6IHt9IGV4dGVuZHMgTGVzc0FwcE5hbWU8Sz4gPyBbTGVzc0FwcE5hbWU8Sz4/XSA6IFtMZXNzQXBwTmFtZTxLPl1cbik6IG5ldmVyO1xuZXhwb3J0IGZ1bmN0aW9uIF9mYWlsPEsgZXh0ZW5kcyBBdXRoRXJyb3JDb2RlPihcbiAgYXV0aE9yQ29kZTogQXV0aCB8IEssXG4gIC4uLnJlc3Q6IHVua25vd25bXVxuKTogbmV2ZXIge1xuICB0aHJvdyBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX2NyZWF0ZUVycm9yPEsgZXh0ZW5kcyBBdXRoRXJyb3JDb2RlPihcbiAgY29kZTogSyxcbiAgLi4uZGF0YToge30gZXh0ZW5kcyBBdXRoRXJyb3JQYXJhbXNbS11cbiAgICA/IFtBdXRoRXJyb3JQYXJhbXNbS10/XVxuICAgIDogW0F1dGhFcnJvclBhcmFtc1tLXV1cbik6IEZpcmViYXNlRXJyb3I7XG5leHBvcnQgZnVuY3Rpb24gX2NyZWF0ZUVycm9yPEsgZXh0ZW5kcyBBdXRoRXJyb3JDb2RlPihcbiAgYXV0aDogQXV0aCxcbiAgY29kZTogSyxcbiAgLi4uZGF0YToge30gZXh0ZW5kcyBMZXNzQXBwTmFtZTxLPiA/IFtMZXNzQXBwTmFtZTxLPj9dIDogW0xlc3NBcHBOYW1lPEs+XVxuKTogRmlyZWJhc2VFcnJvcjtcbmV4cG9ydCBmdW5jdGlvbiBfY3JlYXRlRXJyb3I8SyBleHRlbmRzIEF1dGhFcnJvckNvZGU+KFxuICBhdXRoT3JDb2RlOiBBdXRoIHwgSyxcbiAgLi4ucmVzdDogdW5rbm93bltdXG4pOiBGaXJlYmFzZUVycm9yIHtcbiAgcmV0dXJuIGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfZXJyb3JXaXRoQ3VzdG9tTWVzc2FnZShcbiAgYXV0aDogQXV0aCxcbiAgY29kZTogQXV0aEVycm9yQ29kZSxcbiAgbWVzc2FnZTogc3RyaW5nXG4pOiBGaXJlYmFzZUVycm9yIHtcbiAgY29uc3QgZXJyb3JNYXAgPSB7XG4gICAgLi4uKHByb2RFcnJvck1hcCBhcyBFcnJvck1hcFJldHJpZXZlcikoKSxcbiAgICBbY29kZV06IG1lc3NhZ2VcbiAgfTtcbiAgY29uc3QgZmFjdG9yeSA9IG5ldyBFcnJvckZhY3Rvcnk8QXV0aEVycm9yQ29kZSwgQXV0aEVycm9yUGFyYW1zPihcbiAgICAnYXV0aCcsXG4gICAgJ0ZpcmViYXNlJyxcbiAgICBlcnJvck1hcFxuICApO1xuICByZXR1cm4gZmFjdG9yeS5jcmVhdGUoY29kZSwge1xuICAgIGFwcE5hbWU6IGF1dGgubmFtZVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9hc3NlcnRJbnN0YW5jZU9mKFxuICBhdXRoOiBBdXRoLFxuICBvYmplY3Q6IG9iamVjdCxcbiAgaW5zdGFuY2U6IHVua25vd25cbik6IHZvaWQge1xuICBjb25zdCBjb25zdHJ1Y3Rvckluc3RhbmNlID0gaW5zdGFuY2UgYXMgeyBuZXcgKC4uLmFyZ3M6IHVua25vd25bXSk6IHVua25vd24gfTtcbiAgaWYgKCEob2JqZWN0IGluc3RhbmNlb2YgY29uc3RydWN0b3JJbnN0YW5jZSkpIHtcbiAgICBpZiAoY29uc3RydWN0b3JJbnN0YW5jZS5uYW1lICE9PSBvYmplY3QuY29uc3RydWN0b3IubmFtZSkge1xuICAgICAgX2ZhaWwoYXV0aCwgQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUik7XG4gICAgfVxuXG4gICAgdGhyb3cgX2Vycm9yV2l0aEN1c3RvbU1lc3NhZ2UoXG4gICAgICBhdXRoLFxuICAgICAgQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUixcbiAgICAgIGBUeXBlIG9mICR7b2JqZWN0LmNvbnN0cnVjdG9yLm5hbWV9IGRvZXMgbm90IG1hdGNoIGV4cGVjdGVkIGluc3RhbmNlLmAgK1xuICAgICAgICBgRGlkIHlvdSBwYXNzIGEgcmVmZXJlbmNlIGZyb20gYSBkaWZmZXJlbnQgQXV0aCBTREs/YFxuICAgICk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlRXJyb3JJbnRlcm5hbDxLIGV4dGVuZHMgQXV0aEVycm9yQ29kZT4oXG4gIGF1dGhPckNvZGU6IEF1dGggfCBLLFxuICAuLi5yZXN0OiB1bmtub3duW11cbik6IEZpcmViYXNlRXJyb3Ige1xuICBpZiAodHlwZW9mIGF1dGhPckNvZGUgIT09ICdzdHJpbmcnKSB7XG4gICAgY29uc3QgY29kZSA9IHJlc3RbMF0gYXMgSztcbiAgICBjb25zdCBmdWxsUGFyYW1zID0gWy4uLnJlc3Quc2xpY2UoMSldIGFzIEF1dGhFcnJvckxpc3RQYXJhbXM8Sz47XG4gICAgaWYgKGZ1bGxQYXJhbXNbMF0pIHtcbiAgICAgIGZ1bGxQYXJhbXNbMF0uYXBwTmFtZSA9IGF1dGhPckNvZGUubmFtZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKGF1dGhPckNvZGUgYXMgQXV0aEludGVybmFsKS5fZXJyb3JGYWN0b3J5LmNyZWF0ZShcbiAgICAgIGNvZGUsXG4gICAgICAuLi5mdWxsUGFyYW1zXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlkuY3JlYXRlKFxuICAgIGF1dGhPckNvZGUsXG4gICAgLi4uKHJlc3QgYXMgQXV0aEVycm9yTGlzdFBhcmFtczxLPilcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9hc3NlcnQ8SyBleHRlbmRzIEF1dGhFcnJvckNvZGU+KFxuICBhc3NlcnRpb246IHVua25vd24sXG4gIGNvZGU6IEssXG4gIC4uLmRhdGE6IHt9IGV4dGVuZHMgQXV0aEVycm9yUGFyYW1zW0tdXG4gICAgPyBbQXV0aEVycm9yUGFyYW1zW0tdP11cbiAgICA6IFtBdXRoRXJyb3JQYXJhbXNbS11dXG4pOiBhc3NlcnRzIGFzc2VydGlvbjtcbmV4cG9ydCBmdW5jdGlvbiBfYXNzZXJ0PEsgZXh0ZW5kcyBBdXRoRXJyb3JDb2RlPihcbiAgYXNzZXJ0aW9uOiB1bmtub3duLFxuICBhdXRoOiBBdXRoLFxuICBjb2RlOiBLLFxuICAuLi5kYXRhOiB7fSBleHRlbmRzIExlc3NBcHBOYW1lPEs+ID8gW0xlc3NBcHBOYW1lPEs+P10gOiBbTGVzc0FwcE5hbWU8Sz5dXG4pOiBhc3NlcnRzIGFzc2VydGlvbjtcbmV4cG9ydCBmdW5jdGlvbiBfYXNzZXJ0PEsgZXh0ZW5kcyBBdXRoRXJyb3JDb2RlPihcbiAgYXNzZXJ0aW9uOiB1bmtub3duLFxuICBhdXRoT3JDb2RlOiBBdXRoIHwgSyxcbiAgLi4ucmVzdDogdW5rbm93bltdXG4pOiBhc3NlcnRzIGFzc2VydGlvbiB7XG4gIGlmICghYXNzZXJ0aW9uKSB7XG4gICAgdGhyb3cgY3JlYXRlRXJyb3JJbnRlcm5hbChhdXRoT3JDb2RlLCAuLi5yZXN0KTtcbiAgfVxufVxuXG4vLyBXZSByZWFsbHkgZG8gd2FudCB0byBhY2NlcHQgbGl0ZXJhbGx5IGFueSBmdW5jdGlvbiB0eXBlIGhlcmVcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXG50eXBlIFR5cGVFeHBlY3RhdGlvbiA9IEZ1bmN0aW9uIHwgc3RyaW5nIHwgTWFwVHlwZTtcblxuaW50ZXJmYWNlIE1hcFR5cGUgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBUeXBlRXhwZWN0YXRpb24gfCBPcHRpb25hbD4ge31cblxuY2xhc3MgT3B0aW9uYWwge1xuICBjb25zdHJ1Y3RvcihyZWFkb25seSB0eXBlOiBUeXBlRXhwZWN0YXRpb24pIHt9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvcHQodHlwZTogVHlwZUV4cGVjdGF0aW9uKTogT3B0aW9uYWwge1xuICByZXR1cm4gbmV3IE9wdGlvbmFsKHR5cGUpO1xufVxuXG4vKipcbiAqIEFzc2VydHMgdGhlIHJ1bnRpbWUgdHlwZXMgb2YgYXJndW1lbnRzLiBUaGUgJ2V4cGVjdGVkJyBmaWVsZCBjYW4gYmUgb25lIG9mXG4gKiBhIGNsYXNzLCBhIHN0cmluZyAocmVwcmVzZW50aW5nIGEgXCJ0eXBlb2ZcIiBjYWxsKSwgb3IgYSByZWNvcmQgbWFwIG9mIG5hbWVcbiAqIHRvIHR5cGUuIEZ1cnRoZXJtb3JlLCB0aGUgb3B0KCkgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gbWFyayBhIGZpZWxkIGFzXG4gKiBvcHRpb25hbC4gRm9yIGV4YW1wbGU6XG4gKlxuICogZnVuY3Rpb24gZm9vKGF1dGg6IEF1dGgsIHByb2ZpbGU6IHtkaXNwbGF5TmFtZT86IHN0cmluZ30sIHVwZGF0ZSA9IGZhbHNlKSB7XG4gKiAgIGFzc2VydFR5cGVzKGFyZ3VtZW50cywgW0F1dGhJbXBsLCB7ZGlzcGxheU5hbWU6IG9wdCgnc3RyaW5nJyl9LCBvcHQoJ2Jvb2xlYW4nKV0pO1xuICogfVxuICpcbiAqIG9wdCgpIGNhbiBiZSB1c2VkIGZvciBhbnkgdHlwZTpcbiAqIGZ1bmN0aW9uIGZvbyhhdXRoPzogQXV0aCkge1xuICogICBhc3NlcnRUeXBlcyhhcmd1bWVudHMsIFtvcHQoQXV0aEltcGwpXSk7XG4gKiB9XG4gKlxuICogVGhlIHN0cmluZyB0eXBlcyBjYW4gYmUgb3InZCB0b2dldGhlciwgYW5kIHlvdSBjYW4gdXNlIFwibnVsbFwiIGFzIHdlbGwgKG5vdGVcbiAqIHRoYXQgdHlwZW9mIG51bGwgPT09ICdvYmplY3QnOyB0aGlzIGlzIGFuIGVkZ2UgY2FzZSkuIEZvciBleGFtcGxlOlxuICpcbiAqIGZ1bmN0aW9uIGZvbyhwcm9maWxlOiB7ZGlzcGxheU5hbWU/OiBzdHJpbmcgfCBudWxsfSkge1xuICogICBhc3NlcnRUeXBlcyhhcmd1bWVudHMsIFt7ZGlzcGxheU5hbWU6IG9wdCgnc3RyaW5nfG51bGwnKX1dKTtcbiAqIH1cbiAqXG4gKiBAcGFyYW0gYXJnc1xuICogQHBhcmFtIGV4cGVjdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRUeXBlcyhcbiAgYXJnczogT21pdDxJQXJndW1lbnRzLCAnY2FsbGVlJz4sXG4gIC4uLmV4cGVjdGVkOiBBcnJheTxUeXBlRXhwZWN0YXRpb24gfCBPcHRpb25hbD5cbik6IHZvaWQge1xuICBpZiAoYXJncy5sZW5ndGggPiBleHBlY3RlZC5sZW5ndGgpIHtcbiAgICBfZmFpbChBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SLCB7fSk7XG4gIH1cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGV4cGVjdGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGV4cGVjdCA9IGV4cGVjdGVkW2ldO1xuICAgIGNvbnN0IGFyZyA9IGFyZ3NbaV07XG5cbiAgICBpZiAoZXhwZWN0IGluc3RhbmNlb2YgT3B0aW9uYWwpIHtcbiAgICAgIC8vIElmIHRoZSBhcmcgaXMgdW5kZWZpbmVkLCB0aGVuIGl0IG1hdGNoZXMgXCJvcHRpb25hbFwiIGFuZCB3ZSBjYW4gbW92ZSB0b1xuICAgICAgLy8gdGhlIG5leHQgYXJnXG4gICAgICBpZiAodHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBleHBlY3QgPSBleHBlY3QudHlwZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGV4cGVjdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIEhhbmRsZSB0aGUgZWRnZSBjYXNlIGZvciBudWxsIGJlY2F1c2UgdHlwZW9mIG51bGwgPT09ICdvYmplY3QnXG4gICAgICBpZiAoZXhwZWN0LmluY2x1ZGVzKCdudWxsJykgJiYgYXJnID09PSBudWxsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXF1aXJlZCA9IGV4cGVjdC5zcGxpdCgnfCcpO1xuICAgICAgX2Fzc2VydChyZXF1aXJlZC5pbmNsdWRlcyh0eXBlb2YgYXJnKSwgQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiwge30pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cGVjdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNoZWNrIHJlY29yZCBhcmd1bWVudHNcbiAgICAgIGNvbnN0IHJlY29yZCA9IGFyZyBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgICAgIGNvbnN0IG1hcCA9IGV4cGVjdCBhcyBNYXBUeXBlO1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGV4cGVjdCk7XG5cbiAgICAgIGFzc2VydFR5cGVzKFxuICAgICAgICBrZXlzLm1hcChrID0+IHJlY29yZFtrXSksXG4gICAgICAgIC4uLmtleXMubWFwKGsgPT4gbWFwW2tdKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgX2Fzc2VydChhcmcgaW5zdGFuY2VvZiBleHBlY3QsIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IsIHt9KTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIGludGVybmFsIGVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXG4gKlxuICogQHBhcmFtIGZhaWx1cmUgdHlwZSBvZiBmYWlsdXJlIGVuY291bnRlcmVkXG4gKiBAdGhyb3dzIEVycm9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWJ1Z0ZhaWwoZmFpbHVyZTogc3RyaW5nKTogbmV2ZXIge1xuICAvLyBMb2cgdGhlIGZhaWx1cmUgaW4gYWRkaXRpb24gdG8gdGhyb3cgYW4gZXhjZXB0aW9uLCBqdXN0IGluIGNhc2UgdGhlXG4gIC8vIGV4Y2VwdGlvbiBpcyBzd2FsbG93ZWQuXG4gIGNvbnN0IG1lc3NhZ2UgPSBgSU5URVJOQUwgQVNTRVJUSU9OIEZBSUxFRDogYCArIGZhaWx1cmU7XG4gIF9sb2dFcnJvcihtZXNzYWdlKTtcblxuICAvLyBOT1RFOiBXZSBkb24ndCB1c2UgRmlyZWJhc2VFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXG4gIC8vIHRoYXQgY2Fubm90IGJlIGhhbmRsZWQgYnkgdGhlIHVzZXIuIChBbHNvIGl0IHdvdWxkIGNyZWF0ZSBhIGNpcmN1bGFyXG4gIC8vIGRlcGVuZGVuY3kgYmV0d2VlbiB0aGUgZXJyb3IgYW5kIGFzc2VydCBtb2R1bGVzIHdoaWNoIGRvZXNuJ3Qgd29yay4pXG4gIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIEBwYXJhbSBhc3NlcnRpb25cbiAqIEBwYXJhbSBtZXNzYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWJ1Z0Fzc2VydChcbiAgYXNzZXJ0aW9uOiB1bmtub3duLFxuICBtZXNzYWdlOiBzdHJpbmdcbik6IGFzc2VydHMgYXNzZXJ0aW9uIHtcbiAgaWYgKCFhc3NlcnRpb24pIHtcbiAgICBkZWJ1Z0ZhaWwobWVzc2FnZSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBfZ2V0Q3VycmVudFVybCgpOiBzdHJpbmcge1xuICByZXR1cm4gKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmLmxvY2F0aW9uPy5ocmVmKSB8fCAnJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9pc0h0dHBPckh0dHBzKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gX2dldEN1cnJlbnRTY2hlbWUoKSA9PT0gJ2h0dHA6JyB8fCBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaHR0cHM6Jztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9nZXRDdXJyZW50U2NoZW1lKCk6IHN0cmluZyB8IG51bGwge1xuICByZXR1cm4gKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmLmxvY2F0aW9uPy5wcm90b2NvbCkgfHwgbnVsbDtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGlzQnJvd3NlckV4dGVuc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IF9pc0h0dHBPckh0dHBzIH0gZnJvbSAnLi9sb2NhdGlvbic7XG5cbi8qKlxuICogRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGJyb3dzZXIgaXMgd29ya2luZyBvbmxpbmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9pc09ubGluZSgpOiBib29sZWFuIHtcbiAgaWYgKFxuICAgIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXG4gICAgbmF2aWdhdG9yICYmXG4gICAgJ29uTGluZScgaW4gbmF2aWdhdG9yICYmXG4gICAgdHlwZW9mIG5hdmlnYXRvci5vbkxpbmUgPT09ICdib29sZWFuJyAmJlxuICAgIC8vIEFwcGx5IG9ubHkgZm9yIHRyYWRpdGlvbmFsIHdlYiBhcHBzIGFuZCBDaHJvbWUgZXh0ZW5zaW9ucy5cbiAgICAvLyBUaGlzIGlzIGVzcGVjaWFsbHkgdHJ1ZSBmb3IgQ29yZG92YSBhcHBzIHdoaWNoIGhhdmUgdW5yZWxpYWJsZVxuICAgIC8vIG5hdmlnYXRvci5vbkxpbmUgYmVoYXZpb3IgdW5sZXNzIGNvcmRvdmEtcGx1Z2luLW5ldHdvcmstaW5mb3JtYXRpb24gaXNcbiAgICAvLyBpbnN0YWxsZWQgd2hpY2ggb3ZlcndyaXRlcyB0aGUgbmF0aXZlIG5hdmlnYXRvci5vbkxpbmUgdmFsdWUgYW5kXG4gICAgLy8gZGVmaW5lcyBuYXZpZ2F0b3IuY29ubmVjdGlvbi5cbiAgICAoX2lzSHR0cE9ySHR0cHMoKSB8fCBpc0Jyb3dzZXJFeHRlbnNpb24oKSB8fCAnY29ubmVjdGlvbicgaW4gbmF2aWdhdG9yKVxuICApIHtcbiAgICByZXR1cm4gbmF2aWdhdG9yLm9uTGluZTtcbiAgfVxuICAvLyBJZiB3ZSBjYW4ndCBkZXRlcm1pbmUgdGhlIHN0YXRlLCBhc3N1bWUgaXQgaXMgb25saW5lLlxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9nZXRVc2VyTGFuZ3VhZ2UoKTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IG5hdmlnYXRvckxhbmd1YWdlOiBOYXZpZ2F0b3JMYW5ndWFnZSA9IG5hdmlnYXRvcjtcbiAgcmV0dXJuIChcbiAgICAvLyBNb3N0IHJlbGlhYmxlLCBidXQgb25seSBzdXBwb3J0ZWQgaW4gQ2hyb21lL0ZpcmVmb3guXG4gICAgKG5hdmlnYXRvckxhbmd1YWdlLmxhbmd1YWdlcyAmJiBuYXZpZ2F0b3JMYW5ndWFnZS5sYW5ndWFnZXNbMF0pIHx8XG4gICAgLy8gU3VwcG9ydGVkIGluIG1vc3QgYnJvd3NlcnMsIGJ1dCByZXR1cm5zIHRoZSBsYW5ndWFnZSBvZiB0aGUgYnJvd3NlclxuICAgIC8vIFVJLCBub3QgdGhlIGxhbmd1YWdlIHNldCBpbiBicm93c2VyIHNldHRpbmdzLlxuICAgIG5hdmlnYXRvckxhbmd1YWdlLmxhbmd1YWdlIHx8XG4gICAgLy8gQ291bGRuJ3QgZGV0ZXJtaW5lIGxhbmd1YWdlLlxuICAgIG51bGxcbiAgKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGlzTW9iaWxlQ29yZG92YSwgaXNSZWFjdE5hdGl2ZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IF9pc09ubGluZSB9IGZyb20gJy4vbmF2aWdhdG9yJztcbmltcG9ydCB7IGRlYnVnQXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnQnO1xuXG5leHBvcnQgY29uc3QgZW51bSBEZWxheU1pbiB7XG4gIE9GRkxJTkUgPSA1MDAwXG59XG5cbi8qKlxuICogQSBzdHJ1Y3R1cmUgdG8gaGVscCBwaWNrIGJldHdlZW4gYSByYW5nZSBvZiBsb25nIGFuZCBzaG9ydCBkZWxheSBkdXJhdGlvbnNcbiAqIGRlcGVuZGluZyBvbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gSW4gZ2VuZXJhbCwgdGhlIGxvbmcgZGVsYXkgaXMgdXNlZCBmb3JcbiAqIG1vYmlsZSBlbnZpcm9ubWVudHMgd2hlcmVhcyBzaG9ydCBkZWxheXMgYXJlIHVzZWQgZm9yIGRlc2t0b3AgZW52aXJvbm1lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgRGVsYXkge1xuICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhlIG9mZmxpbmUgZGVsYXkgdGltZW91dCBpbiBtcy5cblxuICBwcml2YXRlIHJlYWRvbmx5IGlzTW9iaWxlOiBib29sZWFuO1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNob3J0RGVsYXk6IG51bWJlcixcbiAgICBwcml2YXRlIHJlYWRvbmx5IGxvbmdEZWxheTogbnVtYmVyXG4gICkge1xuICAgIC8vIEludGVybmFsIGVycm9yIHdoZW4gaW1wcm9wZXJseSBpbml0aWFsaXplZC5cbiAgICBkZWJ1Z0Fzc2VydChcbiAgICAgIGxvbmdEZWxheSA+IHNob3J0RGVsYXksXG4gICAgICAnU2hvcnQgZGVsYXkgc2hvdWxkIGJlIGxlc3MgdGhhbiBsb25nIGRlbGF5ISdcbiAgICApO1xuICAgIHRoaXMuaXNNb2JpbGUgPSBpc01vYmlsZUNvcmRvdmEoKSB8fCBpc1JlYWN0TmF0aXZlKCk7XG4gIH1cblxuICBnZXQoKTogbnVtYmVyIHtcbiAgICBpZiAoIV9pc09ubGluZSgpKSB7XG4gICAgICAvLyBQaWNrIHRoZSBzaG9ydGVyIHRpbWVvdXQuXG4gICAgICByZXR1cm4gTWF0aC5taW4oRGVsYXlNaW4uT0ZGTElORSwgdGhpcy5zaG9ydERlbGF5KTtcbiAgICB9XG4gICAgLy8gSWYgcnVubmluZyBpbiBhIG1vYmlsZSBlbnZpcm9ubWVudCwgcmV0dXJuIHRoZSBsb25nIGRlbGF5LCBvdGhlcndpc2VcbiAgICAvLyByZXR1cm4gdGhlIHNob3J0IGRlbGF5LlxuICAgIC8vIFRoaXMgY291bGQgYmUgaW1wcm92ZWQgaW4gdGhlIGZ1dHVyZSB0byBkeW5hbWljYWxseSBjaGFuZ2UgYmFzZWQgb24gb3RoZXJcbiAgICAvLyB2YXJpYWJsZXMgaW5zdGVhZCBvZiBqdXN0IHJlYWRpbmcgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuXG4gICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyB0aGlzLmxvbmdEZWxheSA6IHRoaXMuc2hvcnREZWxheTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29uZmlnSW50ZXJuYWwgfSBmcm9tICcuLi8uLi9tb2RlbC9hdXRoJztcbmltcG9ydCB7IGRlYnVnQXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnQnO1xuXG5leHBvcnQgZnVuY3Rpb24gX2VtdWxhdG9yVXJsKGNvbmZpZzogQ29uZmlnSW50ZXJuYWwsIHBhdGg/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBkZWJ1Z0Fzc2VydChjb25maWcuZW11bGF0b3IsICdFbXVsYXRvciBzaG91bGQgYWx3YXlzIGJlIHNldCBoZXJlJyk7XG4gIGNvbnN0IHsgdXJsIH0gPSBjb25maWcuZW11bGF0b3I7XG5cbiAgaWYgKCFwYXRoKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIHJldHVybiBgJHt1cmx9JHtwYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IHBhdGguc2xpY2UoMSkgOiBwYXRofWA7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBkZWJ1Z0ZhaWwgfSBmcm9tICcuL2Fzc2VydCc7XG5cbmV4cG9ydCBjbGFzcyBGZXRjaFByb3ZpZGVyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgZmV0Y2hJbXBsOiB0eXBlb2YgZmV0Y2ggfCBudWxsO1xuICBwcml2YXRlIHN0YXRpYyBoZWFkZXJzSW1wbDogdHlwZW9mIEhlYWRlcnMgfCBudWxsO1xuICBwcml2YXRlIHN0YXRpYyByZXNwb25zZUltcGw6IHR5cGVvZiBSZXNwb25zZSB8IG51bGw7XG5cbiAgc3RhdGljIGluaXRpYWxpemUoXG4gICAgZmV0Y2hJbXBsOiB0eXBlb2YgZmV0Y2gsXG4gICAgaGVhZGVyc0ltcGw/OiB0eXBlb2YgSGVhZGVycyxcbiAgICByZXNwb25zZUltcGw/OiB0eXBlb2YgUmVzcG9uc2VcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5mZXRjaEltcGwgPSBmZXRjaEltcGw7XG4gICAgaWYgKGhlYWRlcnNJbXBsKSB7XG4gICAgICB0aGlzLmhlYWRlcnNJbXBsID0gaGVhZGVyc0ltcGw7XG4gICAgfVxuICAgIGlmIChyZXNwb25zZUltcGwpIHtcbiAgICAgIHRoaXMucmVzcG9uc2VJbXBsID0gcmVzcG9uc2VJbXBsO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBmZXRjaCgpOiB0eXBlb2YgZmV0Y2gge1xuICAgIGlmICh0aGlzLmZldGNoSW1wbCkge1xuICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hJbXBsO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdmZXRjaCcgaW4gc2VsZikge1xuICAgICAgcmV0dXJuIHNlbGYuZmV0Y2g7XG4gICAgfVxuICAgIGRlYnVnRmFpbChcbiAgICAgICdDb3VsZCBub3QgZmluZCBmZXRjaCBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnXG4gICAgKTtcbiAgfVxuXG4gIHN0YXRpYyBoZWFkZXJzKCk6IHR5cGVvZiBIZWFkZXJzIHtcbiAgICBpZiAodGhpcy5oZWFkZXJzSW1wbCkge1xuICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyc0ltcGw7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ0hlYWRlcnMnIGluIHNlbGYpIHtcbiAgICAgIHJldHVybiBzZWxmLkhlYWRlcnM7XG4gICAgfVxuICAgIGRlYnVnRmFpbChcbiAgICAgICdDb3VsZCBub3QgZmluZCBIZWFkZXJzIGltcGxlbWVudGF0aW9uLCBtYWtlIHN1cmUgeW91IGNhbGwgRmV0Y2hQcm92aWRlci5pbml0aWFsaXplKCkgd2l0aCBhbiBhcHByb3ByaWF0ZSBwb2x5ZmlsbCdcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIHJlc3BvbnNlKCk6IHR5cGVvZiBSZXNwb25zZSB7XG4gICAgaWYgKHRoaXMucmVzcG9uc2VJbXBsKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXNwb25zZUltcGw7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ1Jlc3BvbnNlJyBpbiBzZWxmKSB7XG4gICAgICByZXR1cm4gc2VsZi5SZXNwb25zZTtcbiAgICB9XG4gICAgZGVidWdGYWlsKFxuICAgICAgJ0NvdWxkIG5vdCBmaW5kIFJlc3BvbnNlIGltcGxlbWVudGF0aW9uLCBtYWtlIHN1cmUgeW91IGNhbGwgRmV0Y2hQcm92aWRlci5pbml0aWFsaXplKCkgd2l0aCBhbiBhcHByb3ByaWF0ZSBwb2x5ZmlsbCdcbiAgICApO1xuICB9XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBdXRoRXJyb3JDb2RlIH0gZnJvbSAnLi4vY29yZS9lcnJvcnMnO1xuXG4vKipcbiAqIEVycm9ycyB0aGF0IGNhbiBiZSByZXR1cm5lZCBieSB0aGUgYmFja2VuZFxuICovXG5leHBvcnQgY29uc3QgZW51bSBTZXJ2ZXJFcnJvciB7XG4gIEFETUlOX09OTFlfT1BFUkFUSU9OID0gJ0FETUlOX09OTFlfT1BFUkFUSU9OJyxcbiAgQkxPQ0tJTkdfRlVOQ1RJT05fRVJST1JfUkVTUE9OU0UgPSAnQkxPQ0tJTkdfRlVOQ1RJT05fRVJST1JfUkVTUE9OU0UnLFxuICBDQVBUQ0hBX0NIRUNLX0ZBSUxFRCA9ICdDQVBUQ0hBX0NIRUNLX0ZBSUxFRCcsXG4gIENPUlNfVU5TVVBQT1JURUQgPSAnQ09SU19VTlNVUFBPUlRFRCcsXG4gIENSRURFTlRJQUxfTUlTTUFUQ0ggPSAnQ1JFREVOVElBTF9NSVNNQVRDSCcsXG4gIENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTiA9ICdDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU4nLFxuICBEWU5BTUlDX0xJTktfTk9UX0FDVElWQVRFRCA9ICdEWU5BTUlDX0xJTktfTk9UX0FDVElWQVRFRCcsXG4gIEVNQUlMX0NIQU5HRV9ORUVEU19WRVJJRklDQVRJT04gPSAnRU1BSUxfQ0hBTkdFX05FRURTX1ZFUklGSUNBVElPTicsXG4gIEVNQUlMX0VYSVNUUyA9ICdFTUFJTF9FWElTVFMnLFxuICBFTUFJTF9OT1RfRk9VTkQgPSAnRU1BSUxfTk9UX0ZPVU5EJyxcbiAgRVhQSVJFRF9PT0JfQ09ERSA9ICdFWFBJUkVEX09PQl9DT0RFJyxcbiAgRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRUQgPSAnRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRUQnLFxuICBJTlZBTElEX0FQUF9DUkVERU5USUFMID0gJ0lOVkFMSURfQVBQX0NSRURFTlRJQUwnLFxuICBJTlZBTElEX0FQUF9JRCA9ICdJTlZBTElEX0FQUF9JRCcsXG4gIElOVkFMSURfQ0VSVF9IQVNIID0gJ0lOVkFMSURfQ0VSVF9IQVNIJyxcbiAgSU5WQUxJRF9DT0RFID0gJ0lOVkFMSURfQ09ERScsXG4gIElOVkFMSURfQ09OVElOVUVfVVJJID0gJ0lOVkFMSURfQ09OVElOVUVfVVJJJyxcbiAgSU5WQUxJRF9DVVNUT01fVE9LRU4gPSAnSU5WQUxJRF9DVVNUT01fVE9LRU4nLFxuICBJTlZBTElEX0RZTkFNSUNfTElOS19ET01BSU4gPSAnSU5WQUxJRF9EWU5BTUlDX0xJTktfRE9NQUlOJyxcbiAgSU5WQUxJRF9FTUFJTCA9ICdJTlZBTElEX0VNQUlMJyxcbiAgSU5WQUxJRF9JRF9UT0tFTiA9ICdJTlZBTElEX0lEX1RPS0VOJyxcbiAgSU5WQUxJRF9JRFBfUkVTUE9OU0UgPSAnSU5WQUxJRF9JRFBfUkVTUE9OU0UnLFxuICBJTlZBTElEX0lERU5USUZJRVIgPSAnSU5WQUxJRF9JREVOVElGSUVSJyxcbiAgSU5WQUxJRF9NRVNTQUdFX1BBWUxPQUQgPSAnSU5WQUxJRF9NRVNTQUdFX1BBWUxPQUQnLFxuICBJTlZBTElEX01GQV9QRU5ESU5HX0NSRURFTlRJQUwgPSAnSU5WQUxJRF9NRkFfUEVORElOR19DUkVERU5USUFMJyxcbiAgSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQgPSAnSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQnLFxuICBJTlZBTElEX09PQl9DT0RFID0gJ0lOVkFMSURfT09CX0NPREUnLFxuICBJTlZBTElEX1BBU1NXT1JEID0gJ0lOVkFMSURfUEFTU1dPUkQnLFxuICBJTlZBTElEX1BFTkRJTkdfVE9LRU4gPSAnSU5WQUxJRF9QRU5ESU5HX1RPS0VOJyxcbiAgSU5WQUxJRF9QSE9ORV9OVU1CRVIgPSAnSU5WQUxJRF9QSE9ORV9OVU1CRVInLFxuICBJTlZBTElEX1BST1ZJREVSX0lEID0gJ0lOVkFMSURfUFJPVklERVJfSUQnLFxuICBJTlZBTElEX1JFQ0lQSUVOVF9FTUFJTCA9ICdJTlZBTElEX1JFQ0lQSUVOVF9FTUFJTCcsXG4gIElOVkFMSURfU0VOREVSID0gJ0lOVkFMSURfU0VOREVSJyxcbiAgSU5WQUxJRF9TRVNTSU9OX0lORk8gPSAnSU5WQUxJRF9TRVNTSU9OX0lORk8nLFxuICBJTlZBTElEX1RFTVBPUkFSWV9QUk9PRiA9ICdJTlZBTElEX1RFTVBPUkFSWV9QUk9PRicsXG4gIElOVkFMSURfVEVOQU5UX0lEID0gJ0lOVkFMSURfVEVOQU5UX0lEJyxcbiAgTUZBX0VOUk9MTE1FTlRfTk9UX0ZPVU5EID0gJ01GQV9FTlJPTExNRU5UX05PVF9GT1VORCcsXG4gIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgPSAnTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRScsXG4gIE1JU1NJTkdfQVBQX0NSRURFTlRJQUwgPSAnTUlTU0lOR19BUFBfQ1JFREVOVElBTCcsXG4gIE1JU1NJTkdfQ09ERSA9ICdNSVNTSU5HX0NPREUnLFxuICBNSVNTSU5HX0NPTlRJTlVFX1VSSSA9ICdNSVNTSU5HX0NPTlRJTlVFX1VSSScsXG4gIE1JU1NJTkdfQ1VTVE9NX1RPS0VOID0gJ01JU1NJTkdfQ1VTVE9NX1RPS0VOJyxcbiAgTUlTU0lOR19JT1NfQlVORExFX0lEID0gJ01JU1NJTkdfSU9TX0JVTkRMRV9JRCcsXG4gIE1JU1NJTkdfTUZBX0VOUk9MTE1FTlRfSUQgPSAnTUlTU0lOR19NRkFfRU5ST0xMTUVOVF9JRCcsXG4gIE1JU1NJTkdfTUZBX1BFTkRJTkdfQ1JFREVOVElBTCA9ICdNSVNTSU5HX01GQV9QRU5ESU5HX0NSRURFTlRJQUwnLFxuICBNSVNTSU5HX09PQl9DT0RFID0gJ01JU1NJTkdfT09CX0NPREUnLFxuICBNSVNTSU5HX09SX0lOVkFMSURfTk9OQ0UgPSAnTUlTU0lOR19PUl9JTlZBTElEX05PTkNFJyxcbiAgTUlTU0lOR19QQVNTV09SRCA9ICdNSVNTSU5HX1BBU1NXT1JEJyxcbiAgTUlTU0lOR19SRVFfVFlQRSA9ICdNSVNTSU5HX1JFUV9UWVBFJyxcbiAgTUlTU0lOR19QSE9ORV9OVU1CRVIgPSAnTUlTU0lOR19QSE9ORV9OVU1CRVInLFxuICBNSVNTSU5HX1NFU1NJT05fSU5GTyA9ICdNSVNTSU5HX1NFU1NJT05fSU5GTycsXG4gIE9QRVJBVElPTl9OT1RfQUxMT1dFRCA9ICdPUEVSQVRJT05fTk9UX0FMTE9XRUQnLFxuICBQQVNTV09SRF9MT0dJTl9ESVNBQkxFRCA9ICdQQVNTV09SRF9MT0dJTl9ESVNBQkxFRCcsXG4gIFFVT1RBX0VYQ0VFREVEID0gJ1FVT1RBX0VYQ0VFREVEJyxcbiAgUkVTRVRfUEFTU1dPUkRfRVhDRUVEX0xJTUlUID0gJ1JFU0VUX1BBU1NXT1JEX0VYQ0VFRF9MSU1JVCcsXG4gIFJFSkVDVEVEX0NSRURFTlRJQUwgPSAnUkVKRUNURURfQ1JFREVOVElBTCcsXG4gIFNFQ09ORF9GQUNUT1JfRVhJU1RTID0gJ1NFQ09ORF9GQUNUT1JfRVhJU1RTJyxcbiAgU0VDT05EX0ZBQ1RPUl9MSU1JVF9FWENFRURFRCA9ICdTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEJyxcbiAgU0VTU0lPTl9FWFBJUkVEID0gJ1NFU1NJT05fRVhQSVJFRCcsXG4gIFRFTkFOVF9JRF9NSVNNQVRDSCA9ICdURU5BTlRfSURfTUlTTUFUQ0gnLFxuICBUT0tFTl9FWFBJUkVEID0gJ1RPS0VOX0VYUElSRUQnLFxuICBUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVIgPSAnVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSJyxcbiAgVU5TVVBQT1JURURfRklSU1RfRkFDVE9SID0gJ1VOU1VQUE9SVEVEX0ZJUlNUX0ZBQ1RPUicsXG4gIFVOU1VQUE9SVEVEX1RFTkFOVF9PUEVSQVRJT04gPSAnVU5TVVBQT1JURURfVEVOQU5UX09QRVJBVElPTicsXG4gIFVOQVVUSE9SSVpFRF9ET01BSU4gPSAnVU5BVVRIT1JJWkVEX0RPTUFJTicsXG4gIFVOVkVSSUZJRURfRU1BSUwgPSAnVU5WRVJJRklFRF9FTUFJTCcsXG4gIFVTRVJfQ0FOQ0VMTEVEID0gJ1VTRVJfQ0FOQ0VMTEVEJyxcbiAgVVNFUl9ESVNBQkxFRCA9ICdVU0VSX0RJU0FCTEVEJyxcbiAgVVNFUl9OT1RfRk9VTkQgPSAnVVNFUl9OT1RfRk9VTkQnLFxuICBXRUFLX1BBU1NXT1JEID0gJ1dFQUtfUEFTU1dPUkQnLFxuICBSRUNBUFRDSEFfTk9UX0VOQUJMRUQgPSAnUkVDQVBUQ0hBX05PVF9FTkFCTEVEJyxcbiAgTUlTU0lOR19SRUNBUFRDSEFfVE9LRU4gPSAnTUlTU0lOR19SRUNBUFRDSEFfVE9LRU4nLFxuICBJTlZBTElEX1JFQ0FQVENIQV9UT0tFTiA9ICdJTlZBTElEX1JFQ0FQVENIQV9UT0tFTicsXG4gIElOVkFMSURfUkVDQVBUQ0hBX0FDVElPTiA9ICdJTlZBTElEX1JFQ0FQVENIQV9BQ1RJT04nLFxuICBNSVNTSU5HX0NMSUVOVF9UWVBFID0gJ01JU1NJTkdfQ0xJRU5UX1RZUEUnLFxuICBNSVNTSU5HX1JFQ0FQVENIQV9WRVJTSU9OID0gJ01JU1NJTkdfUkVDQVBUQ0hBX1ZFUlNJT04nLFxuICBJTlZBTElEX1JFQ0FQVENIQV9WRVJTSU9OID0gJ0lOVkFMSURfUkVDQVBUQ0hBX1ZFUlNJT04nLFxuICBJTlZBTElEX1JFUV9UWVBFID0gJ0lOVkFMSURfUkVRX1RZUEUnXG59XG5cbi8qKlxuICogQVBJIFJlc3BvbnNlIGluIHRoZSBldmVudCBvZiBhbiBlcnJvclxuICovXG5leHBvcnQgaW50ZXJmYWNlIEpzb25FcnJvciB7XG4gIGVycm9yOiB7XG4gICAgY29kZTogbnVtYmVyO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICBlcnJvcnM/OiBbXG4gICAgICB7XG4gICAgICAgIG1lc3NhZ2U6IFNlcnZlckVycm9yO1xuICAgICAgICBkb21haW46IHN0cmluZztcbiAgICAgICAgcmVhc29uOiBzdHJpbmc7XG4gICAgICB9XG4gICAgXTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUeXBlIGRlZmluaXRpb24gZm9yIGEgbWFwIGZyb20gc2VydmVyIGVycm9ycyB0byBkZXZlbG9wZXIgdmlzaWJsZSBlcnJvcnNcbiAqL1xuZXhwb3J0IGRlY2xhcmUgdHlwZSBTZXJ2ZXJFcnJvck1hcDxBcGlFcnJvciBleHRlbmRzIHN0cmluZz4gPSB7XG4gIHJlYWRvbmx5IFtLIGluIEFwaUVycm9yXTogQXV0aEVycm9yQ29kZTtcbn07XG5cbi8qKlxuICogTWFwIGZyb20gZXJyb3JzIHJldHVybmVkIGJ5IHRoZSBzZXJ2ZXIgdG8gZXJyb3JzIHRvIGRldmVsb3BlciB2aXNpYmxlIGVycm9yc1xuICovXG5leHBvcnQgY29uc3QgU0VSVkVSX0VSUk9SX01BUDogUGFydGlhbDxTZXJ2ZXJFcnJvck1hcDxTZXJ2ZXJFcnJvcj4+ID0ge1xuICAvLyBDdXN0b20gdG9rZW4gZXJyb3JzLlxuICBbU2VydmVyRXJyb3IuQ1JFREVOVElBTF9NSVNNQVRDSF06IEF1dGhFcnJvckNvZGUuQ1JFREVOVElBTF9NSVNNQVRDSCxcbiAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxuICBbU2VydmVyRXJyb3IuTUlTU0lOR19DVVNUT01fVE9LRU5dOiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SLFxuXG4gIC8vIENyZWF0ZSBBdXRoIFVSSSBlcnJvcnMuXG4gIFtTZXJ2ZXJFcnJvci5JTlZBTElEX0lERU5USUZJRVJdOiBBdXRoRXJyb3JDb2RlLklOVkFMSURfRU1BSUwsXG4gIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cbiAgW1NlcnZlckVycm9yLk1JU1NJTkdfQ09OVElOVUVfVVJJXTogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUixcblxuICAvLyBTaWduIGluIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkIGVycm9ycyAoc29tZSBhcHBseSB0byBzaWduIHVwIHRvbykuXG4gIFtTZXJ2ZXJFcnJvci5JTlZBTElEX1BBU1NXT1JEXTogQXV0aEVycm9yQ29kZS5JTlZBTElEX1BBU1NXT1JELFxuICAvLyBUaGlzIGNhbiBvbmx5IGhhcHBlbiBpZiB0aGUgU0RLIHNlbmRzIGEgYmFkIHJlcXVlc3QuXG4gIFtTZXJ2ZXJFcnJvci5NSVNTSU5HX1BBU1NXT1JEXTogQXV0aEVycm9yQ29kZS5NSVNTSU5HX1BBU1NXT1JELFxuXG4gIC8vIFNpZ24gdXAgd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmQgZXJyb3JzLlxuICBbU2VydmVyRXJyb3IuRU1BSUxfRVhJU1RTXTogQXV0aEVycm9yQ29kZS5FTUFJTF9FWElTVFMsXG4gIFtTZXJ2ZXJFcnJvci5QQVNTV09SRF9MT0dJTl9ESVNBQkxFRF06IEF1dGhFcnJvckNvZGUuT1BFUkFUSU9OX05PVF9BTExPV0VELFxuXG4gIC8vIFZlcmlmeSBhc3NlcnRpb24gZm9yIHNpZ24gaW4gd2l0aCBjcmVkZW50aWFsIGVycm9yczpcbiAgW1NlcnZlckVycm9yLklOVkFMSURfSURQX1JFU1BPTlNFXTogQXV0aEVycm9yQ29kZS5JTlZBTElEX0lEUF9SRVNQT05TRSxcbiAgW1NlcnZlckVycm9yLklOVkFMSURfUEVORElOR19UT0tFTl06IEF1dGhFcnJvckNvZGUuSU5WQUxJRF9JRFBfUkVTUE9OU0UsXG4gIFtTZXJ2ZXJFcnJvci5GRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRF06XG4gICAgQXV0aEVycm9yQ29kZS5DUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFLFxuXG4gIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cbiAgW1NlcnZlckVycm9yLk1JU1NJTkdfUkVRX1RZUEVdOiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SLFxuXG4gIC8vIFNlbmQgUGFzc3dvcmQgcmVzZXQgZW1haWwgZXJyb3JzOlxuICBbU2VydmVyRXJyb3IuRU1BSUxfTk9UX0ZPVU5EXTogQXV0aEVycm9yQ29kZS5VU0VSX0RFTEVURUQsXG4gIFtTZXJ2ZXJFcnJvci5SRVNFVF9QQVNTV09SRF9FWENFRURfTElNSVRdOlxuICAgIEF1dGhFcnJvckNvZGUuVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSLFxuXG4gIFtTZXJ2ZXJFcnJvci5FWFBJUkVEX09PQl9DT0RFXTogQXV0aEVycm9yQ29kZS5FWFBJUkVEX09PQl9DT0RFLFxuICBbU2VydmVyRXJyb3IuSU5WQUxJRF9PT0JfQ09ERV06IEF1dGhFcnJvckNvZGUuSU5WQUxJRF9PT0JfQ09ERSxcbiAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxuICBbU2VydmVyRXJyb3IuTUlTU0lOR19PT0JfQ09ERV06IEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IsXG5cbiAgLy8gT3BlcmF0aW9ucyB0aGF0IHJlcXVpcmUgSUQgdG9rZW4gaW4gcmVxdWVzdDpcbiAgW1NlcnZlckVycm9yLkNSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTl06XG4gICAgQXV0aEVycm9yQ29kZS5DUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU4sXG4gIFtTZXJ2ZXJFcnJvci5JTlZBTElEX0lEX1RPS0VOXTogQXV0aEVycm9yQ29kZS5JTlZBTElEX0FVVEgsXG4gIFtTZXJ2ZXJFcnJvci5UT0tFTl9FWFBJUkVEXTogQXV0aEVycm9yQ29kZS5UT0tFTl9FWFBJUkVELFxuICBbU2VydmVyRXJyb3IuVVNFUl9OT1RfRk9VTkRdOiBBdXRoRXJyb3JDb2RlLlRPS0VOX0VYUElSRUQsXG5cbiAgLy8gT3RoZXIgZXJyb3JzLlxuICBbU2VydmVyRXJyb3IuVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSXTpcbiAgICBBdXRoRXJyb3JDb2RlLlRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUixcblxuICAvLyBQaG9uZSBBdXRoIHJlbGF0ZWQgZXJyb3JzLlxuICBbU2VydmVyRXJyb3IuSU5WQUxJRF9DT0RFXTogQXV0aEVycm9yQ29kZS5JTlZBTElEX0NPREUsXG4gIFtTZXJ2ZXJFcnJvci5JTlZBTElEX1NFU1NJT05fSU5GT106IEF1dGhFcnJvckNvZGUuSU5WQUxJRF9TRVNTSU9OX0lORk8sXG4gIFtTZXJ2ZXJFcnJvci5JTlZBTElEX1RFTVBPUkFSWV9QUk9PRl06IEF1dGhFcnJvckNvZGUuSU5WQUxJRF9JRFBfUkVTUE9OU0UsXG4gIFtTZXJ2ZXJFcnJvci5NSVNTSU5HX1NFU1NJT05fSU5GT106IEF1dGhFcnJvckNvZGUuTUlTU0lOR19TRVNTSU9OX0lORk8sXG4gIFtTZXJ2ZXJFcnJvci5TRVNTSU9OX0VYUElSRURdOiBBdXRoRXJyb3JDb2RlLkNPREVfRVhQSVJFRCxcblxuICAvLyBPdGhlciBhY3Rpb24gY29kZSBlcnJvcnMgd2hlbiBhZGRpdGlvbmFsIHNldHRpbmdzIHBhc3NlZC5cbiAgLy8gTUlTU0lOR19DT05USU5VRV9VUkkgaXMgZ2V0dGluZyBtYXBwZWQgdG8gSU5URVJOQUxfRVJST1IgYWJvdmUuXG4gIC8vIFRoaXMgaXMgT0sgYXMgdGhpcyBlcnJvciB3aWxsIGJlIGNhdWdodCBieSBjbGllbnQgc2lkZSB2YWxpZGF0aW9uLlxuICBbU2VydmVyRXJyb3IuTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRV06XG4gICAgQXV0aEVycm9yQ29kZS5NSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FLFxuICBbU2VydmVyRXJyb3IuVU5BVVRIT1JJWkVEX0RPTUFJTl06IEF1dGhFcnJvckNvZGUuVU5BVVRIT1JJWkVEX0RPTUFJTixcblxuICAvLyBnZXRQcm9qZWN0Q29uZmlnIGVycm9ycyB3aGVuIGNsaWVudElkIGlzIHBhc3NlZC5cbiAgW1NlcnZlckVycm9yLklOVkFMSURfT0FVVEhfQ0xJRU5UX0lEXTogQXV0aEVycm9yQ29kZS5JTlZBTElEX09BVVRIX0NMSUVOVF9JRCxcblxuICAvLyBVc2VyIGFjdGlvbnMgKHNpZ24tdXAgb3IgZGVsZXRpb24pIGRpc2FibGVkIGVycm9ycy5cbiAgW1NlcnZlckVycm9yLkFETUlOX09OTFlfT1BFUkFUSU9OXTogQXV0aEVycm9yQ29kZS5BRE1JTl9PTkxZX09QRVJBVElPTixcblxuICAvLyBNdWx0aSBmYWN0b3IgcmVsYXRlZCBlcnJvcnMuXG4gIFtTZXJ2ZXJFcnJvci5JTlZBTElEX01GQV9QRU5ESU5HX0NSRURFTlRJQUxdOlxuICAgIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9NRkFfU0VTU0lPTixcbiAgW1NlcnZlckVycm9yLk1GQV9FTlJPTExNRU5UX05PVF9GT1VORF06IEF1dGhFcnJvckNvZGUuTUZBX0lORk9fTk9UX0ZPVU5ELFxuICBbU2VydmVyRXJyb3IuTUlTU0lOR19NRkFfRU5ST0xMTUVOVF9JRF06IEF1dGhFcnJvckNvZGUuTUlTU0lOR19NRkFfSU5GTyxcbiAgW1NlcnZlckVycm9yLk1JU1NJTkdfTUZBX1BFTkRJTkdfQ1JFREVOVElBTF06XG4gICAgQXV0aEVycm9yQ29kZS5NSVNTSU5HX01GQV9TRVNTSU9OLFxuICBbU2VydmVyRXJyb3IuU0VDT05EX0ZBQ1RPUl9FWElTVFNdOlxuICAgIEF1dGhFcnJvckNvZGUuU0VDT05EX0ZBQ1RPUl9BTFJFQURZX0VOUk9MTEVELFxuICBbU2VydmVyRXJyb3IuU0VDT05EX0ZBQ1RPUl9MSU1JVF9FWENFRURFRF06XG4gICAgQXV0aEVycm9yQ29kZS5TRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVELFxuXG4gIC8vIEJsb2NraW5nIGZ1bmN0aW9ucyByZWxhdGVkIGVycm9ycy5cbiAgW1NlcnZlckVycm9yLkJMT0NLSU5HX0ZVTkNUSU9OX0VSUk9SX1JFU1BPTlNFXTogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUixcblxuICAvLyBSZWNhcHRjaGEgcmVsYXRlZCBlcnJvcnMuXG4gIFtTZXJ2ZXJFcnJvci5SRUNBUFRDSEFfTk9UX0VOQUJMRURdOiBBdXRoRXJyb3JDb2RlLlJFQ0FQVENIQV9OT1RfRU5BQkxFRCxcbiAgW1NlcnZlckVycm9yLk1JU1NJTkdfUkVDQVBUQ0hBX1RPS0VOXTogQXV0aEVycm9yQ29kZS5NSVNTSU5HX1JFQ0FQVENIQV9UT0tFTixcbiAgW1NlcnZlckVycm9yLklOVkFMSURfUkVDQVBUQ0hBX1RPS0VOXTogQXV0aEVycm9yQ29kZS5JTlZBTElEX1JFQ0FQVENIQV9UT0tFTixcbiAgW1NlcnZlckVycm9yLklOVkFMSURfUkVDQVBUQ0hBX0FDVElPTl06XG4gICAgQXV0aEVycm9yQ29kZS5JTlZBTElEX1JFQ0FQVENIQV9BQ1RJT04sXG4gIFtTZXJ2ZXJFcnJvci5NSVNTSU5HX0NMSUVOVF9UWVBFXTogQXV0aEVycm9yQ29kZS5NSVNTSU5HX0NMSUVOVF9UWVBFLFxuICBbU2VydmVyRXJyb3IuTUlTU0lOR19SRUNBUFRDSEFfVkVSU0lPTl06XG4gICAgQXV0aEVycm9yQ29kZS5NSVNTSU5HX1JFQ0FQVENIQV9WRVJTSU9OLFxuICBbU2VydmVyRXJyb3IuSU5WQUxJRF9SRUNBUFRDSEFfVkVSU0lPTl06XG4gICAgQXV0aEVycm9yQ29kZS5JTlZBTElEX1JFQ0FQVENIQV9WRVJTSU9OLFxuICBbU2VydmVyRXJyb3IuSU5WQUxJRF9SRVFfVFlQRV06IEF1dGhFcnJvckNvZGUuSU5WQUxJRF9SRVFfVFlQRVxufTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEZpcmViYXNlRXJyb3IsIHF1ZXJ5c3RyaW5nIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG5pbXBvcnQgeyBBdXRoRXJyb3JDb2RlLCBOYW1lZEVycm9yUGFyYW1zIH0gZnJvbSAnLi4vY29yZS9lcnJvcnMnO1xuaW1wb3J0IHtcbiAgX2NyZWF0ZUVycm9yLFxuICBfZXJyb3JXaXRoQ3VzdG9tTWVzc2FnZSxcbiAgX2ZhaWxcbn0gZnJvbSAnLi4vY29yZS91dGlsL2Fzc2VydCc7XG5pbXBvcnQgeyBEZWxheSB9IGZyb20gJy4uL2NvcmUvdXRpbC9kZWxheSc7XG5pbXBvcnQgeyBfZW11bGF0b3JVcmwgfSBmcm9tICcuLi9jb3JlL3V0aWwvZW11bGF0b3InO1xuaW1wb3J0IHsgRmV0Y2hQcm92aWRlciB9IGZyb20gJy4uL2NvcmUvdXRpbC9mZXRjaF9wcm92aWRlcic7XG5pbXBvcnQgeyBBdXRoIH0gZnJvbSAnLi4vbW9kZWwvcHVibGljX3R5cGVzJztcbmltcG9ydCB7IEF1dGhJbnRlcm5hbCwgQ29uZmlnSW50ZXJuYWwgfSBmcm9tICcuLi9tb2RlbC9hdXRoJztcbmltcG9ydCB7IElkVG9rZW5SZXNwb25zZSwgVGFnZ2VkV2l0aFRva2VuUmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9pZF90b2tlbic7XG5pbXBvcnQgeyBJZFRva2VuTWZhUmVzcG9uc2UgfSBmcm9tICcuL2F1dGhlbnRpY2F0aW9uL21mYSc7XG5pbXBvcnQgeyBTRVJWRVJfRVJST1JfTUFQLCBTZXJ2ZXJFcnJvciwgU2VydmVyRXJyb3JNYXAgfSBmcm9tICcuL2Vycm9ycyc7XG5cbmV4cG9ydCBjb25zdCBlbnVtIEh0dHBNZXRob2Qge1xuICBQT1NUID0gJ1BPU1QnLFxuICBHRVQgPSAnR0VUJ1xufVxuXG5leHBvcnQgY29uc3QgZW51bSBIdHRwSGVhZGVyIHtcbiAgQ09OVEVOVF9UWVBFID0gJ0NvbnRlbnQtVHlwZScsXG4gIFhfRklSRUJBU0VfTE9DQUxFID0gJ1gtRmlyZWJhc2UtTG9jYWxlJyxcbiAgWF9DTElFTlRfVkVSU0lPTiA9ICdYLUNsaWVudC1WZXJzaW9uJyxcbiAgWF9GSVJFQkFTRV9HTVBJRCA9ICdYLUZpcmViYXNlLWdtcGlkJyxcbiAgWF9GSVJFQkFTRV9DTElFTlQgPSAnWC1GaXJlYmFzZS1DbGllbnQnLFxuICBYX0ZJUkVCQVNFX0FQUF9DSEVDSyA9ICdYLUZpcmViYXNlLUFwcENoZWNrJ1xufVxuXG5leHBvcnQgY29uc3QgZW51bSBFbmRwb2ludCB7XG4gIENSRUFURV9BVVRIX1VSSSA9ICcvdjEvYWNjb3VudHM6Y3JlYXRlQXV0aFVyaScsXG4gIERFTEVURV9BQ0NPVU5UID0gJy92MS9hY2NvdW50czpkZWxldGUnLFxuICBSRVNFVF9QQVNTV09SRCA9ICcvdjEvYWNjb3VudHM6cmVzZXRQYXNzd29yZCcsXG4gIFNJR05fVVAgPSAnL3YxL2FjY291bnRzOnNpZ25VcCcsXG4gIFNJR05fSU5fV0lUSF9DVVNUT01fVE9LRU4gPSAnL3YxL2FjY291bnRzOnNpZ25JbldpdGhDdXN0b21Ub2tlbicsXG4gIFNJR05fSU5fV0lUSF9FTUFJTF9MSU5LID0gJy92MS9hY2NvdW50czpzaWduSW5XaXRoRW1haWxMaW5rJyxcbiAgU0lHTl9JTl9XSVRIX0lEUCA9ICcvdjEvYWNjb3VudHM6c2lnbkluV2l0aElkcCcsXG4gIFNJR05fSU5fV0lUSF9QQVNTV09SRCA9ICcvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBhc3N3b3JkJyxcbiAgU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUiA9ICcvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBob25lTnVtYmVyJyxcbiAgU0VORF9WRVJJRklDQVRJT05fQ09ERSA9ICcvdjEvYWNjb3VudHM6c2VuZFZlcmlmaWNhdGlvbkNvZGUnLFxuICBTRU5EX09PQl9DT0RFID0gJy92MS9hY2NvdW50czpzZW5kT29iQ29kZScsXG4gIFNFVF9BQ0NPVU5UX0lORk8gPSAnL3YxL2FjY291bnRzOnVwZGF0ZScsXG4gIEdFVF9BQ0NPVU5UX0lORk8gPSAnL3YxL2FjY291bnRzOmxvb2t1cCcsXG4gIEdFVF9SRUNBUFRDSEFfUEFSQU0gPSAnL3YxL3JlY2FwdGNoYVBhcmFtcycsXG4gIFNUQVJUX01GQV9FTlJPTExNRU5UID0gJy92Mi9hY2NvdW50cy9tZmFFbnJvbGxtZW50OnN0YXJ0JyxcbiAgRklOQUxJWkVfTUZBX0VOUk9MTE1FTlQgPSAnL3YyL2FjY291bnRzL21mYUVucm9sbG1lbnQ6ZmluYWxpemUnLFxuICBTVEFSVF9NRkFfU0lHTl9JTiA9ICcvdjIvYWNjb3VudHMvbWZhU2lnbkluOnN0YXJ0JyxcbiAgRklOQUxJWkVfTUZBX1NJR05fSU4gPSAnL3YyL2FjY291bnRzL21mYVNpZ25JbjpmaW5hbGl6ZScsXG4gIFdJVEhEUkFXX01GQSA9ICcvdjIvYWNjb3VudHMvbWZhRW5yb2xsbWVudDp3aXRoZHJhdycsXG4gIEdFVF9QUk9KRUNUX0NPTkZJRyA9ICcvdjEvcHJvamVjdHMnLFxuICBHRVRfUkVDQVBUQ0hBX0NPTkZJRyA9ICcvdjIvcmVjYXB0Y2hhQ29uZmlnJ1xufVxuXG5leHBvcnQgY29uc3QgZW51bSBSZWNhcHRjaGFDbGllbnRUeXBlIHtcbiAgV0VCID0gJ0NMSUVOVF9UWVBFX1dFQicsXG4gIEFORFJPSUQgPSAnQ0xJRU5UX1RZUEVfQU5EUk9JRCcsXG4gIElPUyA9ICdDTElFTlRfVFlQRV9JT1MnXG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIFJlY2FwdGNoYVZlcnNpb24ge1xuICBFTlRFUlBSSVNFID0gJ1JFQ0FQVENIQV9FTlRFUlBSSVNFJ1xufVxuXG5leHBvcnQgY29uc3QgZW51bSBSZWNhcHRjaGFBY3Rpb25OYW1lIHtcbiAgU0lHTl9JTl9XSVRIX1BBU1NXT1JEID0gJ3NpZ25JbldpdGhQYXNzd29yZCcsXG4gIEdFVF9PT0JfQ09ERSA9ICdnZXRPb2JDb2RlJyxcbiAgU0lHTl9VUF9QQVNTV09SRCA9ICdzaWduVXBQYXNzd29yZCdcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQVBJX1RJTUVPVVRfTVMgPSBuZXcgRGVsYXkoMzBfMDAwLCA2MF8wMDApO1xuXG5leHBvcnQgZnVuY3Rpb24gX2FkZFRpZElmTmVjZXNzYXJ5PFQgZXh0ZW5kcyB7IHRlbmFudElkPzogc3RyaW5nIH0+KFxuICBhdXRoOiBBdXRoLFxuICByZXF1ZXN0OiBUXG4pOiBUIHtcbiAgaWYgKGF1dGgudGVuYW50SWQgJiYgIXJlcXVlc3QudGVuYW50SWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4ucmVxdWVzdCxcbiAgICAgIHRlbmFudElkOiBhdXRoLnRlbmFudElkXG4gICAgfTtcbiAgfVxuICByZXR1cm4gcmVxdWVzdDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIF9wZXJmb3JtQXBpUmVxdWVzdDxULCBWPihcbiAgYXV0aDogQXV0aCxcbiAgbWV0aG9kOiBIdHRwTWV0aG9kLFxuICBwYXRoOiBFbmRwb2ludCxcbiAgcmVxdWVzdD86IFQsXG4gIGN1c3RvbUVycm9yTWFwOiBQYXJ0aWFsPFNlcnZlckVycm9yTWFwPFNlcnZlckVycm9yPj4gPSB7fVxuKTogUHJvbWlzZTxWPiB7XG4gIHJldHVybiBfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmcoYXV0aCwgY3VzdG9tRXJyb3JNYXAsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgYm9keSA9IHt9O1xuICAgIGxldCBwYXJhbXMgPSB7fTtcbiAgICBpZiAocmVxdWVzdCkge1xuICAgICAgaWYgKG1ldGhvZCA9PT0gSHR0cE1ldGhvZC5HRVQpIHtcbiAgICAgICAgcGFyYW1zID0gcmVxdWVzdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJvZHkgPSB7XG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBxdWVyeSA9IHF1ZXJ5c3RyaW5nKHtcbiAgICAgIGtleTogYXV0aC5jb25maWcuYXBpS2V5LFxuICAgICAgLi4ucGFyYW1zXG4gICAgfSkuc2xpY2UoMSk7XG5cbiAgICBjb25zdCBoZWFkZXJzID0gYXdhaXQgKGF1dGggYXMgQXV0aEludGVybmFsKS5fZ2V0QWRkaXRpb25hbEhlYWRlcnMoKTtcbiAgICBoZWFkZXJzW0h0dHBIZWFkZXIuQ09OVEVOVF9UWVBFXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcblxuICAgIGlmIChhdXRoLmxhbmd1YWdlQ29kZSkge1xuICAgICAgaGVhZGVyc1tIdHRwSGVhZGVyLlhfRklSRUJBU0VfTE9DQUxFXSA9IGF1dGgubGFuZ3VhZ2VDb2RlO1xuICAgIH1cblxuICAgIHJldHVybiBGZXRjaFByb3ZpZGVyLmZldGNoKCkoXG4gICAgICBfZ2V0RmluYWxUYXJnZXQoYXV0aCwgYXV0aC5jb25maWcuYXBpSG9zdCwgcGF0aCwgcXVlcnkpLFxuICAgICAge1xuICAgICAgICBtZXRob2QsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIHJlZmVycmVyUG9saWN5OiAnbm8tcmVmZXJyZXInLFxuICAgICAgICAuLi5ib2R5XG4gICAgICB9XG4gICAgKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmc8Vj4oXG4gIGF1dGg6IEF1dGgsXG4gIGN1c3RvbUVycm9yTWFwOiBQYXJ0aWFsPFNlcnZlckVycm9yTWFwPFNlcnZlckVycm9yPj4sXG4gIGZldGNoRm46ICgpID0+IFByb21pc2U8UmVzcG9uc2U+XG4pOiBQcm9taXNlPFY+IHtcbiAgKGF1dGggYXMgQXV0aEludGVybmFsKS5fY2FuSW5pdEVtdWxhdG9yID0gZmFsc2U7XG4gIGNvbnN0IGVycm9yTWFwID0geyAuLi5TRVJWRVJfRVJST1JfTUFQLCAuLi5jdXN0b21FcnJvck1hcCB9O1xuICB0cnkge1xuICAgIGNvbnN0IG5ldHdvcmtUaW1lb3V0ID0gbmV3IE5ldHdvcmtUaW1lb3V0PFJlc3BvbnNlPihhdXRoKTtcbiAgICBjb25zdCByZXNwb25zZTogUmVzcG9uc2UgPSBhd2FpdCBQcm9taXNlLnJhY2U8UHJvbWlzZTxSZXNwb25zZT4+KFtcbiAgICAgIGZldGNoRm4oKSxcbiAgICAgIG5ldHdvcmtUaW1lb3V0LnByb21pc2VcbiAgICBdKTtcblxuICAgIC8vIElmIHdlJ3ZlIHJlYWNoZWQgdGhpcyBwb2ludCwgdGhlIGZldGNoIHN1Y2NlZWRlZCBhbmQgdGhlIG5ldHdvcmtUaW1lb3V0XG4gICAgLy8gZGlkbid0IHRocm93OyBjbGVhciB0aGUgbmV0d29yayB0aW1lb3V0IGRlbGF5IHNvIHRoYXQgTm9kZSB3b24ndCBoYW5nXG4gICAgbmV0d29ya1RpbWVvdXQuY2xlYXJOZXR3b3JrVGltZW91dCgpO1xuXG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBpZiAoJ25lZWRDb25maXJtYXRpb24nIGluIGpzb24pIHtcbiAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgQXV0aEVycm9yQ29kZS5ORUVEX0NPTkZJUk1BVElPTiwganNvbik7XG4gICAgfVxuXG4gICAgaWYgKHJlc3BvbnNlLm9rICYmICEoJ2Vycm9yTWVzc2FnZScgaW4ganNvbikpIHtcbiAgICAgIHJldHVybiBqc29uO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSByZXNwb25zZS5vayA/IGpzb24uZXJyb3JNZXNzYWdlIDoganNvbi5lcnJvci5tZXNzYWdlO1xuICAgICAgY29uc3QgW3NlcnZlckVycm9yQ29kZSwgc2VydmVyRXJyb3JNZXNzYWdlXSA9IGVycm9yTWVzc2FnZS5zcGxpdCgnIDogJyk7XG4gICAgICBpZiAoc2VydmVyRXJyb3JDb2RlID09PSBTZXJ2ZXJFcnJvci5GRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRCkge1xuICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKFxuICAgICAgICAgIGF1dGgsXG4gICAgICAgICAgQXV0aEVycm9yQ29kZS5DUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFLFxuICAgICAgICAgIGpzb25cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VydmVyRXJyb3JDb2RlID09PSBTZXJ2ZXJFcnJvci5FTUFJTF9FWElTVFMpIHtcbiAgICAgICAgdGhyb3cgX21ha2VUYWdnZWRFcnJvcihhdXRoLCBBdXRoRXJyb3JDb2RlLkVNQUlMX0VYSVNUUywganNvbik7XG4gICAgICB9IGVsc2UgaWYgKHNlcnZlckVycm9yQ29kZSA9PT0gU2VydmVyRXJyb3IuVVNFUl9ESVNBQkxFRCkge1xuICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIEF1dGhFcnJvckNvZGUuVVNFUl9ESVNBQkxFRCwganNvbik7XG4gICAgICB9XG4gICAgICBjb25zdCBhdXRoRXJyb3IgPVxuICAgICAgICBlcnJvck1hcFtzZXJ2ZXJFcnJvckNvZGUgYXMgU2VydmVyRXJyb3JdIHx8XG4gICAgICAgIChzZXJ2ZXJFcnJvckNvZGVcbiAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIC5yZXBsYWNlKC9bX1xcc10rL2csICctJykgYXMgdW5rbm93biBhcyBBdXRoRXJyb3JDb2RlKTtcbiAgICAgIGlmIChzZXJ2ZXJFcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgdGhyb3cgX2Vycm9yV2l0aEN1c3RvbU1lc3NhZ2UoYXV0aCwgYXV0aEVycm9yLCBzZXJ2ZXJFcnJvck1lc3NhZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2ZhaWwoYXV0aCwgYXV0aEVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIC8vIENoYW5naW5nIHRoaXMgdG8gYSBkaWZmZXJlbnQgZXJyb3IgY29kZSB3aWxsIGxvZyB1c2VyIG91dCB3aGVuIHRoZXJlIGlzIGEgbmV0d29yayBlcnJvclxuICAgIC8vIGJlY2F1c2Ugd2UgdHJlYXQgYW55IGVycm9yIG90aGVyIHRoYW4gTkVUV09SS19SRVFVRVNUX0ZBSUxFRCBhcyB0b2tlbiBpcyBpbnZhbGlkLlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvYmxvYi80ZmJjNzM2MTBkNzBiZTRlMDg1MmU3ZGU2M2EzOWNiNzg5N2U4NTQ2L3BhY2thZ2VzL2F1dGgvc3JjL2NvcmUvYXV0aC9hdXRoX2ltcGwudHMjTDMwOS1MMzE2XG4gICAgX2ZhaWwoYXV0aCwgQXV0aEVycm9yQ29kZS5ORVRXT1JLX1JFUVVFU1RfRkFJTEVELCB7ICdtZXNzYWdlJzogU3RyaW5nKGUpIH0pO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBfcGVyZm9ybVNpZ25JblJlcXVlc3Q8VCwgViBleHRlbmRzIElkVG9rZW5SZXNwb25zZT4oXG4gIGF1dGg6IEF1dGgsXG4gIG1ldGhvZDogSHR0cE1ldGhvZCxcbiAgcGF0aDogRW5kcG9pbnQsXG4gIHJlcXVlc3Q/OiBULFxuICBjdXN0b21FcnJvck1hcDogUGFydGlhbDxTZXJ2ZXJFcnJvck1hcDxTZXJ2ZXJFcnJvcj4+ID0ge31cbik6IFByb21pc2U8Vj4ge1xuICBjb25zdCBzZXJ2ZXJSZXNwb25zZSA9IChhd2FpdCBfcGVyZm9ybUFwaVJlcXVlc3Q8VCwgViB8IElkVG9rZW5NZmFSZXNwb25zZT4oXG4gICAgYXV0aCxcbiAgICBtZXRob2QsXG4gICAgcGF0aCxcbiAgICByZXF1ZXN0LFxuICAgIGN1c3RvbUVycm9yTWFwXG4gICkpIGFzIFY7XG4gIGlmICgnbWZhUGVuZGluZ0NyZWRlbnRpYWwnIGluIHNlcnZlclJlc3BvbnNlKSB7XG4gICAgX2ZhaWwoYXV0aCwgQXV0aEVycm9yQ29kZS5NRkFfUkVRVUlSRUQsIHtcbiAgICAgIF9zZXJ2ZXJSZXNwb25zZTogc2VydmVyUmVzcG9uc2VcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBzZXJ2ZXJSZXNwb25zZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9nZXRGaW5hbFRhcmdldChcbiAgYXV0aDogQXV0aCxcbiAgaG9zdDogc3RyaW5nLFxuICBwYXRoOiBzdHJpbmcsXG4gIHF1ZXJ5OiBzdHJpbmdcbik6IHN0cmluZyB7XG4gIGNvbnN0IGJhc2UgPSBgJHtob3N0fSR7cGF0aH0/JHtxdWVyeX1gO1xuXG4gIGlmICghKGF1dGggYXMgQXV0aEludGVybmFsKS5jb25maWcuZW11bGF0b3IpIHtcbiAgICByZXR1cm4gYCR7YXV0aC5jb25maWcuYXBpU2NoZW1lfTovLyR7YmFzZX1gO1xuICB9XG5cbiAgcmV0dXJuIF9lbXVsYXRvclVybChhdXRoLmNvbmZpZyBhcyBDb25maWdJbnRlcm5hbCwgYmFzZSk7XG59XG5cbmNsYXNzIE5ldHdvcmtUaW1lb3V0PFQ+IHtcbiAgLy8gTm9kZSB0aW1lcnMgYW5kIGJyb3dzZXIgdGltZXJzIGFyZSBmdW5kYW1lbnRhbGx5IGluY29tcGF0aWJsZSwgYnV0IHdlXG4gIC8vIGRvbid0IGNhcmUgYWJvdXQgdGhlIHZhbHVlIGhlcmVcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgcHJpdmF0ZSB0aW1lcjogYW55IHwgbnVsbCA9IG51bGw7XG4gIHJlYWRvbmx5IHByb21pc2UgPSBuZXcgUHJvbWlzZTxUPigoXywgcmVqZWN0KSA9PiB7XG4gICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgcmV0dXJuIHJlamVjdChcbiAgICAgICAgX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgQXV0aEVycm9yQ29kZS5ORVRXT1JLX1JFUVVFU1RfRkFJTEVEKVxuICAgICAgKTtcbiAgICB9LCBERUZBVUxUX0FQSV9USU1FT1VUX01TLmdldCgpKTtcbiAgfSk7XG5cbiAgY2xlYXJOZXR3b3JrVGltZW91dCgpOiB2b2lkIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGF1dGg6IEF1dGgpIHt9XG59XG5cbmludGVyZmFjZSBQb3RlbnRpYWxSZXNwb25zZSBleHRlbmRzIElkVG9rZW5SZXNwb25zZSB7XG4gIGVtYWlsPzogc3RyaW5nO1xuICBwaG9uZU51bWJlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9tYWtlVGFnZ2VkRXJyb3IoXG4gIGF1dGg6IEF1dGgsXG4gIGNvZGU6IEF1dGhFcnJvckNvZGUsXG4gIHJlc3BvbnNlOiBQb3RlbnRpYWxSZXNwb25zZVxuKTogRmlyZWJhc2VFcnJvciB7XG4gIGNvbnN0IGVycm9yUGFyYW1zOiBOYW1lZEVycm9yUGFyYW1zID0ge1xuICAgIGFwcE5hbWU6IGF1dGgubmFtZVxuICB9O1xuXG4gIGlmIChyZXNwb25zZS5lbWFpbCkge1xuICAgIGVycm9yUGFyYW1zLmVtYWlsID0gcmVzcG9uc2UuZW1haWw7XG4gIH1cbiAgaWYgKHJlc3BvbnNlLnBob25lTnVtYmVyKSB7XG4gICAgZXJyb3JQYXJhbXMucGhvbmVOdW1iZXIgPSByZXNwb25zZS5waG9uZU51bWJlcjtcbiAgfVxuXG4gIGNvbnN0IGVycm9yID0gX2NyZWF0ZUVycm9yKGF1dGgsIGNvZGUsIGVycm9yUGFyYW1zKTtcblxuICAvLyBXZSBrbm93IGN1c3RvbURhdGEgaXMgZGVmaW5lZCBvbiBlcnJvciBiZWNhdXNlIGVycm9yUGFyYW1zIGlzIGRlZmluZWRcbiAgKGVycm9yLmN1c3RvbURhdGEhIGFzIFRhZ2dlZFdpdGhUb2tlblJlc3BvbnNlKS5fdG9rZW5SZXNwb25zZSA9IHJlc3BvbnNlO1xuICByZXR1cm4gZXJyb3I7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBFbmRwb2ludCwgSHR0cE1ldGhvZCwgX3BlcmZvcm1BcGlSZXF1ZXN0IH0gZnJvbSAnLi4vaW5kZXgnO1xuaW1wb3J0IHsgTWZhRW5yb2xsbWVudCB9IGZyb20gJy4vbWZhJztcbmltcG9ydCB7IEF1dGggfSBmcm9tICcuLi8uLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERlbGV0ZUFjY291bnRSZXF1ZXN0IHtcbiAgaWRUb2tlbjogc3RyaW5nO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQWNjb3VudChcbiAgYXV0aDogQXV0aCxcbiAgcmVxdWVzdDogRGVsZXRlQWNjb3VudFJlcXVlc3Rcbik6IFByb21pc2U8dm9pZD4ge1xuICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0PERlbGV0ZUFjY291bnRSZXF1ZXN0LCB2b2lkPihcbiAgICBhdXRoLFxuICAgIEh0dHBNZXRob2QuUE9TVCxcbiAgICBFbmRwb2ludC5ERUxFVEVfQUNDT1VOVCxcbiAgICByZXF1ZXN0XG4gICk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvdmlkZXJVc2VySW5mbyB7XG4gIHByb3ZpZGVySWQ6IHN0cmluZztcbiAgcmF3SWQ/OiBzdHJpbmc7XG4gIGVtYWlsPzogc3RyaW5nO1xuICBkaXNwbGF5TmFtZT86IHN0cmluZztcbiAgcGhvdG9Vcmw/OiBzdHJpbmc7XG4gIHBob25lTnVtYmVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERlbGV0ZUxpbmtlZEFjY291bnRzUmVxdWVzdCB7XG4gIGlkVG9rZW46IHN0cmluZztcbiAgZGVsZXRlUHJvdmlkZXI6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERlbGV0ZUxpbmtlZEFjY291bnRzUmVzcG9uc2Uge1xuICBwcm92aWRlclVzZXJJbmZvOiBQcm92aWRlclVzZXJJbmZvW107XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVMaW5rZWRBY2NvdW50cyhcbiAgYXV0aDogQXV0aCxcbiAgcmVxdWVzdDogRGVsZXRlTGlua2VkQWNjb3VudHNSZXF1ZXN0XG4pOiBQcm9taXNlPERlbGV0ZUxpbmtlZEFjY291bnRzUmVzcG9uc2U+IHtcbiAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdDxcbiAgICBEZWxldGVMaW5rZWRBY2NvdW50c1JlcXVlc3QsXG4gICAgRGVsZXRlTGlua2VkQWNjb3VudHNSZXNwb25zZVxuICA+KGF1dGgsIEh0dHBNZXRob2QuUE9TVCwgRW5kcG9pbnQuU0VUX0FDQ09VTlRfSU5GTywgcmVxdWVzdCk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQVBJVXNlckluZm8ge1xuICBsb2NhbElkPzogc3RyaW5nO1xuICBkaXNwbGF5TmFtZT86IHN0cmluZztcbiAgcGhvdG9Vcmw/OiBzdHJpbmc7XG4gIGVtYWlsPzogc3RyaW5nO1xuICBlbWFpbFZlcmlmaWVkPzogYm9vbGVhbjtcbiAgcGhvbmVOdW1iZXI/OiBzdHJpbmc7XG4gIGxhc3RMb2dpbkF0PzogbnVtYmVyO1xuICBjcmVhdGVkQXQ/OiBudW1iZXI7XG4gIHRlbmFudElkPzogc3RyaW5nO1xuICBwYXNzd29yZEhhc2g/OiBzdHJpbmc7XG4gIHByb3ZpZGVyVXNlckluZm8/OiBQcm92aWRlclVzZXJJbmZvW107XG4gIG1mYUluZm8/OiBNZmFFbnJvbGxtZW50W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2V0QWNjb3VudEluZm9SZXF1ZXN0IHtcbiAgaWRUb2tlbjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdldEFjY291bnRJbmZvUmVzcG9uc2Uge1xuICB1c2VyczogQVBJVXNlckluZm9bXTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFjY291bnRJbmZvKFxuICBhdXRoOiBBdXRoLFxuICByZXF1ZXN0OiBHZXRBY2NvdW50SW5mb1JlcXVlc3Rcbik6IFByb21pc2U8R2V0QWNjb3VudEluZm9SZXNwb25zZT4ge1xuICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0PEdldEFjY291bnRJbmZvUmVxdWVzdCwgR2V0QWNjb3VudEluZm9SZXNwb25zZT4oXG4gICAgYXV0aCxcbiAgICBIdHRwTWV0aG9kLlBPU1QsXG4gICAgRW5kcG9pbnQuR0VUX0FDQ09VTlRfSU5GTyxcbiAgICByZXF1ZXN0XG4gICk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKFxuICB1dGNUaW1lc3RhbXA/OiBzdHJpbmcgfCBudW1iZXJcbik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIGlmICghdXRjVGltZXN0YW1wKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICB0cnkge1xuICAgIC8vIENvbnZlcnQgdG8gZGF0ZSBvYmplY3QuXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKE51bWJlcih1dGNUaW1lc3RhbXApKTtcbiAgICAvLyBUZXN0IGRhdGUgaXMgdmFsaWQuXG4gICAgaWYgKCFpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcbiAgICAgIC8vIENvbnZlcnQgdG8gVVRDIGRhdGUgc3RyaW5nLlxuICAgICAgcmV0dXJuIGRhdGUudG9VVENTdHJpbmcoKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBEbyBub3RoaW5nLiB1bmRlZmluZWQgd2lsbCBiZSByZXR1cm5lZC5cbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgSWRUb2tlblJlc3VsdCwgUGFyc2VkVG9rZW4sIFVzZXIgfSBmcm9tICcuLi8uLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuaW1wb3J0IHsgYmFzZTY0RGVjb2RlLCBnZXRNb2R1bGFySW5zdGFuY2UgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbmltcG9ydCB7IFVzZXJJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL3VzZXInO1xuaW1wb3J0IHsgX2Fzc2VydCB9IGZyb20gJy4uL3V0aWwvYXNzZXJ0JztcbmltcG9ydCB7IF9sb2dFcnJvciB9IGZyb20gJy4uL3V0aWwvbG9nJztcbmltcG9ydCB7IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyB9IGZyb20gJy4uL3V0aWwvdGltZSc7XG5pbXBvcnQgeyBBdXRoRXJyb3JDb2RlIH0gZnJvbSAnLi4vZXJyb3JzJztcblxuLyoqXG4gKiBSZXR1cm5zIGEgSlNPTiBXZWIgVG9rZW4gKEpXVCkgdXNlZCB0byBpZGVudGlmeSB0aGUgdXNlciB0byBhIEZpcmViYXNlIHNlcnZpY2UuXG4gKlxuICogQHJlbWFya3NcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgdG9rZW4gaWYgaXQgaGFzIG5vdCBleHBpcmVkIG9yIGlmIGl0IHdpbGwgbm90IGV4cGlyZSBpbiB0aGUgbmV4dCBmaXZlXG4gKiBtaW51dGVzLiBPdGhlcndpc2UsIHRoaXMgd2lsbCByZWZyZXNoIHRoZSB0b2tlbiBhbmQgcmV0dXJuIGEgbmV3IG9uZS5cbiAqXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxuICogQHBhcmFtIGZvcmNlUmVmcmVzaCAtIEZvcmNlIHJlZnJlc2ggcmVnYXJkbGVzcyBvZiB0b2tlbiBleHBpcmF0aW9uLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldElkVG9rZW4odXNlcjogVXNlciwgZm9yY2VSZWZyZXNoID0gZmFsc2UpOiBQcm9taXNlPHN0cmluZz4ge1xuICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZGVzZXJpYWxpemVkIEpTT04gV2ViIFRva2VuIChKV1QpIHVzZWQgdG8gaWRlbnRpdGZ5IHRoZSB1c2VyIHRvIGEgRmlyZWJhc2Ugc2VydmljZS5cbiAqXG4gKiBAcmVtYXJrc1xuICogUmV0dXJucyB0aGUgY3VycmVudCB0b2tlbiBpZiBpdCBoYXMgbm90IGV4cGlyZWQgb3IgaWYgaXQgd2lsbCBub3QgZXhwaXJlIGluIHRoZSBuZXh0IGZpdmVcbiAqIG1pbnV0ZXMuIE90aGVyd2lzZSwgdGhpcyB3aWxsIHJlZnJlc2ggdGhlIHRva2VuIGFuZCByZXR1cm4gYSBuZXcgb25lLlxuICpcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXG4gKiBAcGFyYW0gZm9yY2VSZWZyZXNoIC0gRm9yY2UgcmVmcmVzaCByZWdhcmRsZXNzIG9mIHRva2VuIGV4cGlyYXRpb24uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SWRUb2tlblJlc3VsdChcbiAgdXNlcjogVXNlcixcbiAgZm9yY2VSZWZyZXNoID0gZmFsc2Vcbik6IFByb21pc2U8SWRUb2tlblJlc3VsdD4ge1xuICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcikgYXMgVXNlckludGVybmFsO1xuICBjb25zdCB0b2tlbiA9IGF3YWl0IHVzZXJJbnRlcm5hbC5nZXRJZFRva2VuKGZvcmNlUmVmcmVzaCk7XG4gIGNvbnN0IGNsYWltcyA9IF9wYXJzZVRva2VuKHRva2VuKTtcblxuICBfYXNzZXJ0KFxuICAgIGNsYWltcyAmJiBjbGFpbXMuZXhwICYmIGNsYWltcy5hdXRoX3RpbWUgJiYgY2xhaW1zLmlhdCxcbiAgICB1c2VySW50ZXJuYWwuYXV0aCxcbiAgICBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SXG4gICk7XG4gIGNvbnN0IGZpcmViYXNlID1cbiAgICB0eXBlb2YgY2xhaW1zLmZpcmViYXNlID09PSAnb2JqZWN0JyA/IGNsYWltcy5maXJlYmFzZSA6IHVuZGVmaW5lZDtcblxuICBjb25zdCBzaWduSW5Qcm92aWRlcjogc3RyaW5nIHwgdW5kZWZpbmVkID0gZmlyZWJhc2U/Llsnc2lnbl9pbl9wcm92aWRlciddO1xuXG4gIHJldHVybiB7XG4gICAgY2xhaW1zLFxuICAgIHRva2VuLFxuICAgIGF1dGhUaW1lOiB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcoXG4gICAgICBzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoY2xhaW1zLmF1dGhfdGltZSlcbiAgICApISxcbiAgICBpc3N1ZWRBdFRpbWU6IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyhcbiAgICAgIHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhjbGFpbXMuaWF0KVxuICAgICkhLFxuICAgIGV4cGlyYXRpb25UaW1lOiB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcoXG4gICAgICBzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoY2xhaW1zLmV4cClcbiAgICApISxcbiAgICBzaWduSW5Qcm92aWRlcjogc2lnbkluUHJvdmlkZXIgfHwgbnVsbCxcbiAgICBzaWduSW5TZWNvbmRGYWN0b3I6IGZpcmViYXNlPy5bJ3NpZ25faW5fc2Vjb25kX2ZhY3RvciddIHx8IG51bGxcbiAgfTtcbn1cblxuZnVuY3Rpb24gc2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzKHNlY29uZHM6IHN0cmluZyk6IG51bWJlciB7XG4gIHJldHVybiBOdW1iZXIoc2Vjb25kcykgKiAxMDAwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX3BhcnNlVG9rZW4odG9rZW46IHN0cmluZyk6IFBhcnNlZFRva2VuIHwgbnVsbCB7XG4gIGNvbnN0IFthbGdvcml0aG0sIHBheWxvYWQsIHNpZ25hdHVyZV0gPSB0b2tlbi5zcGxpdCgnLicpO1xuICBpZiAoXG4gICAgYWxnb3JpdGhtID09PSB1bmRlZmluZWQgfHxcbiAgICBwYXlsb2FkID09PSB1bmRlZmluZWQgfHxcbiAgICBzaWduYXR1cmUgPT09IHVuZGVmaW5lZFxuICApIHtcbiAgICBfbG9nRXJyb3IoJ0pXVCBtYWxmb3JtZWQsIGNvbnRhaW5lZCBmZXdlciB0aGFuIDMgc2VjdGlvbnMnKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZGVjb2RlZCA9IGJhc2U2NERlY29kZShwYXlsb2FkKTtcbiAgICBpZiAoIWRlY29kZWQpIHtcbiAgICAgIF9sb2dFcnJvcignRmFpbGVkIHRvIGRlY29kZSBiYXNlNjQgSldUIHBheWxvYWQnKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5wYXJzZShkZWNvZGVkKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIF9sb2dFcnJvcihcbiAgICAgICdDYXVnaHQgZXJyb3IgcGFyc2luZyBKV1QgcGF5bG9hZCBhcyBKU09OJyxcbiAgICAgIChlIGFzIEVycm9yKT8udG9TdHJpbmcoKVxuICAgICk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IGV4cGlyZXNJbiBUVEwgZnJvbSBhIHRva2VuIGJ5IHN1YnRyYWN0aW5nIHRoZSBleHBpcmF0aW9uIGZyb20gdGhlIGlzc3VhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gX3Rva2VuRXhwaXJlc0luKHRva2VuOiBzdHJpbmcpOiBudW1iZXIge1xuICBjb25zdCBwYXJzZWRUb2tlbiA9IF9wYXJzZVRva2VuKHRva2VuKTtcbiAgX2Fzc2VydChwYXJzZWRUb2tlbiwgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUik7XG4gIF9hc3NlcnQodHlwZW9mIHBhcnNlZFRva2VuLmV4cCAhPT0gJ3VuZGVmaW5lZCcsIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IpO1xuICBfYXNzZXJ0KHR5cGVvZiBwYXJzZWRUb2tlbi5pYXQgIT09ICd1bmRlZmluZWQnLCBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SKTtcbiAgcmV0dXJuIE51bWJlcihwYXJzZWRUb2tlbi5leHApIC0gTnVtYmVyKHBhcnNlZFRva2VuLmlhdCk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG5pbXBvcnQgeyBVc2VySW50ZXJuYWwgfSBmcm9tICcuLi8uLi9tb2RlbC91c2VyJztcbmltcG9ydCB7IEF1dGhFcnJvckNvZGUgfSBmcm9tICcuLi9lcnJvcnMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gX2xvZ291dElmSW52YWxpZGF0ZWQ8VD4oXG4gIHVzZXI6IFVzZXJJbnRlcm5hbCxcbiAgcHJvbWlzZTogUHJvbWlzZTxUPixcbiAgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2Vcbik6IFByb21pc2U8VD4ge1xuICBpZiAoYnlwYXNzQXV0aFN0YXRlKSB7XG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH1cbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgcHJvbWlzZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvciAmJiBpc1VzZXJJbnZhbGlkYXRlZChlKSkge1xuICAgICAgaWYgKHVzZXIuYXV0aC5jdXJyZW50VXNlciA9PT0gdXNlcikge1xuICAgICAgICBhd2FpdCB1c2VyLmF1dGguc2lnbk91dCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRocm93IGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNVc2VySW52YWxpZGF0ZWQoeyBjb2RlIH06IEZpcmViYXNlRXJyb3IpOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICBjb2RlID09PSBgYXV0aC8ke0F1dGhFcnJvckNvZGUuVVNFUl9ESVNBQkxFRH1gIHx8XG4gICAgY29kZSA9PT0gYGF1dGgvJHtBdXRoRXJyb3JDb2RlLlRPS0VOX0VYUElSRUR9YFxuICApO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFVzZXJJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL3VzZXInO1xuaW1wb3J0IHsgQXV0aEVycm9yQ29kZSB9IGZyb20gJy4uL2Vycm9ycyc7XG5cbi8vIFJlZnJlc2ggdGhlIHRva2VuIGZpdmUgbWludXRlcyBiZWZvcmUgZXhwaXJhdGlvblxuZXhwb3J0IGNvbnN0IGVudW0gRHVyYXRpb24ge1xuICBPRkZTRVQgPSA1ICogMTAwMCAqIDYwLFxuICBSRVRSWV9CQUNLT0ZGX01JTiA9IDMwICogMTAwMCxcbiAgUkVUUllfQkFDS09GRl9NQVggPSAxNiAqIDYwICogMTAwMFxufVxuXG5leHBvcnQgY2xhc3MgUHJvYWN0aXZlUmVmcmVzaCB7XG4gIHByaXZhdGUgaXNSdW5uaW5nID0gZmFsc2U7XG5cbiAgLy8gTm9kZSB0aW1lcnMgYW5kIGJyb3dzZXIgdGltZXJzIHJldHVybiBmdW5kYW1lbnRhbGx5IGRpZmZlcmVudCB0eXBlcy5cbiAgLy8gV2UgZG9uJ3QgYWN0dWFsbHkgY2FyZSB3aGF0IHRoZSB2YWx1ZSBpcyBidXQgVFMgd29uJ3QgYWNjZXB0IHVua25vd24gYW5kXG4gIC8vIHdlIGNhbid0IGNhc3QgcHJvcGVybHkgaW4gYm90aCBlbnZpcm9ubWVudHMuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gIHByaXZhdGUgdGltZXJJZDogYW55IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgZXJyb3JCYWNrb2ZmID0gRHVyYXRpb24uUkVUUllfQkFDS09GRl9NSU47XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSB1c2VyOiBVc2VySW50ZXJuYWwpIHt9XG5cbiAgX3N0YXJ0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzUnVubmluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcbiAgICB0aGlzLnNjaGVkdWxlKCk7XG4gIH1cblxuICBfc3RvcCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICBpZiAodGhpcy50aW1lcklkICE9PSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklkKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldEludGVydmFsKHdhc0Vycm9yOiBib29sZWFuKTogbnVtYmVyIHtcbiAgICBpZiAod2FzRXJyb3IpIHtcbiAgICAgIGNvbnN0IGludGVydmFsID0gdGhpcy5lcnJvckJhY2tvZmY7XG4gICAgICB0aGlzLmVycm9yQmFja29mZiA9IE1hdGgubWluKFxuICAgICAgICB0aGlzLmVycm9yQmFja29mZiAqIDIsXG4gICAgICAgIER1cmF0aW9uLlJFVFJZX0JBQ0tPRkZfTUFYXG4gICAgICApO1xuICAgICAgcmV0dXJuIGludGVydmFsO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZXNldCB0aGUgZXJyb3IgYmFja29mZlxuICAgICAgdGhpcy5lcnJvckJhY2tvZmYgPSBEdXJhdGlvbi5SRVRSWV9CQUNLT0ZGX01JTjtcbiAgICAgIGNvbnN0IGV4cFRpbWUgPSB0aGlzLnVzZXIuc3RzVG9rZW5NYW5hZ2VyLmV4cGlyYXRpb25UaW1lID8/IDA7XG4gICAgICBjb25zdCBpbnRlcnZhbCA9IGV4cFRpbWUgLSBEYXRlLm5vdygpIC0gRHVyYXRpb24uT0ZGU0VUO1xuXG4gICAgICByZXR1cm4gTWF0aC5tYXgoMCwgaW50ZXJ2YWwpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2NoZWR1bGUod2FzRXJyb3IgPSBmYWxzZSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgIC8vIEp1c3QgaW4gY2FzZS4uLlxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGludGVydmFsID0gdGhpcy5nZXRJbnRlcnZhbCh3YXNFcnJvcik7XG4gICAgdGhpcy50aW1lcklkID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLml0ZXJhdGlvbigpO1xuICAgIH0sIGludGVydmFsKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaXRlcmF0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnVzZXIuZ2V0SWRUb2tlbih0cnVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBPbmx5IHJldHJ5IG9uIG5ldHdvcmsgZXJyb3JzXG4gICAgICBpZiAoXG4gICAgICAgIChlIGFzIEZpcmViYXNlRXJyb3IpPy5jb2RlID09PVxuICAgICAgICBgYXV0aC8ke0F1dGhFcnJvckNvZGUuTkVUV09SS19SRVFVRVNUX0ZBSUxFRH1gXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZSgvKiB3YXNFcnJvciAqLyB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNjaGVkdWxlKCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFVzZXJNZXRhZGF0YSBhcyBVc2VyTWV0YWRhdGFUeXBlIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcblxuaW1wb3J0IHsgdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nIH0gZnJvbSAnLi4vdXRpbC90aW1lJztcblxuZXhwb3J0IGNsYXNzIFVzZXJNZXRhZGF0YSBpbXBsZW1lbnRzIFVzZXJNZXRhZGF0YVR5cGUge1xuICBjcmVhdGlvblRpbWU/OiBzdHJpbmc7XG4gIGxhc3RTaWduSW5UaW1lPzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgY3JlYXRlZEF0Pzogc3RyaW5nIHwgbnVtYmVyLFxuICAgIHByaXZhdGUgbGFzdExvZ2luQXQ/OiBzdHJpbmcgfCBudW1iZXJcbiAgKSB7XG4gICAgdGhpcy5faW5pdGlhbGl6ZVRpbWUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2luaXRpYWxpemVUaW1lKCk6IHZvaWQge1xuICAgIHRoaXMubGFzdFNpZ25JblRpbWUgPSB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcodGhpcy5sYXN0TG9naW5BdCk7XG4gICAgdGhpcy5jcmVhdGlvblRpbWUgPSB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcodGhpcy5jcmVhdGVkQXQpO1xuICB9XG5cbiAgX2NvcHkobWV0YWRhdGE6IFVzZXJNZXRhZGF0YSk6IHZvaWQge1xuICAgIHRoaXMuY3JlYXRlZEF0ID0gbWV0YWRhdGEuY3JlYXRlZEF0O1xuICAgIHRoaXMubGFzdExvZ2luQXQgPSBtZXRhZGF0YS5sYXN0TG9naW5BdDtcbiAgICB0aGlzLl9pbml0aWFsaXplVGltZSgpO1xuICB9XG5cbiAgdG9KU09OKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNyZWF0ZWRBdDogdGhpcy5jcmVhdGVkQXQsXG4gICAgICBsYXN0TG9naW5BdDogdGhpcy5sYXN0TG9naW5BdFxuICAgIH07XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFVzZXIsIFVzZXJJbmZvIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcblxuaW1wb3J0IHtcbiAgZ2V0QWNjb3VudEluZm8sXG4gIFByb3ZpZGVyVXNlckluZm9cbn0gZnJvbSAnLi4vLi4vYXBpL2FjY291bnRfbWFuYWdlbWVudC9hY2NvdW50JztcbmltcG9ydCB7IFVzZXJJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL3VzZXInO1xuaW1wb3J0IHsgQXV0aEVycm9yQ29kZSB9IGZyb20gJy4uL2Vycm9ycyc7XG5pbXBvcnQgeyBfYXNzZXJ0IH0gZnJvbSAnLi4vdXRpbC9hc3NlcnQnO1xuaW1wb3J0IHsgX2xvZ291dElmSW52YWxpZGF0ZWQgfSBmcm9tICcuL2ludmFsaWRhdGlvbic7XG5pbXBvcnQgeyBVc2VyTWV0YWRhdGEgfSBmcm9tICcuL3VzZXJfbWV0YWRhdGEnO1xuaW1wb3J0IHsgZ2V0TW9kdWxhckluc3RhbmNlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gX3JlbG9hZFdpdGhvdXRTYXZpbmcodXNlcjogVXNlckludGVybmFsKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGF1dGggPSB1c2VyLmF1dGg7XG4gIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZChcbiAgICB1c2VyLFxuICAgIGdldEFjY291bnRJbmZvKGF1dGgsIHsgaWRUb2tlbiB9KVxuICApO1xuXG4gIF9hc3NlcnQocmVzcG9uc2U/LnVzZXJzLmxlbmd0aCwgYXV0aCwgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUik7XG5cbiAgY29uc3QgY29yZUFjY291bnQgPSByZXNwb25zZS51c2Vyc1swXTtcblxuICB1c2VyLl9ub3RpZnlSZWxvYWRMaXN0ZW5lcihjb3JlQWNjb3VudCk7XG5cbiAgY29uc3QgbmV3UHJvdmlkZXJEYXRhID0gY29yZUFjY291bnQucHJvdmlkZXJVc2VySW5mbz8ubGVuZ3RoXG4gICAgPyBleHRyYWN0UHJvdmlkZXJEYXRhKGNvcmVBY2NvdW50LnByb3ZpZGVyVXNlckluZm8pXG4gICAgOiBbXTtcblxuICBjb25zdCBwcm92aWRlckRhdGEgPSBtZXJnZVByb3ZpZGVyRGF0YSh1c2VyLnByb3ZpZGVyRGF0YSwgbmV3UHJvdmlkZXJEYXRhKTtcblxuICAvLyBQcmVzZXJ2ZXMgdGhlIG5vbi1ub255bW91cyBzdGF0dXMgb2YgdGhlIHN0b3JlZCB1c2VyLCBldmVuIGlmIG5vIG1vcmVcbiAgLy8gY3JlZGVudGlhbHMgKGZlZGVyYXRlZCBvciBlbWFpbC9wYXNzd29yZCkgYXJlIGxpbmtlZCB0byB0aGUgdXNlci4gSWZcbiAgLy8gdGhlIHVzZXIgd2FzIHByZXZpb3VzbHkgYW5vbnltb3VzLCB0aGVuIHVzZSBwcm92aWRlciBkYXRhIHRvIHVwZGF0ZS5cbiAgLy8gT24gdGhlIG90aGVyIGhhbmQsIGlmIGl0IHdhcyBub3QgYW5vbnltb3VzIGJlZm9yZSwgaXQgc2hvdWxkIG5ldmVyIGJlXG4gIC8vIGNvbnNpZGVyZWQgYW5vbnltb3VzIG5vdy5cbiAgY29uc3Qgb2xkSXNBbm9ueW1vdXMgPSB1c2VyLmlzQW5vbnltb3VzO1xuICBjb25zdCBuZXdJc0Fub255bW91cyA9XG4gICAgISh1c2VyLmVtYWlsICYmIGNvcmVBY2NvdW50LnBhc3N3b3JkSGFzaCkgJiYgIXByb3ZpZGVyRGF0YT8ubGVuZ3RoO1xuICBjb25zdCBpc0Fub255bW91cyA9ICFvbGRJc0Fub255bW91cyA/IGZhbHNlIDogbmV3SXNBbm9ueW1vdXM7XG5cbiAgY29uc3QgdXBkYXRlczogUGFydGlhbDxVc2VySW50ZXJuYWw+ID0ge1xuICAgIHVpZDogY29yZUFjY291bnQubG9jYWxJZCxcbiAgICBkaXNwbGF5TmFtZTogY29yZUFjY291bnQuZGlzcGxheU5hbWUgfHwgbnVsbCxcbiAgICBwaG90b1VSTDogY29yZUFjY291bnQucGhvdG9VcmwgfHwgbnVsbCxcbiAgICBlbWFpbDogY29yZUFjY291bnQuZW1haWwgfHwgbnVsbCxcbiAgICBlbWFpbFZlcmlmaWVkOiBjb3JlQWNjb3VudC5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlLFxuICAgIHBob25lTnVtYmVyOiBjb3JlQWNjb3VudC5waG9uZU51bWJlciB8fCBudWxsLFxuICAgIHRlbmFudElkOiBjb3JlQWNjb3VudC50ZW5hbnRJZCB8fCBudWxsLFxuICAgIHByb3ZpZGVyRGF0YSxcbiAgICBtZXRhZGF0YTogbmV3IFVzZXJNZXRhZGF0YShjb3JlQWNjb3VudC5jcmVhdGVkQXQsIGNvcmVBY2NvdW50Lmxhc3RMb2dpbkF0KSxcbiAgICBpc0Fub255bW91c1xuICB9O1xuXG4gIE9iamVjdC5hc3NpZ24odXNlciwgdXBkYXRlcyk7XG59XG5cbi8qKlxuICogUmVsb2FkcyB1c2VyIGFjY291bnQgZGF0YSwgaWYgc2lnbmVkIGluLlxuICpcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVsb2FkKHVzZXI6IFVzZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgdXNlckludGVybmFsOiBVc2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcikgYXMgVXNlckludGVybmFsO1xuICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VySW50ZXJuYWwpO1xuXG4gIC8vIEV2ZW4gdGhvdWdoIHRoZSBjdXJyZW50IHVzZXIgaGFzbid0IGNoYW5nZWQsIHVwZGF0ZVxuICAvLyBjdXJyZW50IHVzZXIgd2lsbCB0cmlnZ2VyIGEgcGVyc2lzdGVuY2UgdXBkYXRlIHcvIHRoZVxuICAvLyBuZXcgaW5mby5cbiAgYXdhaXQgdXNlckludGVybmFsLmF1dGguX3BlcnNpc3RVc2VySWZDdXJyZW50KHVzZXJJbnRlcm5hbCk7XG4gIHVzZXJJbnRlcm5hbC5hdXRoLl9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQodXNlckludGVybmFsKTtcbn1cblxuZnVuY3Rpb24gbWVyZ2VQcm92aWRlckRhdGEoXG4gIG9yaWdpbmFsOiBVc2VySW5mb1tdLFxuICBuZXdEYXRhOiBVc2VySW5mb1tdXG4pOiBVc2VySW5mb1tdIHtcbiAgY29uc3QgZGVkdXBlZCA9IG9yaWdpbmFsLmZpbHRlcihcbiAgICBvID0+ICFuZXdEYXRhLnNvbWUobiA9PiBuLnByb3ZpZGVySWQgPT09IG8ucHJvdmlkZXJJZClcbiAgKTtcbiAgcmV0dXJuIFsuLi5kZWR1cGVkLCAuLi5uZXdEYXRhXTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdFByb3ZpZGVyRGF0YShwcm92aWRlcnM6IFByb3ZpZGVyVXNlckluZm9bXSk6IFVzZXJJbmZvW10ge1xuICByZXR1cm4gcHJvdmlkZXJzLm1hcCgoeyBwcm92aWRlcklkLCAuLi5wcm92aWRlciB9KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3ZpZGVySWQsXG4gICAgICB1aWQ6IHByb3ZpZGVyLnJhd0lkIHx8ICcnLFxuICAgICAgZGlzcGxheU5hbWU6IHByb3ZpZGVyLmRpc3BsYXlOYW1lIHx8IG51bGwsXG4gICAgICBlbWFpbDogcHJvdmlkZXIuZW1haWwgfHwgbnVsbCxcbiAgICAgIHBob25lTnVtYmVyOiBwcm92aWRlci5waG9uZU51bWJlciB8fCBudWxsLFxuICAgICAgcGhvdG9VUkw6IHByb3ZpZGVyLnBob3RvVXJsIHx8IG51bGxcbiAgICB9O1xuICB9KTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuXG5pbXBvcnQgeyBxdWVyeXN0cmluZyB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuaW1wb3J0IHtcbiAgX2dldEZpbmFsVGFyZ2V0LFxuICBfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmcsXG4gIEh0dHBNZXRob2QsXG4gIEh0dHBIZWFkZXJcbn0gZnJvbSAnLi4vaW5kZXgnO1xuaW1wb3J0IHsgRmV0Y2hQcm92aWRlciB9IGZyb20gJy4uLy4uL2NvcmUvdXRpbC9mZXRjaF9wcm92aWRlcic7XG5pbXBvcnQgeyBBdXRoIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcbmltcG9ydCB7IEF1dGhJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL2F1dGgnO1xuXG5leHBvcnQgY29uc3QgZW51bSBFbmRwb2ludCB7XG4gIFRPS0VOID0gJy92MS90b2tlbidcbn1cblxuLyoqIFRoZSBzZXJ2ZXIgcmVzcG9uc2VzIHdpdGggc25ha2VfY2FzZTsgd2UgY29udmVydCB0byBjYW1lbENhc2UgKi9cbmludGVyZmFjZSBSZXF1ZXN0U3RzVG9rZW5TZXJ2ZXJSZXNwb25zZSB7XG4gIGFjY2Vzc190b2tlbjogc3RyaW5nO1xuICBleHBpcmVzX2luOiBzdHJpbmc7XG4gIHJlZnJlc2hfdG9rZW46IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0U3RzVG9rZW5SZXNwb25zZSB7XG4gIGFjY2Vzc1Rva2VuOiBzdHJpbmc7XG4gIGV4cGlyZXNJbjogc3RyaW5nO1xuICByZWZyZXNoVG9rZW46IHN0cmluZztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RTdHNUb2tlbihcbiAgYXV0aDogQXV0aCxcbiAgcmVmcmVzaFRva2VuOiBzdHJpbmdcbik6IFByb21pc2U8UmVxdWVzdFN0c1Rva2VuUmVzcG9uc2U+IHtcbiAgY29uc3QgcmVzcG9uc2UgPVxuICAgIGF3YWl0IF9wZXJmb3JtRmV0Y2hXaXRoRXJyb3JIYW5kbGluZzxSZXF1ZXN0U3RzVG9rZW5TZXJ2ZXJSZXNwb25zZT4oXG4gICAgICBhdXRoLFxuICAgICAge30sXG4gICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBxdWVyeXN0cmluZyh7XG4gICAgICAgICAgJ2dyYW50X3R5cGUnOiAncmVmcmVzaF90b2tlbicsXG4gICAgICAgICAgJ3JlZnJlc2hfdG9rZW4nOiByZWZyZXNoVG9rZW5cbiAgICAgICAgfSkuc2xpY2UoMSk7XG4gICAgICAgIGNvbnN0IHsgdG9rZW5BcGlIb3N0LCBhcGlLZXkgfSA9IGF1dGguY29uZmlnO1xuICAgICAgICBjb25zdCB1cmwgPSBfZ2V0RmluYWxUYXJnZXQoXG4gICAgICAgICAgYXV0aCxcbiAgICAgICAgICB0b2tlbkFwaUhvc3QsXG4gICAgICAgICAgRW5kcG9pbnQuVE9LRU4sXG4gICAgICAgICAgYGtleT0ke2FwaUtleX1gXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGF3YWl0IChhdXRoIGFzIEF1dGhJbnRlcm5hbCkuX2dldEFkZGl0aW9uYWxIZWFkZXJzKCk7XG4gICAgICAgIGhlYWRlcnNbSHR0cEhlYWRlci5DT05URU5UX1RZUEVdID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc7XG5cbiAgICAgICAgcmV0dXJuIEZldGNoUHJvdmlkZXIuZmV0Y2goKSh1cmwsIHtcbiAgICAgICAgICBtZXRob2Q6IEh0dHBNZXRob2QuUE9TVCxcbiAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgIGJvZHlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgKTtcblxuICAvLyBUaGUgcmVzcG9uc2UgY29tZXMgYmFjayBpbiBzbmFrZV9jYXNlLiBDb252ZXJ0IHRvIGNhbWVsOlxuICByZXR1cm4ge1xuICAgIGFjY2Vzc1Rva2VuOiByZXNwb25zZS5hY2Nlc3NfdG9rZW4sXG4gICAgZXhwaXJlc0luOiByZXNwb25zZS5leHBpcmVzX2luLFxuICAgIHJlZnJlc2hUb2tlbjogcmVzcG9uc2UucmVmcmVzaF90b2tlblxuICB9O1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRmluYWxpemVNZmFSZXNwb25zZSB9IGZyb20gJy4uLy4uL2FwaS9hdXRoZW50aWNhdGlvbi9tZmEnO1xuaW1wb3J0IHsgcmVxdWVzdFN0c1Rva2VuIH0gZnJvbSAnLi4vLi4vYXBpL2F1dGhlbnRpY2F0aW9uL3Rva2VuJztcbmltcG9ydCB7IEF1dGhJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL2F1dGgnO1xuaW1wb3J0IHsgSWRUb2tlblJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vbW9kZWwvaWRfdG9rZW4nO1xuaW1wb3J0IHsgQXV0aEVycm9yQ29kZSB9IGZyb20gJy4uL2Vycm9ycyc7XG5pbXBvcnQgeyBQZXJzaXN0ZWRCbG9iIH0gZnJvbSAnLi4vcGVyc2lzdGVuY2UnO1xuaW1wb3J0IHsgX2Fzc2VydCwgZGVidWdGYWlsIH0gZnJvbSAnLi4vdXRpbC9hc3NlcnQnO1xuaW1wb3J0IHsgX3Rva2VuRXhwaXJlc0luIH0gZnJvbSAnLi9pZF90b2tlbl9yZXN1bHQnO1xuXG4vKipcbiAqIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJlZm9yZSB0aGUgb2ZmaWNpYWwgZXhwaXJhdGlvbiB0aW1lIG9mIGEgdG9rZW5cbiAqIHRvIHJlZnJlc2ggdGhhdCB0b2tlbiwgdG8gcHJvdmlkZSBhIGJ1ZmZlciBmb3IgUlBDcyB0byBjb21wbGV0ZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGVudW0gQnVmZmVyIHtcbiAgVE9LRU5fUkVGUkVTSCA9IDMwXzAwMFxufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gbWFyayB0aGlzIGNsYXNzIGFzIGludGVybmFsIGV4cGxpY2l0bHkgdG8gZXhjbHVkZSBpdCBpbiB0aGUgcHVibGljIHR5cGluZ3MsIGJlY2F1c2VcbiAqIGl0IHJlZmVyZW5jZXMgQXV0aEludGVybmFsIHdoaWNoIGhhcyBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgd2l0aCBVc2VySW50ZXJuYWwuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHNUb2tlbk1hbmFnZXIge1xuICByZWZyZXNoVG9rZW46IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBhY2Nlc3NUb2tlbjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIGV4cGlyYXRpb25UaW1lOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICBnZXQgaXNFeHBpcmVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAhdGhpcy5leHBpcmF0aW9uVGltZSB8fFxuICAgICAgRGF0ZS5ub3coKSA+IHRoaXMuZXhwaXJhdGlvblRpbWUgLSBCdWZmZXIuVE9LRU5fUkVGUkVTSFxuICAgICk7XG4gIH1cblxuICB1cGRhdGVGcm9tU2VydmVyUmVzcG9uc2UoXG4gICAgcmVzcG9uc2U6IElkVG9rZW5SZXNwb25zZSB8IEZpbmFsaXplTWZhUmVzcG9uc2VcbiAgKTogdm9pZCB7XG4gICAgX2Fzc2VydChyZXNwb25zZS5pZFRva2VuLCBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SKTtcbiAgICBfYXNzZXJ0KFxuICAgICAgdHlwZW9mIHJlc3BvbnNlLmlkVG9rZW4gIT09ICd1bmRlZmluZWQnLFxuICAgICAgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUlxuICAgICk7XG4gICAgX2Fzc2VydChcbiAgICAgIHR5cGVvZiByZXNwb25zZS5yZWZyZXNoVG9rZW4gIT09ICd1bmRlZmluZWQnLFxuICAgICAgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUlxuICAgICk7XG4gICAgY29uc3QgZXhwaXJlc0luID1cbiAgICAgICdleHBpcmVzSW4nIGluIHJlc3BvbnNlICYmIHR5cGVvZiByZXNwb25zZS5leHBpcmVzSW4gIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gTnVtYmVyKHJlc3BvbnNlLmV4cGlyZXNJbilcbiAgICAgICAgOiBfdG9rZW5FeHBpcmVzSW4ocmVzcG9uc2UuaWRUb2tlbik7XG4gICAgdGhpcy51cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uKFxuICAgICAgcmVzcG9uc2UuaWRUb2tlbixcbiAgICAgIHJlc3BvbnNlLnJlZnJlc2hUb2tlbixcbiAgICAgIGV4cGlyZXNJblxuICAgICk7XG4gIH1cblxuICBhc3luYyBnZXRUb2tlbihcbiAgICBhdXRoOiBBdXRoSW50ZXJuYWwsXG4gICAgZm9yY2VSZWZyZXNoID0gZmFsc2VcbiAgKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgX2Fzc2VydChcbiAgICAgICF0aGlzLmFjY2Vzc1Rva2VuIHx8IHRoaXMucmVmcmVzaFRva2VuLFxuICAgICAgYXV0aCxcbiAgICAgIEF1dGhFcnJvckNvZGUuVE9LRU5fRVhQSVJFRFxuICAgICk7XG5cbiAgICBpZiAoIWZvcmNlUmVmcmVzaCAmJiB0aGlzLmFjY2Vzc1Rva2VuICYmICF0aGlzLmlzRXhwaXJlZCkge1xuICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVmcmVzaFRva2VuKSB7XG4gICAgICBhd2FpdCB0aGlzLnJlZnJlc2goYXV0aCwgdGhpcy5yZWZyZXNoVG9rZW4hKTtcbiAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY2xlYXJSZWZyZXNoVG9rZW4oKTogdm9pZCB7XG4gICAgdGhpcy5yZWZyZXNoVG9rZW4gPSBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZWZyZXNoKGF1dGg6IEF1dGhJbnRlcm5hbCwgb2xkVG9rZW46IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHsgYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgZXhwaXJlc0luIH0gPSBhd2FpdCByZXF1ZXN0U3RzVG9rZW4oXG4gICAgICBhdXRoLFxuICAgICAgb2xkVG9rZW5cbiAgICApO1xuICAgIHRoaXMudXBkYXRlVG9rZW5zQW5kRXhwaXJhdGlvbihcbiAgICAgIGFjY2Vzc1Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgTnVtYmVyKGV4cGlyZXNJbilcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uKFxuICAgIGFjY2Vzc1Rva2VuOiBzdHJpbmcsXG4gICAgcmVmcmVzaFRva2VuOiBzdHJpbmcsXG4gICAgZXhwaXJlc0luU2VjOiBudW1iZXJcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5yZWZyZXNoVG9rZW4gPSByZWZyZXNoVG9rZW4gfHwgbnVsbDtcbiAgICB0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW4gfHwgbnVsbDtcbiAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gRGF0ZS5ub3coKSArIGV4cGlyZXNJblNlYyAqIDEwMDA7XG4gIH1cblxuICBzdGF0aWMgZnJvbUpTT04oYXBwTmFtZTogc3RyaW5nLCBvYmplY3Q6IFBlcnNpc3RlZEJsb2IpOiBTdHNUb2tlbk1hbmFnZXIge1xuICAgIGNvbnN0IHsgcmVmcmVzaFRva2VuLCBhY2Nlc3NUb2tlbiwgZXhwaXJhdGlvblRpbWUgfSA9IG9iamVjdDtcblxuICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgU3RzVG9rZW5NYW5hZ2VyKCk7XG4gICAgaWYgKHJlZnJlc2hUb2tlbikge1xuICAgICAgX2Fzc2VydCh0eXBlb2YgcmVmcmVzaFRva2VuID09PSAnc3RyaW5nJywgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiwge1xuICAgICAgICBhcHBOYW1lXG4gICAgICB9KTtcbiAgICAgIG1hbmFnZXIucmVmcmVzaFRva2VuID0gcmVmcmVzaFRva2VuO1xuICAgIH1cbiAgICBpZiAoYWNjZXNzVG9rZW4pIHtcbiAgICAgIF9hc3NlcnQodHlwZW9mIGFjY2Vzc1Rva2VuID09PSAnc3RyaW5nJywgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiwge1xuICAgICAgICBhcHBOYW1lXG4gICAgICB9KTtcbiAgICAgIG1hbmFnZXIuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbjtcbiAgICB9XG4gICAgaWYgKGV4cGlyYXRpb25UaW1lKSB7XG4gICAgICBfYXNzZXJ0KFxuICAgICAgICB0eXBlb2YgZXhwaXJhdGlvblRpbWUgPT09ICdudW1iZXInLFxuICAgICAgICBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SLFxuICAgICAgICB7XG4gICAgICAgICAgYXBwTmFtZVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgbWFuYWdlci5leHBpcmF0aW9uVGltZSA9IGV4cGlyYXRpb25UaW1lO1xuICAgIH1cbiAgICByZXR1cm4gbWFuYWdlcjtcbiAgfVxuXG4gIHRvSlNPTigpOiBvYmplY3Qge1xuICAgIHJldHVybiB7XG4gICAgICByZWZyZXNoVG9rZW46IHRoaXMucmVmcmVzaFRva2VuLFxuICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sXG4gICAgICBleHBpcmF0aW9uVGltZTogdGhpcy5leHBpcmF0aW9uVGltZVxuICAgIH07XG4gIH1cblxuICBfYXNzaWduKHN0c1Rva2VuTWFuYWdlcjogU3RzVG9rZW5NYW5hZ2VyKTogdm9pZCB7XG4gICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbjtcbiAgICB0aGlzLnJlZnJlc2hUb2tlbiA9IHN0c1Rva2VuTWFuYWdlci5yZWZyZXNoVG9rZW47XG4gICAgdGhpcy5leHBpcmF0aW9uVGltZSA9IHN0c1Rva2VuTWFuYWdlci5leHBpcmF0aW9uVGltZTtcbiAgfVxuXG4gIF9jbG9uZSgpOiBTdHNUb2tlbk1hbmFnZXIge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBTdHNUb2tlbk1hbmFnZXIoKSwgdGhpcy50b0pTT04oKSk7XG4gIH1cblxuICBfcGVyZm9ybVJlZnJlc2goKTogbmV2ZXIge1xuICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xuICB9XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBJZFRva2VuUmVzdWx0IH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcbmltcG9ydCB7IE5leHRGbiB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuaW1wb3J0IHtcbiAgQVBJVXNlckluZm8sXG4gIGRlbGV0ZUFjY291bnRcbn0gZnJvbSAnLi4vLi4vYXBpL2FjY291bnRfbWFuYWdlbWVudC9hY2NvdW50JztcbmltcG9ydCB7IEZpbmFsaXplTWZhUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9hcGkvYXV0aGVudGljYXRpb24vbWZhJztcbmltcG9ydCB7IEF1dGhJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL2F1dGgnO1xuaW1wb3J0IHsgSWRUb2tlblJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vbW9kZWwvaWRfdG9rZW4nO1xuaW1wb3J0IHtcbiAgTXV0YWJsZVVzZXJJbmZvLFxuICBVc2VySW50ZXJuYWwsXG4gIFVzZXJQYXJhbWV0ZXJzXG59IGZyb20gJy4uLy4uL21vZGVsL3VzZXInO1xuaW1wb3J0IHsgQXV0aEVycm9yQ29kZSB9IGZyb20gJy4uL2Vycm9ycyc7XG5pbXBvcnQgeyBQZXJzaXN0ZWRCbG9iIH0gZnJvbSAnLi4vcGVyc2lzdGVuY2UnO1xuaW1wb3J0IHsgX2Fzc2VydCB9IGZyb20gJy4uL3V0aWwvYXNzZXJ0JztcbmltcG9ydCB7IGdldElkVG9rZW5SZXN1bHQgfSBmcm9tICcuL2lkX3Rva2VuX3Jlc3VsdCc7XG5pbXBvcnQgeyBfbG9nb3V0SWZJbnZhbGlkYXRlZCB9IGZyb20gJy4vaW52YWxpZGF0aW9uJztcbmltcG9ydCB7IFByb2FjdGl2ZVJlZnJlc2ggfSBmcm9tICcuL3Byb2FjdGl2ZV9yZWZyZXNoJztcbmltcG9ydCB7IF9yZWxvYWRXaXRob3V0U2F2aW5nLCByZWxvYWQgfSBmcm9tICcuL3JlbG9hZCc7XG5pbXBvcnQgeyBTdHNUb2tlbk1hbmFnZXIgfSBmcm9tICcuL3Rva2VuX21hbmFnZXInO1xuaW1wb3J0IHsgVXNlck1ldGFkYXRhIH0gZnJvbSAnLi91c2VyX21ldGFkYXRhJztcbmltcG9ydCB7IFByb3ZpZGVySWQgfSBmcm9tICcuLi8uLi9tb2RlbC9lbnVtcyc7XG5cbmZ1bmN0aW9uIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKFxuICBhc3NlcnRpb246IHVua25vd24sXG4gIGFwcE5hbWU6IHN0cmluZ1xuKTogYXNzZXJ0cyBhc3NlcnRpb24gaXMgc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgX2Fzc2VydChcbiAgICB0eXBlb2YgYXNzZXJ0aW9uID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgYXNzZXJ0aW9uID09PSAndW5kZWZpbmVkJyxcbiAgICBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SLFxuICAgIHsgYXBwTmFtZSB9XG4gICk7XG59XG5cbmV4cG9ydCBjbGFzcyBVc2VySW1wbCBpbXBsZW1lbnRzIFVzZXJJbnRlcm5hbCB7XG4gIC8vIEZvciB0aGUgdXNlciBvYmplY3QsIHByb3ZpZGVyIGlzIGFsd2F5cyBGaXJlYmFzZS5cbiAgcmVhZG9ubHkgcHJvdmlkZXJJZCA9IFByb3ZpZGVySWQuRklSRUJBU0U7XG4gIHN0c1Rva2VuTWFuYWdlcjogU3RzVG9rZW5NYW5hZ2VyO1xuICAvLyBMYXN0IGtub3duIGFjY2Vzc1Rva2VuIHNvIHdlIGtub3cgd2hlbiBpdCBjaGFuZ2VzXG4gIHByaXZhdGUgYWNjZXNzVG9rZW46IHN0cmluZyB8IG51bGw7XG5cbiAgdWlkOiBzdHJpbmc7XG4gIGF1dGg6IEF1dGhJbnRlcm5hbDtcbiAgZW1haWxWZXJpZmllZDogYm9vbGVhbjtcbiAgaXNBbm9ueW1vdXM6IGJvb2xlYW47XG4gIHRlbmFudElkOiBzdHJpbmcgfCBudWxsO1xuICByZWFkb25seSBtZXRhZGF0YTogVXNlck1ldGFkYXRhO1xuICBwcm92aWRlckRhdGE6IE11dGFibGVVc2VySW5mb1tdO1xuXG4gIC8vIE9wdGlvbmFsIGZpZWxkcyBmcm9tIFVzZXJJbmZvXG4gIGRpc3BsYXlOYW1lOiBzdHJpbmcgfCBudWxsO1xuICBlbWFpbDogc3RyaW5nIHwgbnVsbDtcbiAgcGhvbmVOdW1iZXI6IHN0cmluZyB8IG51bGw7XG4gIHBob3RvVVJMOiBzdHJpbmcgfCBudWxsO1xuXG4gIF9yZWRpcmVjdEV2ZW50SWQ/OiBzdHJpbmc7XG4gIHByaXZhdGUgcmVhZG9ubHkgcHJvYWN0aXZlUmVmcmVzaCA9IG5ldyBQcm9hY3RpdmVSZWZyZXNoKHRoaXMpO1xuXG4gIGNvbnN0cnVjdG9yKHsgdWlkLCBhdXRoLCBzdHNUb2tlbk1hbmFnZXIsIC4uLm9wdCB9OiBVc2VyUGFyYW1ldGVycykge1xuICAgIHRoaXMudWlkID0gdWlkO1xuICAgIHRoaXMuYXV0aCA9IGF1dGg7XG4gICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIgPSBzdHNUb2tlbk1hbmFnZXI7XG4gICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbjtcbiAgICB0aGlzLmRpc3BsYXlOYW1lID0gb3B0LmRpc3BsYXlOYW1lIHx8IG51bGw7XG4gICAgdGhpcy5lbWFpbCA9IG9wdC5lbWFpbCB8fCBudWxsO1xuICAgIHRoaXMuZW1haWxWZXJpZmllZCA9IG9wdC5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlO1xuICAgIHRoaXMucGhvbmVOdW1iZXIgPSBvcHQucGhvbmVOdW1iZXIgfHwgbnVsbDtcbiAgICB0aGlzLnBob3RvVVJMID0gb3B0LnBob3RvVVJMIHx8IG51bGw7XG4gICAgdGhpcy5pc0Fub255bW91cyA9IG9wdC5pc0Fub255bW91cyB8fCBmYWxzZTtcbiAgICB0aGlzLnRlbmFudElkID0gb3B0LnRlbmFudElkIHx8IG51bGw7XG4gICAgdGhpcy5wcm92aWRlckRhdGEgPSBvcHQucHJvdmlkZXJEYXRhID8gWy4uLm9wdC5wcm92aWRlckRhdGFdIDogW107XG4gICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBVc2VyTWV0YWRhdGEoXG4gICAgICBvcHQuY3JlYXRlZEF0IHx8IHVuZGVmaW5lZCxcbiAgICAgIG9wdC5sYXN0TG9naW5BdCB8fCB1bmRlZmluZWRcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2g/OiBib29sZWFuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKFxuICAgICAgdGhpcyxcbiAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmdldFRva2VuKHRoaXMuYXV0aCwgZm9yY2VSZWZyZXNoKVxuICAgICk7XG4gICAgX2Fzc2VydChhY2Nlc3NUb2tlbiwgdGhpcy5hdXRoLCBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SKTtcblxuICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuICE9PSBhY2Nlc3NUb2tlbikge1xuICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xuICAgICAgYXdhaXQgdGhpcy5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh0aGlzKTtcbiAgICAgIHRoaXMuYXV0aC5fbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHRoaXMpO1xuICAgIH1cblxuICAgIHJldHVybiBhY2Nlc3NUb2tlbjtcbiAgfVxuXG4gIGdldElkVG9rZW5SZXN1bHQoZm9yY2VSZWZyZXNoPzogYm9vbGVhbik6IFByb21pc2U8SWRUb2tlblJlc3VsdD4ge1xuICAgIHJldHVybiBnZXRJZFRva2VuUmVzdWx0KHRoaXMsIGZvcmNlUmVmcmVzaCk7XG4gIH1cblxuICByZWxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHJlbG9hZCh0aGlzKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVsb2FkVXNlckluZm86IEFQSVVzZXJJbmZvIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcmVsb2FkTGlzdGVuZXI6IE5leHRGbjxBUElVc2VySW5mbz4gfCBudWxsID0gbnVsbDtcblxuICBfYXNzaWduKHVzZXI6IFVzZXJJbnRlcm5hbCk6IHZvaWQge1xuICAgIGlmICh0aGlzID09PSB1c2VyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIF9hc3NlcnQodGhpcy51aWQgPT09IHVzZXIudWlkLCB0aGlzLmF1dGgsIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IpO1xuICAgIHRoaXMuZGlzcGxheU5hbWUgPSB1c2VyLmRpc3BsYXlOYW1lO1xuICAgIHRoaXMucGhvdG9VUkwgPSB1c2VyLnBob3RvVVJMO1xuICAgIHRoaXMuZW1haWwgPSB1c2VyLmVtYWlsO1xuICAgIHRoaXMuZW1haWxWZXJpZmllZCA9IHVzZXIuZW1haWxWZXJpZmllZDtcbiAgICB0aGlzLnBob25lTnVtYmVyID0gdXNlci5waG9uZU51bWJlcjtcbiAgICB0aGlzLmlzQW5vbnltb3VzID0gdXNlci5pc0Fub255bW91cztcbiAgICB0aGlzLnRlbmFudElkID0gdXNlci50ZW5hbnRJZDtcbiAgICB0aGlzLnByb3ZpZGVyRGF0YSA9IHVzZXIucHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoeyAuLi51c2VySW5mbyB9KSk7XG4gICAgdGhpcy5tZXRhZGF0YS5fY29weSh1c2VyLm1ldGFkYXRhKTtcbiAgICB0aGlzLnN0c1Rva2VuTWFuYWdlci5fYXNzaWduKHVzZXIuc3RzVG9rZW5NYW5hZ2VyKTtcbiAgfVxuXG4gIF9jbG9uZShhdXRoOiBBdXRoSW50ZXJuYWwpOiBVc2VySW50ZXJuYWwge1xuICAgIGNvbnN0IG5ld1VzZXIgPSBuZXcgVXNlckltcGwoe1xuICAgICAgLi4udGhpcyxcbiAgICAgIGF1dGgsXG4gICAgICBzdHNUb2tlbk1hbmFnZXI6IHRoaXMuc3RzVG9rZW5NYW5hZ2VyLl9jbG9uZSgpXG4gICAgfSk7XG4gICAgbmV3VXNlci5tZXRhZGF0YS5fY29weSh0aGlzLm1ldGFkYXRhKTtcbiAgICByZXR1cm4gbmV3VXNlcjtcbiAgfVxuXG4gIF9vblJlbG9hZChjYWxsYmFjazogTmV4dEZuPEFQSVVzZXJJbmZvPik6IHZvaWQge1xuICAgIC8vIFRoZXJlIHNob3VsZCBvbmx5IGV2ZXIgYmUgb25lIGxpc3RlbmVyLCBhbmQgdGhhdCBpcyBhIHNpbmdsZSBpbnN0YW5jZSBvZiBNdWx0aUZhY3RvclVzZXJcbiAgICBfYXNzZXJ0KCF0aGlzLnJlbG9hZExpc3RlbmVyLCB0aGlzLmF1dGgsIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IpO1xuICAgIHRoaXMucmVsb2FkTGlzdGVuZXIgPSBjYWxsYmFjaztcbiAgICBpZiAodGhpcy5yZWxvYWRVc2VySW5mbykge1xuICAgICAgdGhpcy5fbm90aWZ5UmVsb2FkTGlzdGVuZXIodGhpcy5yZWxvYWRVc2VySW5mbyk7XG4gICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBfbm90aWZ5UmVsb2FkTGlzdGVuZXIodXNlckluZm86IEFQSVVzZXJJbmZvKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucmVsb2FkTGlzdGVuZXIpIHtcbiAgICAgIHRoaXMucmVsb2FkTGlzdGVuZXIodXNlckluZm8pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBubyBsaXN0ZW5lciBpcyBzdWJzY3JpYmVkIHlldCwgc2F2ZSB0aGUgcmVzdWx0IHNvIGl0J3MgYXZhaWxhYmxlIHdoZW4gdGhleSBkbyBzdWJzY3JpYmVcbiAgICAgIHRoaXMucmVsb2FkVXNlckluZm8gPSB1c2VySW5mbztcbiAgICB9XG4gIH1cblxuICBfc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCk6IHZvaWQge1xuICAgIHRoaXMucHJvYWN0aXZlUmVmcmVzaC5fc3RhcnQoKTtcbiAgfVxuXG4gIF9zdG9wUHJvYWN0aXZlUmVmcmVzaCgpOiB2b2lkIHtcbiAgICB0aGlzLnByb2FjdGl2ZVJlZnJlc2guX3N0b3AoKTtcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShcbiAgICByZXNwb25zZTogSWRUb2tlblJlc3BvbnNlIHwgRmluYWxpemVNZmFSZXNwb25zZSxcbiAgICByZWxvYWQgPSBmYWxzZVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBsZXQgdG9rZW5zUmVmcmVzaGVkID0gZmFsc2U7XG4gICAgaWYgKFxuICAgICAgcmVzcG9uc2UuaWRUb2tlbiAmJlxuICAgICAgcmVzcG9uc2UuaWRUb2tlbiAhPT0gdGhpcy5zdHNUb2tlbk1hbmFnZXIuYWNjZXNzVG9rZW5cbiAgICApIHtcbiAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLnVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICB0b2tlbnNSZWZyZXNoZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChyZWxvYWQpIHtcbiAgICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHRoaXMpO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodGhpcyk7XG4gICAgaWYgKHRva2Vuc1JlZnJlc2hlZCkge1xuICAgICAgdGhpcy5hdXRoLl9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVsZXRlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB0aGlzLmdldElkVG9rZW4oKTtcbiAgICBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh0aGlzLCBkZWxldGVBY2NvdW50KHRoaXMuYXV0aCwgeyBpZFRva2VuIH0pKTtcbiAgICB0aGlzLnN0c1Rva2VuTWFuYWdlci5jbGVhclJlZnJlc2hUb2tlbigpO1xuXG4gICAgLy8gVE9ETzogRGV0ZXJtaW5lIGlmIGNhbmNlbGxhYmxlLXByb21pc2VzIGFyZSBuZWNlc3NhcnkgdG8gdXNlIGluIHRoaXMgY2xhc3Mgc28gdGhhdCBkZWxldGUoKVxuICAgIC8vICAgICAgIGNhbmNlbHMgcGVuZGluZyBhY3Rpb25zLi4uXG5cbiAgICByZXR1cm4gdGhpcy5hdXRoLnNpZ25PdXQoKTtcbiAgfVxuXG4gIHRvSlNPTigpOiBQZXJzaXN0ZWRCbG9iIHtcbiAgICByZXR1cm4ge1xuICAgICAgdWlkOiB0aGlzLnVpZCxcbiAgICAgIGVtYWlsOiB0aGlzLmVtYWlsIHx8IHVuZGVmaW5lZCxcbiAgICAgIGVtYWlsVmVyaWZpZWQ6IHRoaXMuZW1haWxWZXJpZmllZCxcbiAgICAgIGRpc3BsYXlOYW1lOiB0aGlzLmRpc3BsYXlOYW1lIHx8IHVuZGVmaW5lZCxcbiAgICAgIGlzQW5vbnltb3VzOiB0aGlzLmlzQW5vbnltb3VzLFxuICAgICAgcGhvdG9VUkw6IHRoaXMucGhvdG9VUkwgfHwgdW5kZWZpbmVkLFxuICAgICAgcGhvbmVOdW1iZXI6IHRoaXMucGhvbmVOdW1iZXIgfHwgdW5kZWZpbmVkLFxuICAgICAgdGVuYW50SWQ6IHRoaXMudGVuYW50SWQgfHwgdW5kZWZpbmVkLFxuICAgICAgcHJvdmlkZXJEYXRhOiB0aGlzLnByb3ZpZGVyRGF0YS5tYXAodXNlckluZm8gPT4gKHsgLi4udXNlckluZm8gfSkpLFxuICAgICAgc3RzVG9rZW5NYW5hZ2VyOiB0aGlzLnN0c1Rva2VuTWFuYWdlci50b0pTT04oKSxcbiAgICAgIC8vIFJlZGlyZWN0IGV2ZW50IElEIG11c3QgYmUgbWFpbnRhaW5lZCBpbiBjYXNlIHRoZXJlIGlzIGEgcGVuZGluZ1xuICAgICAgLy8gcmVkaXJlY3QgZXZlbnQuXG4gICAgICBfcmVkaXJlY3RFdmVudElkOiB0aGlzLl9yZWRpcmVjdEV2ZW50SWQsXG4gICAgICAuLi50aGlzLm1ldGFkYXRhLnRvSlNPTigpLFxuXG4gICAgICAvLyBSZXF1aXJlZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBsZWdhY3kgU0RLIChnby9maXJlYmFzZS1hdXRoLXNkay1wZXJzaXN0ZW5jZS1wYXJzaW5nKTpcbiAgICAgIGFwaUtleTogdGhpcy5hdXRoLmNvbmZpZy5hcGlLZXksXG4gICAgICBhcHBOYW1lOiB0aGlzLmF1dGgubmFtZVxuICAgICAgLy8gTWlzc2luZyBhdXRoRG9tYWluIHdpbGwgYmUgdG9sZXJhdGVkIGJ5IHRoZSBsZWdhY3kgU0RLLlxuICAgICAgLy8gc3RzVG9rZW5NYW5hZ2VyLmFwaUtleSBpc24ndCBhY3R1YWxseSByZXF1aXJlZCAoZGVzcGl0ZSB0aGUgbGVnYWN5IFNESyBwZXJzaXN0aW5nIGl0KS5cbiAgICB9O1xuICB9XG5cbiAgZ2V0IHJlZnJlc2hUb2tlbigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnN0c1Rva2VuTWFuYWdlci5yZWZyZXNoVG9rZW4gfHwgJyc7XG4gIH1cblxuICBzdGF0aWMgX2Zyb21KU09OKGF1dGg6IEF1dGhJbnRlcm5hbCwgb2JqZWN0OiBQZXJzaXN0ZWRCbG9iKTogVXNlckludGVybmFsIHtcbiAgICBjb25zdCBkaXNwbGF5TmFtZSA9IG9iamVjdC5kaXNwbGF5TmFtZSA/PyB1bmRlZmluZWQ7XG4gICAgY29uc3QgZW1haWwgPSBvYmplY3QuZW1haWwgPz8gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHBob25lTnVtYmVyID0gb2JqZWN0LnBob25lTnVtYmVyID8/IHVuZGVmaW5lZDtcbiAgICBjb25zdCBwaG90b1VSTCA9IG9iamVjdC5waG90b1VSTCA/PyB1bmRlZmluZWQ7XG4gICAgY29uc3QgdGVuYW50SWQgPSBvYmplY3QudGVuYW50SWQgPz8gdW5kZWZpbmVkO1xuICAgIGNvbnN0IF9yZWRpcmVjdEV2ZW50SWQgPSBvYmplY3QuX3JlZGlyZWN0RXZlbnRJZCA/PyB1bmRlZmluZWQ7XG4gICAgY29uc3QgY3JlYXRlZEF0ID0gb2JqZWN0LmNyZWF0ZWRBdCA/PyB1bmRlZmluZWQ7XG4gICAgY29uc3QgbGFzdExvZ2luQXQgPSBvYmplY3QubGFzdExvZ2luQXQgPz8gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHtcbiAgICAgIHVpZCxcbiAgICAgIGVtYWlsVmVyaWZpZWQsXG4gICAgICBpc0Fub255bW91cyxcbiAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgIHN0c1Rva2VuTWFuYWdlcjogcGxhaW5PYmplY3RUb2tlbk1hbmFnZXJcbiAgICB9ID0gb2JqZWN0O1xuXG4gICAgX2Fzc2VydCh1aWQgJiYgcGxhaW5PYmplY3RUb2tlbk1hbmFnZXIsIGF1dGgsIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IpO1xuXG4gICAgY29uc3Qgc3RzVG9rZW5NYW5hZ2VyID0gU3RzVG9rZW5NYW5hZ2VyLmZyb21KU09OKFxuICAgICAgdGhpcy5uYW1lLFxuICAgICAgcGxhaW5PYmplY3RUb2tlbk1hbmFnZXIgYXMgUGVyc2lzdGVkQmxvYlxuICAgICk7XG5cbiAgICBfYXNzZXJ0KHR5cGVvZiB1aWQgPT09ICdzdHJpbmcnLCBhdXRoLCBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SKTtcbiAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChkaXNwbGF5TmFtZSwgYXV0aC5uYW1lKTtcbiAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChlbWFpbCwgYXV0aC5uYW1lKTtcbiAgICBfYXNzZXJ0KFxuICAgICAgdHlwZW9mIGVtYWlsVmVyaWZpZWQgPT09ICdib29sZWFuJyxcbiAgICAgIGF1dGgsXG4gICAgICBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SXG4gICAgKTtcbiAgICBfYXNzZXJ0KFxuICAgICAgdHlwZW9mIGlzQW5vbnltb3VzID09PSAnYm9vbGVhbicsXG4gICAgICBhdXRoLFxuICAgICAgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUlxuICAgICk7XG4gICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQocGhvbmVOdW1iZXIsIGF1dGgubmFtZSk7XG4gICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQocGhvdG9VUkwsIGF1dGgubmFtZSk7XG4gICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQodGVuYW50SWQsIGF1dGgubmFtZSk7XG4gICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoX3JlZGlyZWN0RXZlbnRJZCwgYXV0aC5uYW1lKTtcbiAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChjcmVhdGVkQXQsIGF1dGgubmFtZSk7XG4gICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQobGFzdExvZ2luQXQsIGF1dGgubmFtZSk7XG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VySW1wbCh7XG4gICAgICB1aWQsXG4gICAgICBhdXRoLFxuICAgICAgZW1haWwsXG4gICAgICBlbWFpbFZlcmlmaWVkLFxuICAgICAgZGlzcGxheU5hbWUsXG4gICAgICBpc0Fub255bW91cyxcbiAgICAgIHBob3RvVVJMLFxuICAgICAgcGhvbmVOdW1iZXIsXG4gICAgICB0ZW5hbnRJZCxcbiAgICAgIHN0c1Rva2VuTWFuYWdlcixcbiAgICAgIGNyZWF0ZWRBdCxcbiAgICAgIGxhc3RMb2dpbkF0XG4gICAgfSk7XG5cbiAgICBpZiAocHJvdmlkZXJEYXRhICYmIEFycmF5LmlzQXJyYXkocHJvdmlkZXJEYXRhKSkge1xuICAgICAgdXNlci5wcm92aWRlckRhdGEgPSBwcm92aWRlckRhdGEubWFwKHVzZXJJbmZvID0+ICh7IC4uLnVzZXJJbmZvIH0pKTtcbiAgICB9XG5cbiAgICBpZiAoX3JlZGlyZWN0RXZlbnRJZCkge1xuICAgICAgdXNlci5fcmVkaXJlY3RFdmVudElkID0gX3JlZGlyZWN0RXZlbnRJZDtcbiAgICB9XG5cbiAgICByZXR1cm4gdXNlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGEgVXNlciBmcm9tIGFuIGlkVG9rZW4gc2VydmVyIHJlc3BvbnNlXG4gICAqIEBwYXJhbSBhdXRoXG4gICAqIEBwYXJhbSBpZFRva2VuUmVzcG9uc2VcbiAgICovXG4gIHN0YXRpYyBhc3luYyBfZnJvbUlkVG9rZW5SZXNwb25zZShcbiAgICBhdXRoOiBBdXRoSW50ZXJuYWwsXG4gICAgaWRUb2tlblJlc3BvbnNlOiBJZFRva2VuUmVzcG9uc2UsXG4gICAgaXNBbm9ueW1vdXM6IGJvb2xlYW4gPSBmYWxzZVxuICApOiBQcm9taXNlPFVzZXJJbnRlcm5hbD4ge1xuICAgIGNvbnN0IHN0c1Rva2VuTWFuYWdlciA9IG5ldyBTdHNUb2tlbk1hbmFnZXIoKTtcbiAgICBzdHNUb2tlbk1hbmFnZXIudXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlKGlkVG9rZW5SZXNwb25zZSk7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBGaXJlYmFzZSBBdXRoIHVzZXIuXG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VySW1wbCh7XG4gICAgICB1aWQ6IGlkVG9rZW5SZXNwb25zZS5sb2NhbElkLFxuICAgICAgYXV0aCxcbiAgICAgIHN0c1Rva2VuTWFuYWdlcixcbiAgICAgIGlzQW5vbnltb3VzXG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGVzIHRoZSB1c2VyIGluZm8gYW5kIGRhdGEgYW5kIHJlc29sdmVzIHdpdGggYSB1c2VyIGluc3RhbmNlLlxuICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xuICAgIHJldHVybiB1c2VyO1xuICB9XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBkZWJ1Z0Fzc2VydCB9IGZyb20gJy4vYXNzZXJ0JztcblxuLyoqXG4gKiBPdXIgQVBJIGhhcyBhIGxvdCBvZiBvbmUtb2ZmIGNvbnN0YW50cyB0aGF0IGFyZSB1c2VkIHRvIGRvIHRoaW5ncy5cbiAqIFVuZm9ydHVuYXRlbHkgd2UgY2FuJ3QgZXhwb3J0IHRoZXNlIGFzIGNsYXNzZXMgaW5zdGFudGlhdGVkIGRpcmVjdGx5IHNpbmNlXG4gKiB0aGUgY29uc3RydWN0b3IgbWF5IHNpZGUgZWZmZWN0IGFuZCB0aGVyZWZvcmUgY2FuJ3QgYmUgcHJvdmVuIHRvIGJlIHNhZmVseVxuICogY3VsbGVkLiBJbnN0ZWFkLCB3ZSBleHBvcnQgdGhlc2UgY2xhc3NlcyB0aGVtc2VsdmVzIGFzIGEgbG93ZXJDYW1lbENhc2VcbiAqIGNvbnN0YW50LCBhbmQgaW5zdGFudGlhdGUgdGhlbSB1bmRlciB0aGUgaG9vZC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTaW5nbGV0b25JbnN0YW50aWF0b3I8VD4ge1xuICBuZXcgKCk6IFQ7XG59XG5cbmNvbnN0IGluc3RhbmNlQ2FjaGU6IE1hcDx1bmtub3duLCB1bmtub3duPiA9IG5ldyBNYXAoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9nZXRJbnN0YW5jZTxUPihjbHM6IHVua25vd24pOiBUIHtcbiAgZGVidWdBc3NlcnQoY2xzIGluc3RhbmNlb2YgRnVuY3Rpb24sICdFeHBlY3RlZCBhIGNsYXNzIGRlZmluaXRpb24nKTtcbiAgbGV0IGluc3RhbmNlID0gaW5zdGFuY2VDYWNoZS5nZXQoY2xzKSBhcyBUIHwgdW5kZWZpbmVkO1xuXG4gIGlmIChpbnN0YW5jZSkge1xuICAgIGRlYnVnQXNzZXJ0KFxuICAgICAgaW5zdGFuY2UgaW5zdGFuY2VvZiBjbHMsXG4gICAgICAnSW5zdGFuY2Ugc3RvcmVkIGluIGNhY2hlIG1pc21hdGNoZWQgd2l0aCBjbGFzcydcbiAgICApO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfVxuXG4gIGluc3RhbmNlID0gbmV3IChjbHMgYXMgU2luZ2xldG9uSW5zdGFudGlhdG9yPFQ+KSgpO1xuICBpbnN0YW5jZUNhY2hlLnNldChjbHMsIGluc3RhbmNlKTtcbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX2NsZWFySW5zdGFuY2VNYXAoKTogdm9pZCB7XG4gIGluc3RhbmNlQ2FjaGUuY2xlYXIoKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFBlcnNpc3RlbmNlIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcblxuaW1wb3J0IHtcbiAgUGVyc2lzdGVuY2VJbnRlcm5hbCxcbiAgUGVyc2lzdGVuY2VUeXBlLFxuICBQZXJzaXN0ZW5jZVZhbHVlLFxuICBTdG9yYWdlRXZlbnRMaXN0ZW5lclxufSBmcm9tICcuLi9wZXJzaXN0ZW5jZSc7XG5cbmV4cG9ydCBjbGFzcyBJbk1lbW9yeVBlcnNpc3RlbmNlIGltcGxlbWVudHMgUGVyc2lzdGVuY2VJbnRlcm5hbCB7XG4gIHN0YXRpYyB0eXBlOiAnTk9ORScgPSAnTk9ORSc7XG4gIHJlYWRvbmx5IHR5cGUgPSBQZXJzaXN0ZW5jZVR5cGUuTk9ORTtcbiAgc3RvcmFnZTogUmVjb3JkPHN0cmluZywgUGVyc2lzdGVuY2VWYWx1ZT4gPSB7fTtcblxuICBhc3luYyBfaXNBdmFpbGFibGUoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBhc3luYyBfc2V0KGtleTogc3RyaW5nLCB2YWx1ZTogUGVyc2lzdGVuY2VWYWx1ZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuc3RvcmFnZVtrZXldID0gdmFsdWU7XG4gIH1cblxuICBhc3luYyBfZ2V0PFQgZXh0ZW5kcyBQZXJzaXN0ZW5jZVZhbHVlPihrZXk6IHN0cmluZyk6IFByb21pc2U8VCB8IG51bGw+IHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuc3RvcmFnZVtrZXldO1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6ICh2YWx1ZSBhcyBUKTtcbiAgfVxuXG4gIGFzeW5jIF9yZW1vdmUoa2V5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBkZWxldGUgdGhpcy5zdG9yYWdlW2tleV07XG4gIH1cblxuICBfYWRkTGlzdGVuZXIoX2tleTogc3RyaW5nLCBfbGlzdGVuZXI6IFN0b3JhZ2VFdmVudExpc3RlbmVyKTogdm9pZCB7XG4gICAgLy8gTGlzdGVuZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBpbi1tZW1vcnkgc3RvcmFnZSBzaW5jZSBpdCBjYW5ub3QgYmUgc2hhcmVkIGFjcm9zcyB3aW5kb3dzL3dvcmtlcnNcbiAgICByZXR1cm47XG4gIH1cblxuICBfcmVtb3ZlTGlzdGVuZXIoX2tleTogc3RyaW5nLCBfbGlzdGVuZXI6IFN0b3JhZ2VFdmVudExpc3RlbmVyKTogdm9pZCB7XG4gICAgLy8gTGlzdGVuZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBpbi1tZW1vcnkgc3RvcmFnZSBzaW5jZSBpdCBjYW5ub3QgYmUgc2hhcmVkIGFjcm9zcyB3aW5kb3dzL3dvcmtlcnNcbiAgICByZXR1cm47XG4gIH1cbn1cblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgJ05PTkUnLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGluTWVtb3J5UGVyc2lzdGVuY2U6IFBlcnNpc3RlbmNlID0gSW5NZW1vcnlQZXJzaXN0ZW5jZTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEFwaUtleSwgQXBwTmFtZSwgQXV0aEludGVybmFsIH0gZnJvbSAnLi4vLi4vbW9kZWwvYXV0aCc7XG5pbXBvcnQgeyBVc2VySW50ZXJuYWwgfSBmcm9tICcuLi8uLi9tb2RlbC91c2VyJztcbmltcG9ydCB7IFBlcnNpc3RlZEJsb2IsIFBlcnNpc3RlbmNlSW50ZXJuYWwgfSBmcm9tICcuLi9wZXJzaXN0ZW5jZSc7XG5pbXBvcnQgeyBVc2VySW1wbCB9IGZyb20gJy4uL3VzZXIvdXNlcl9pbXBsJztcbmltcG9ydCB7IF9nZXRJbnN0YW5jZSB9IGZyb20gJy4uL3V0aWwvaW5zdGFudGlhdG9yJztcbmltcG9ydCB7IGluTWVtb3J5UGVyc2lzdGVuY2UgfSBmcm9tICcuL2luX21lbW9yeSc7XG5cbmV4cG9ydCBjb25zdCBlbnVtIEtleU5hbWUge1xuICBBVVRIX1VTRVIgPSAnYXV0aFVzZXInLFxuICBBVVRIX0VWRU5UID0gJ2F1dGhFdmVudCcsXG4gIFJFRElSRUNUX1VTRVIgPSAncmVkaXJlY3RVc2VyJyxcbiAgUEVSU0lTVEVOQ0VfVVNFUiA9ICdwZXJzaXN0ZW5jZSdcbn1cbmV4cG9ydCBjb25zdCBlbnVtIE5hbWVzcGFjZSB7XG4gIFBFUlNJU1RFTkNFID0gJ2ZpcmViYXNlJ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX3BlcnNpc3RlbmNlS2V5TmFtZShcbiAga2V5OiBzdHJpbmcsXG4gIGFwaUtleTogQXBpS2V5LFxuICBhcHBOYW1lOiBBcHBOYW1lXG4pOiBzdHJpbmcge1xuICByZXR1cm4gYCR7TmFtZXNwYWNlLlBFUlNJU1RFTkNFfToke2tleX06JHthcGlLZXl9OiR7YXBwTmFtZX1gO1xufVxuXG5leHBvcnQgY2xhc3MgUGVyc2lzdGVuY2VVc2VyTWFuYWdlciB7XG4gIHByaXZhdGUgcmVhZG9ubHkgZnVsbFVzZXJLZXk6IHN0cmluZztcbiAgcHJpdmF0ZSByZWFkb25seSBmdWxsUGVyc2lzdGVuY2VLZXk6IHN0cmluZztcbiAgcHJpdmF0ZSByZWFkb25seSBib3VuZEV2ZW50SGFuZGxlcjogKCkgPT4gdm9pZDtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBwZXJzaXN0ZW5jZTogUGVyc2lzdGVuY2VJbnRlcm5hbCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGF1dGg6IEF1dGhJbnRlcm5hbCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IHVzZXJLZXk6IHN0cmluZ1xuICApIHtcbiAgICBjb25zdCB7IGNvbmZpZywgbmFtZSB9ID0gdGhpcy5hdXRoO1xuICAgIHRoaXMuZnVsbFVzZXJLZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKHRoaXMudXNlcktleSwgY29uZmlnLmFwaUtleSwgbmFtZSk7XG4gICAgdGhpcy5mdWxsUGVyc2lzdGVuY2VLZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKFxuICAgICAgS2V5TmFtZS5QRVJTSVNURU5DRV9VU0VSLFxuICAgICAgY29uZmlnLmFwaUtleSxcbiAgICAgIG5hbWVcbiAgICApO1xuICAgIHRoaXMuYm91bmRFdmVudEhhbmRsZXIgPSBhdXRoLl9vblN0b3JhZ2VFdmVudC5iaW5kKGF1dGgpO1xuICAgIHRoaXMucGVyc2lzdGVuY2UuX2FkZExpc3RlbmVyKHRoaXMuZnVsbFVzZXJLZXksIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xuICB9XG5cbiAgc2V0Q3VycmVudFVzZXIodXNlcjogVXNlckludGVybmFsKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuX3NldCh0aGlzLmZ1bGxVc2VyS2V5LCB1c2VyLnRvSlNPTigpKTtcbiAgfVxuXG4gIGFzeW5jIGdldEN1cnJlbnRVc2VyKCk6IFByb21pc2U8VXNlckludGVybmFsIHwgbnVsbD4ge1xuICAgIGNvbnN0IGJsb2IgPSBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLl9nZXQ8UGVyc2lzdGVkQmxvYj4odGhpcy5mdWxsVXNlcktleSk7XG4gICAgcmV0dXJuIGJsb2IgPyBVc2VySW1wbC5fZnJvbUpTT04odGhpcy5hdXRoLCBibG9iKSA6IG51bGw7XG4gIH1cblxuICByZW1vdmVDdXJyZW50VXNlcigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fcmVtb3ZlKHRoaXMuZnVsbFVzZXJLZXkpO1xuICB9XG5cbiAgc2F2ZVBlcnNpc3RlbmNlRm9yUmVkaXJlY3QoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuX3NldChcbiAgICAgIHRoaXMuZnVsbFBlcnNpc3RlbmNlS2V5LFxuICAgICAgdGhpcy5wZXJzaXN0ZW5jZS50eXBlXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIHNldFBlcnNpc3RlbmNlKG5ld1BlcnNpc3RlbmNlOiBQZXJzaXN0ZW5jZUludGVybmFsKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMucGVyc2lzdGVuY2UgPT09IG5ld1BlcnNpc3RlbmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCB0aGlzLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgYXdhaXQgdGhpcy5yZW1vdmVDdXJyZW50VXNlcigpO1xuXG4gICAgdGhpcy5wZXJzaXN0ZW5jZSA9IG5ld1BlcnNpc3RlbmNlO1xuXG4gICAgaWYgKGN1cnJlbnRVc2VyKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXRDdXJyZW50VXNlcihjdXJyZW50VXNlcik7XG4gICAgfVxuICB9XG5cbiAgZGVsZXRlKCk6IHZvaWQge1xuICAgIHRoaXMucGVyc2lzdGVuY2UuX3JlbW92ZUxpc3RlbmVyKHRoaXMuZnVsbFVzZXJLZXksIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZShcbiAgICBhdXRoOiBBdXRoSW50ZXJuYWwsXG4gICAgcGVyc2lzdGVuY2VIaWVyYXJjaHk6IFBlcnNpc3RlbmNlSW50ZXJuYWxbXSxcbiAgICB1c2VyS2V5ID0gS2V5TmFtZS5BVVRIX1VTRVJcbiAgKTogUHJvbWlzZTxQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyPiB7XG4gICAgaWYgKCFwZXJzaXN0ZW5jZUhpZXJhcmNoeS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihcbiAgICAgICAgX2dldEluc3RhbmNlKGluTWVtb3J5UGVyc2lzdGVuY2UpLFxuICAgICAgICBhdXRoLFxuICAgICAgICB1c2VyS2V5XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEVsaW1pbmF0ZSBhbnkgcGVyc2lzdGVuY2VzIHRoYXQgYXJlIG5vdCBhdmFpbGFibGVcbiAgICBjb25zdCBhdmFpbGFibGVQZXJzaXN0ZW5jZXMgPSAoXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgcGVyc2lzdGVuY2VIaWVyYXJjaHkubWFwKGFzeW5jIHBlcnNpc3RlbmNlID0+IHtcbiAgICAgICAgICBpZiAoYXdhaXQgcGVyc2lzdGVuY2UuX2lzQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBwZXJzaXN0ZW5jZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICApLmZpbHRlcihwZXJzaXN0ZW5jZSA9PiBwZXJzaXN0ZW5jZSkgYXMgUGVyc2lzdGVuY2VJbnRlcm5hbFtdO1xuXG4gICAgLy8gRmFsbCBiYWNrIHRvIHRoZSBmaXJzdCBwZXJzaXN0ZW5jZSBsaXN0ZWQsIG9yIGluIG1lbW9yeSBpZiBub25lIGF2YWlsYWJsZVxuICAgIGxldCBzZWxlY3RlZFBlcnNpc3RlbmNlID1cbiAgICAgIGF2YWlsYWJsZVBlcnNpc3RlbmNlc1swXSB8fFxuICAgICAgX2dldEluc3RhbmNlPFBlcnNpc3RlbmNlSW50ZXJuYWw+KGluTWVtb3J5UGVyc2lzdGVuY2UpO1xuXG4gICAgY29uc3Qga2V5ID0gX3BlcnNpc3RlbmNlS2V5TmFtZSh1c2VyS2V5LCBhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgubmFtZSk7XG5cbiAgICAvLyBQdWxsIG91dCB0aGUgZXhpc3RpbmcgdXNlciwgc2V0dGluZyB0aGUgY2hvc2VuIHBlcnNpc3RlbmNlIHRvIHRoYXRcbiAgICAvLyBwZXJzaXN0ZW5jZSBpZiB0aGUgdXNlciBleGlzdHMuXG4gICAgbGV0IHVzZXJUb01pZ3JhdGU6IFVzZXJJbnRlcm5hbCB8IG51bGwgPSBudWxsO1xuICAgIC8vIE5vdGUsIGhlcmUgd2UgY2hlY2sgZm9yIGEgdXNlciBpbiBfYWxsXyBwZXJzaXN0ZW5jZXMsIG5vdCBqdXN0IHRoZVxuICAgIC8vIG9uZXMgZGVlbWVkIGF2YWlsYWJsZS4gSWYgd2UgY2FuIG1pZ3JhdGUgYSB1c2VyIG91dCBvZiBhIGJyb2tlblxuICAgIC8vIHBlcnNpc3RlbmNlLCB3ZSB3aWxsIChidXQgb25seSBpZiB0aGF0IHBlcnNpc3RlbmNlIHN1cHBvcnRzIG1pZ3JhdGlvbikuXG4gICAgZm9yIChjb25zdCBwZXJzaXN0ZW5jZSBvZiBwZXJzaXN0ZW5jZUhpZXJhcmNoeSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHBlcnNpc3RlbmNlLl9nZXQ8UGVyc2lzdGVkQmxvYj4oa2V5KTtcbiAgICAgICAgaWYgKGJsb2IpIHtcbiAgICAgICAgICBjb25zdCB1c2VyID0gVXNlckltcGwuX2Zyb21KU09OKGF1dGgsIGJsb2IpOyAvLyB0aHJvd3MgZm9yIHVucGFyc2FibGUgYmxvYiAod3JvbmcgZm9ybWF0KVxuICAgICAgICAgIGlmIChwZXJzaXN0ZW5jZSAhPT0gc2VsZWN0ZWRQZXJzaXN0ZW5jZSkge1xuICAgICAgICAgICAgdXNlclRvTWlncmF0ZSA9IHVzZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNlbGVjdGVkUGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCB7fVxuICAgIH1cblxuICAgIC8vIElmIHdlIGZpbmQgdGhlIHVzZXIgaW4gYSBwZXJzaXN0ZW5jZSB0aGF0IGRvZXMgc3VwcG9ydCBtaWdyYXRpb24sIHVzZVxuICAgIC8vIHRoYXQgbWlncmF0aW9uIHBhdGggKG9mIG9ubHkgcGVyc2lzdGVuY2VzIHRoYXQgc3VwcG9ydCBtaWdyYXRpb24pXG4gICAgY29uc3QgbWlncmF0aW9uSGllcmFyY2h5ID0gYXZhaWxhYmxlUGVyc2lzdGVuY2VzLmZpbHRlcihcbiAgICAgIHAgPT4gcC5fc2hvdWxkQWxsb3dNaWdyYXRpb25cbiAgICApO1xuXG4gICAgLy8gSWYgdGhlIHBlcnNpc3RlbmNlIGRvZXMgX25vdF8gYWxsb3cgbWlncmF0aW9uLCBqdXN0IGZpbmlzaCBvZmYgaGVyZVxuICAgIGlmIChcbiAgICAgICFzZWxlY3RlZFBlcnNpc3RlbmNlLl9zaG91bGRBbGxvd01pZ3JhdGlvbiB8fFxuICAgICAgIW1pZ3JhdGlvbkhpZXJhcmNoeS5sZW5ndGhcbiAgICApIHtcbiAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihzZWxlY3RlZFBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KTtcbiAgICB9XG5cbiAgICBzZWxlY3RlZFBlcnNpc3RlbmNlID0gbWlncmF0aW9uSGllcmFyY2h5WzBdO1xuICAgIGlmICh1c2VyVG9NaWdyYXRlKSB7XG4gICAgICAvLyBUaGlzIG5vcm1hbGx5IHNob3VsZG4ndCB0aHJvdyBzaW5jZSBjaG9zZW5QZXJzaXN0ZW5jZS5pc0F2YWlsYWJsZSgpIGlzIHRydWUsIGJ1dCBpZiBpdCBkb2VzXG4gICAgICAvLyB3ZSdsbCBqdXN0IGxldCBpdCBidWJibGUgdG8gc3VyZmFjZSB0aGUgZXJyb3IuXG4gICAgICBhd2FpdCBzZWxlY3RlZFBlcnNpc3RlbmNlLl9zZXQoa2V5LCB1c2VyVG9NaWdyYXRlLnRvSlNPTigpKTtcbiAgICB9XG5cbiAgICAvLyBBdHRlbXB0IHRvIGNsZWFyIHRoZSBrZXkgaW4gb3RoZXIgcGVyc2lzdGVuY2VzIGJ1dCBpZ25vcmUgZXJyb3JzLiBUaGlzIGhlbHBzIHByZXZlbnQgaXNzdWVzXG4gICAgLy8gc3VjaCBhcyB1c2VycyBnZXR0aW5nIHN0dWNrIHdpdGggYSBwcmV2aW91cyBhY2NvdW50IGFmdGVyIHNpZ25pbmcgb3V0IGFuZCByZWZyZXNoaW5nIHRoZSB0YWIuXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBwZXJzaXN0ZW5jZUhpZXJhcmNoeS5tYXAoYXN5bmMgcGVyc2lzdGVuY2UgPT4ge1xuICAgICAgICBpZiAocGVyc2lzdGVuY2UgIT09IHNlbGVjdGVkUGVyc2lzdGVuY2UpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgcGVyc2lzdGVuY2UuX3JlbW92ZShrZXkpO1xuICAgICAgICAgIH0gY2F0Y2gge31cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICApO1xuICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihzZWxlY3RlZFBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgaXNJRSwgZ2V0VUEgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbmludGVyZmFjZSBOYXZpZ2F0b3JTdGFuZGFsb25lIGV4dGVuZHMgTmF2aWdhdG9yIHtcbiAgc3RhbmRhbG9uZT86IHVua25vd247XG59XG5cbmludGVyZmFjZSBEb2N1bWVudCB7XG4gIGRvY3VtZW50TW9kZT86IG51bWJlcjtcbn1cblxuLyoqXG4gKiBFbnVtcyBmb3IgQnJvd3NlciBuYW1lLlxuICovXG5leHBvcnQgY29uc3QgZW51bSBCcm93c2VyTmFtZSB7XG4gIEFORFJPSUQgPSAnQW5kcm9pZCcsXG4gIEJMQUNLQkVSUlkgPSAnQmxhY2tiZXJyeScsXG4gIEVER0UgPSAnRWRnZScsXG4gIEZJUkVGT1ggPSAnRmlyZWZveCcsXG4gIElFID0gJ0lFJyxcbiAgSUVNT0JJTEUgPSAnSUVNb2JpbGUnLFxuICBPUEVSQSA9ICdPcGVyYScsXG4gIE9USEVSID0gJ090aGVyJyxcbiAgQ0hST01FID0gJ0Nocm9tZScsXG4gIFNBRkFSSSA9ICdTYWZhcmknLFxuICBTSUxLID0gJ1NpbGsnLFxuICBXRUJPUyA9ICdXZWJvcydcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgdGhlIGJyb3dzZXIgZm9yIHRoZSBwdXJwb3NlcyBvZiByZXBvcnRpbmcgdXNhZ2UgdG8gdGhlIEFQSVxuICovXG5leHBvcnQgZnVuY3Rpb24gX2dldEJyb3dzZXJOYW1lKHVzZXJBZ2VudDogc3RyaW5nKTogQnJvd3Nlck5hbWUgfCBzdHJpbmcge1xuICBjb25zdCB1YSA9IHVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICBpZiAodWEuaW5jbHVkZXMoJ29wZXJhLycpIHx8IHVhLmluY2x1ZGVzKCdvcHIvJykgfHwgdWEuaW5jbHVkZXMoJ29waW9zLycpKSB7XG4gICAgcmV0dXJuIEJyb3dzZXJOYW1lLk9QRVJBO1xuICB9IGVsc2UgaWYgKF9pc0lFTW9iaWxlKHVhKSkge1xuICAgIC8vIFdpbmRvd3MgcGhvbmUgSUVNb2JpbGUgYnJvd3Nlci5cbiAgICByZXR1cm4gQnJvd3Nlck5hbWUuSUVNT0JJTEU7XG4gIH0gZWxzZSBpZiAodWEuaW5jbHVkZXMoJ21zaWUnKSB8fCB1YS5pbmNsdWRlcygndHJpZGVudC8nKSkge1xuICAgIHJldHVybiBCcm93c2VyTmFtZS5JRTtcbiAgfSBlbHNlIGlmICh1YS5pbmNsdWRlcygnZWRnZS8nKSkge1xuICAgIHJldHVybiBCcm93c2VyTmFtZS5FREdFO1xuICB9IGVsc2UgaWYgKF9pc0ZpcmVmb3godWEpKSB7XG4gICAgcmV0dXJuIEJyb3dzZXJOYW1lLkZJUkVGT1g7XG4gIH0gZWxzZSBpZiAodWEuaW5jbHVkZXMoJ3NpbGsvJykpIHtcbiAgICByZXR1cm4gQnJvd3Nlck5hbWUuU0lMSztcbiAgfSBlbHNlIGlmIChfaXNCbGFja0JlcnJ5KHVhKSkge1xuICAgIC8vIEJsYWNrYmVycnkgYnJvd3Nlci5cbiAgICByZXR1cm4gQnJvd3Nlck5hbWUuQkxBQ0tCRVJSWTtcbiAgfSBlbHNlIGlmIChfaXNXZWJPUyh1YSkpIHtcbiAgICAvLyBXZWJPUyBkZWZhdWx0IGJyb3dzZXIuXG4gICAgcmV0dXJuIEJyb3dzZXJOYW1lLldFQk9TO1xuICB9IGVsc2UgaWYgKF9pc1NhZmFyaSh1YSkpIHtcbiAgICByZXR1cm4gQnJvd3Nlck5hbWUuU0FGQVJJO1xuICB9IGVsc2UgaWYgKFxuICAgICh1YS5pbmNsdWRlcygnY2hyb21lLycpIHx8IF9pc0Nocm9tZUlPUyh1YSkpICYmXG4gICAgIXVhLmluY2x1ZGVzKCdlZGdlLycpXG4gICkge1xuICAgIHJldHVybiBCcm93c2VyTmFtZS5DSFJPTUU7XG4gIH0gZWxzZSBpZiAoX2lzQW5kcm9pZCh1YSkpIHtcbiAgICAvLyBBbmRyb2lkIHN0b2NrIGJyb3dzZXIuXG4gICAgcmV0dXJuIEJyb3dzZXJOYW1lLkFORFJPSUQ7XG4gIH0gZWxzZSB7XG4gICAgLy8gTW9zdCBtb2Rlcm4gYnJvd3NlcnMgaGF2ZSBuYW1lL3ZlcnNpb24gYXQgZW5kIG9mIHVzZXIgYWdlbnQgc3RyaW5nLlxuICAgIGNvbnN0IHJlID0gLyhbYS16QS1aXFxkXFwuXSspXFwvW2EtekEtWlxcZFxcLl0qJC87XG4gICAgY29uc3QgbWF0Y2hlcyA9IHVzZXJBZ2VudC5tYXRjaChyZSk7XG4gICAgaWYgKG1hdGNoZXM/Lmxlbmd0aCA9PT0gMikge1xuICAgICAgcmV0dXJuIG1hdGNoZXNbMV07XG4gICAgfVxuICB9XG4gIHJldHVybiBCcm93c2VyTmFtZS5PVEhFUjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9pc0ZpcmVmb3godWEgPSBnZXRVQSgpKTogYm9vbGVhbiB7XG4gIHJldHVybiAvZmlyZWZveFxcLy9pLnRlc3QodWEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX2lzU2FmYXJpKHVzZXJBZ2VudCA9IGdldFVBKCkpOiBib29sZWFuIHtcbiAgY29uc3QgdWEgPSB1c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIChcbiAgICB1YS5pbmNsdWRlcygnc2FmYXJpLycpICYmXG4gICAgIXVhLmluY2x1ZGVzKCdjaHJvbWUvJykgJiZcbiAgICAhdWEuaW5jbHVkZXMoJ2NyaW9zLycpICYmXG4gICAgIXVhLmluY2x1ZGVzKCdhbmRyb2lkJylcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9pc0Nocm9tZUlPUyh1YSA9IGdldFVBKCkpOiBib29sZWFuIHtcbiAgcmV0dXJuIC9jcmlvc1xcLy9pLnRlc3QodWEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX2lzSUVNb2JpbGUodWEgPSBnZXRVQSgpKTogYm9vbGVhbiB7XG4gIHJldHVybiAvaWVtb2JpbGUvaS50ZXN0KHVhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9pc0FuZHJvaWQodWEgPSBnZXRVQSgpKTogYm9vbGVhbiB7XG4gIHJldHVybiAvYW5kcm9pZC9pLnRlc3QodWEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX2lzQmxhY2tCZXJyeSh1YSA9IGdldFVBKCkpOiBib29sZWFuIHtcbiAgcmV0dXJuIC9ibGFja2JlcnJ5L2kudGVzdCh1YSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfaXNXZWJPUyh1YSA9IGdldFVBKCkpOiBib29sZWFuIHtcbiAgcmV0dXJuIC93ZWJvcy9pLnRlc3QodWEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX2lzSU9TKHVhID0gZ2V0VUEoKSk6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgIC9pcGhvbmV8aXBhZHxpcG9kL2kudGVzdCh1YSkgfHxcbiAgICAoL21hY2ludG9zaC9pLnRlc3QodWEpICYmIC9tb2JpbGUvaS50ZXN0KHVhKSlcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9pc0lPUzdPcjgodWEgPSBnZXRVQSgpKTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgLyhpUGFkfGlQaG9uZXxpUG9kKS4qT1MgN19cXGQvaS50ZXN0KHVhKSB8fFxuICAgIC8oaVBhZHxpUGhvbmV8aVBvZCkuKk9TIDhfXFxkL2kudGVzdCh1YSlcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9pc0lPU1N0YW5kYWxvbmUodWEgPSBnZXRVQSgpKTogYm9vbGVhbiB7XG4gIHJldHVybiBfaXNJT1ModWEpICYmICEhKHdpbmRvdy5uYXZpZ2F0b3IgYXMgTmF2aWdhdG9yU3RhbmRhbG9uZSk/LnN0YW5kYWxvbmU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfaXNJRTEwKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNJRSgpICYmIChkb2N1bWVudCBhcyBEb2N1bWVudCkuZG9jdW1lbnRNb2RlID09PSAxMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9pc01vYmlsZUJyb3dzZXIodWE6IHN0cmluZyA9IGdldFVBKCkpOiBib29sZWFuIHtcbiAgLy8gVE9ETzogaW1wbGVtZW50IGdldEJyb3dzZXJOYW1lIGVxdWl2YWxlbnQgZm9yIE9TLlxuICByZXR1cm4gKFxuICAgIF9pc0lPUyh1YSkgfHxcbiAgICBfaXNBbmRyb2lkKHVhKSB8fFxuICAgIF9pc1dlYk9TKHVhKSB8fFxuICAgIF9pc0JsYWNrQmVycnkodWEpIHx8XG4gICAgL3dpbmRvd3MgcGhvbmUvaS50ZXN0KHVhKSB8fFxuICAgIF9pc0lFTW9iaWxlKHVhKVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX2lzSWZyYW1lKCk6IGJvb2xlYW4ge1xuICB0cnkge1xuICAgIC8vIENoZWNrIHRoYXQgdGhlIGN1cnJlbnQgd2luZG93IGlzIG5vdCB0aGUgdG9wIHdpbmRvdy5cbiAgICAvLyBJZiBzbywgcmV0dXJuIHRydWUuXG4gICAgcmV0dXJuICEhKHdpbmRvdyAmJiB3aW5kb3cgIT09IHdpbmRvdy50b3ApO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBTREtfVkVSU0lPTiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgX2dldEJyb3dzZXJOYW1lIH0gZnJvbSAnLi9icm93c2VyJztcbmltcG9ydCB7IGdldFVBIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG5leHBvcnQgY29uc3QgZW51bSBDbGllbnRJbXBsZW1lbnRhdGlvbiB7XG4gIENPUkUgPSAnSnNDb3JlJ1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY29uc3QgZW51bSBDbGllbnRQbGF0Zm9ybSB7XG4gIEJST1dTRVIgPSAnQnJvd3NlcicsXG4gIE5PREUgPSAnTm9kZScsXG4gIFJFQUNUX05BVElWRSA9ICdSZWFjdE5hdGl2ZScsXG4gIENPUkRPVkEgPSAnQ29yZG92YScsXG4gIFdPUktFUiA9ICdXb3JrZXInXG59XG5cbi8qXG4gKiBEZXRlcm1pbmUgdGhlIFNESyB2ZXJzaW9uIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gX2dldENsaWVudFZlcnNpb24oXG4gIGNsaWVudFBsYXRmb3JtOiBDbGllbnRQbGF0Zm9ybSxcbiAgZnJhbWV3b3JrczogcmVhZG9ubHkgc3RyaW5nW10gPSBbXVxuKTogc3RyaW5nIHtcbiAgbGV0IHJlcG9ydGVkUGxhdGZvcm06IHN0cmluZztcbiAgc3dpdGNoIChjbGllbnRQbGF0Zm9ybSkge1xuICAgIGNhc2UgQ2xpZW50UGxhdGZvcm0uQlJPV1NFUjpcbiAgICAgIC8vIEluIGEgYnJvd3NlciBlbnZpcm9ubWVudCwgcmVwb3J0IHRoZSBicm93c2VyIG5hbWUuXG4gICAgICByZXBvcnRlZFBsYXRmb3JtID0gX2dldEJyb3dzZXJOYW1lKGdldFVBKCkpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBDbGllbnRQbGF0Zm9ybS5XT1JLRVI6XG4gICAgICAvLyBUZWNobmljYWxseSBhIHdvcmtlciBydW5zIGZyb20gYSBicm93c2VyIGJ1dCB3ZSBuZWVkIHRvIGRpZmZlcmVudGlhdGUgYVxuICAgICAgLy8gd29ya2VyIGZyb20gYSBicm93c2VyLlxuICAgICAgLy8gRm9yIGV4YW1wbGU6IENocm9tZS1Xb3JrZXIvSnNDb3JlLzQuOS4xL0ZpcmViYXNlQ29yZS13ZWIuXG4gICAgICByZXBvcnRlZFBsYXRmb3JtID0gYCR7X2dldEJyb3dzZXJOYW1lKGdldFVBKCkpfS0ke2NsaWVudFBsYXRmb3JtfWA7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgcmVwb3J0ZWRQbGF0Zm9ybSA9IGNsaWVudFBsYXRmb3JtO1xuICB9XG4gIGNvbnN0IHJlcG9ydGVkRnJhbWV3b3JrcyA9IGZyYW1ld29ya3MubGVuZ3RoXG4gICAgPyBmcmFtZXdvcmtzLmpvaW4oJywnKVxuICAgIDogJ0ZpcmViYXNlQ29yZS13ZWInOyAvKiBkZWZhdWx0IHZhbHVlIGlmIG5vIG90aGVyIGZyYW1ld29yayBpcyB1c2VkICovXG4gIHJldHVybiBgJHtyZXBvcnRlZFBsYXRmb3JtfS8ke0NsaWVudEltcGxlbWVudGF0aW9uLkNPUkV9LyR7U0RLX1ZFUlNJT059LyR7cmVwb3J0ZWRGcmFtZXdvcmtzfWA7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBFbmRwb2ludCxcbiAgSHR0cE1ldGhvZCxcbiAgUmVjYXB0Y2hhQ2xpZW50VHlwZSxcbiAgUmVjYXB0Y2hhVmVyc2lvbixcbiAgX3BlcmZvcm1BcGlSZXF1ZXN0LFxuICBfYWRkVGlkSWZOZWNlc3Nhcnlcbn0gZnJvbSAnLi4vaW5kZXgnO1xuaW1wb3J0IHsgQXV0aCB9IGZyb20gJy4uLy4uL21vZGVsL3B1YmxpY190eXBlcyc7XG5cbmludGVyZmFjZSBHZXRSZWNhcHRjaGFQYXJhbVJlc3BvbnNlIHtcbiAgcmVjYXB0Y2hhU2l0ZUtleT86IHN0cmluZztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJlY2FwdGNoYVBhcmFtcyhhdXRoOiBBdXRoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgcmV0dXJuIChcbiAgICAoXG4gICAgICBhd2FpdCBfcGVyZm9ybUFwaVJlcXVlc3Q8dm9pZCwgR2V0UmVjYXB0Y2hhUGFyYW1SZXNwb25zZT4oXG4gICAgICAgIGF1dGgsXG4gICAgICAgIEh0dHBNZXRob2QuR0VULFxuICAgICAgICBFbmRwb2ludC5HRVRfUkVDQVBUQ0hBX1BBUkFNXG4gICAgICApXG4gICAgKS5yZWNhcHRjaGFTaXRlS2V5IHx8ICcnXG4gICk7XG59XG5cbi8vIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIGFyZSBmb3IgcmVDQVBUQ0hBIGVudGVycHJpc2UgaW50ZWdyYXRpb24uXG5pbnRlcmZhY2UgR2V0UmVjYXB0Y2hhQ29uZmlnUmVxdWVzdCB7XG4gIHRlbmFudElkPzogc3RyaW5nO1xuICBjbGllbnRUeXBlPzogUmVjYXB0Y2hhQ2xpZW50VHlwZTtcbiAgdmVyc2lvbj86IFJlY2FwdGNoYVZlcnNpb247XG59XG5cbmludGVyZmFjZSBSZWNhcHRjaGFFbmZvcmNlbWVudFN0YXRlIHtcbiAgcHJvdmlkZXI6IHN0cmluZztcbiAgZW5mb3JjZW1lbnRTdGF0ZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdldFJlY2FwdGNoYUNvbmZpZ1Jlc3BvbnNlIHtcbiAgcmVjYXB0Y2hhS2V5OiBzdHJpbmc7XG4gIHJlY2FwdGNoYUVuZm9yY2VtZW50U3RhdGU6IFJlY2FwdGNoYUVuZm9yY2VtZW50U3RhdGVbXTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJlY2FwdGNoYUNvbmZpZyhcbiAgYXV0aDogQXV0aCxcbiAgcmVxdWVzdDogR2V0UmVjYXB0Y2hhQ29uZmlnUmVxdWVzdFxuKTogUHJvbWlzZTxHZXRSZWNhcHRjaGFDb25maWdSZXNwb25zZT4ge1xuICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0PFxuICAgIEdldFJlY2FwdGNoYUNvbmZpZ1JlcXVlc3QsXG4gICAgR2V0UmVjYXB0Y2hhQ29uZmlnUmVzcG9uc2VcbiAgPihcbiAgICBhdXRoLFxuICAgIEh0dHBNZXRob2QuR0VULFxuICAgIEVuZHBvaW50LkdFVF9SRUNBUFRDSEFfQ09ORklHLFxuICAgIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KVxuICApO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgUmVjYXB0Y2hhUGFyYW1ldGVycyB9IGZyb20gJy4uLy4uL21vZGVsL3B1YmxpY190eXBlcyc7XG5pbXBvcnQgeyBHZXRSZWNhcHRjaGFDb25maWdSZXNwb25zZSB9IGZyb20gJy4uLy4uL2FwaS9hdXRoZW50aWNhdGlvbi9yZWNhcHRjaGEnO1xuXG4vLyByZUNBUFRDSEEgdjIgaW50ZXJmYWNlXG5leHBvcnQgaW50ZXJmYWNlIFJlY2FwdGNoYSB7XG4gIHJlbmRlcjogKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHBhcmFtZXRlcnM6IFJlY2FwdGNoYVBhcmFtZXRlcnMpID0+IG51bWJlcjtcbiAgZ2V0UmVzcG9uc2U6IChpZDogbnVtYmVyKSA9PiBzdHJpbmc7XG4gIGV4ZWN1dGU6IChpZDogbnVtYmVyKSA9PiB1bmtub3duO1xuICByZXNldDogKGlkOiBudW1iZXIpID0+IHVua25vd247XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1YyKFxuICBncmVjYXB0Y2hhOiBSZWNhcHRjaGEgfCBHcmVDQVBUQ0hBIHwgdW5kZWZpbmVkXG4pOiBncmVjYXB0Y2hhIGlzIFJlY2FwdGNoYSB7XG4gIHJldHVybiAoXG4gICAgZ3JlY2FwdGNoYSAhPT0gdW5kZWZpbmVkICYmXG4gICAgKGdyZWNhcHRjaGEgYXMgUmVjYXB0Y2hhKS5nZXRSZXNwb25zZSAhPT0gdW5kZWZpbmVkXG4gICk7XG59XG5cbi8vIHJlQ0FQVENIQSBFbnRlcnByaXNlICYgdjMgc2hhcmVkIGludGVyZmFjZVxuZXhwb3J0IGludGVyZmFjZSBHcmVDQVBUQ0hBVG9wTGV2ZWwgZXh0ZW5kcyBHcmVDQVBUQ0hBIHtcbiAgZW50ZXJwcmlzZTogR3JlQ0FQVENIQTtcbn1cblxuLy8gcmVDQVBUQ0hBIEVudGVycHJpc2UgaW50ZXJmYWNlXG5leHBvcnQgaW50ZXJmYWNlIEdyZUNBUFRDSEEge1xuICByZWFkeTogKGNhbGxiYWNrOiAoKSA9PiB2b2lkKSA9PiB2b2lkO1xuICBleGVjdXRlOiAoc2l0ZUtleTogc3RyaW5nLCBvcHRpb25zOiB7IGFjdGlvbjogc3RyaW5nIH0pID0+IFByb21pc2U8c3RyaW5nPjtcbiAgcmVuZGVyOiAoXG4gICAgY29udGFpbmVyOiBzdHJpbmcgfCBIVE1MRWxlbWVudCxcbiAgICBwYXJhbWV0ZXJzOiBHcmVDQVBUQ0hBUmVuZGVyT3B0aW9uXG4gICkgPT4gc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdyZUNBUFRDSEFSZW5kZXJPcHRpb24ge1xuICBzaXRla2V5OiBzdHJpbmc7XG4gIHNpemU6ICdpbnZpc2libGUnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFbnRlcnByaXNlKFxuICBncmVjYXB0Y2hhOiBSZWNhcHRjaGEgfCBHcmVDQVBUQ0hBIHwgdW5kZWZpbmVkXG4pOiBncmVjYXB0Y2hhIGlzIEdyZUNBUFRDSEFUb3BMZXZlbCB7XG4gIHJldHVybiAoXG4gICAgZ3JlY2FwdGNoYSAhPT0gdW5kZWZpbmVkICYmXG4gICAgKGdyZWNhcHRjaGEgYXMgR3JlQ0FQVENIQVRvcExldmVsKS5lbnRlcnByaXNlICE9PSB1bmRlZmluZWRcbiAgKTtcbn1cblxuLy8gVE9ETyhjaHVhbnIpOiBSZXBsYWNlIHRoaXMgd2l0aCB0aGUgQXV0aFdpbmRvdyBhZnRlciByZXNvbHZpbmcgdGhlIGRlcGVuZGVuY3kgaXNzdWUgaW4gTm9kZS5qcyBlbnYuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBXaW5kb3cge1xuICAgIGdyZWNhcHRjaGE/OiBSZWNhcHRjaGEgfCBHcmVDQVBUQ0hBVG9wTGV2ZWw7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlY2FwdGNoYUNvbmZpZyB7XG4gIC8qKlxuICAgKiBUaGUgcmVDQVBUQ0hBIHNpdGUga2V5LlxuICAgKi9cbiAgc2l0ZUtleTogc3RyaW5nID0gJyc7XG5cbiAgLyoqXG4gICAqIFRoZSByZUNBUFRDSEEgZW5hYmxlbWVudCBzdGF0dXMgb2YgdGhlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gZm9yIHRoZSBjdXJyZW50IHRlbmFudC5cbiAgICovXG4gIGVtYWlsUGFzc3dvcmRFbmFibGVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IocmVzcG9uc2U6IEdldFJlY2FwdGNoYUNvbmZpZ1Jlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLnJlY2FwdGNoYUtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlY2FwdGNoYUtleSB1bmRlZmluZWQnKTtcbiAgICB9XG4gICAgLy8gRXhhbXBsZSByZXNwb25zZS5yZWNhcHRjaGFLZXk6IFwicHJvamVjdHMvcHJvajEyMy9rZXlzL3NpdGVrZXkxMjNcIlxuICAgIHRoaXMuc2l0ZUtleSA9IHJlc3BvbnNlLnJlY2FwdGNoYUtleS5zcGxpdCgnLycpWzNdO1xuICAgIHRoaXMuZW1haWxQYXNzd29yZEVuYWJsZWQgPSByZXNwb25zZS5yZWNhcHRjaGFFbmZvcmNlbWVudFN0YXRlLnNvbWUoXG4gICAgICBlbmZvcmNlbWVudFN0YXRlID0+XG4gICAgICAgIGVuZm9yY2VtZW50U3RhdGUucHJvdmlkZXIgPT09ICdFTUFJTF9QQVNTV09SRF9QUk9WSURFUicgJiZcbiAgICAgICAgZW5mb3JjZW1lbnRTdGF0ZS5lbmZvcmNlbWVudFN0YXRlICE9PSAnT0ZGJ1xuICAgICk7XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEF1dGhFcnJvckNvZGUgfSBmcm9tICcuLi9jb3JlL2Vycm9ycyc7XG5pbXBvcnQgeyBfY3JlYXRlRXJyb3IgfSBmcm9tICcuLi9jb3JlL3V0aWwvYXNzZXJ0JztcblxuZnVuY3Rpb24gZ2V0U2NyaXB0UGFyZW50RWxlbWVudCgpOiBIVE1MRG9jdW1lbnQgfCBIVE1MSGVhZEVsZW1lbnQge1xuICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKT8uWzBdID8/IGRvY3VtZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX2xvYWRKUyh1cmw6IHN0cmluZyk6IFByb21pc2U8RXZlbnQ+IHtcbiAgLy8gVE9ETzogY29uc2lkZXIgYWRkaW5nIHRpbWVvdXQgc3VwcG9ydCAmIGNhbmNlbGxhdGlvblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgZWwuc2V0QXR0cmlidXRlKCdzcmMnLCB1cmwpO1xuICAgIGVsLm9ubG9hZCA9IHJlc29sdmU7XG4gICAgZWwub25lcnJvciA9IGUgPT4ge1xuICAgICAgY29uc3QgZXJyb3IgPSBfY3JlYXRlRXJyb3IoQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUik7XG4gICAgICBlcnJvci5jdXN0b21EYXRhID0gZSBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICB9O1xuICAgIGVsLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICBlbC5jaGFyc2V0ID0gJ1VURi04JztcbiAgICBnZXRTY3JpcHRQYXJlbnRFbGVtZW50KCkuYXBwZW5kQ2hpbGQoZWwpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9nZW5lcmF0ZUNhbGxiYWNrTmFtZShwcmVmaXg6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBgX18ke3ByZWZpeH0ke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApfWA7XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tcmVxdWlyZS1pbXBvcnRzICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBpc0VudGVycHJpc2UsIFJlY2FwdGNoYUNvbmZpZyB9IGZyb20gJy4vcmVjYXB0Y2hhJztcbmltcG9ydCB7IGdldFJlY2FwdGNoYUNvbmZpZyB9IGZyb20gJy4uLy4uL2FwaS9hdXRoZW50aWNhdGlvbi9yZWNhcHRjaGEnO1xuaW1wb3J0IHtcbiAgUmVjYXB0Y2hhQ2xpZW50VHlwZSxcbiAgUmVjYXB0Y2hhVmVyc2lvbixcbiAgUmVjYXB0Y2hhQWN0aW9uTmFtZVxufSBmcm9tICcuLi8uLi9hcGknO1xuXG5pbXBvcnQgeyBBdXRoIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcbmltcG9ydCB7IEF1dGhJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL2F1dGgnO1xuaW1wb3J0IHsgX2Nhc3RBdXRoIH0gZnJvbSAnLi4vLi4vY29yZS9hdXRoL2F1dGhfaW1wbCc7XG5pbXBvcnQgKiBhcyBqc0hlbHBlcnMgZnJvbSAnLi4vbG9hZF9qcyc7XG5cbmNvbnN0IFJFQ0FQVENIQV9FTlRFUlBSSVNFX1VSTCA9XG4gICdodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9lbnRlcnByaXNlLmpzP3JlbmRlcj0nO1xuXG5leHBvcnQgY29uc3QgUkVDQVBUQ0hBX0VOVEVSUFJJU0VfVkVSSUZJRVJfVFlQRSA9ICdyZWNhcHRjaGEtZW50ZXJwcmlzZSc7XG5leHBvcnQgY29uc3QgRkFLRV9UT0tFTiA9ICdOT19SRUNBUFRDSEEnO1xuXG5leHBvcnQgY2xhc3MgUmVjYXB0Y2hhRW50ZXJwcmlzZVZlcmlmaWVyIHtcbiAgLyoqXG4gICAqIElkZW50aWZpZXMgdGhlIHR5cGUgb2YgYXBwbGljYXRpb24gdmVyaWZpZXIgKGUuZy4gXCJyZWNhcHRjaGEtZW50ZXJwcmlzZVwiKS5cbiAgICovXG4gIHJlYWRvbmx5IHR5cGUgPSBSRUNBUFRDSEFfRU5URVJQUklTRV9WRVJJRklFUl9UWVBFO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgYXV0aDogQXV0aEludGVybmFsO1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gYXV0aEV4dGVybiAtIFRoZSBjb3JyZXNwb25kaW5nIEZpcmViYXNlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cbiAgICpcbiAgICovXG4gIGNvbnN0cnVjdG9yKGF1dGhFeHRlcm46IEF1dGgpIHtcbiAgICB0aGlzLmF1dGggPSBfY2FzdEF1dGgoYXV0aEV4dGVybik7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZXMgdGhlIHZlcmlmaWNhdGlvbiBwcm9jZXNzLlxuICAgKlxuICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIGEgdG9rZW4gdGhhdCBjYW4gYmUgdXNlZCB0byBhc3NlcnQgdGhlIHZhbGlkaXR5IG9mIGEgcmVxdWVzdC5cbiAgICovXG4gIGFzeW5jIHZlcmlmeShcbiAgICBhY3Rpb246IHN0cmluZyA9ICd2ZXJpZnknLFxuICAgIGZvcmNlUmVmcmVzaCA9IGZhbHNlXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgYXN5bmMgZnVuY3Rpb24gcmV0cmlldmVTaXRlS2V5KGF1dGg6IEF1dGhJbnRlcm5hbCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICBpZiAoIWZvcmNlUmVmcmVzaCkge1xuICAgICAgICBpZiAoYXV0aC50ZW5hbnRJZCA9PSBudWxsICYmIGF1dGguX2FnZW50UmVjYXB0Y2hhQ29uZmlnICE9IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gYXV0aC5fYWdlbnRSZWNhcHRjaGFDb25maWcuc2l0ZUtleTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgYXV0aC50ZW5hbnRJZCAhPSBudWxsICYmXG4gICAgICAgICAgYXV0aC5fdGVuYW50UmVjYXB0Y2hhQ29uZmlnc1thdXRoLnRlbmFudElkXSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiBhdXRoLl90ZW5hbnRSZWNhcHRjaGFDb25maWdzW2F1dGgudGVuYW50SWRdLnNpdGVLZXk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBnZXRSZWNhcHRjaGFDb25maWcoYXV0aCwge1xuICAgICAgICAgIGNsaWVudFR5cGU6IFJlY2FwdGNoYUNsaWVudFR5cGUuV0VCLFxuICAgICAgICAgIHZlcnNpb246IFJlY2FwdGNoYVZlcnNpb24uRU5URVJQUklTRVxuICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5yZWNhcHRjaGFLZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdyZWNhcHRjaGEgRW50ZXJwcmlzZSBzaXRlIGtleSB1bmRlZmluZWQnKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBjb25maWcgPSBuZXcgUmVjYXB0Y2hhQ29uZmlnKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgaWYgKGF1dGgudGVuYW50SWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGF1dGguX2FnZW50UmVjYXB0Y2hhQ29uZmlnID0gY29uZmlnO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF1dGguX3RlbmFudFJlY2FwdGNoYUNvbmZpZ3NbYXV0aC50ZW5hbnRJZF0gPSBjb25maWc7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoY29uZmlnLnNpdGVLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXRyaWV2ZVJlY2FwdGNoYVRva2VuKFxuICAgICAgc2l0ZUtleTogc3RyaW5nLFxuICAgICAgcmVzb2x2ZTogKHZhbHVlOiBzdHJpbmcgfCBQcm9taXNlTGlrZTxzdHJpbmc+KSA9PiB2b2lkLFxuICAgICAgcmVqZWN0OiAocmVhc29uPzogdW5rbm93bikgPT4gdm9pZFxuICAgICk6IHZvaWQge1xuICAgICAgY29uc3QgZ3JlY2FwdGNoYSA9IHdpbmRvdy5ncmVjYXB0Y2hhO1xuICAgICAgaWYgKGlzRW50ZXJwcmlzZShncmVjYXB0Y2hhKSkge1xuICAgICAgICBncmVjYXB0Y2hhLmVudGVycHJpc2UucmVhZHkoKCkgPT4ge1xuICAgICAgICAgIGdyZWNhcHRjaGEuZW50ZXJwcmlzZVxuICAgICAgICAgICAgLmV4ZWN1dGUoc2l0ZUtleSwgeyBhY3Rpb24gfSlcbiAgICAgICAgICAgIC50aGVuKHRva2VuID0+IHtcbiAgICAgICAgICAgICAgcmVzb2x2ZSh0b2tlbik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShGQUtFX1RPS0VOKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlamVjdChFcnJvcignTm8gcmVDQVBUQ0hBIGVudGVycHJpc2Ugc2NyaXB0IGxvYWRlZC4nKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcmV0cmlldmVTaXRlS2V5KHRoaXMuYXV0aClcbiAgICAgICAgLnRoZW4oc2l0ZUtleSA9PiB7XG4gICAgICAgICAgaWYgKCFmb3JjZVJlZnJlc2ggJiYgaXNFbnRlcnByaXNlKHdpbmRvdy5ncmVjYXB0Y2hhKSkge1xuICAgICAgICAgICAgcmV0cmlldmVSZWNhcHRjaGFUb2tlbihzaXRlS2V5LCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICAgIG5ldyBFcnJvcignUmVjYXB0Y2hhVmVyaWZpZXIgaXMgb25seSBzdXBwb3J0ZWQgaW4gYnJvd3NlcicpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGpzSGVscGVyc1xuICAgICAgICAgICAgICAuX2xvYWRKUyhSRUNBUFRDSEFfRU5URVJQUklTRV9VUkwgKyBzaXRlS2V5KVxuICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0cmlldmVSZWNhcHRjaGFUb2tlbihzaXRlS2V5LCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5qZWN0UmVjYXB0Y2hhRmllbGRzPFQ+KFxuICBhdXRoOiBBdXRoSW50ZXJuYWwsXG4gIHJlcXVlc3Q6IFQsXG4gIGFjdGlvbjogUmVjYXB0Y2hhQWN0aW9uTmFtZSxcbiAgY2FwdGNoYVJlc3AgPSBmYWxzZVxuKTogUHJvbWlzZTxUPiB7XG4gIGNvbnN0IHZlcmlmaWVyID0gbmV3IFJlY2FwdGNoYUVudGVycHJpc2VWZXJpZmllcihhdXRoKTtcbiAgbGV0IGNhcHRjaGFSZXNwb25zZTtcbiAgdHJ5IHtcbiAgICBjYXB0Y2hhUmVzcG9uc2UgPSBhd2FpdCB2ZXJpZmllci52ZXJpZnkoYWN0aW9uKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjYXB0Y2hhUmVzcG9uc2UgPSBhd2FpdCB2ZXJpZmllci52ZXJpZnkoYWN0aW9uLCB0cnVlKTtcbiAgfVxuICBjb25zdCBuZXdSZXF1ZXN0ID0geyAuLi5yZXF1ZXN0IH07XG4gIGlmICghY2FwdGNoYVJlc3ApIHtcbiAgICBPYmplY3QuYXNzaWduKG5ld1JlcXVlc3QsIHsgY2FwdGNoYVJlc3BvbnNlIH0pO1xuICB9IGVsc2Uge1xuICAgIE9iamVjdC5hc3NpZ24obmV3UmVxdWVzdCwgeyAnY2FwdGNoYVJlc3AnOiBjYXB0Y2hhUmVzcG9uc2UgfSk7XG4gIH1cbiAgT2JqZWN0LmFzc2lnbihuZXdSZXF1ZXN0LCB7ICdjbGllbnRUeXBlJzogUmVjYXB0Y2hhQ2xpZW50VHlwZS5XRUIgfSk7XG4gIE9iamVjdC5hc3NpZ24obmV3UmVxdWVzdCwge1xuICAgICdyZWNhcHRjaGFWZXJzaW9uJzogUmVjYXB0Y2hhVmVyc2lvbi5FTlRFUlBSSVNFXG4gIH0pO1xuICByZXR1cm4gbmV3UmVxdWVzdDtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEF1dGhJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL2F1dGgnO1xuaW1wb3J0IHsgVW5zdWJzY3JpYmUsIFVzZXIgfSBmcm9tICcuLi8uLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuaW1wb3J0IHsgQXV0aEVycm9yQ29kZSB9IGZyb20gJy4uL2Vycm9ycyc7XG5cbmludGVyZmFjZSBNaWRkbGV3YXJlRW50cnkge1xuICAodXNlcjogVXNlciB8IG51bGwpOiBQcm9taXNlPHZvaWQ+O1xuICBvbkFib3J0PzogKCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIEF1dGhNaWRkbGV3YXJlUXVldWUge1xuICBwcml2YXRlIHJlYWRvbmx5IHF1ZXVlOiBNaWRkbGV3YXJlRW50cnlbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgYXV0aDogQXV0aEludGVybmFsKSB7fVxuXG4gIHB1c2hDYWxsYmFjayhcbiAgICBjYWxsYmFjazogKHVzZXI6IFVzZXIgfCBudWxsKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPixcbiAgICBvbkFib3J0PzogKCkgPT4gdm9pZFxuICApOiBVbnN1YnNjcmliZSB7XG4gICAgLy8gVGhlIGNhbGxiYWNrIGNvdWxkIGJlIHN5bmMgb3IgYXN5bmMuIFdyYXAgaXQgaW50byBhXG4gICAgLy8gZnVuY3Rpb24gdGhhdCBpcyBhbHdheXMgYXN5bmMuXG4gICAgY29uc3Qgd3JhcHBlZENhbGxiYWNrOiBNaWRkbGV3YXJlRW50cnkgPSAoXG4gICAgICB1c2VyOiBVc2VyIHwgbnVsbFxuICAgICk6IFByb21pc2U8dm9pZD4gPT5cbiAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBjYWxsYmFjayh1c2VyKTtcbiAgICAgICAgICAvLyBFaXRoZXIgcmVzb2x2ZSB3aXRoIGV4aXN0aW5nIHByb21pc2Ugb3Igd3JhcCBhIG5vbi1wcm9taXNlXG4gICAgICAgICAgLy8gcmV0dXJuIHZhbHVlIGludG8gYSBwcm9taXNlLlxuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIFN5bmMgY2FsbGJhY2sgdGhyb3dzLlxuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgLy8gQXR0YWNoIHRoZSBvbkFib3J0IGlmIHByZXNlbnRcbiAgICB3cmFwcGVkQ2FsbGJhY2sub25BYm9ydCA9IG9uQWJvcnQ7XG4gICAgdGhpcy5xdWV1ZS5wdXNoKHdyYXBwZWRDYWxsYmFjayk7XG5cbiAgICBjb25zdCBpbmRleCA9IHRoaXMucXVldWUubGVuZ3RoIC0gMTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgLy8gVW5zdWJzY3JpYmUuIFJlcGxhY2Ugd2l0aCBuby1vcC4gRG8gbm90IHJlbW92ZSBmcm9tIGFycmF5LCBvciBpdCB3aWxsIGRpc3R1cmJcbiAgICAgIC8vIGluZGV4aW5nIG9mIG90aGVyIGVsZW1lbnRzLlxuICAgICAgdGhpcy5xdWV1ZVtpbmRleF0gPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgcnVuTWlkZGxld2FyZShuZXh0VXNlcjogVXNlciB8IG51bGwpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5hdXRoLmN1cnJlbnRVc2VyID09PSBuZXh0VXNlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFdoaWxlIHJ1bm5pbmcgdGhlIG1pZGRsZXdhcmUsIGJ1aWxkIGEgdGVtcG9yYXJ5IHN0YWNrIG9mIG9uQWJvcnRcbiAgICAvLyBjYWxsYmFja3MgdG8gY2FsbCBpZiBvbmUgbWlkZGxld2FyZSBjYWxsYmFjayByZWplY3RzLlxuXG4gICAgY29uc3Qgb25BYm9ydFN0YWNrOiBBcnJheTwoKSA9PiB2b2lkPiA9IFtdO1xuICAgIHRyeSB7XG4gICAgICBmb3IgKGNvbnN0IGJlZm9yZVN0YXRlQ2FsbGJhY2sgb2YgdGhpcy5xdWV1ZSkge1xuICAgICAgICBhd2FpdCBiZWZvcmVTdGF0ZUNhbGxiYWNrKG5leHRVc2VyKTtcblxuICAgICAgICAvLyBPbmx5IHB1c2ggdGhlIG9uQWJvcnQgaWYgdGhlIGNhbGxiYWNrIHN1Y2NlZWRzXG4gICAgICAgIGlmIChiZWZvcmVTdGF0ZUNhbGxiYWNrLm9uQWJvcnQpIHtcbiAgICAgICAgICBvbkFib3J0U3RhY2sucHVzaChiZWZvcmVTdGF0ZUNhbGxiYWNrLm9uQWJvcnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gUnVuIGFsbCBvbkFib3J0LCB3aXRoIHNlcGFyYXRlIHRyeS9jYXRjaCB0byBpZ25vcmUgYW55IGVycm9ycyBhbmRcbiAgICAgIC8vIGNvbnRpbnVlXG4gICAgICBvbkFib3J0U3RhY2sucmV2ZXJzZSgpO1xuICAgICAgZm9yIChjb25zdCBvbkFib3J0IG9mIG9uQWJvcnRTdGFjaykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIG9uQWJvcnQoKTtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgIC8qIHN3YWxsb3cgZXJyb3IgKi9cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aHJvdyB0aGlzLmF1dGguX2Vycm9yRmFjdG9yeS5jcmVhdGUoQXV0aEVycm9yQ29kZS5MT0dJTl9CTE9DS0VELCB7XG4gICAgICAgIG9yaWdpbmFsTWVzc2FnZTogKGUgYXMgRXJyb3IpPy5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IF9GaXJlYmFzZVNlcnZpY2UsIEZpcmViYXNlQXBwIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBQcm92aWRlciB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgQXBwQ2hlY2tJbnRlcm5hbENvbXBvbmVudE5hbWUgfSBmcm9tICdAZmlyZWJhc2UvYXBwLWNoZWNrLWludGVyb3AtdHlwZXMnO1xuaW1wb3J0IHtcbiAgQXV0aCxcbiAgQXV0aEVycm9yTWFwLFxuICBBdXRoU2V0dGluZ3MsXG4gIEVtdWxhdG9yQ29uZmlnLFxuICBOZXh0T3JPYnNlcnZlcixcbiAgUGVyc2lzdGVuY2UsXG4gIFBvcHVwUmVkaXJlY3RSZXNvbHZlcixcbiAgVXNlcixcbiAgVXNlckNyZWRlbnRpYWwsXG4gIENvbXBsZXRlRm4sXG4gIEVycm9yRm4sXG4gIE5leHRGbixcbiAgVW5zdWJzY3JpYmVcbn0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcbmltcG9ydCB7XG4gIGNyZWF0ZVN1YnNjcmliZSxcbiAgRXJyb3JGYWN0b3J5LFxuICBGaXJlYmFzZUVycm9yLFxuICBnZXRNb2R1bGFySW5zdGFuY2UsXG4gIE9ic2VydmVyLFxuICBTdWJzY3JpYmVcbn0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG5pbXBvcnQgeyBBdXRoSW50ZXJuYWwsIENvbmZpZ0ludGVybmFsIH0gZnJvbSAnLi4vLi4vbW9kZWwvYXV0aCc7XG5pbXBvcnQgeyBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL3BvcHVwX3JlZGlyZWN0JztcbmltcG9ydCB7IFVzZXJJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL3VzZXInO1xuaW1wb3J0IHtcbiAgQXV0aEVycm9yQ29kZSxcbiAgQXV0aEVycm9yUGFyYW1zLFxuICBFcnJvck1hcFJldHJpZXZlcixcbiAgX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZXG59IGZyb20gJy4uL2Vycm9ycyc7XG5pbXBvcnQgeyBQZXJzaXN0ZW5jZUludGVybmFsIH0gZnJvbSAnLi4vcGVyc2lzdGVuY2UnO1xuaW1wb3J0IHtcbiAgS2V5TmFtZSxcbiAgUGVyc2lzdGVuY2VVc2VyTWFuYWdlclxufSBmcm9tICcuLi9wZXJzaXN0ZW5jZS9wZXJzaXN0ZW5jZV91c2VyX21hbmFnZXInO1xuaW1wb3J0IHsgX3JlbG9hZFdpdGhvdXRTYXZpbmcgfSBmcm9tICcuLi91c2VyL3JlbG9hZCc7XG5pbXBvcnQgeyBfYXNzZXJ0IH0gZnJvbSAnLi4vdXRpbC9hc3NlcnQnO1xuaW1wb3J0IHsgX2dldEluc3RhbmNlIH0gZnJvbSAnLi4vdXRpbC9pbnN0YW50aWF0b3InO1xuaW1wb3J0IHsgX2dldFVzZXJMYW5ndWFnZSB9IGZyb20gJy4uL3V0aWwvbmF2aWdhdG9yJztcbmltcG9ydCB7IF9nZXRDbGllbnRWZXJzaW9uIH0gZnJvbSAnLi4vdXRpbC92ZXJzaW9uJztcbmltcG9ydCB7IEh0dHBIZWFkZXIsIFJlY2FwdGNoYUNsaWVudFR5cGUsIFJlY2FwdGNoYVZlcnNpb24gfSBmcm9tICcuLi8uLi9hcGknO1xuaW1wb3J0IHsgZ2V0UmVjYXB0Y2hhQ29uZmlnIH0gZnJvbSAnLi4vLi4vYXBpL2F1dGhlbnRpY2F0aW9uL3JlY2FwdGNoYSc7XG5pbXBvcnQgeyBSZWNhcHRjaGFFbnRlcnByaXNlVmVyaWZpZXIgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybV9icm93c2VyL3JlY2FwdGNoYS9yZWNhcHRjaGFfZW50ZXJwcmlzZV92ZXJpZmllcic7XG5pbXBvcnQgeyBBdXRoTWlkZGxld2FyZVF1ZXVlIH0gZnJvbSAnLi9taWRkbGV3YXJlJztcbmltcG9ydCB7IFJlY2FwdGNoYUNvbmZpZyB9IGZyb20gJy4uLy4uL3BsYXRmb3JtX2Jyb3dzZXIvcmVjYXB0Y2hhL3JlY2FwdGNoYSc7XG5pbXBvcnQgeyBfbG9nV2FybiB9IGZyb20gJy4uL3V0aWwvbG9nJztcblxuaW50ZXJmYWNlIEFzeW5jQWN0aW9uIHtcbiAgKCk6IFByb21pc2U8dm9pZD47XG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIERlZmF1bHRDb25maWcge1xuICBUT0tFTl9BUElfSE9TVCA9ICdzZWN1cmV0b2tlbi5nb29nbGVhcGlzLmNvbScsXG4gIEFQSV9IT1NUID0gJ2lkZW50aXR5dG9vbGtpdC5nb29nbGVhcGlzLmNvbScsXG4gIEFQSV9TQ0hFTUUgPSAnaHR0cHMnXG59XG5cbmV4cG9ydCBjbGFzcyBBdXRoSW1wbCBpbXBsZW1lbnRzIEF1dGhJbnRlcm5hbCwgX0ZpcmViYXNlU2VydmljZSB7XG4gIGN1cnJlbnRVc2VyOiBVc2VyIHwgbnVsbCA9IG51bGw7XG4gIGVtdWxhdG9yQ29uZmlnOiBFbXVsYXRvckNvbmZpZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG9wZXJhdGlvbnMgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgcHJpdmF0ZSBwZXJzaXN0ZW5jZU1hbmFnZXI/OiBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyO1xuICBwcml2YXRlIHJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyPzogUGVyc2lzdGVuY2VVc2VyTWFuYWdlcjtcbiAgcHJpdmF0ZSBhdXRoU3RhdGVTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uPFVzZXI+KHRoaXMpO1xuICBwcml2YXRlIGlkVG9rZW5TdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uPFVzZXI+KHRoaXMpO1xuICBwcml2YXRlIHJlYWRvbmx5IGJlZm9yZVN0YXRlUXVldWUgPSBuZXcgQXV0aE1pZGRsZXdhcmVRdWV1ZSh0aGlzKTtcbiAgcHJpdmF0ZSByZWRpcmVjdFVzZXI6IFVzZXJJbnRlcm5hbCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQgPSBmYWxzZTtcblxuICAvLyBBbnkgbmV0d29yayBjYWxscyB3aWxsIHNldCB0aGlzIHRvIHRydWUgYW5kIHByZXZlbnQgc3Vic2VxdWVudCBlbXVsYXRvclxuICAvLyBpbml0aWFsaXphdGlvblxuICBfY2FuSW5pdEVtdWxhdG9yID0gdHJ1ZTtcbiAgX2lzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgX2RlbGV0ZWQgPSBmYWxzZTtcbiAgX2luaXRpYWxpemF0aW9uUHJvbWlzZTogUHJvbWlzZTx2b2lkPiB8IG51bGwgPSBudWxsO1xuICBfcG9wdXBSZWRpcmVjdFJlc29sdmVyOiBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJJbnRlcm5hbCB8IG51bGwgPSBudWxsO1xuICBfZXJyb3JGYWN0b3J5OiBFcnJvckZhY3Rvcnk8QXV0aEVycm9yQ29kZSwgQXV0aEVycm9yUGFyYW1zPiA9XG4gICAgX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZO1xuICBfYWdlbnRSZWNhcHRjaGFDb25maWc6IFJlY2FwdGNoYUNvbmZpZyB8IG51bGwgPSBudWxsO1xuICBfdGVuYW50UmVjYXB0Y2hhQ29uZmlnczogUmVjb3JkPHN0cmluZywgUmVjYXB0Y2hhQ29uZmlnPiA9IHt9O1xuICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG5cbiAgLy8gVHJhY2tzIHRoZSBsYXN0IG5vdGlmaWVkIFVJRCBmb3Igc3RhdGUgY2hhbmdlIGxpc3RlbmVycyB0byBwcmV2ZW50XG4gIC8vIHJlcGVhdGVkIGNhbGxzIHRvIHRoZSBjYWxsYmFja3MuIFVuZGVmaW5lZCBtZWFucyBpdCdzIG5ldmVyIGJlZW5cbiAgLy8gY2FsbGVkLCB3aGVyZWFzIG51bGwgbWVhbnMgaXQncyBiZWVuIGNhbGxlZCB3aXRoIGEgc2lnbmVkIG91dCB1c2VyXG4gIHByaXZhdGUgbGFzdE5vdGlmaWVkVWlkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gIGxhbmd1YWdlQ29kZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHRlbmFudElkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgc2V0dGluZ3M6IEF1dGhTZXR0aW5ncyA9IHsgYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nOiBmYWxzZSB9O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyByZWFkb25seSBhcHA6IEZpcmViYXNlQXBwLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyOiBQcm92aWRlcjwnaGVhcnRiZWF0Jz4sXG4gICAgcHJpdmF0ZSByZWFkb25seSBhcHBDaGVja1NlcnZpY2VQcm92aWRlcjogUHJvdmlkZXI8QXBwQ2hlY2tJbnRlcm5hbENvbXBvbmVudE5hbWU+LFxuICAgIHB1YmxpYyByZWFkb25seSBjb25maWc6IENvbmZpZ0ludGVybmFsXG4gICkge1xuICAgIHRoaXMubmFtZSA9IGFwcC5uYW1lO1xuICAgIHRoaXMuY2xpZW50VmVyc2lvbiA9IGNvbmZpZy5zZGtDbGllbnRWZXJzaW9uO1xuICB9XG5cbiAgX2luaXRpYWxpemVXaXRoUGVyc2lzdGVuY2UoXG4gICAgcGVyc2lzdGVuY2VIaWVyYXJjaHk6IFBlcnNpc3RlbmNlSW50ZXJuYWxbXSxcbiAgICBwb3B1cFJlZGlyZWN0UmVzb2x2ZXI/OiBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xuICAgICAgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyID0gX2dldEluc3RhbmNlKHBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XG4gICAgfVxuXG4gICAgLy8gSGF2ZSB0byBjaGVjayBmb3IgYXBwIGRlbGV0aW9uIHRocm91Z2hvdXQgaW5pdGlhbGl6YXRpb24gKGFmdGVyIGVhY2hcbiAgICAvLyBwcm9taXNlIHJlc29sdXRpb24pXG4gICAgdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlID0gdGhpcy5xdWV1ZShhc3luYyAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMucGVyc2lzdGVuY2VNYW5hZ2VyID0gYXdhaXQgUGVyc2lzdGVuY2VVc2VyTWFuYWdlci5jcmVhdGUoXG4gICAgICAgIHRoaXMsXG4gICAgICAgIHBlcnNpc3RlbmNlSGllcmFyY2h5XG4gICAgICApO1xuXG4gICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEluaXRpYWxpemUgdGhlIHJlc29sdmVyIGVhcmx5IGlmIG5lY2Vzc2FyeSAob25seSBhcHBsaWNhYmxlIHRvIHdlYjpcbiAgICAgIC8vIHRoaXMgd2lsbCBjYXVzZSB0aGUgaWZyYW1lIHRvIGxvYWQgaW1tZWRpYXRlbHkgaW4gY2VydGFpbiBjYXNlcylcbiAgICAgIGlmICh0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXI/Ll9zaG91bGRJbml0UHJvYWN0aXZlbHkpIHtcbiAgICAgICAgLy8gSWYgdGhpcyBmYWlscywgZG9uJ3QgaGFsdCBhdXRoIGxvYWRpbmdcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIuX2luaXRpYWxpemUodGhpcyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvKiBJZ25vcmUgdGhlIGVycm9yICovXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplQ3VycmVudFVzZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcbiAgICAgIHRoaXMubGFzdE5vdGlmaWVkVWlkID0gdGhpcy5jdXJyZW50VXNlcj8udWlkIHx8IG51bGw7XG5cbiAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5faXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIHRoZSBwZXJzaXN0ZW5jZSBpcyBjaGFuZ2VkIGluIGFub3RoZXIgd2luZG93LCB0aGUgdXNlciBtYW5hZ2VyIHdpbGwgbGV0IHVzIGtub3dcbiAgICovXG4gIGFzeW5jIF9vblN0b3JhZ2VFdmVudCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UuZ2V0Q3VycmVudFVzZXIoKTtcblxuICAgIGlmICghdGhpcy5jdXJyZW50VXNlciAmJiAhdXNlcikge1xuICAgICAgLy8gTm8gY2hhbmdlLCBkbyBub3RoaW5nICh3YXMgc2lnbmVkIG91dCBhbmQgcmVtYWluZWQgc2lnbmVkIG91dCkuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNhbWUgdXNlciBpcyB0byBiZSBzeW5jaHJvbml6ZWQuXG4gICAgaWYgKHRoaXMuY3VycmVudFVzZXIgJiYgdXNlciAmJiB0aGlzLmN1cnJlbnRVc2VyLnVpZCA9PT0gdXNlci51aWQpIHtcbiAgICAgIC8vIERhdGEgdXBkYXRlLCBzaW1wbHkgY29weSBkYXRhIGNoYW5nZXMuXG4gICAgICB0aGlzLl9jdXJyZW50VXNlci5fYXNzaWduKHVzZXIpO1xuICAgICAgLy8gSWYgdG9rZW5zIGNoYW5nZWQgZnJvbSBwcmV2aW91cyB1c2VyIHRva2VucywgdGhpcyB3aWxsIHRyaWdnZXJcbiAgICAgIC8vIG5vdGlmeUF1dGhMaXN0ZW5lcnNfLlxuICAgICAgYXdhaXQgdGhpcy5jdXJyZW50VXNlci5nZXRJZFRva2VuKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGN1cnJlbnQgQXV0aCBzdGF0ZS4gRWl0aGVyIGEgbmV3IGxvZ2luIG9yIGxvZ291dC5cbiAgICAvLyBTa2lwIGJsb2NraW5nIGNhbGxiYWNrcywgdGhleSBzaG91bGQgbm90IGFwcGx5IHRvIGEgY2hhbmdlIGluIGFub3RoZXIgdGFiLlxuICAgIGF3YWl0IHRoaXMuX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXIsIC8qIHNraXBCZWZvcmVTdGF0ZUNhbGxiYWNrcyAqLyB0cnVlKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZUN1cnJlbnRVc2VyKFxuICAgIHBvcHVwUmVkaXJlY3RSZXNvbHZlcj86IFBvcHVwUmVkaXJlY3RSZXNvbHZlclxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBGaXJzdCBjaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHBlbmRpbmcgcmVkaXJlY3QgZXZlbnQuXG4gICAgY29uc3QgcHJldmlvdXNseVN0b3JlZFVzZXIgPVxuICAgICAgKGF3YWl0IHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5nZXRDdXJyZW50VXNlcigpKSBhcyBVc2VySW50ZXJuYWwgfCBudWxsO1xuICAgIGxldCBmdXR1cmVDdXJyZW50VXNlciA9IHByZXZpb3VzbHlTdG9yZWRVc2VyO1xuICAgIGxldCBuZWVkc1RvY2hlY2tNaWRkbGV3YXJlID0gZmFsc2U7XG4gICAgaWYgKHBvcHVwUmVkaXJlY3RSZXNvbHZlciAmJiB0aGlzLmNvbmZpZy5hdXRoRG9tYWluKSB7XG4gICAgICBhd2FpdCB0aGlzLmdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKCk7XG4gICAgICBjb25zdCByZWRpcmVjdFVzZXJFdmVudElkID0gdGhpcy5yZWRpcmVjdFVzZXI/Ll9yZWRpcmVjdEV2ZW50SWQ7XG4gICAgICBjb25zdCBzdG9yZWRVc2VyRXZlbnRJZCA9IGZ1dHVyZUN1cnJlbnRVc2VyPy5fcmVkaXJlY3RFdmVudElkO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy50cnlSZWRpcmVjdFNpZ25Jbihwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xuXG4gICAgICAvLyBJZiB0aGUgc3RvcmVkIHVzZXIgKGkuZS4gdGhlIG9sZCBcImN1cnJlbnRVc2VyXCIpIGhhcyBhIHJlZGlyZWN0SWQgdGhhdFxuICAgICAgLy8gbWF0Y2hlcyB0aGUgcmVkaXJlY3QgdXNlciwgdGhlbiB3ZSB3YW50IHRvIGluaXRpYWxseSBzaWduIGluIHdpdGggdGhlXG4gICAgICAvLyBuZXcgdXNlciBvYmplY3QgZnJvbSByZXN1bHQuXG4gICAgICAvLyBUT0RPKHNhbWdobyk6IE1vcmUgdGhvcm91Z2hseSB0ZXN0IGFsbCBvZiB0aGlzXG4gICAgICBpZiAoXG4gICAgICAgICghcmVkaXJlY3RVc2VyRXZlbnRJZCB8fCByZWRpcmVjdFVzZXJFdmVudElkID09PSBzdG9yZWRVc2VyRXZlbnRJZCkgJiZcbiAgICAgICAgcmVzdWx0Py51c2VyXG4gICAgICApIHtcbiAgICAgICAgZnV0dXJlQ3VycmVudFVzZXIgPSByZXN1bHQudXNlciBhcyBVc2VySW50ZXJuYWw7XG4gICAgICAgIG5lZWRzVG9jaGVja01pZGRsZXdhcmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIG5vIHVzZXIgaW4gcGVyc2lzdGVuY2UsIHRoZXJlIGlzIG5vIGN1cnJlbnQgdXNlci4gU2V0IHRvIG51bGwuXG4gICAgaWYgKCFmdXR1cmVDdXJyZW50VXNlcikge1xuICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcihudWxsKTtcbiAgICB9XG5cbiAgICBpZiAoIWZ1dHVyZUN1cnJlbnRVc2VyLl9yZWRpcmVjdEV2ZW50SWQpIHtcbiAgICAgIC8vIFRoaXMgaXNuJ3QgYSByZWRpcmVjdCBsaW5rIG9wZXJhdGlvbiwgd2UgY2FuIHJlbG9hZCBhbmQgYmFpbC5cbiAgICAgIC8vIEZpcnN0IHRob3VnaCwgZW5zdXJlIHRoYXQgd2UgY2hlY2sgdGhlIG1pZGRsZXdhcmUgaXMgaGFwcHkuXG4gICAgICBpZiAobmVlZHNUb2NoZWNrTWlkZGxld2FyZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYmVmb3JlU3RhdGVRdWV1ZS5ydW5NaWRkbGV3YXJlKGZ1dHVyZUN1cnJlbnRVc2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGZ1dHVyZUN1cnJlbnRVc2VyID0gcHJldmlvdXNseVN0b3JlZFVzZXI7XG4gICAgICAgICAgLy8gV2Uga25vdyB0aGlzIGlzIGF2YWlsYWJsZSBzaW5jZSB0aGUgYml0IGlzIG9ubHkgc2V0IHdoZW4gdGhlXG4gICAgICAgICAgLy8gcmVzb2x2ZXIgaXMgYXZhaWxhYmxlXG4gICAgICAgICAgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyIS5fb3ZlcnJpZGVSZWRpcmVjdFJlc3VsdCh0aGlzLCAoKSA9PlxuICAgICAgICAgICAgUHJvbWlzZS5yZWplY3QoZSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmdXR1cmVDdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWxvYWRBbmRTZXRDdXJyZW50VXNlck9yQ2xlYXIoZnV0dXJlQ3VycmVudFVzZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcihudWxsKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfYXNzZXJ0KHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciwgdGhpcywgQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUik7XG4gICAgYXdhaXQgdGhpcy5nZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcigpO1xuXG4gICAgLy8gSWYgdGhlIHJlZGlyZWN0IHVzZXIncyBldmVudCBJRCBtYXRjaGVzIHRoZSBjdXJyZW50IHVzZXIncyBldmVudCBJRCxcbiAgICAvLyBETyBOT1QgcmVsb2FkIHRoZSBjdXJyZW50IHVzZXIsIG90aGVyd2lzZSB0aGV5J2xsIGJlIGNsZWFyZWQgZnJvbSBzdG9yYWdlLlxuICAgIC8vIFRoaXMgaXMgaW1wb3J0YW50IGZvciB0aGUgcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QoKSBmbG93LlxuICAgIGlmIChcbiAgICAgIHRoaXMucmVkaXJlY3RVc2VyICYmXG4gICAgICB0aGlzLnJlZGlyZWN0VXNlci5fcmVkaXJlY3RFdmVudElkID09PSBmdXR1cmVDdXJyZW50VXNlci5fcmVkaXJlY3RFdmVudElkXG4gICAgKSB7XG4gICAgICByZXR1cm4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKGZ1dHVyZUN1cnJlbnRVc2VyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZWxvYWRBbmRTZXRDdXJyZW50VXNlck9yQ2xlYXIoZnV0dXJlQ3VycmVudFVzZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0cnlSZWRpcmVjdFNpZ25JbihcbiAgICByZWRpcmVjdFJlc29sdmVyOiBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJcbiAgKTogUHJvbWlzZTxVc2VyQ3JlZGVudGlhbCB8IG51bGw+IHtcbiAgICAvLyBUaGUgcmVkaXJlY3QgdXNlciBuZWVkcyB0byBiZSBjaGVja2VkIChhbmQgc2lnbmVkIGluIGlmIGF2YWlsYWJsZSlcbiAgICAvLyBkdXJpbmcgYXV0aCBpbml0aWFsaXphdGlvbi4gQWxsIG9mIHRoZSBub3JtYWwgc2lnbiBpbiBhbmQgbGluay9yZWF1dGhcbiAgICAvLyBmbG93cyBjYWxsIGJhY2sgaW50byBhdXRoIGFuZCBwdXNoIHRoaW5ncyBvbnRvIHRoZSBwcm9taXNlIHF1ZXVlLiBXZVxuICAgIC8vIG5lZWQgdG8gYXdhaXQgdGhlIHJlc3VsdCBvZiB0aGUgcmVkaXJlY3Qgc2lnbiBpbiAqaW5zaWRlIHRoZSBwcm9taXNlXG4gICAgLy8gcXVldWUqLiBUaGlzIHByZXNlbnRzIGEgcHJvYmxlbTogd2UgcnVuIGludG8gZGVhZGxvY2suIFNlZTpcbiAgICAvLyAgICDilIw+IFtJbml0aWFsaXphdGlvbl0g4pSA4pSA4pSA4pSA4pSA4pSQXG4gICAgLy8gICAg4pSMPiBbPG90aGVyIHF1ZXVlIHRhc2tzPl0g4pSCXG4gICAgLy8gICAg4pSU4pSAIFtnZXRSZWRpcmVjdFJlc3VsdF0gPOKUgOKUmFxuICAgIC8vICAgIHdoZXJlIFtdIGFyZSB0YXNrcyBvbiB0aGUgcXVldWUgYW5kIGFycm93cyBkZW5vdGUgYXdhaXRzXG4gICAgLy8gSW5pdGlhbGl6YXRpb24gd2lsbCBuZXZlciBjb21wbGV0ZSBiZWNhdXNlIGl0J3Mgd2FpdGluZyBvbiBzb21ldGhpbmdcbiAgICAvLyB0aGF0J3Mgd2FpdGluZyBmb3IgaW5pdGlhbGl6YXRpb24gdG8gY29tcGxldGUhXG4gICAgLy9cbiAgICAvLyBJbnN0ZWFkLCB0aGlzIG1ldGhvZCBjYWxscyBnZXRSZWRpcmVjdFJlc3VsdCgpIChzdG9yZWQgaW5cbiAgICAvLyBfY29tcGxldGVSZWRpcmVjdEZuKSB3aXRoIGFuIG9wdGlvbmFsIHBhcmFtZXRlciB0aGF0IGluc3RydWN0cyBhbGwgb2ZcbiAgICAvLyB0aGUgdW5kZXJseWluZyBhdXRoIG9wZXJhdGlvbnMgdG8gc2tpcCBhbnl0aGluZyB0aGF0IG11dGF0ZXMgYXV0aCBzdGF0ZS5cblxuICAgIGxldCByZXN1bHQ6IFVzZXJDcmVkZW50aWFsIHwgbnVsbCA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFdlIGtub3cgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyIGlzIHNldCBzaW5jZSByZWRpcmVjdFJlc29sdmVyXG4gICAgICAvLyBpcyBwYXNzZWQgaW4uIFRoZSBfY29tcGxldGVSZWRpcmVjdEZuIGV4cGVjdHMgdGhlIHVud3JhcHBlZCBleHRlcm4uXG4gICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIhLl9jb21wbGV0ZVJlZGlyZWN0Rm4oXG4gICAgICAgIHRoaXMsXG4gICAgICAgIHJlZGlyZWN0UmVzb2x2ZXIsXG4gICAgICAgIHRydWVcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gU3dhbGxvdyBhbnkgZXJyb3JzIGhlcmU7IHRoZSBjb2RlIGNhbiByZXRyaWV2ZSB0aGVtIGluXG4gICAgICAvLyBnZXRSZWRpcmVjdFJlc3VsdCgpLlxuICAgICAgYXdhaXQgdGhpcy5fc2V0UmVkaXJlY3RVc2VyKG51bGwpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlbG9hZEFuZFNldEN1cnJlbnRVc2VyT3JDbGVhcihcbiAgICB1c2VyOiBVc2VySW50ZXJuYWxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChcbiAgICAgICAgKGUgYXMgRmlyZWJhc2VFcnJvcik/LmNvZGUgIT09XG4gICAgICAgIGBhdXRoLyR7QXV0aEVycm9yQ29kZS5ORVRXT1JLX1JFUVVFU1RfRkFJTEVEfWBcbiAgICAgICkge1xuICAgICAgICAvLyBTb21ldGhpbmcncyB3cm9uZyB3aXRoIHRoZSB1c2VyJ3MgdG9rZW4uIExvZyB0aGVtIG91dCBhbmQgcmVtb3ZlXG4gICAgICAgIC8vIHRoZW0gZnJvbSBzdG9yYWdlXG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIobnVsbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcih1c2VyKTtcbiAgfVxuXG4gIHVzZURldmljZUxhbmd1YWdlKCk6IHZvaWQge1xuICAgIHRoaXMubGFuZ3VhZ2VDb2RlID0gX2dldFVzZXJMYW5ndWFnZSgpO1xuICB9XG5cbiAgYXN5bmMgX2RlbGV0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLl9kZWxldGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUN1cnJlbnRVc2VyKHVzZXJFeHRlcm46IFVzZXIgfCBudWxsKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gVGhlIHB1YmxpYyB1cGRhdGVDdXJyZW50VXNlciBtZXRob2QgbmVlZHMgdG8gbWFrZSBhIGNvcHkgb2YgdGhlIHVzZXIsXG4gICAgLy8gYW5kIGFsc28gY2hlY2sgdGhhdCB0aGUgcHJvamVjdCBtYXRjaGVzXG4gICAgY29uc3QgdXNlciA9IHVzZXJFeHRlcm5cbiAgICAgID8gKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyRXh0ZXJuKSBhcyBVc2VySW50ZXJuYWwpXG4gICAgICA6IG51bGw7XG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIF9hc3NlcnQoXG4gICAgICAgIHVzZXIuYXV0aC5jb25maWcuYXBpS2V5ID09PSB0aGlzLmNvbmZpZy5hcGlLZXksXG4gICAgICAgIHRoaXMsXG4gICAgICAgIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9BVVRIXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdXBkYXRlQ3VycmVudFVzZXIodXNlciAmJiB1c2VyLl9jbG9uZSh0aGlzKSk7XG4gIH1cblxuICBhc3luYyBfdXBkYXRlQ3VycmVudFVzZXIoXG4gICAgdXNlcjogVXNlciB8IG51bGwsXG4gICAgc2tpcEJlZm9yZVN0YXRlQ2FsbGJhY2tzOiBib29sZWFuID0gZmFsc2VcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIF9hc3NlcnQoXG4gICAgICAgIHRoaXMudGVuYW50SWQgPT09IHVzZXIudGVuYW50SWQsXG4gICAgICAgIHRoaXMsXG4gICAgICAgIEF1dGhFcnJvckNvZGUuVEVOQU5UX0lEX01JU01BVENIXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghc2tpcEJlZm9yZVN0YXRlQ2FsbGJhY2tzKSB7XG4gICAgICBhd2FpdCB0aGlzLmJlZm9yZVN0YXRlUXVldWUucnVuTWlkZGxld2FyZSh1c2VyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5xdWV1ZShhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlciBhcyBVc2VySW50ZXJuYWwgfCBudWxsKTtcbiAgICAgIHRoaXMubm90aWZ5QXV0aExpc3RlbmVycygpO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgc2lnbk91dCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBSdW4gZmlyc3QsIHRvIGJsb2NrIF9zZXRSZWRpcmVjdFVzZXIoKSBpZiBhbnkgY2FsbGJhY2tzIGZhaWwuXG4gICAgYXdhaXQgdGhpcy5iZWZvcmVTdGF0ZVF1ZXVlLnJ1bk1pZGRsZXdhcmUobnVsbCk7XG4gICAgLy8gQ2xlYXIgdGhlIHJlZGlyZWN0IHVzZXIgd2hlbiBzaWduT3V0IGlzIGNhbGxlZFxuICAgIGlmICh0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyIHx8IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xuICAgICAgYXdhaXQgdGhpcy5fc2V0UmVkaXJlY3RVc2VyKG51bGwpO1xuICAgIH1cblxuICAgIC8vIFByZXZlbnQgY2FsbGJhY2tzIGZyb20gYmVpbmcgY2FsbGVkIGFnYWluIGluIF91cGRhdGVDdXJyZW50VXNlciwgYXNcbiAgICAvLyB0aGV5IHdlcmUgYWxyZWFkeSBjYWxsZWQgaW4gdGhlIGZpcnN0IGxpbmUuXG4gICAgcmV0dXJuIHRoaXMuX3VwZGF0ZUN1cnJlbnRVc2VyKG51bGwsIC8qIHNraXBCZWZvcmVTdGF0ZUNhbGxiYWNrcyAqLyB0cnVlKTtcbiAgfVxuXG4gIHNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlOiBQZXJzaXN0ZW5jZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5zZXRQZXJzaXN0ZW5jZShfZ2V0SW5zdGFuY2UocGVyc2lzdGVuY2UpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemVSZWNhcHRjaGFDb25maWcoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRSZWNhcHRjaGFDb25maWcodGhpcywge1xuICAgICAgY2xpZW50VHlwZTogUmVjYXB0Y2hhQ2xpZW50VHlwZS5XRUIsXG4gICAgICB2ZXJzaW9uOiBSZWNhcHRjaGFWZXJzaW9uLkVOVEVSUFJJU0VcbiAgICB9KTtcblxuICAgIGNvbnN0IGNvbmZpZyA9IG5ldyBSZWNhcHRjaGFDb25maWcocmVzcG9uc2UpO1xuICAgIGlmICh0aGlzLnRlbmFudElkID09IG51bGwpIHtcbiAgICAgIHRoaXMuX2FnZW50UmVjYXB0Y2hhQ29uZmlnID0gY29uZmlnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl90ZW5hbnRSZWNhcHRjaGFDb25maWdzW3RoaXMudGVuYW50SWRdID0gY29uZmlnO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuZW1haWxQYXNzd29yZEVuYWJsZWQpIHtcbiAgICAgIGNvbnN0IHZlcmlmaWVyID0gbmV3IFJlY2FwdGNoYUVudGVycHJpc2VWZXJpZmllcih0aGlzKTtcbiAgICAgIHZvaWQgdmVyaWZpZXIudmVyaWZ5KCk7XG4gICAgfVxuICB9XG5cbiAgX2dldFJlY2FwdGNoYUNvbmZpZygpOiBSZWNhcHRjaGFDb25maWcgfCBudWxsIHtcbiAgICBpZiAodGhpcy50ZW5hbnRJZCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5fYWdlbnRSZWNhcHRjaGFDb25maWc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl90ZW5hbnRSZWNhcHRjaGFDb25maWdzW3RoaXMudGVuYW50SWRdO1xuICAgIH1cbiAgfVxuXG4gIF9nZXRQZXJzaXN0ZW5jZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UucGVyc2lzdGVuY2UudHlwZTtcbiAgfVxuXG4gIF91cGRhdGVFcnJvck1hcChlcnJvck1hcDogQXV0aEVycm9yTWFwKTogdm9pZCB7XG4gICAgdGhpcy5fZXJyb3JGYWN0b3J5ID0gbmV3IEVycm9yRmFjdG9yeTxBdXRoRXJyb3JDb2RlLCBBdXRoRXJyb3JQYXJhbXM+KFxuICAgICAgJ2F1dGgnLFxuICAgICAgJ0ZpcmViYXNlJyxcbiAgICAgIChlcnJvck1hcCBhcyBFcnJvck1hcFJldHJpZXZlcikoKVxuICAgICk7XG4gIH1cblxuICBvbkF1dGhTdGF0ZUNoYW5nZWQoXG4gICAgbmV4dE9yT2JzZXJ2ZXI6IE5leHRPck9ic2VydmVyPFVzZXI+LFxuICAgIGVycm9yPzogRXJyb3JGbixcbiAgICBjb21wbGV0ZWQ/OiBDb21wbGV0ZUZuXG4gICk6IFVuc3Vic2NyaWJlIHtcbiAgICByZXR1cm4gdGhpcy5yZWdpc3RlclN0YXRlTGlzdGVuZXIoXG4gICAgICB0aGlzLmF1dGhTdGF0ZVN1YnNjcmlwdGlvbixcbiAgICAgIG5leHRPck9ic2VydmVyLFxuICAgICAgZXJyb3IsXG4gICAgICBjb21wbGV0ZWRcbiAgICApO1xuICB9XG5cbiAgYmVmb3JlQXV0aFN0YXRlQ2hhbmdlZChcbiAgICBjYWxsYmFjazogKHVzZXI6IFVzZXIgfCBudWxsKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPixcbiAgICBvbkFib3J0PzogKCkgPT4gdm9pZFxuICApOiBVbnN1YnNjcmliZSB7XG4gICAgcmV0dXJuIHRoaXMuYmVmb3JlU3RhdGVRdWV1ZS5wdXNoQ2FsbGJhY2soY2FsbGJhY2ssIG9uQWJvcnQpO1xuICB9XG5cbiAgb25JZFRva2VuQ2hhbmdlZChcbiAgICBuZXh0T3JPYnNlcnZlcjogTmV4dE9yT2JzZXJ2ZXI8VXNlcj4sXG4gICAgZXJyb3I/OiBFcnJvckZuLFxuICAgIGNvbXBsZXRlZD86IENvbXBsZXRlRm5cbiAgKTogVW5zdWJzY3JpYmUge1xuICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyU3RhdGVMaXN0ZW5lcihcbiAgICAgIHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbixcbiAgICAgIG5leHRPck9ic2VydmVyLFxuICAgICAgZXJyb3IsXG4gICAgICBjb21wbGV0ZWRcbiAgICApO1xuICB9XG5cbiAgdG9KU09OKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFwaUtleTogdGhpcy5jb25maWcuYXBpS2V5LFxuICAgICAgYXV0aERvbWFpbjogdGhpcy5jb25maWcuYXV0aERvbWFpbixcbiAgICAgIGFwcE5hbWU6IHRoaXMubmFtZSxcbiAgICAgIGN1cnJlbnRVc2VyOiB0aGlzLl9jdXJyZW50VXNlcj8udG9KU09OKClcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgX3NldFJlZGlyZWN0VXNlcihcbiAgICB1c2VyOiBVc2VySW50ZXJuYWwgfCBudWxsLFxuICAgIHBvcHVwUmVkaXJlY3RSZXNvbHZlcj86IFBvcHVwUmVkaXJlY3RSZXNvbHZlclxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCByZWRpcmVjdE1hbmFnZXIgPSBhd2FpdCB0aGlzLmdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKFxuICAgICAgcG9wdXBSZWRpcmVjdFJlc29sdmVyXG4gICAgKTtcbiAgICByZXR1cm4gdXNlciA9PT0gbnVsbFxuICAgICAgPyByZWRpcmVjdE1hbmFnZXIucmVtb3ZlQ3VycmVudFVzZXIoKVxuICAgICAgOiByZWRpcmVjdE1hbmFnZXIuc2V0Q3VycmVudFVzZXIodXNlcik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKFxuICAgIHBvcHVwUmVkaXJlY3RSZXNvbHZlcj86IFBvcHVwUmVkaXJlY3RSZXNvbHZlclxuICApOiBQcm9taXNlPFBlcnNpc3RlbmNlVXNlck1hbmFnZXI+IHtcbiAgICBpZiAoIXRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIpIHtcbiAgICAgIGNvbnN0IHJlc29sdmVyOiBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJJbnRlcm5hbCB8IG51bGwgPVxuICAgICAgICAocG9wdXBSZWRpcmVjdFJlc29sdmVyICYmIF9nZXRJbnN0YW5jZShwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpKSB8fFxuICAgICAgICB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXI7XG4gICAgICBfYXNzZXJ0KHJlc29sdmVyLCB0aGlzLCBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SKTtcbiAgICAgIHRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIgPSBhd2FpdCBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyLmNyZWF0ZShcbiAgICAgICAgdGhpcyxcbiAgICAgICAgW19nZXRJbnN0YW5jZShyZXNvbHZlci5fcmVkaXJlY3RQZXJzaXN0ZW5jZSldLFxuICAgICAgICBLZXlOYW1lLlJFRElSRUNUX1VTRVJcbiAgICAgICk7XG4gICAgICB0aGlzLnJlZGlyZWN0VXNlciA9XG4gICAgICAgIGF3YWl0IHRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIuZ2V0Q3VycmVudFVzZXIoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcjtcbiAgfVxuXG4gIGFzeW5jIF9yZWRpcmVjdFVzZXJGb3JJZChpZDogc3RyaW5nKTogUHJvbWlzZTxVc2VySW50ZXJuYWwgfCBudWxsPiB7XG4gICAgLy8gTWFrZSBzdXJlIHdlJ3ZlIGNsZWFyZWQgYW55IHBlbmRpbmcgcGVyc2lzdGVuY2UgYWN0aW9ucyBpZiB3ZSdyZSBub3QgaW5cbiAgICAvLyB0aGUgaW5pdGlhbGl6ZXJcbiAgICBpZiAodGhpcy5faXNJbml0aWFsaXplZCkge1xuICAgICAgYXdhaXQgdGhpcy5xdWV1ZShhc3luYyAoKSA9PiB7fSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRVc2VyPy5fcmVkaXJlY3RFdmVudElkID09PSBpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRVc2VyO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJlZGlyZWN0VXNlcj8uX3JlZGlyZWN0RXZlbnRJZCA9PT0gaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlZGlyZWN0VXNlcjtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIF9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VyOiBVc2VySW50ZXJuYWwpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodXNlciA9PT0gdGhpcy5jdXJyZW50VXNlcikge1xuICAgICAgcmV0dXJuIHRoaXMucXVldWUoYXN5bmMgKCkgPT4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKHVzZXIpKTtcbiAgICB9XG4gIH1cblxuICAvKiogTm90aWZpZXMgbGlzdGVuZXJzIG9ubHkgaWYgdGhlIHVzZXIgaXMgY3VycmVudCAqL1xuICBfbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHVzZXI6IFVzZXJJbnRlcm5hbCk6IHZvaWQge1xuICAgIGlmICh1c2VyID09PSB0aGlzLmN1cnJlbnRVc2VyKSB7XG4gICAgICB0aGlzLm5vdGlmeUF1dGhMaXN0ZW5lcnMoKTtcbiAgICB9XG4gIH1cblxuICBfa2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuY29uZmlnLmF1dGhEb21haW59OiR7dGhpcy5jb25maWcuYXBpS2V5fToke3RoaXMubmFtZX1gO1xuICB9XG5cbiAgX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpOiB2b2lkIHtcbiAgICB0aGlzLmlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQgPSB0cnVlO1xuICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyKSB7XG4gICAgICB0aGlzLl9jdXJyZW50VXNlci5fc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk6IHZvaWQge1xuICAgIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyKSB7XG4gICAgICB0aGlzLl9jdXJyZW50VXNlci5fc3RvcFByb2FjdGl2ZVJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxuICAvKiogUmV0dXJucyB0aGUgY3VycmVudCB1c2VyIGNhc3QgYXMgdGhlIGludGVybmFsIHR5cGUgKi9cbiAgZ2V0IF9jdXJyZW50VXNlcigpOiBVc2VySW50ZXJuYWwge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRVc2VyIGFzIFVzZXJJbnRlcm5hbDtcbiAgfVxuXG4gIHByaXZhdGUgbm90aWZ5QXV0aExpc3RlbmVycygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2lzSW5pdGlhbGl6ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmlkVG9rZW5TdWJzY3JpcHRpb24ubmV4dCh0aGlzLmN1cnJlbnRVc2VyKTtcblxuICAgIGNvbnN0IGN1cnJlbnRVaWQgPSB0aGlzLmN1cnJlbnRVc2VyPy51aWQgPz8gbnVsbDtcbiAgICBpZiAodGhpcy5sYXN0Tm90aWZpZWRVaWQgIT09IGN1cnJlbnRVaWQpIHtcbiAgICAgIHRoaXMubGFzdE5vdGlmaWVkVWlkID0gY3VycmVudFVpZDtcbiAgICAgIHRoaXMuYXV0aFN0YXRlU3Vic2NyaXB0aW9uLm5leHQodGhpcy5jdXJyZW50VXNlcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZWdpc3RlclN0YXRlTGlzdGVuZXIoXG4gICAgc3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb248VXNlcj4sXG4gICAgbmV4dE9yT2JzZXJ2ZXI6IE5leHRPck9ic2VydmVyPFVzZXI+LFxuICAgIGVycm9yPzogRXJyb3JGbixcbiAgICBjb21wbGV0ZWQ/OiBDb21wbGV0ZUZuXG4gICk6IFVuc3Vic2NyaWJlIHtcbiAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xuICAgICAgcmV0dXJuICgpID0+IHt9O1xuICAgIH1cblxuICAgIGNvbnN0IGNiID1cbiAgICAgIHR5cGVvZiBuZXh0T3JPYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IG5leHRPck9ic2VydmVyXG4gICAgICAgIDogbmV4dE9yT2JzZXJ2ZXIubmV4dC5iaW5kKG5leHRPck9ic2VydmVyKTtcblxuICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLl9pc0luaXRpYWxpemVkXG4gICAgICA/IFByb21pc2UucmVzb2x2ZSgpXG4gICAgICA6IHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcbiAgICBfYXNzZXJ0KHByb21pc2UsIHRoaXMsIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IpO1xuICAgIC8vIFRoZSBjYWxsYmFjayBuZWVkcyB0byBiZSBjYWxsZWQgYXN5bmNocm9ub3VzbHkgcGVyIHRoZSBzcGVjLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICBwcm9taXNlLnRoZW4oKCkgPT4gY2IodGhpcy5jdXJyZW50VXNlcikpO1xuXG4gICAgaWYgKHR5cGVvZiBuZXh0T3JPYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbi5hZGRPYnNlcnZlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzdWJzY3JpcHRpb24uYWRkT2JzZXJ2ZXIobmV4dE9yT2JzZXJ2ZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVbnByb3RlY3RlZCAoZnJvbSByYWNlIGNvbmRpdGlvbnMpIG1ldGhvZCB0byBzZXQgdGhlIGN1cnJlbnQgdXNlci4gVGhpc1xuICAgKiBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSB3aXRoaW4gYSBxdWV1ZWQgY2FsbGJhY2suIFRoaXMgaXMgbmVjZXNzYXJ5XG4gICAqIGJlY2F1c2UgdGhlIHF1ZXVlIHNob3VsZG4ndCByZWx5IG9uIGFub3RoZXIgcXVldWVkIGNhbGxiYWNrLlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBkaXJlY3RseVNldEN1cnJlbnRVc2VyKFxuICAgIHVzZXI6IFVzZXJJbnRlcm5hbCB8IG51bGxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuY3VycmVudFVzZXIgJiYgdGhpcy5jdXJyZW50VXNlciAhPT0gdXNlcikge1xuICAgICAgdGhpcy5fY3VycmVudFVzZXIuX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk7XG4gICAgfVxuICAgIGlmICh1c2VyICYmIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCkge1xuICAgICAgdXNlci5fc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jdXJyZW50VXNlciA9IHVzZXI7XG5cbiAgICBpZiAodXNlcikge1xuICAgICAgYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UucmVtb3ZlQ3VycmVudFVzZXIoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHF1ZXVlKGFjdGlvbjogQXN5bmNBY3Rpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBJbiBjYXNlIHNvbWV0aGluZyBlcnJvcnMsIHRoZSBjYWxsYmFjayBzdGlsbCBzaG91bGQgYmUgY2FsbGVkIGluIG9yZGVyXG4gICAgLy8gdG8ga2VlcCB0aGUgcHJvbWlzZSBjaGFpbiBhbGl2ZVxuICAgIHRoaXMub3BlcmF0aW9ucyA9IHRoaXMub3BlcmF0aW9ucy50aGVuKGFjdGlvbiwgYWN0aW9uKTtcbiAgICByZXR1cm4gdGhpcy5vcGVyYXRpb25zO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgYXNzZXJ0ZWRQZXJzaXN0ZW5jZSgpOiBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyIHtcbiAgICBfYXNzZXJ0KHRoaXMucGVyc2lzdGVuY2VNYW5hZ2VyLCB0aGlzLCBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SKTtcbiAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZU1hbmFnZXI7XG4gIH1cblxuICBwcml2YXRlIGZyYW1ld29ya3M6IHN0cmluZ1tdID0gW107XG4gIHByaXZhdGUgY2xpZW50VmVyc2lvbjogc3RyaW5nO1xuICBfbG9nRnJhbWV3b3JrKGZyYW1ld29yazogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCFmcmFtZXdvcmsgfHwgdGhpcy5mcmFtZXdvcmtzLmluY2x1ZGVzKGZyYW1ld29yaykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5mcmFtZXdvcmtzLnB1c2goZnJhbWV3b3JrKTtcblxuICAgIC8vIFNvcnQgYWxwaGFiZXRpY2FsbHkgc28gdGhhdCBcIkZpcmViYXNlQ29yZS13ZWIsRmlyZWJhc2VVSS13ZWJcIiBhbmRcbiAgICAvLyBcIkZpcmViYXNlVUktd2ViLEZpcmViYXNlQ29yZS13ZWJcIiBhcmVuJ3Qgdmlld2VkIGFzIGRpZmZlcmVudC5cbiAgICB0aGlzLmZyYW1ld29ya3Muc29ydCgpO1xuICAgIHRoaXMuY2xpZW50VmVyc2lvbiA9IF9nZXRDbGllbnRWZXJzaW9uKFxuICAgICAgdGhpcy5jb25maWcuY2xpZW50UGxhdGZvcm0sXG4gICAgICB0aGlzLl9nZXRGcmFtZXdvcmtzKClcbiAgICApO1xuICB9XG4gIF9nZXRGcmFtZXdvcmtzKCk6IHJlYWRvbmx5IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5mcmFtZXdvcmtzO1xuICB9XG4gIGFzeW5jIF9nZXRBZGRpdGlvbmFsSGVhZGVycygpOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIHN0cmluZz4+IHtcbiAgICAvLyBBZGRpdGlvbmFsIGhlYWRlcnMgb24gZXZlcnkgcmVxdWVzdFxuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICBbSHR0cEhlYWRlci5YX0NMSUVOVF9WRVJTSU9OXTogdGhpcy5jbGllbnRWZXJzaW9uXG4gICAgfTtcblxuICAgIGlmICh0aGlzLmFwcC5vcHRpb25zLmFwcElkKSB7XG4gICAgICBoZWFkZXJzW0h0dHBIZWFkZXIuWF9GSVJFQkFTRV9HTVBJRF0gPSB0aGlzLmFwcC5vcHRpb25zLmFwcElkO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBoZWFydGJlYXQgc2VydmljZSBleGlzdHMsIGFkZCB0aGUgaGVhcnRiZWF0IHN0cmluZ1xuICAgIGNvbnN0IGhlYXJ0YmVhdHNIZWFkZXIgPSBhd2FpdCB0aGlzLmhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlclxuICAgICAgLmdldEltbWVkaWF0ZSh7XG4gICAgICAgIG9wdGlvbmFsOiB0cnVlXG4gICAgICB9KVxuICAgICAgPy5nZXRIZWFydGJlYXRzSGVhZGVyKCk7XG4gICAgaWYgKGhlYXJ0YmVhdHNIZWFkZXIpIHtcbiAgICAgIGhlYWRlcnNbSHR0cEhlYWRlci5YX0ZJUkVCQVNFX0NMSUVOVF0gPSBoZWFydGJlYXRzSGVhZGVyO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBBcHAgQ2hlY2sgc2VydmljZSBleGlzdHMsIGFkZCB0aGUgQXBwIENoZWNrIHRva2VuIGluIHRoZSBoZWFkZXJzXG4gICAgY29uc3QgYXBwQ2hlY2tUb2tlbiA9IGF3YWl0IHRoaXMuX2dldEFwcENoZWNrVG9rZW4oKTtcbiAgICBpZiAoYXBwQ2hlY2tUb2tlbikge1xuICAgICAgaGVhZGVyc1tIdHRwSGVhZGVyLlhfRklSRUJBU0VfQVBQX0NIRUNLXSA9IGFwcENoZWNrVG9rZW47XG4gICAgfVxuXG4gICAgcmV0dXJuIGhlYWRlcnM7XG4gIH1cblxuICBhc3luYyBfZ2V0QXBwQ2hlY2tUb2tlbigpOiBQcm9taXNlPHN0cmluZyB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGFwcENoZWNrVG9rZW5SZXN1bHQgPSBhd2FpdCB0aGlzLmFwcENoZWNrU2VydmljZVByb3ZpZGVyXG4gICAgICAuZ2V0SW1tZWRpYXRlKHsgb3B0aW9uYWw6IHRydWUgfSlcbiAgICAgID8uZ2V0VG9rZW4oKTtcbiAgICBpZiAoYXBwQ2hlY2tUb2tlblJlc3VsdD8uZXJyb3IpIHtcbiAgICAgIC8vIENvbnRleHQ6IGFwcENoZWNrLmdldFRva2VuKCkgd2lsbCBuZXZlciB0aHJvdyBldmVuIGlmIGFuIGVycm9yIGhhcHBlbmVkLlxuICAgICAgLy8gSW4gdGhlIGVycm9yIGNhc2UsIGEgZHVtbXkgdG9rZW4gd2lsbCBiZSByZXR1cm5lZCBhbG9uZyB3aXRoIGFuIGVycm9yIGZpZWxkIGRlc2NyaWJpbmdcbiAgICAgIC8vIHRoZSBlcnJvci4gSW4gZ2VuZXJhbCwgd2Ugc2hvdWxkbid0IGNhcmUgYWJvdXQgdGhlIGVycm9yIGNvbmRpdGlvbiBhbmQganVzdCB1c2VcbiAgICAgIC8vIHRoZSB0b2tlbiAoYWN0dWFsIG9yIGR1bW15KSB0byBzZW5kIHJlcXVlc3RzLlxuICAgICAgX2xvZ1dhcm4oXG4gICAgICAgIGBFcnJvciB3aGlsZSByZXRyaWV2aW5nIEFwcCBDaGVjayB0b2tlbjogJHthcHBDaGVja1Rva2VuUmVzdWx0LmVycm9yfWBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBhcHBDaGVja1Rva2VuUmVzdWx0Py50b2tlbjtcbiAgfVxufVxuXG4vKipcbiAqIE1ldGhvZCB0byBiZSB1c2VkIHRvIGNhc3QgZG93biB0byBvdXIgcHJpdmF0ZSBpbXBsbWVudGF0aW9uIG9mIEF1dGguXG4gKiBJdCB3aWxsIGFsc28gaGFuZGxlIHVud3JhcHBpbmcgZnJvbSB0aGUgY29tcGF0IHR5cGUgaWYgbmVjZXNzYXJ5XG4gKlxuICogQHBhcmFtIGF1dGggQXV0aCBvYmplY3QgcGFzc2VkIGluIGZyb20gZGV2ZWxvcGVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfY2FzdEF1dGgoYXV0aDogQXV0aCk6IEF1dGhJbnRlcm5hbCB7XG4gIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkgYXMgQXV0aEludGVybmFsO1xufVxuXG4vKiogSGVscGVyIGNsYXNzIHRvIHdyYXAgc3Vic2NyaWJlciBsb2dpYyAqL1xuY2xhc3MgU3Vic2NyaXB0aW9uPFQ+IHtcbiAgcHJpdmF0ZSBvYnNlcnZlcjogT2JzZXJ2ZXI8VCB8IG51bGw+IHwgbnVsbCA9IG51bGw7XG4gIHJlYWRvbmx5IGFkZE9ic2VydmVyOiBTdWJzY3JpYmU8VCB8IG51bGw+ID0gY3JlYXRlU3Vic2NyaWJlKFxuICAgIG9ic2VydmVyID0+ICh0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXIpXG4gICk7XG5cbiAgY29uc3RydWN0b3IocmVhZG9ubHkgYXV0aDogQXV0aEludGVybmFsKSB7fVxuXG4gIGdldCBuZXh0KCk6IE5leHRGbjxUIHwgbnVsbD4ge1xuICAgIF9hc3NlcnQodGhpcy5vYnNlcnZlciwgdGhpcy5hdXRoLCBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SKTtcbiAgICByZXR1cm4gdGhpcy5vYnNlcnZlci5uZXh0LmJpbmQodGhpcy5vYnNlcnZlcik7XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IF9nZXRQcm92aWRlciwgRmlyZWJhc2VBcHAgfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IGRlZXBFcXVhbCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IEF1dGgsIERlcGVuZGVuY2llcyB9IGZyb20gJy4uLy4uL21vZGVsL3B1YmxpY190eXBlcyc7XG5cbmltcG9ydCB7IEF1dGhFcnJvckNvZGUgfSBmcm9tICcuLi9lcnJvcnMnO1xuaW1wb3J0IHsgUGVyc2lzdGVuY2VJbnRlcm5hbCB9IGZyb20gJy4uL3BlcnNpc3RlbmNlJztcbmltcG9ydCB7IF9mYWlsIH0gZnJvbSAnLi4vdXRpbC9hc3NlcnQnO1xuaW1wb3J0IHsgX2dldEluc3RhbmNlIH0gZnJvbSAnLi4vdXRpbC9pbnN0YW50aWF0b3InO1xuaW1wb3J0IHsgQXV0aEltcGwgfSBmcm9tICcuL2F1dGhfaW1wbCc7XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYW4ge0BsaW5rIEF1dGh9IGluc3RhbmNlIHdpdGggZmluZS1ncmFpbmVkIGNvbnRyb2wgb3ZlclxuICoge0BsaW5rIERlcGVuZGVuY2llc30uXG4gKlxuICogQHJlbWFya3NcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGFsbG93cyBtb3JlIGNvbnRyb2wgb3ZlciB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIHRoYW5cbiAqIHtAbGluayBnZXRBdXRofS4gYGdldEF1dGhgIHVzZXMgcGxhdGZvcm0tc3BlY2lmaWMgZGVmYXVsdHMgdG8gc3VwcGx5XG4gKiB0aGUge0BsaW5rIERlcGVuZGVuY2llc30uIEluIGdlbmVyYWwsIGBnZXRBdXRoYCBpcyB0aGUgZWFzaWVzdCB3YXkgdG9cbiAqIGluaXRpYWxpemUgQXV0aCBhbmQgd29ya3MgZm9yIG1vc3QgdXNlIGNhc2VzLiBVc2UgYGluaXRpYWxpemVBdXRoYCBpZiB5b3VcbiAqIG5lZWQgY29udHJvbCBvdmVyIHdoaWNoIHBlcnNpc3RlbmNlIGxheWVyIGlzIHVzZWQsIG9yIHRvIG1pbmltaXplIGJ1bmRsZVxuICogc2l6ZSBpZiB5b3UncmUgbm90IHVzaW5nIGVpdGhlciBgc2lnbkluV2l0aFBvcHVwYCBvciBgc2lnbkluV2l0aFJlZGlyZWN0YC5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgaWYgeW91ciBhcHAgb25seSB1c2VzIGFub255bW91cyBhY2NvdW50cyBhbmQgeW91IG9ubHkgd2FudFxuICogYWNjb3VudHMgc2F2ZWQgZm9yIHRoZSBjdXJyZW50IHNlc3Npb24sIGluaXRpYWxpemUgYEF1dGhgIHdpdGg6XG4gKlxuICogYGBganNcbiAqIGNvbnN0IGF1dGggPSBpbml0aWFsaXplQXV0aChhcHAsIHtcbiAqICAgcGVyc2lzdGVuY2U6IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UsXG4gKiAgIHBvcHVwUmVkaXJlY3RSZXNvbHZlcjogdW5kZWZpbmVkLFxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQXV0aChhcHA6IEZpcmViYXNlQXBwLCBkZXBzPzogRGVwZW5kZW5jaWVzKTogQXV0aCB7XG4gIGNvbnN0IHByb3ZpZGVyID0gX2dldFByb3ZpZGVyKGFwcCwgJ2F1dGgnKTtcblxuICBpZiAocHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XG4gICAgY29uc3QgYXV0aCA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpIGFzIEF1dGhJbXBsO1xuICAgIGNvbnN0IGluaXRpYWxPcHRpb25zID0gcHJvdmlkZXIuZ2V0T3B0aW9ucygpIGFzIERlcGVuZGVuY2llcztcbiAgICBpZiAoZGVlcEVxdWFsKGluaXRpYWxPcHRpb25zLCBkZXBzID8/IHt9KSkge1xuICAgICAgcmV0dXJuIGF1dGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIF9mYWlsKGF1dGgsIEF1dGhFcnJvckNvZGUuQUxSRUFEWV9JTklUSUFMSVpFRCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgYXV0aCA9IHByb3ZpZGVyLmluaXRpYWxpemUoeyBvcHRpb25zOiBkZXBzIH0pIGFzIEF1dGhJbXBsO1xuXG4gIHJldHVybiBhdXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX2luaXRpYWxpemVBdXRoSW5zdGFuY2UoXG4gIGF1dGg6IEF1dGhJbXBsLFxuICBkZXBzPzogRGVwZW5kZW5jaWVzXG4pOiB2b2lkIHtcbiAgY29uc3QgcGVyc2lzdGVuY2UgPSBkZXBzPy5wZXJzaXN0ZW5jZSB8fCBbXTtcbiAgY29uc3QgaGllcmFyY2h5ID0gKFxuICAgIEFycmF5LmlzQXJyYXkocGVyc2lzdGVuY2UpID8gcGVyc2lzdGVuY2UgOiBbcGVyc2lzdGVuY2VdXG4gICkubWFwPFBlcnNpc3RlbmNlSW50ZXJuYWw+KF9nZXRJbnN0YW5jZSk7XG4gIGlmIChkZXBzPy5lcnJvck1hcCkge1xuICAgIGF1dGguX3VwZGF0ZUVycm9yTWFwKGRlcHMuZXJyb3JNYXApO1xuICB9XG5cbiAgLy8gVGhpcyBwcm9taXNlIGlzIGludGVuZGVkIHRvIGZsb2F0OyBhdXRoIGluaXRpYWxpemF0aW9uIGhhcHBlbnMgaW4gdGhlXG4gIC8vIGJhY2tncm91bmQsIG1lYW53aGlsZSB0aGUgYXV0aCBvYmplY3QgbWF5IGJlIHVzZWQgYnkgdGhlIGFwcC5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICBhdXRoLl9pbml0aWFsaXplV2l0aFBlcnNpc3RlbmNlKGhpZXJhcmNoeSwgZGVwcz8ucG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBBdXRoIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcbmltcG9ydCB7IEF1dGhFcnJvckNvZGUgfSBmcm9tICcuLi9lcnJvcnMnO1xuaW1wb3J0IHsgX2Fzc2VydCB9IGZyb20gJy4uL3V0aWwvYXNzZXJ0JztcbmltcG9ydCB7IF9jYXN0QXV0aCB9IGZyb20gJy4vYXV0aF9pbXBsJztcblxuLyoqXG4gKiBDaGFuZ2VzIHRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgRmlyZWJhc2UgQXV0aCBFbXVsYXRvciwgaW5zdGVhZCBvZiBwcm9kdWN0aW9uXG4gKiBGaXJlYmFzZSBBdXRoIHNlcnZpY2VzLlxuICpcbiAqIEByZW1hcmtzXG4gKiBUaGlzIG11c3QgYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgaW1tZWRpYXRlbHkgZm9sbG93aW5nIHRoZSBmaXJzdCBjYWxsIHRvXG4gKiB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9LiAgRG8gbm90IHVzZSB3aXRoIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMgYXMgZW11bGF0b3JcbiAqIHRyYWZmaWMgaXMgbm90IGVuY3J5cHRlZC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGphdmFzY3JpcHRcbiAqIGNvbm5lY3RBdXRoRW11bGF0b3IoYXV0aCwgJ2h0dHA6Ly8xMjcuMC4wLjE6OTA5OScsIHsgZGlzYWJsZVdhcm5pbmdzOiB0cnVlIH0pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxuICogQHBhcmFtIHVybCAtIFRoZSBVUkwgYXQgd2hpY2ggdGhlIGVtdWxhdG9yIGlzIHJ1bm5pbmcgKGVnLCAnaHR0cDovL2xvY2FsaG9zdDo5MDk5JykuXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsLiBgb3B0aW9ucy5kaXNhYmxlV2FybmluZ3NgIGRlZmF1bHRzIHRvIGBmYWxzZWAuIFNldCBpdCB0b1xuICogYHRydWVgIHRvIGRpc2FibGUgdGhlIHdhcm5pbmcgYmFubmVyIGF0dGFjaGVkIHRvIHRoZSBET00uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gY29ubmVjdEF1dGhFbXVsYXRvcihcbiAgYXV0aDogQXV0aCxcbiAgdXJsOiBzdHJpbmcsXG4gIG9wdGlvbnM/OiB7IGRpc2FibGVXYXJuaW5nczogYm9vbGVhbiB9XG4pOiB2b2lkIHtcbiAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xuICBfYXNzZXJ0KFxuICAgIGF1dGhJbnRlcm5hbC5fY2FuSW5pdEVtdWxhdG9yLFxuICAgIGF1dGhJbnRlcm5hbCxcbiAgICBBdXRoRXJyb3JDb2RlLkVNVUxBVE9SX0NPTkZJR19GQUlMRURcbiAgKTtcblxuICBfYXNzZXJ0KFxuICAgIC9eaHR0cHM/OlxcL1xcLy8udGVzdCh1cmwpLFxuICAgIGF1dGhJbnRlcm5hbCxcbiAgICBBdXRoRXJyb3JDb2RlLklOVkFMSURfRU1VTEFUT1JfU0NIRU1FXG4gICk7XG5cbiAgY29uc3QgZGlzYWJsZVdhcm5pbmdzID0gISFvcHRpb25zPy5kaXNhYmxlV2FybmluZ3M7XG5cbiAgY29uc3QgcHJvdG9jb2wgPSBleHRyYWN0UHJvdG9jb2wodXJsKTtcbiAgY29uc3QgeyBob3N0LCBwb3J0IH0gPSBleHRyYWN0SG9zdEFuZFBvcnQodXJsKTtcbiAgY29uc3QgcG9ydFN0ciA9IHBvcnQgPT09IG51bGwgPyAnJyA6IGA6JHtwb3J0fWA7XG5cbiAgLy8gQWx3YXlzIHJlcGxhY2UgcGF0aCB3aXRoIFwiL1wiIChldmVuIGlmIGlucHV0IHVybCBoYWQgbm8gcGF0aCBhdCBhbGwsIG9yIGhhZCBhIGRpZmZlcmVudCBvbmUpLlxuICBhdXRoSW50ZXJuYWwuY29uZmlnLmVtdWxhdG9yID0geyB1cmw6IGAke3Byb3RvY29sfS8vJHtob3N0fSR7cG9ydFN0cn0vYCB9O1xuICBhdXRoSW50ZXJuYWwuc2V0dGluZ3MuYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nID0gdHJ1ZTtcbiAgYXV0aEludGVybmFsLmVtdWxhdG9yQ29uZmlnID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgaG9zdCxcbiAgICBwb3J0LFxuICAgIHByb3RvY29sOiBwcm90b2NvbC5yZXBsYWNlKCc6JywgJycpLFxuICAgIG9wdGlvbnM6IE9iamVjdC5mcmVlemUoeyBkaXNhYmxlV2FybmluZ3MgfSlcbiAgfSk7XG5cbiAgaWYgKCFkaXNhYmxlV2FybmluZ3MpIHtcbiAgICBlbWl0RW11bGF0b3JXYXJuaW5nKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZXh0cmFjdFByb3RvY29sKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgcHJvdG9jb2xFbmQgPSB1cmwuaW5kZXhPZignOicpO1xuICByZXR1cm4gcHJvdG9jb2xFbmQgPCAwID8gJycgOiB1cmwuc3Vic3RyKDAsIHByb3RvY29sRW5kICsgMSk7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RIb3N0QW5kUG9ydCh1cmw6IHN0cmluZyk6IHtcbiAgaG9zdDogc3RyaW5nO1xuICBwb3J0OiBudW1iZXIgfCBudWxsO1xufSB7XG4gIGNvbnN0IHByb3RvY29sID0gZXh0cmFjdFByb3RvY29sKHVybCk7XG4gIGNvbnN0IGF1dGhvcml0eSA9IC8oXFwvXFwvKT8oW14/Iy9dKykvLmV4ZWModXJsLnN1YnN0cihwcm90b2NvbC5sZW5ndGgpKTsgLy8gQmV0d2VlbiAvLyBhbmQgLywgPyBvciAjLlxuICBpZiAoIWF1dGhvcml0eSkge1xuICAgIHJldHVybiB7IGhvc3Q6ICcnLCBwb3J0OiBudWxsIH07XG4gIH1cbiAgY29uc3QgaG9zdEFuZFBvcnQgPSBhdXRob3JpdHlbMl0uc3BsaXQoJ0AnKS5wb3AoKSB8fCAnJzsgLy8gU3RyaXAgb3V0IFwidXNlcm5hbWU6cGFzc3dvcmRAXCIuXG4gIGNvbnN0IGJyYWNrZXRlZElQdjYgPSAvXihcXFtbXlxcXV0rXFxdKSg6fCQpLy5leGVjKGhvc3RBbmRQb3J0KTtcbiAgaWYgKGJyYWNrZXRlZElQdjYpIHtcbiAgICBjb25zdCBob3N0ID0gYnJhY2tldGVkSVB2NlsxXTtcbiAgICByZXR1cm4geyBob3N0LCBwb3J0OiBwYXJzZVBvcnQoaG9zdEFuZFBvcnQuc3Vic3RyKGhvc3QubGVuZ3RoICsgMSkpIH07XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgW2hvc3QsIHBvcnRdID0gaG9zdEFuZFBvcnQuc3BsaXQoJzonKTtcbiAgICByZXR1cm4geyBob3N0LCBwb3J0OiBwYXJzZVBvcnQocG9ydCkgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZVBvcnQocG9ydFN0cjogc3RyaW5nKTogbnVtYmVyIHwgbnVsbCB7XG4gIGlmICghcG9ydFN0cikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHBvcnQgPSBOdW1iZXIocG9ydFN0cik7XG4gIGlmIChpc05hTihwb3J0KSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBwb3J0O1xufVxuXG5mdW5jdGlvbiBlbWl0RW11bGF0b3JXYXJuaW5nKCk6IHZvaWQge1xuICBmdW5jdGlvbiBhdHRhY2hCYW5uZXIoKTogdm9pZCB7XG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgY29uc3Qgc3R5ID0gZWwuc3R5bGU7XG4gICAgZWwuaW5uZXJUZXh0ID1cbiAgICAgICdSdW5uaW5nIGluIGVtdWxhdG9yIG1vZGUuIERvIG5vdCB1c2Ugd2l0aCBwcm9kdWN0aW9uIGNyZWRlbnRpYWxzLic7XG4gICAgc3R5LnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgICBzdHkud2lkdGggPSAnMTAwJSc7XG4gICAgc3R5LmJhY2tncm91bmRDb2xvciA9ICcjZmZmZmZmJztcbiAgICBzdHkuYm9yZGVyID0gJy4xZW0gc29saWQgIzAwMDAwMCc7XG4gICAgc3R5LmNvbG9yID0gJyNiNTAwMDAnO1xuICAgIHN0eS5ib3R0b20gPSAnMHB4JztcbiAgICBzdHkubGVmdCA9ICcwcHgnO1xuICAgIHN0eS5tYXJnaW4gPSAnMHB4JztcbiAgICBzdHkuekluZGV4ID0gJzEwMDAwJztcbiAgICBzdHkudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgZWwuY2xhc3NMaXN0LmFkZCgnZmlyZWJhc2UtZW11bGF0b3Itd2FybmluZycpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5pbmZvID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc29sZS5pbmZvKFxuICAgICAgJ1dBUk5JTkc6IFlvdSBhcmUgdXNpbmcgdGhlIEF1dGggRW11bGF0b3IsJyArXG4gICAgICAgICcgd2hpY2ggaXMgaW50ZW5kZWQgZm9yIGxvY2FsIHRlc3Rpbmcgb25seS4gIERvIG5vdCB1c2Ugd2l0aCcgK1xuICAgICAgICAnIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMuJ1xuICAgICk7XG4gIH1cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnKSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGF0dGFjaEJhbm5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF0dGFjaEJhbm5lcigpO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgUGhvbmVPck9hdXRoVG9rZW5SZXNwb25zZSB9IGZyb20gJy4uLy4uL2FwaS9hdXRoZW50aWNhdGlvbi9tZmEnO1xuaW1wb3J0IHsgQXV0aEludGVybmFsIH0gZnJvbSAnLi4vLi4vbW9kZWwvYXV0aCc7XG5pbXBvcnQgeyBJZFRva2VuUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9tb2RlbC9pZF90b2tlbic7XG5pbXBvcnQgeyBkZWJ1Z0ZhaWwgfSBmcm9tICcuLi91dGlsL2Fzc2VydCc7XG5cbi8qKlxuICogSW50ZXJmYWNlIHRoYXQgcmVwcmVzZW50cyB0aGUgY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkgYW4ge0BsaW5rIEF1dGhQcm92aWRlcn0uXG4gKlxuICogQHJlbWFya3NcbiAqIEltcGxlbWVudGF0aW9ucyBzcGVjaWZ5IHRoZSBkZXRhaWxzIGFib3V0IGVhY2ggYXV0aCBwcm92aWRlcidzIGNyZWRlbnRpYWwgcmVxdWlyZW1lbnRzLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEF1dGhDcmVkZW50aWFsIHtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGF1dGhlbnRpY2F0aW9uIHByb3ZpZGVyIElEIGZvciB0aGUgY3JlZGVudGlhbC5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogRm9yIGV4YW1wbGUsICdmYWNlYm9vay5jb20nLCBvciAnZ29vZ2xlLmNvbScuXG4gICAgICovXG4gICAgcmVhZG9ubHkgcHJvdmlkZXJJZDogc3RyaW5nLFxuICAgIC8qKlxuICAgICAqIFRoZSBhdXRoZW50aWNhdGlvbiBzaWduIGluIG1ldGhvZCBmb3IgdGhlIGNyZWRlbnRpYWwuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIEZvciBleGFtcGxlLCB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRCwgb3JcbiAgICAgKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9MSU5LLiBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSBzaWduLWluIG1ldGhvZFxuICAgICAqIGlkZW50aWZpZXIgYXMgcmV0dXJuZWQgaW4ge0BsaW5rIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsfS5cbiAgICAgKi9cbiAgICByZWFkb25seSBzaWduSW5NZXRob2Q6IHN0cmluZ1xuICApIHt9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG9iamVjdC5cbiAgICovXG4gIHRvSlNPTigpOiBvYmplY3Qge1xuICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfZ2V0SWRUb2tlblJlc3BvbnNlKF9hdXRoOiBBdXRoSW50ZXJuYWwpOiBQcm9taXNlPFBob25lT3JPYXV0aFRva2VuUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIF9saW5rVG9JZFRva2VuKFxuICAgIF9hdXRoOiBBdXRoSW50ZXJuYWwsXG4gICAgX2lkVG9rZW46IHN0cmluZ1xuICApOiBQcm9taXNlPElkVG9rZW5SZXNwb25zZT4ge1xuICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihfYXV0aDogQXV0aEludGVybmFsKTogUHJvbWlzZTxJZFRva2VuUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQWN0aW9uQ29kZU9wZXJhdGlvbiwgQXV0aCB9IGZyb20gJy4uLy4uL21vZGVsL3B1YmxpY190eXBlcyc7XG5cbmltcG9ydCB7XG4gIEVuZHBvaW50LFxuICBIdHRwTWV0aG9kLFxuICBfYWRkVGlkSWZOZWNlc3NhcnksXG4gIF9wZXJmb3JtQXBpUmVxdWVzdFxufSBmcm9tICcuLi9pbmRleCc7XG5pbXBvcnQgeyBJZFRva2VuUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9tb2RlbC9pZF90b2tlbic7XG5pbXBvcnQgeyBNZmFFbnJvbGxtZW50IH0gZnJvbSAnLi9tZmEnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlc2V0UGFzc3dvcmRSZXF1ZXN0IHtcbiAgb29iQ29kZTogc3RyaW5nO1xuICBuZXdQYXNzd29yZD86IHN0cmluZztcbiAgdGVuYW50SWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVzZXRQYXNzd29yZFJlc3BvbnNlIHtcbiAgZW1haWw6IHN0cmluZztcbiAgbmV3RW1haWw/OiBzdHJpbmc7XG4gIHJlcXVlc3RUeXBlPzogQWN0aW9uQ29kZU9wZXJhdGlvbjtcbiAgbWZhSW5mbz86IE1mYUVucm9sbG1lbnQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXNldFBhc3N3b3JkKFxuICBhdXRoOiBBdXRoLFxuICByZXF1ZXN0OiBSZXNldFBhc3N3b3JkUmVxdWVzdFxuKTogUHJvbWlzZTxSZXNldFBhc3N3b3JkUmVzcG9uc2U+IHtcbiAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdDxSZXNldFBhc3N3b3JkUmVxdWVzdCwgUmVzZXRQYXNzd29yZFJlc3BvbnNlPihcbiAgICBhdXRoLFxuICAgIEh0dHBNZXRob2QuUE9TVCxcbiAgICBFbmRwb2ludC5SRVNFVF9QQVNTV09SRCxcbiAgICBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdClcbiAgKTtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlRW1haWxQYXNzd29yZFJlcXVlc3Qge1xuICBpZFRva2VuOiBzdHJpbmc7XG4gIHJldHVyblNlY3VyZVRva2VuPzogYm9vbGVhbjtcbiAgZW1haWw/OiBzdHJpbmc7XG4gIHBhc3N3b3JkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZUVtYWlsUGFzc3dvcmRSZXNwb25zZSBleHRlbmRzIElkVG9rZW5SZXNwb25zZSB7fVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRW1haWxQYXNzd29yZChcbiAgYXV0aDogQXV0aCxcbiAgcmVxdWVzdDogVXBkYXRlRW1haWxQYXNzd29yZFJlcXVlc3Rcbik6IFByb21pc2U8VXBkYXRlRW1haWxQYXNzd29yZFJlc3BvbnNlPiB7XG4gIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3Q8XG4gICAgVXBkYXRlRW1haWxQYXNzd29yZFJlcXVlc3QsXG4gICAgVXBkYXRlRW1haWxQYXNzd29yZFJlc3BvbnNlXG4gID4oYXV0aCwgSHR0cE1ldGhvZC5QT1NULCBFbmRwb2ludC5TRVRfQUNDT1VOVF9JTkZPLCByZXF1ZXN0KTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcHBseUFjdGlvbkNvZGVSZXF1ZXN0IHtcbiAgb29iQ29kZTogc3RyaW5nO1xuICB0ZW5hbnRJZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcHBseUFjdGlvbkNvZGVSZXNwb25zZSB7fVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwbHlBY3Rpb25Db2RlKFxuICBhdXRoOiBBdXRoLFxuICByZXF1ZXN0OiBBcHBseUFjdGlvbkNvZGVSZXF1ZXN0XG4pOiBQcm9taXNlPEFwcGx5QWN0aW9uQ29kZVJlc3BvbnNlPiB7XG4gIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3Q8QXBwbHlBY3Rpb25Db2RlUmVxdWVzdCwgQXBwbHlBY3Rpb25Db2RlUmVzcG9uc2U+KFxuICAgIGF1dGgsXG4gICAgSHR0cE1ldGhvZC5QT1NULFxuICAgIEVuZHBvaW50LlNFVF9BQ0NPVU5UX0lORk8sXG4gICAgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpXG4gICk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBY3Rpb25Db2RlT3BlcmF0aW9uLCBBdXRoIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcblxuaW1wb3J0IHtcbiAgRW5kcG9pbnQsXG4gIEh0dHBNZXRob2QsXG4gIFJlY2FwdGNoYUNsaWVudFR5cGUsXG4gIFJlY2FwdGNoYVZlcnNpb24sXG4gIF9hZGRUaWRJZk5lY2Vzc2FyeSxcbiAgX3BlcmZvcm1BcGlSZXF1ZXN0LFxuICBfcGVyZm9ybVNpZ25JblJlcXVlc3Rcbn0gZnJvbSAnLi4vaW5kZXgnO1xuaW1wb3J0IHsgSWRUb2tlbiwgSWRUb2tlblJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vbW9kZWwvaWRfdG9rZW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNpZ25JbldpdGhQYXNzd29yZFJlcXVlc3Qge1xuICByZXR1cm5TZWN1cmVUb2tlbj86IGJvb2xlYW47XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG4gIHRlbmFudElkPzogc3RyaW5nO1xuICBjYXB0Y2hhUmVzcG9uc2U/OiBzdHJpbmc7XG4gIGNsaWVudFR5cGU/OiBSZWNhcHRjaGFDbGllbnRUeXBlO1xuICByZWNhcHRjaGFWZXJzaW9uPzogUmVjYXB0Y2hhVmVyc2lvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaWduSW5XaXRoUGFzc3dvcmRSZXNwb25zZSBleHRlbmRzIElkVG9rZW5SZXNwb25zZSB7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGFzc3dvcmQoXG4gIGF1dGg6IEF1dGgsXG4gIHJlcXVlc3Q6IFNpZ25JbldpdGhQYXNzd29yZFJlcXVlc3Rcbik6IFByb21pc2U8U2lnbkluV2l0aFBhc3N3b3JkUmVzcG9uc2U+IHtcbiAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdDxcbiAgICBTaWduSW5XaXRoUGFzc3dvcmRSZXF1ZXN0LFxuICAgIFNpZ25JbldpdGhQYXNzd29yZFJlc3BvbnNlXG4gID4oXG4gICAgYXV0aCxcbiAgICBIdHRwTWV0aG9kLlBPU1QsXG4gICAgRW5kcG9pbnQuU0lHTl9JTl9XSVRIX1BBU1NXT1JELFxuICAgIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KVxuICApO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdldE9vYkNvZGVSZXF1ZXN0IHtcbiAgZW1haWw/OiBzdHJpbmc7IC8vIEV2ZXJ5dGhpbmcgZXhjZXB0IFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXG4gIGNvbnRpbnVlVXJsPzogc3RyaW5nO1xuICBpT1NCdW5kbGVJZD86IHN0cmluZztcbiAgaW9zQXBwU3RvcmVJZD86IHN0cmluZztcbiAgYW5kcm9pZFBhY2thZ2VOYW1lPzogc3RyaW5nO1xuICBhbmRyb2lkSW5zdGFsbEFwcD86IGJvb2xlYW47XG4gIGFuZHJvaWRNaW5pbXVtVmVyc2lvbkNvZGU/OiBzdHJpbmc7XG4gIGNhbkhhbmRsZUNvZGVJbkFwcD86IGJvb2xlYW47XG4gIGR5bmFtaWNMaW5rRG9tYWluPzogc3RyaW5nO1xuICB0ZW5hbnRJZD86IHN0cmluZztcbiAgdGFyZ2V0UHJvamVjdGlkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZlcmlmeUVtYWlsUmVxdWVzdCBleHRlbmRzIEdldE9vYkNvZGVSZXF1ZXN0IHtcbiAgcmVxdWVzdFR5cGU6IEFjdGlvbkNvZGVPcGVyYXRpb24uVkVSSUZZX0VNQUlMO1xuICBpZFRva2VuOiBJZFRva2VuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhc3N3b3JkUmVzZXRSZXF1ZXN0IGV4dGVuZHMgR2V0T29iQ29kZVJlcXVlc3Qge1xuICByZXF1ZXN0VHlwZTogQWN0aW9uQ29kZU9wZXJhdGlvbi5QQVNTV09SRF9SRVNFVDtcbiAgZW1haWw6IHN0cmluZztcbiAgY2FwdGNoYVJlc3A/OiBzdHJpbmc7XG4gIGNsaWVudFR5cGU/OiBSZWNhcHRjaGFDbGllbnRUeXBlO1xuICByZWNhcHRjaGFWZXJzaW9uPzogUmVjYXB0Y2hhVmVyc2lvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbWFpbFNpZ25JblJlcXVlc3QgZXh0ZW5kcyBHZXRPb2JDb2RlUmVxdWVzdCB7XG4gIHJlcXVlc3RUeXBlOiBBY3Rpb25Db2RlT3BlcmF0aW9uLkVNQUlMX1NJR05JTjtcbiAgZW1haWw6IHN0cmluZztcbiAgY2FwdGNoYVJlc3A/OiBzdHJpbmc7XG4gIGNsaWVudFR5cGU/OiBSZWNhcHRjaGFDbGllbnRUeXBlO1xuICByZWNhcHRjaGFWZXJzaW9uPzogUmVjYXB0Y2hhVmVyc2lvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWZXJpZnlBbmRDaGFuZ2VFbWFpbFJlcXVlc3QgZXh0ZW5kcyBHZXRPb2JDb2RlUmVxdWVzdCB7XG4gIHJlcXVlc3RUeXBlOiBBY3Rpb25Db2RlT3BlcmF0aW9uLlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMO1xuICBpZFRva2VuOiBJZFRva2VuO1xuICBuZXdFbWFpbDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgR2V0T29iQ29kZVJlc3BvbnNlIHtcbiAgZW1haWw6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWZXJpZnlFbWFpbFJlc3BvbnNlIGV4dGVuZHMgR2V0T29iQ29kZVJlc3BvbnNlIHt9XG5leHBvcnQgaW50ZXJmYWNlIFBhc3N3b3JkUmVzZXRSZXNwb25zZSBleHRlbmRzIEdldE9vYkNvZGVSZXNwb25zZSB7fVxuZXhwb3J0IGludGVyZmFjZSBFbWFpbFNpZ25JblJlc3BvbnNlIGV4dGVuZHMgR2V0T29iQ29kZVJlc3BvbnNlIHt9XG5leHBvcnQgaW50ZXJmYWNlIFZlcmlmeUFuZENoYW5nZUVtYWlsUmVzcG9uc2UgZXh0ZW5kcyBHZXRPb2JDb2RlUmVxdWVzdCB7fVxuXG5hc3luYyBmdW5jdGlvbiBzZW5kT29iQ29kZShcbiAgYXV0aDogQXV0aCxcbiAgcmVxdWVzdDogR2V0T29iQ29kZVJlcXVlc3Rcbik6IFByb21pc2U8R2V0T29iQ29kZVJlc3BvbnNlPiB7XG4gIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3Q8R2V0T29iQ29kZVJlcXVlc3QsIEdldE9vYkNvZGVSZXNwb25zZT4oXG4gICAgYXV0aCxcbiAgICBIdHRwTWV0aG9kLlBPU1QsXG4gICAgRW5kcG9pbnQuU0VORF9PT0JfQ09ERSxcbiAgICBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdClcbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRFbWFpbFZlcmlmaWNhdGlvbihcbiAgYXV0aDogQXV0aCxcbiAgcmVxdWVzdDogVmVyaWZ5RW1haWxSZXF1ZXN0XG4pOiBQcm9taXNlPFZlcmlmeUVtYWlsUmVzcG9uc2U+IHtcbiAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChcbiAgYXV0aDogQXV0aCxcbiAgcmVxdWVzdDogUGFzc3dvcmRSZXNldFJlcXVlc3Rcbik6IFByb21pc2U8UGFzc3dvcmRSZXNldFJlc3BvbnNlPiB7XG4gIHJldHVybiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRTaWduSW5MaW5rVG9FbWFpbChcbiAgYXV0aDogQXV0aCxcbiAgcmVxdWVzdDogRW1haWxTaWduSW5SZXF1ZXN0XG4pOiBQcm9taXNlPEVtYWlsU2lnbkluUmVzcG9uc2U+IHtcbiAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QW5kQ2hhbmdlRW1haWwoXG4gIGF1dGg6IEF1dGgsXG4gIHJlcXVlc3Q6IFZlcmlmeUFuZENoYW5nZUVtYWlsUmVxdWVzdFxuKTogUHJvbWlzZTxWZXJpZnlBbmRDaGFuZ2VFbWFpbFJlc3BvbnNlPiB7XG4gIHJldHVybiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIF9wZXJmb3JtU2lnbkluUmVxdWVzdCxcbiAgRW5kcG9pbnQsXG4gIEh0dHBNZXRob2QsXG4gIF9hZGRUaWRJZk5lY2Vzc2FyeVxufSBmcm9tICcuLi9pbmRleCc7XG5pbXBvcnQgeyBJZFRva2VuUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9tb2RlbC9pZF90b2tlbic7XG5pbXBvcnQgeyBBdXRoIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBTaWduSW5XaXRoRW1haWxMaW5rUmVxdWVzdCB7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIG9vYkNvZGU6IHN0cmluZztcbiAgdGVuYW50SWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2lnbkluV2l0aEVtYWlsTGlua1Jlc3BvbnNlIGV4dGVuZHMgSWRUb2tlblJlc3BvbnNlIHtcbiAgZW1haWw6IHN0cmluZztcbiAgaXNOZXdVc2VyOiBib29sZWFuO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEVtYWlsTGluayhcbiAgYXV0aDogQXV0aCxcbiAgcmVxdWVzdDogU2lnbkluV2l0aEVtYWlsTGlua1JlcXVlc3Rcbik6IFByb21pc2U8U2lnbkluV2l0aEVtYWlsTGlua1Jlc3BvbnNlPiB7XG4gIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3Q8XG4gICAgU2lnbkluV2l0aEVtYWlsTGlua1JlcXVlc3QsXG4gICAgU2lnbkluV2l0aEVtYWlsTGlua1Jlc3BvbnNlXG4gID4oXG4gICAgYXV0aCxcbiAgICBIdHRwTWV0aG9kLlBPU1QsXG4gICAgRW5kcG9pbnQuU0lHTl9JTl9XSVRIX0VNQUlMX0xJTkssXG4gICAgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpXG4gICk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2lnbkluV2l0aEVtYWlsTGlua0ZvckxpbmtpbmdSZXF1ZXN0XG4gIGV4dGVuZHMgU2lnbkluV2l0aEVtYWlsTGlua1JlcXVlc3Qge1xuICBpZFRva2VuOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxMaW5rRm9yTGlua2luZyhcbiAgYXV0aDogQXV0aCxcbiAgcmVxdWVzdDogU2lnbkluV2l0aEVtYWlsTGlua0ZvckxpbmtpbmdSZXF1ZXN0XG4pOiBQcm9taXNlPFNpZ25JbldpdGhFbWFpbExpbmtSZXNwb25zZT4ge1xuICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0PFxuICAgIFNpZ25JbldpdGhFbWFpbExpbmtGb3JMaW5raW5nUmVxdWVzdCxcbiAgICBTaWduSW5XaXRoRW1haWxMaW5rUmVzcG9uc2VcbiAgPihcbiAgICBhdXRoLFxuICAgIEh0dHBNZXRob2QuUE9TVCxcbiAgICBFbmRwb2ludC5TSUdOX0lOX1dJVEhfRU1BSUxfTElOSyxcbiAgICBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdClcbiAgKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFByb3ZpZGVySWQsIFNpZ25Jbk1ldGhvZCB9IGZyb20gJy4uLy4uL21vZGVsL2VudW1zJztcblxuaW1wb3J0IHsgdXBkYXRlRW1haWxQYXNzd29yZCB9IGZyb20gJy4uLy4uL2FwaS9hY2NvdW50X21hbmFnZW1lbnQvZW1haWxfYW5kX3Bhc3N3b3JkJztcbmltcG9ydCB7XG4gIHNpZ25JbldpdGhQYXNzd29yZCxcbiAgU2lnbkluV2l0aFBhc3N3b3JkUmVxdWVzdFxufSBmcm9tICcuLi8uLi9hcGkvYXV0aGVudGljYXRpb24vZW1haWxfYW5kX3Bhc3N3b3JkJztcbmltcG9ydCB7XG4gIHNpZ25JbldpdGhFbWFpbExpbmssXG4gIHNpZ25JbldpdGhFbWFpbExpbmtGb3JMaW5raW5nXG59IGZyb20gJy4uLy4uL2FwaS9hdXRoZW50aWNhdGlvbi9lbWFpbF9saW5rJztcbmltcG9ydCB7IEF1dGhJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL2F1dGgnO1xuaW1wb3J0IHsgSWRUb2tlblJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vbW9kZWwvaWRfdG9rZW4nO1xuaW1wb3J0IHsgQXV0aEVycm9yQ29kZSB9IGZyb20gJy4uL2Vycm9ycyc7XG5pbXBvcnQgeyBfZmFpbCB9IGZyb20gJy4uL3V0aWwvYXNzZXJ0JztcbmltcG9ydCB7IEF1dGhDcmVkZW50aWFsIH0gZnJvbSAnLi9hdXRoX2NyZWRlbnRpYWwnO1xuaW1wb3J0IHsgaW5qZWN0UmVjYXB0Y2hhRmllbGRzIH0gZnJvbSAnLi4vLi4vcGxhdGZvcm1fYnJvd3Nlci9yZWNhcHRjaGEvcmVjYXB0Y2hhX2VudGVycHJpc2VfdmVyaWZpZXInO1xuaW1wb3J0IHsgUmVjYXB0Y2hhQWN0aW9uTmFtZSwgUmVjYXB0Y2hhQ2xpZW50VHlwZSB9IGZyb20gJy4uLy4uL2FwaSc7XG4vKipcbiAqIEludGVyZmFjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gZm9yXG4gKiB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkRcbiAqXG4gKiBAcmVtYXJrc1xuICogQ292ZXJzIGJvdGgge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfUEFTU1dPUkQgYW5kXG4gKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9MSU5LLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEVtYWlsQXV0aENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihcbiAgICAvKiogQGludGVybmFsICovXG4gICAgcmVhZG9ubHkgX2VtYWlsOiBzdHJpbmcsXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIHJlYWRvbmx5IF9wYXNzd29yZDogc3RyaW5nLFxuICAgIHNpZ25Jbk1ldGhvZDogU2lnbkluTWV0aG9kLFxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICByZWFkb25seSBfdGVuYW50SWQ6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gICkge1xuICAgIHN1cGVyKFByb3ZpZGVySWQuUEFTU1dPUkQsIHNpZ25Jbk1ldGhvZCk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHN0YXRpYyBfZnJvbUVtYWlsQW5kUGFzc3dvcmQoXG4gICAgZW1haWw6IHN0cmluZyxcbiAgICBwYXNzd29yZDogc3RyaW5nXG4gICk6IEVtYWlsQXV0aENyZWRlbnRpYWwge1xuICAgIHJldHVybiBuZXcgRW1haWxBdXRoQ3JlZGVudGlhbChcbiAgICAgIGVtYWlsLFxuICAgICAgcGFzc3dvcmQsXG4gICAgICBTaWduSW5NZXRob2QuRU1BSUxfUEFTU1dPUkRcbiAgICApO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBzdGF0aWMgX2Zyb21FbWFpbEFuZENvZGUoXG4gICAgZW1haWw6IHN0cmluZyxcbiAgICBvb2JDb2RlOiBzdHJpbmcsXG4gICAgdGVuYW50SWQ6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gICk6IEVtYWlsQXV0aENyZWRlbnRpYWwge1xuICAgIHJldHVybiBuZXcgRW1haWxBdXRoQ3JlZGVudGlhbChcbiAgICAgIGVtYWlsLFxuICAgICAgb29iQ29kZSxcbiAgICAgIFNpZ25Jbk1ldGhvZC5FTUFJTF9MSU5LLFxuICAgICAgdGVuYW50SWRcbiAgICApO1xuICB9XG5cbiAgLyoqIHtAaW5oZXJpdGRvYyBBdXRoQ3JlZGVudGlhbC50b0pTT059ICovXG4gIHRvSlNPTigpOiBvYmplY3Qge1xuICAgIHJldHVybiB7XG4gICAgICBlbWFpbDogdGhpcy5fZW1haWwsXG4gICAgICBwYXNzd29yZDogdGhpcy5fcGFzc3dvcmQsXG4gICAgICBzaWduSW5NZXRob2Q6IHRoaXMuc2lnbkluTWV0aG9kLFxuICAgICAgdGVuYW50SWQ6IHRoaXMuX3RlbmFudElkXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGF0aWMgbWV0aG9kIHRvIGRlc2VyaWFsaXplIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhbiBvYmplY3QgaW50byBhbiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfS5cbiAgICpcbiAgICogQHBhcmFtIGpzb24gLSBFaXRoZXIgYG9iamVjdGAgb3IgdGhlIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3QuIFdoZW4gc3RyaW5nIGlzXG4gICAqIHByb3ZpZGVkLCBgSlNPTi5wYXJzZWAgd291bGQgYmUgY2FsbGVkIGZpcnN0LlxuICAgKlxuICAgKiBAcmV0dXJucyBJZiB0aGUgSlNPTiBpbnB1dCBkb2VzIG5vdCByZXByZXNlbnQgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cbiAgICovXG4gIHN0YXRpYyBmcm9tSlNPTihqc29uOiBvYmplY3QgfCBzdHJpbmcpOiBFbWFpbEF1dGhDcmVkZW50aWFsIHwgbnVsbCB7XG4gICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XG4gICAgaWYgKG9iaj8uZW1haWwgJiYgb2JqPy5wYXNzd29yZCkge1xuICAgICAgaWYgKG9iai5zaWduSW5NZXRob2QgPT09IFNpZ25Jbk1ldGhvZC5FTUFJTF9QQVNTV09SRCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZnJvbUVtYWlsQW5kUGFzc3dvcmQob2JqLmVtYWlsLCBvYmoucGFzc3dvcmQpO1xuICAgICAgfSBlbHNlIGlmIChvYmouc2lnbkluTWV0aG9kID09PSBTaWduSW5NZXRob2QuRU1BSUxfTElOSykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZnJvbUVtYWlsQW5kQ29kZShvYmouZW1haWwsIG9iai5wYXNzd29yZCwgb2JqLnRlbmFudElkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIGFzeW5jIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aDogQXV0aEludGVybmFsKTogUHJvbWlzZTxJZFRva2VuUmVzcG9uc2U+IHtcbiAgICBzd2l0Y2ggKHRoaXMuc2lnbkluTWV0aG9kKSB7XG4gICAgICBjYXNlIFNpZ25Jbk1ldGhvZC5FTUFJTF9QQVNTV09SRDpcbiAgICAgICAgY29uc3QgcmVxdWVzdDogU2lnbkluV2l0aFBhc3N3b3JkUmVxdWVzdCA9IHtcbiAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcbiAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXG4gICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuX3Bhc3N3b3JkLFxuICAgICAgICAgIGNsaWVudFR5cGU6IFJlY2FwdGNoYUNsaWVudFR5cGUuV0VCXG4gICAgICAgIH07XG4gICAgICAgIGlmIChhdXRoLl9nZXRSZWNhcHRjaGFDb25maWcoKT8uZW1haWxQYXNzd29yZEVuYWJsZWQpIHtcbiAgICAgICAgICBjb25zdCByZXF1ZXN0V2l0aFJlY2FwdGNoYSA9IGF3YWl0IGluamVjdFJlY2FwdGNoYUZpZWxkcyhcbiAgICAgICAgICAgIGF1dGgsXG4gICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgUmVjYXB0Y2hhQWN0aW9uTmFtZS5TSUdOX0lOX1dJVEhfUEFTU1dPUkRcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoUGFzc3dvcmQoYXV0aCwgcmVxdWVzdFdpdGhSZWNhcHRjaGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoUGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkuY2F0Y2goYXN5bmMgZXJyb3IgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBlcnJvci5jb2RlID09PSBgYXV0aC8ke0F1dGhFcnJvckNvZGUuTUlTU0lOR19SRUNBUFRDSEFfVE9LRU59YFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICdTaWduLWluIHdpdGggZW1haWwgYWRkcmVzcyBhbmQgcGFzc3dvcmQgaXMgcHJvdGVjdGVkIGJ5IHJlQ0FQVENIQSBmb3IgdGhpcyBwcm9qZWN0LiBBdXRvbWF0aWNhbGx5IHRyaWdnZXJpbmcgdGhlIHJlQ0FQVENIQSBmbG93IGFuZCByZXN0YXJ0aW5nIHRoZSBzaWduLWluIGZsb3cuJ1xuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0V2l0aFJlY2FwdGNoYSA9IGF3YWl0IGluamVjdFJlY2FwdGNoYUZpZWxkcyhcbiAgICAgICAgICAgICAgICBhdXRoLFxuICAgICAgICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgICAgICAgUmVjYXB0Y2hhQWN0aW9uTmFtZS5TSUdOX0lOX1dJVEhfUEFTU1dPUkRcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhQYXNzd29yZChhdXRoLCByZXF1ZXN0V2l0aFJlY2FwdGNoYSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICBjYXNlIFNpZ25Jbk1ldGhvZC5FTUFJTF9MSU5LOlxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCB7XG4gICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxuICAgICAgICAgIG9vYkNvZGU6IHRoaXMuX3Bhc3N3b3JkXG4gICAgICAgIH0pO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgX2ZhaWwoYXV0aCwgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUik7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc3luYyBfbGlua1RvSWRUb2tlbihcbiAgICBhdXRoOiBBdXRoSW50ZXJuYWwsXG4gICAgaWRUb2tlbjogc3RyaW5nXG4gICk6IFByb21pc2U8SWRUb2tlblJlc3BvbnNlPiB7XG4gICAgc3dpdGNoICh0aGlzLnNpZ25Jbk1ldGhvZCkge1xuICAgICAgY2FzZSBTaWduSW5NZXRob2QuRU1BSUxfUEFTU1dPUkQ6XG4gICAgICAgIHJldHVybiB1cGRhdGVFbWFpbFBhc3N3b3JkKGF1dGgsIHtcbiAgICAgICAgICBpZFRva2VuLFxuICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxuICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcbiAgICAgICAgICBwYXNzd29yZDogdGhpcy5fcGFzc3dvcmRcbiAgICAgICAgfSk7XG4gICAgICBjYXNlIFNpZ25Jbk1ldGhvZC5FTUFJTF9MSU5LOlxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aEVtYWlsTGlua0ZvckxpbmtpbmcoYXV0aCwge1xuICAgICAgICAgIGlkVG9rZW4sXG4gICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxuICAgICAgICAgIG9vYkNvZGU6IHRoaXMuX3Bhc3N3b3JkXG4gICAgICAgIH0pO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgX2ZhaWwoYXV0aCwgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUik7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGg6IEF1dGhJbnRlcm5hbCk6IFByb21pc2U8SWRUb2tlblJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMuX2dldElkVG9rZW5SZXNwb25zZShhdXRoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgRW5kcG9pbnQsXG4gIEh0dHBNZXRob2QsXG4gIF9hZGRUaWRJZk5lY2Vzc2FyeSxcbiAgX3BlcmZvcm1TaWduSW5SZXF1ZXN0XG59IGZyb20gJy4uL2luZGV4JztcbmltcG9ydCB7IElkVG9rZW4sIElkVG9rZW5SZXNwb25zZSB9IGZyb20gJy4uLy4uL21vZGVsL2lkX3Rva2VuJztcbmltcG9ydCB7IEF1dGggfSBmcm9tICcuLi8uLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNpZ25JbldpdGhJZHBSZXF1ZXN0IHtcbiAgcmVxdWVzdFVyaTogc3RyaW5nO1xuICBwb3N0Qm9keT86IHN0cmluZztcbiAgc2Vzc2lvbklkPzogc3RyaW5nO1xuICB0ZW5hbnRJZD86IHN0cmluZztcbiAgcmV0dXJuU2VjdXJlVG9rZW46IGJvb2xlYW47XG4gIHJldHVybklkcENyZWRlbnRpYWw/OiBib29sZWFuO1xuICBpZFRva2VuPzogSWRUb2tlbjtcbiAgYXV0b0NyZWF0ZT86IGJvb2xlYW47XG4gIHBlbmRpbmdUb2tlbj86IHN0cmluZztcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTaWduSW5XaXRoSWRwUmVzcG9uc2UgZXh0ZW5kcyBJZFRva2VuUmVzcG9uc2Uge1xuICBvYXV0aEFjY2Vzc1Rva2VuPzogc3RyaW5nO1xuICBvYXV0aFRva2VuU2VjcmV0Pzogc3RyaW5nO1xuICBub25jZT86IHN0cmluZztcbiAgb2F1dGhJZFRva2VuPzogc3RyaW5nO1xuICBwZW5kaW5nVG9rZW4/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoSWRwKFxuICBhdXRoOiBBdXRoLFxuICByZXF1ZXN0OiBTaWduSW5XaXRoSWRwUmVxdWVzdFxuKTogUHJvbWlzZTxTaWduSW5XaXRoSWRwUmVzcG9uc2U+IHtcbiAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdDxTaWduSW5XaXRoSWRwUmVxdWVzdCwgU2lnbkluV2l0aElkcFJlc3BvbnNlPihcbiAgICBhdXRoLFxuICAgIEh0dHBNZXRob2QuUE9TVCxcbiAgICBFbmRwb2ludC5TSUdOX0lOX1dJVEhfSURQLFxuICAgIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KVxuICApO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgcXVlcnlzdHJpbmcgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbmltcG9ydCB7XG4gIHNpZ25JbldpdGhJZHAsXG4gIFNpZ25JbldpdGhJZHBSZXF1ZXN0XG59IGZyb20gJy4uLy4uL2FwaS9hdXRoZW50aWNhdGlvbi9pZHAnO1xuaW1wb3J0IHsgQXV0aEludGVybmFsIH0gZnJvbSAnLi4vLi4vbW9kZWwvYXV0aCc7XG5pbXBvcnQgeyBJZFRva2VuUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9tb2RlbC9pZF90b2tlbic7XG5pbXBvcnQgeyBBdXRoRXJyb3JDb2RlIH0gZnJvbSAnLi4vZXJyb3JzJztcbmltcG9ydCB7IF9mYWlsIH0gZnJvbSAnLi4vdXRpbC9hc3NlcnQnO1xuaW1wb3J0IHsgQXV0aENyZWRlbnRpYWwgfSBmcm9tICcuL2F1dGhfY3JlZGVudGlhbCc7XG5cbmNvbnN0IElEUF9SRVFVRVNUX1VSSSA9ICdodHRwOi8vbG9jYWxob3N0JztcblxuZXhwb3J0IGludGVyZmFjZSBPQXV0aENyZWRlbnRpYWxQYXJhbXMge1xuICAvLyBPQXV0aCAyIHVzZXMgZWl0aGVyIGlkIHRva2VuIG9yIGFjY2VzcyB0b2tlblxuICBpZFRva2VuPzogc3RyaW5nIHwgbnVsbDtcbiAgYWNjZXNzVG9rZW4/OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8vIFRoZXNlIGZpZWxkcyBhcmUgdXNlZCB3aXRoIE9BdXRoIDFcbiAgb2F1dGhUb2tlbj86IHN0cmluZztcbiAgc2VjcmV0Pzogc3RyaW5nO1xuICBvYXV0aFRva2VuU2VjcmV0Pzogc3RyaW5nO1xuXG4gIC8vIE5vbmNlIGlzIG9ubHkgc2V0IGlmIHBlbmRpbmdUb2tlbiBpcyBub3QgcHJlc2VudFxuICBub25jZT86IHN0cmluZztcbiAgcGVuZGluZ1Rva2VuPzogc3RyaW5nO1xuXG4gIC8vIFV0aWxpdGllc1xuICBwcm92aWRlcklkOiBzdHJpbmc7XG4gIHNpZ25Jbk1ldGhvZDogc3RyaW5nO1xufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIE9BdXRoIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cbiAqXG4gKiBAcmVtYXJrc1xuICogSW1wbGVtZW50YXRpb25zIHNwZWNpZnkgdGhlIGRldGFpbHMgYWJvdXQgZWFjaCBhdXRoIHByb3ZpZGVyJ3MgY3JlZGVudGlhbCByZXF1aXJlbWVudHMuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgT0F1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xuICAvKipcbiAgICogVGhlIE9BdXRoIElEIHRva2VuIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3JlZGVudGlhbCBpZiBpdCBiZWxvbmdzIHRvIGFuIE9JREMgcHJvdmlkZXIsXG4gICAqIHN1Y2ggYXMgYGdvb2dsZS5jb21gLlxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGlkVG9rZW4/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgT0F1dGggYWNjZXNzIHRva2VuIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3JlZGVudGlhbCBpZiBpdCBiZWxvbmdzIHRvIGFuXG4gICAqIHtAbGluayBPQXV0aFByb3ZpZGVyfSwgc3VjaCBhcyBgZmFjZWJvb2suY29tYCwgYHR3aXR0ZXIuY29tYCwgZXRjLlxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGFjY2Vzc1Rva2VuPzogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIE9BdXRoIGFjY2VzcyB0b2tlbiBzZWNyZXQgYXNzb2NpYXRlZCB3aXRoIHRoZSBjcmVkZW50aWFsIGlmIGl0IGJlbG9uZ3MgdG8gYW4gT0F1dGggMS4wXG4gICAqIHByb3ZpZGVyLCBzdWNoIGFzIGB0d2l0dGVyLmNvbWAuXG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgc2VjcmV0Pzogc3RyaW5nO1xuXG4gIHByaXZhdGUgbm9uY2U/OiBzdHJpbmc7XG4gIHByaXZhdGUgcGVuZGluZ1Rva2VuOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAvKiogQGludGVybmFsICovXG4gIHN0YXRpYyBfZnJvbVBhcmFtcyhwYXJhbXM6IE9BdXRoQ3JlZGVudGlhbFBhcmFtcyk6IE9BdXRoQ3JlZGVudGlhbCB7XG4gICAgY29uc3QgY3JlZCA9IG5ldyBPQXV0aENyZWRlbnRpYWwocGFyYW1zLnByb3ZpZGVySWQsIHBhcmFtcy5zaWduSW5NZXRob2QpO1xuXG4gICAgaWYgKHBhcmFtcy5pZFRva2VuIHx8IHBhcmFtcy5hY2Nlc3NUb2tlbikge1xuICAgICAgLy8gT0F1dGggMiBhbmQgZWl0aGVyIElEIHRva2VuIG9yIGFjY2VzcyB0b2tlbi5cbiAgICAgIGlmIChwYXJhbXMuaWRUb2tlbikge1xuICAgICAgICBjcmVkLmlkVG9rZW4gPSBwYXJhbXMuaWRUb2tlbjtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmFtcy5hY2Nlc3NUb2tlbikge1xuICAgICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcGFyYW1zLmFjY2Vzc1Rva2VuO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgbm9uY2UgaWYgYXZhaWxhYmxlIGFuZCBubyBwZW5kaW5nVG9rZW4gaXMgcHJlc2VudC5cbiAgICAgIGlmIChwYXJhbXMubm9uY2UgJiYgIXBhcmFtcy5wZW5kaW5nVG9rZW4pIHtcbiAgICAgICAgY3JlZC5ub25jZSA9IHBhcmFtcy5ub25jZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmFtcy5wZW5kaW5nVG9rZW4pIHtcbiAgICAgICAgY3JlZC5wZW5kaW5nVG9rZW4gPSBwYXJhbXMucGVuZGluZ1Rva2VuO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGFyYW1zLm9hdXRoVG9rZW4gJiYgcGFyYW1zLm9hdXRoVG9rZW5TZWNyZXQpIHtcbiAgICAgIC8vIE9BdXRoIDEgYW5kIE9BdXRoIHRva2VuIHdpdGggdG9rZW4gc2VjcmV0XG4gICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcGFyYW1zLm9hdXRoVG9rZW47XG4gICAgICBjcmVkLnNlY3JldCA9IHBhcmFtcy5vYXV0aFRva2VuU2VjcmV0O1xuICAgIH0gZWxzZSB7XG4gICAgICBfZmFpbChBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlZDtcbiAgfVxuXG4gIC8qKiB7QGluaGVyaXRkb2MgQXV0aENyZWRlbnRpYWwudG9KU09OfSAgKi9cbiAgdG9KU09OKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkVG9rZW46IHRoaXMuaWRUb2tlbixcbiAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLmFjY2Vzc1Rva2VuLFxuICAgICAgc2VjcmV0OiB0aGlzLnNlY3JldCxcbiAgICAgIG5vbmNlOiB0aGlzLm5vbmNlLFxuICAgICAgcGVuZGluZ1Rva2VuOiB0aGlzLnBlbmRpbmdUb2tlbixcbiAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCxcbiAgICAgIHNpZ25Jbk1ldGhvZDogdGhpcy5zaWduSW5NZXRob2RcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXRpYyBtZXRob2QgdG8gZGVzZXJpYWxpemUgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGFuIG9iamVjdCBpbnRvIGFuXG4gICAqIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LlxuICAgKlxuICAgKiBAcGFyYW0ganNvbiAtIElucHV0IGNhbiBiZSBlaXRoZXIgT2JqZWN0IG9yIHRoZSBzdHJpbmdpZmllZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgb2JqZWN0LlxuICAgKiBXaGVuIHN0cmluZyBpcyBwcm92aWRlZCwgSlNPTi5wYXJzZSB3b3VsZCBiZSBjYWxsZWQgZmlyc3QuXG4gICAqXG4gICAqIEByZXR1cm5zIElmIHRoZSBKU09OIGlucHV0IGRvZXMgbm90IHJlcHJlc2VudCBhbiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cbiAgICovXG4gIHN0YXRpYyBmcm9tSlNPTihqc29uOiBzdHJpbmcgfCBvYmplY3QpOiBPQXV0aENyZWRlbnRpYWwgfCBudWxsIHtcbiAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcbiAgICBjb25zdCB7IHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCwgLi4ucmVzdCB9OiBPQXV0aENyZWRlbnRpYWxQYXJhbXMgPSBvYmo7XG4gICAgaWYgKCFwcm92aWRlcklkIHx8ICFzaWduSW5NZXRob2QpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGNyZWQgPSBuZXcgT0F1dGhDcmVkZW50aWFsKHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCk7XG4gICAgY3JlZC5pZFRva2VuID0gcmVzdC5pZFRva2VuIHx8IHVuZGVmaW5lZDtcbiAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcmVzdC5hY2Nlc3NUb2tlbiB8fCB1bmRlZmluZWQ7XG4gICAgY3JlZC5zZWNyZXQgPSByZXN0LnNlY3JldDtcbiAgICBjcmVkLm5vbmNlID0gcmVzdC5ub25jZTtcbiAgICBjcmVkLnBlbmRpbmdUb2tlbiA9IHJlc3QucGVuZGluZ1Rva2VuIHx8IG51bGw7XG4gICAgcmV0dXJuIGNyZWQ7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aDogQXV0aEludGVybmFsKTogUHJvbWlzZTxJZFRva2VuUmVzcG9uc2U+IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcbiAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2xpbmtUb0lkVG9rZW4oXG4gICAgYXV0aDogQXV0aEludGVybmFsLFxuICAgIGlkVG9rZW46IHN0cmluZ1xuICApOiBQcm9taXNlPElkVG9rZW5SZXNwb25zZT4ge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xuICAgIHJlcXVlc3QuaWRUb2tlbiA9IGlkVG9rZW47XG4gICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aDogQXV0aEludGVybmFsKTogUHJvbWlzZTxJZFRva2VuUmVzcG9uc2U+IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcbiAgICByZXF1ZXN0LmF1dG9DcmVhdGUgPSBmYWxzZTtcbiAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRSZXF1ZXN0KCk6IFNpZ25JbldpdGhJZHBSZXF1ZXN0IHtcbiAgICBjb25zdCByZXF1ZXN0OiBTaWduSW5XaXRoSWRwUmVxdWVzdCA9IHtcbiAgICAgIHJlcXVlc3RVcmk6IElEUF9SRVFVRVNUX1VSSSxcbiAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXG4gICAgfTtcblxuICAgIGlmICh0aGlzLnBlbmRpbmdUb2tlbikge1xuICAgICAgcmVxdWVzdC5wZW5kaW5nVG9rZW4gPSB0aGlzLnBlbmRpbmdUb2tlbjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcG9zdEJvZHk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgIGlmICh0aGlzLmlkVG9rZW4pIHtcbiAgICAgICAgcG9zdEJvZHlbJ2lkX3Rva2VuJ10gPSB0aGlzLmlkVG9rZW47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hY2Nlc3NUb2tlbikge1xuICAgICAgICBwb3N0Qm9keVsnYWNjZXNzX3Rva2VuJ10gPSB0aGlzLmFjY2Vzc1Rva2VuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2VjcmV0KSB7XG4gICAgICAgIHBvc3RCb2R5WydvYXV0aF90b2tlbl9zZWNyZXQnXSA9IHRoaXMuc2VjcmV0O1xuICAgICAgfVxuXG4gICAgICBwb3N0Qm9keVsncHJvdmlkZXJJZCddID0gdGhpcy5wcm92aWRlcklkO1xuICAgICAgaWYgKHRoaXMubm9uY2UgJiYgIXRoaXMucGVuZGluZ1Rva2VuKSB7XG4gICAgICAgIHBvc3RCb2R5Wydub25jZSddID0gdGhpcy5ub25jZTtcbiAgICAgIH1cblxuICAgICAgcmVxdWVzdC5wb3N0Qm9keSA9IHF1ZXJ5c3RyaW5nKHBvc3RCb2R5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVxdWVzdDtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgRW5kcG9pbnQsXG4gIEh0dHBNZXRob2QsXG4gIF9hZGRUaWRJZk5lY2Vzc2FyeSxcbiAgX21ha2VUYWdnZWRFcnJvcixcbiAgX3BlcmZvcm1BcGlSZXF1ZXN0LFxuICBfcGVyZm9ybVNpZ25JblJlcXVlc3Rcbn0gZnJvbSAnLi4vaW5kZXgnO1xuaW1wb3J0IHsgQXV0aEVycm9yQ29kZSB9IGZyb20gJy4uLy4uL2NvcmUvZXJyb3JzJztcbmltcG9ydCB7IElkVG9rZW5SZXNwb25zZSB9IGZyb20gJy4uLy4uL21vZGVsL2lkX3Rva2VuJztcbmltcG9ydCB7IFNlcnZlckVycm9yLCBTZXJ2ZXJFcnJvck1hcCB9IGZyb20gJy4uL2Vycm9ycyc7XG5pbXBvcnQgeyBBdXRoIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBTZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlUmVxdWVzdCB7XG4gIHBob25lTnVtYmVyOiBzdHJpbmc7XG4gIHJlY2FwdGNoYVRva2VuOiBzdHJpbmc7XG4gIHRlbmFudElkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlbmRQaG9uZVZlcmlmaWNhdGlvbkNvZGVSZXNwb25zZSB7XG4gIHNlc3Npb25JbmZvOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlKFxuICBhdXRoOiBBdXRoLFxuICByZXF1ZXN0OiBTZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlUmVxdWVzdFxuKTogUHJvbWlzZTxTZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlUmVzcG9uc2U+IHtcbiAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdDxcbiAgICBTZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlUmVxdWVzdCxcbiAgICBTZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlUmVzcG9uc2VcbiAgPihcbiAgICBhdXRoLFxuICAgIEh0dHBNZXRob2QuUE9TVCxcbiAgICBFbmRwb2ludC5TRU5EX1ZFUklGSUNBVElPTl9DT0RFLFxuICAgIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KVxuICApO1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNpZ25JbldpdGhQaG9uZU51bWJlclJlcXVlc3Qge1xuICB0ZW1wb3JhcnlQcm9vZj86IHN0cmluZztcbiAgcGhvbmVOdW1iZXI/OiBzdHJpbmc7XG4gIHNlc3Npb25JbmZvPzogc3RyaW5nO1xuICBjb2RlPzogc3RyaW5nO1xuICB0ZW5hbnRJZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMaW5rV2l0aFBob25lTnVtYmVyUmVxdWVzdFxuICBleHRlbmRzIFNpZ25JbldpdGhQaG9uZU51bWJlclJlcXVlc3Qge1xuICBpZFRva2VuOiBzdHJpbmc7XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2lnbkluV2l0aFBob25lTnVtYmVyUmVzcG9uc2UgZXh0ZW5kcyBJZFRva2VuUmVzcG9uc2Uge1xuICB0ZW1wb3JhcnlQcm9vZj86IHN0cmluZztcbiAgcGhvbmVOdW1iZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGhvbmVOdW1iZXIoXG4gIGF1dGg6IEF1dGgsXG4gIHJlcXVlc3Q6IFNpZ25JbldpdGhQaG9uZU51bWJlclJlcXVlc3Rcbik6IFByb21pc2U8U2lnbkluV2l0aFBob25lTnVtYmVyUmVzcG9uc2U+IHtcbiAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdDxcbiAgICBTaWduSW5XaXRoUGhvbmVOdW1iZXJSZXF1ZXN0LFxuICAgIFNpZ25JbldpdGhQaG9uZU51bWJlclJlc3BvbnNlXG4gID4oXG4gICAgYXV0aCxcbiAgICBIdHRwTWV0aG9kLlBPU1QsXG4gICAgRW5kcG9pbnQuU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUixcbiAgICBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdClcbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpbmtXaXRoUGhvbmVOdW1iZXIoXG4gIGF1dGg6IEF1dGgsXG4gIHJlcXVlc3Q6IExpbmtXaXRoUGhvbmVOdW1iZXJSZXF1ZXN0XG4pOiBQcm9taXNlPFNpZ25JbldpdGhQaG9uZU51bWJlclJlc3BvbnNlPiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3BlcmZvcm1TaWduSW5SZXF1ZXN0PFxuICAgIExpbmtXaXRoUGhvbmVOdW1iZXJSZXF1ZXN0LFxuICAgIFNpZ25JbldpdGhQaG9uZU51bWJlclJlc3BvbnNlXG4gID4oXG4gICAgYXV0aCxcbiAgICBIdHRwTWV0aG9kLlBPU1QsXG4gICAgRW5kcG9pbnQuU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUixcbiAgICBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdClcbiAgKTtcbiAgaWYgKHJlc3BvbnNlLnRlbXBvcmFyeVByb29mKSB7XG4gICAgdGhyb3cgX21ha2VUYWdnZWRFcnJvcihhdXRoLCBBdXRoRXJyb3JDb2RlLk5FRURfQ09ORklSTUFUSU9OLCByZXNwb25zZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG5pbnRlcmZhY2UgVmVyaWZ5UGhvbmVOdW1iZXJGb3JFeGlzdGluZ1JlcXVlc3RcbiAgZXh0ZW5kcyBTaWduSW5XaXRoUGhvbmVOdW1iZXJSZXF1ZXN0IHtcbiAgb3BlcmF0aW9uOiAnUkVBVVRIJztcbn1cblxuY29uc3QgVkVSSUZZX1BIT05FX05VTUJFUl9GT1JfRVhJU1RJTkdfRVJST1JfTUFQXzogUGFydGlhbDxcbiAgU2VydmVyRXJyb3JNYXA8U2VydmVyRXJyb3I+XG4+ID0ge1xuICBbU2VydmVyRXJyb3IuVVNFUl9OT1RfRk9VTkRdOiBBdXRoRXJyb3JDb2RlLlVTRVJfREVMRVRFRFxufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBob25lTnVtYmVyRm9yRXhpc3RpbmcoXG4gIGF1dGg6IEF1dGgsXG4gIHJlcXVlc3Q6IFNpZ25JbldpdGhQaG9uZU51bWJlclJlcXVlc3Rcbik6IFByb21pc2U8U2lnbkluV2l0aFBob25lTnVtYmVyUmVzcG9uc2U+IHtcbiAgY29uc3QgYXBpUmVxdWVzdDogVmVyaWZ5UGhvbmVOdW1iZXJGb3JFeGlzdGluZ1JlcXVlc3QgPSB7XG4gICAgLi4ucmVxdWVzdCxcbiAgICBvcGVyYXRpb246ICdSRUFVVEgnXG4gIH07XG4gIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3Q8XG4gICAgVmVyaWZ5UGhvbmVOdW1iZXJGb3JFeGlzdGluZ1JlcXVlc3QsXG4gICAgU2lnbkluV2l0aFBob25lTnVtYmVyUmVzcG9uc2VcbiAgPihcbiAgICBhdXRoLFxuICAgIEh0dHBNZXRob2QuUE9TVCxcbiAgICBFbmRwb2ludC5TSUdOX0lOX1dJVEhfUEhPTkVfTlVNQkVSLFxuICAgIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCBhcGlSZXF1ZXN0KSxcbiAgICBWRVJJRllfUEhPTkVfTlVNQkVSX0ZPUl9FWElTVElOR19FUlJPUl9NQVBfXG4gICk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBQcm92aWRlcklkLCBTaWduSW5NZXRob2QgfSBmcm9tICcuLi8uLi9tb2RlbC9lbnVtcyc7XG5cbmltcG9ydCB7IFBob25lT3JPYXV0aFRva2VuUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9hcGkvYXV0aGVudGljYXRpb24vbWZhJztcbmltcG9ydCB7XG4gIGxpbmtXaXRoUGhvbmVOdW1iZXIsXG4gIHNpZ25JbldpdGhQaG9uZU51bWJlcixcbiAgU2lnbkluV2l0aFBob25lTnVtYmVyUmVxdWVzdCxcbiAgdmVyaWZ5UGhvbmVOdW1iZXJGb3JFeGlzdGluZ1xufSBmcm9tICcuLi8uLi9hcGkvYXV0aGVudGljYXRpb24vc21zJztcbmltcG9ydCB7IEF1dGhJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL2F1dGgnO1xuaW1wb3J0IHsgSWRUb2tlblJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vbW9kZWwvaWRfdG9rZW4nO1xuaW1wb3J0IHsgQXV0aENyZWRlbnRpYWwgfSBmcm9tICcuL2F1dGhfY3JlZGVudGlhbCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGhvbmVBdXRoQ3JlZGVudGlhbFBhcmFtZXRlcnMge1xuICB2ZXJpZmljYXRpb25JZD86IHN0cmluZztcbiAgdmVyaWZpY2F0aW9uQ29kZT86IHN0cmluZztcbiAgcGhvbmVOdW1iZXI/OiBzdHJpbmc7XG4gIHRlbXBvcmFyeVByb29mPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IHtAbGluayBQaG9uZUF1dGhQcm92aWRlcn0uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgUGhvbmVBdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHBhcmFtczogUGhvbmVBdXRoQ3JlZGVudGlhbFBhcmFtZXRlcnMpIHtcbiAgICBzdXBlcihQcm92aWRlcklkLlBIT05FLCBTaWduSW5NZXRob2QuUEhPTkUpO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBzdGF0aWMgX2Zyb21WZXJpZmljYXRpb24oXG4gICAgdmVyaWZpY2F0aW9uSWQ6IHN0cmluZyxcbiAgICB2ZXJpZmljYXRpb25Db2RlOiBzdHJpbmdcbiAgKTogUGhvbmVBdXRoQ3JlZGVudGlhbCB7XG4gICAgcmV0dXJuIG5ldyBQaG9uZUF1dGhDcmVkZW50aWFsKHsgdmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUgfSk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHN0YXRpYyBfZnJvbVRva2VuUmVzcG9uc2UoXG4gICAgcGhvbmVOdW1iZXI6IHN0cmluZyxcbiAgICB0ZW1wb3JhcnlQcm9vZjogc3RyaW5nXG4gICk6IFBob25lQXV0aENyZWRlbnRpYWwge1xuICAgIHJldHVybiBuZXcgUGhvbmVBdXRoQ3JlZGVudGlhbCh7IHBob25lTnVtYmVyLCB0ZW1wb3JhcnlQcm9vZiB9KTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2dldElkVG9rZW5SZXNwb25zZShhdXRoOiBBdXRoSW50ZXJuYWwpOiBQcm9taXNlPFBob25lT3JPYXV0aFRva2VuUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHRoaXMuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KCkpO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfbGlua1RvSWRUb2tlbihcbiAgICBhdXRoOiBBdXRoSW50ZXJuYWwsXG4gICAgaWRUb2tlbjogc3RyaW5nXG4gICk6IFByb21pc2U8SWRUb2tlblJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIGxpbmtXaXRoUGhvbmVOdW1iZXIoYXV0aCwge1xuICAgICAgaWRUb2tlbixcbiAgICAgIC4uLnRoaXMuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KClcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoOiBBdXRoSW50ZXJuYWwpOiBQcm9taXNlPElkVG9rZW5SZXNwb25zZT4ge1xuICAgIHJldHVybiB2ZXJpZnlQaG9uZU51bWJlckZvckV4aXN0aW5nKGF1dGgsIHRoaXMuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KCkpO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKTogU2lnbkluV2l0aFBob25lTnVtYmVyUmVxdWVzdCB7XG4gICAgY29uc3QgeyB0ZW1wb3JhcnlQcm9vZiwgcGhvbmVOdW1iZXIsIHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlIH0gPVxuICAgICAgdGhpcy5wYXJhbXM7XG4gICAgaWYgKHRlbXBvcmFyeVByb29mICYmIHBob25lTnVtYmVyKSB7XG4gICAgICByZXR1cm4geyB0ZW1wb3JhcnlQcm9vZiwgcGhvbmVOdW1iZXIgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2Vzc2lvbkluZm86IHZlcmlmaWNhdGlvbklkLFxuICAgICAgY29kZTogdmVyaWZpY2F0aW9uQ29kZVxuICAgIH07XG4gIH1cblxuICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gKi9cbiAgdG9KU09OKCk6IG9iamVjdCB7XG4gICAgY29uc3Qgb2JqOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkXG4gICAgfTtcbiAgICBpZiAodGhpcy5wYXJhbXMucGhvbmVOdW1iZXIpIHtcbiAgICAgIG9iai5waG9uZU51bWJlciA9IHRoaXMucGFyYW1zLnBob25lTnVtYmVyO1xuICAgIH1cbiAgICBpZiAodGhpcy5wYXJhbXMudGVtcG9yYXJ5UHJvb2YpIHtcbiAgICAgIG9iai50ZW1wb3JhcnlQcm9vZiA9IHRoaXMucGFyYW1zLnRlbXBvcmFyeVByb29mO1xuICAgIH1cbiAgICBpZiAodGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uQ29kZSkge1xuICAgICAgb2JqLnZlcmlmaWNhdGlvbkNvZGUgPSB0aGlzLnBhcmFtcy52ZXJpZmljYXRpb25Db2RlO1xuICAgIH1cbiAgICBpZiAodGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uSWQpIHtcbiAgICAgIG9iai52ZXJpZmljYXRpb25JZCA9IHRoaXMucGFyYW1zLnZlcmlmaWNhdGlvbklkO1xuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICAvKiogR2VuZXJhdGVzIGEgcGhvbmUgY3JlZGVudGlhbCBiYXNlZCBvbiBhIHBsYWluIG9iamVjdCBvciBhIEpTT04gc3RyaW5nLiAqL1xuICBzdGF0aWMgZnJvbUpTT04oanNvbjogb2JqZWN0IHwgc3RyaW5nKTogUGhvbmVBdXRoQ3JlZGVudGlhbCB8IG51bGwge1xuICAgIGlmICh0eXBlb2YganNvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGpzb24gPSBKU09OLnBhcnNlKGpzb24pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUsIHBob25lTnVtYmVyLCB0ZW1wb3JhcnlQcm9vZiB9ID1cbiAgICAgIGpzb24gYXMgeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICBpZiAoXG4gICAgICAhdmVyaWZpY2F0aW9uQ29kZSAmJlxuICAgICAgIXZlcmlmaWNhdGlvbklkICYmXG4gICAgICAhcGhvbmVOdW1iZXIgJiZcbiAgICAgICF0ZW1wb3JhcnlQcm9vZlxuICAgICkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQaG9uZUF1dGhDcmVkZW50aWFsKHtcbiAgICAgIHZlcmlmaWNhdGlvbklkLFxuICAgICAgdmVyaWZpY2F0aW9uQ29kZSxcbiAgICAgIHBob25lTnVtYmVyLFxuICAgICAgdGVtcG9yYXJ5UHJvb2ZcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgZXh0cmFjdFF1ZXJ5c3RyaW5nLCBxdWVyeXN0cmluZ0RlY29kZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IEFjdGlvbkNvZGVPcGVyYXRpb24gfSBmcm9tICcuLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuaW1wb3J0IHsgQXV0aEVycm9yQ29kZSB9IGZyb20gJy4vZXJyb3JzJztcbmltcG9ydCB7IF9hc3NlcnQgfSBmcm9tICcuL3V0aWwvYXNzZXJ0JztcblxuLyoqXG4gKiBFbnVtcyBmb3IgZmllbGRzIGluIFVSTCBxdWVyeSBzdHJpbmcuXG4gKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuY29uc3QgZW51bSBRdWVyeUZpZWxkIHtcbiAgQVBJX0tFWSA9ICdhcGlLZXknLFxuICBDT0RFID0gJ29vYkNvZGUnLFxuICBDT05USU5VRV9VUkwgPSAnY29udGludWVVcmwnLFxuICBMQU5HVUFHRV9DT0RFID0gJ2xhbmd1YWdlQ29kZScsXG4gIE1PREUgPSAnbW9kZScsXG4gIFRFTkFOVF9JRCA9ICd0ZW5hbnRJZCdcbn1cblxuLyoqXG4gKiBNYXBzIHRoZSBtb2RlIHN0cmluZyBpbiBhY3Rpb24gY29kZSBVUkwgdG8gQWN0aW9uIENvZGUgSW5mbyBvcGVyYXRpb24uXG4gKlxuICogQHBhcmFtIG1vZGVcbiAqL1xuZnVuY3Rpb24gcGFyc2VNb2RlKG1vZGU6IHN0cmluZyB8IG51bGwpOiBBY3Rpb25Db2RlT3BlcmF0aW9uIHwgbnVsbCB7XG4gIHN3aXRjaCAobW9kZSkge1xuICAgIGNhc2UgJ3JlY292ZXJFbWFpbCc6XG4gICAgICByZXR1cm4gQWN0aW9uQ29kZU9wZXJhdGlvbi5SRUNPVkVSX0VNQUlMO1xuICAgIGNhc2UgJ3Jlc2V0UGFzc3dvcmQnOlxuICAgICAgcmV0dXJuIEFjdGlvbkNvZGVPcGVyYXRpb24uUEFTU1dPUkRfUkVTRVQ7XG4gICAgY2FzZSAnc2lnbkluJzpcbiAgICAgIHJldHVybiBBY3Rpb25Db2RlT3BlcmF0aW9uLkVNQUlMX1NJR05JTjtcbiAgICBjYXNlICd2ZXJpZnlFbWFpbCc6XG4gICAgICByZXR1cm4gQWN0aW9uQ29kZU9wZXJhdGlvbi5WRVJJRllfRU1BSUw7XG4gICAgY2FzZSAndmVyaWZ5QW5kQ2hhbmdlRW1haWwnOlxuICAgICAgcmV0dXJuIEFjdGlvbkNvZGVPcGVyYXRpb24uVkVSSUZZX0FORF9DSEFOR0VfRU1BSUw7XG4gICAgY2FzZSAncmV2ZXJ0U2Vjb25kRmFjdG9yQWRkaXRpb24nOlxuICAgICAgcmV0dXJuIEFjdGlvbkNvZGVPcGVyYXRpb24uUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT047XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIHBhcnNlIEZETCBsaW5rc1xuICpcbiAqIEBwYXJhbSB1cmxcbiAqL1xuZnVuY3Rpb24gcGFyc2VEZWVwTGluayh1cmw6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGxpbmsgPSBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcodXJsKSlbJ2xpbmsnXTtcblxuICAvLyBEb3VibGUgbGluayBjYXNlIChhdXRvbWF0aWMgcmVkaXJlY3QpLlxuICBjb25zdCBkb3VibGVEZWVwTGluayA9IGxpbmtcbiAgICA/IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyhsaW5rKSlbJ2RlZXBfbGlua19pZCddXG4gICAgOiBudWxsO1xuICAvLyBpT1MgY3VzdG9tIHNjaGVtZSBsaW5rcy5cbiAgY29uc3QgaU9TRGVlcExpbmsgPSBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcodXJsKSlbXG4gICAgJ2RlZXBfbGlua19pZCdcbiAgXTtcbiAgY29uc3QgaU9TRG91YmxlRGVlcExpbmsgPSBpT1NEZWVwTGlua1xuICAgID8gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKGlPU0RlZXBMaW5rKSlbJ2xpbmsnXVxuICAgIDogbnVsbDtcbiAgcmV0dXJuIGlPU0RvdWJsZURlZXBMaW5rIHx8IGlPU0RlZXBMaW5rIHx8IGRvdWJsZURlZXBMaW5rIHx8IGxpbmsgfHwgdXJsO1xufVxuXG4vKipcbiAqIEEgdXRpbGl0eSBjbGFzcyB0byBwYXJzZSBlbWFpbCBhY3Rpb24gVVJMcyBzdWNoIGFzIHBhc3N3b3JkIHJlc2V0LCBlbWFpbCB2ZXJpZmljYXRpb24sXG4gKiBlbWFpbCBsaW5rIHNpZ24gaW4sIGV0Yy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBBY3Rpb25Db2RlVVJMIHtcbiAgLyoqXG4gICAqIFRoZSBBUEkga2V5IG9mIHRoZSBlbWFpbCBhY3Rpb24gbGluay5cbiAgICovXG4gIHJlYWRvbmx5IGFwaUtleTogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIGFjdGlvbiBjb2RlIG9mIHRoZSBlbWFpbCBhY3Rpb24gbGluay5cbiAgICovXG4gIHJlYWRvbmx5IGNvZGU6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBjb250aW51ZSBVUkwgb2YgdGhlIGVtYWlsIGFjdGlvbiBsaW5rLiBOdWxsIGlmIG5vdCBwcm92aWRlZC5cbiAgICovXG4gIHJlYWRvbmx5IGNvbnRpbnVlVXJsOiBzdHJpbmcgfCBudWxsO1xuICAvKipcbiAgICogVGhlIGxhbmd1YWdlIGNvZGUgb2YgdGhlIGVtYWlsIGFjdGlvbiBsaW5rLiBOdWxsIGlmIG5vdCBwcm92aWRlZC5cbiAgICovXG4gIHJlYWRvbmx5IGxhbmd1YWdlQ29kZTogc3RyaW5nIHwgbnVsbDtcbiAgLyoqXG4gICAqIFRoZSBhY3Rpb24gcGVyZm9ybWVkIGJ5IHRoZSBlbWFpbCBhY3Rpb24gbGluay4gSXQgcmV0dXJucyBmcm9tIG9uZSBvZiB0aGUgdHlwZXMgZnJvbVxuICAgKiB7QGxpbmsgQWN0aW9uQ29kZUluZm99XG4gICAqL1xuICByZWFkb25seSBvcGVyYXRpb246IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0ZW5hbnQgSUQgb2YgdGhlIGVtYWlsIGFjdGlvbiBsaW5rLiBOdWxsIGlmIHRoZSBlbWFpbCBhY3Rpb24gaXMgZnJvbSB0aGUgcGFyZW50IHByb2plY3QuXG4gICAqL1xuICByZWFkb25seSB0ZW5hbnRJZDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogQHBhcmFtIGFjdGlvbkxpbmsgLSBUaGUgbGluayBmcm9tIHdoaWNoIHRvIGV4dHJhY3QgdGhlIFVSTC5cbiAgICogQHJldHVybnMgVGhlIHtAbGluayBBY3Rpb25Db2RlVVJMfSBvYmplY3QsIG9yIG51bGwgaWYgdGhlIGxpbmsgaXMgaW52YWxpZC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhY3Rpb25MaW5rOiBzdHJpbmcpIHtcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcoYWN0aW9uTGluaykpO1xuICAgIGNvbnN0IGFwaUtleSA9IHNlYXJjaFBhcmFtc1tRdWVyeUZpZWxkLkFQSV9LRVldID8/IG51bGw7XG4gICAgY29uc3QgY29kZSA9IHNlYXJjaFBhcmFtc1tRdWVyeUZpZWxkLkNPREVdID8/IG51bGw7XG4gICAgY29uc3Qgb3BlcmF0aW9uID0gcGFyc2VNb2RlKHNlYXJjaFBhcmFtc1tRdWVyeUZpZWxkLk1PREVdID8/IG51bGwpO1xuICAgIC8vIFZhbGlkYXRlIEFQSSBrZXksIGNvZGUgYW5kIG1vZGUuXG4gICAgX2Fzc2VydChhcGlLZXkgJiYgY29kZSAmJiBvcGVyYXRpb24sIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IpO1xuICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICAgIHRoaXMub3BlcmF0aW9uID0gb3BlcmF0aW9uO1xuICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgdGhpcy5jb250aW51ZVVybCA9IHNlYXJjaFBhcmFtc1tRdWVyeUZpZWxkLkNPTlRJTlVFX1VSTF0gPz8gbnVsbDtcbiAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IHNlYXJjaFBhcmFtc1tRdWVyeUZpZWxkLkxBTkdVQUdFX0NPREVdID8/IG51bGw7XG4gICAgdGhpcy50ZW5hbnRJZCA9IHNlYXJjaFBhcmFtc1tRdWVyeUZpZWxkLlRFTkFOVF9JRF0gPz8gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZyBhbmQgcmV0dXJucyBhbiB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gaWYgdGhlIGxpbmsgaXMgdmFsaWQsXG4gICAqIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXG4gICAqXG4gICAqIEBwYXJhbSBsaW5rICAtIFRoZSBlbWFpbCBhY3Rpb24gbGluayBzdHJpbmcuXG4gICAqIEByZXR1cm5zIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gb2JqZWN0LCBvciBudWxsIGlmIHRoZSBsaW5rIGlzIGludmFsaWQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0YXRpYyBwYXJzZUxpbmsobGluazogc3RyaW5nKTogQWN0aW9uQ29kZVVSTCB8IG51bGwge1xuICAgIGNvbnN0IGFjdGlvbkxpbmsgPSBwYXJzZURlZXBMaW5rKGxpbmspO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gbmV3IEFjdGlvbkNvZGVVUkwoYWN0aW9uTGluayk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZXMgdGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZyBhbmQgcmV0dXJucyBhbiB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gaWZcbiAqIHRoZSBsaW5rIGlzIHZhbGlkLCBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQWN0aW9uQ29kZVVSTChsaW5rOiBzdHJpbmcpOiBBY3Rpb25Db2RlVVJMIHwgbnVsbCB7XG4gIHJldHVybiBBY3Rpb25Db2RlVVJMLnBhcnNlTGluayhsaW5rKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFByb3ZpZGVySWQsIFNpZ25Jbk1ldGhvZCB9IGZyb20gJy4uLy4uL21vZGVsL2VudW1zJztcbmltcG9ydCB7IEF1dGhQcm92aWRlciB9IGZyb20gJy4uLy4uL21vZGVsL3B1YmxpY190eXBlcyc7XG5cbmltcG9ydCB7IEFjdGlvbkNvZGVVUkwgfSBmcm9tICcuLi9hY3Rpb25fY29kZV91cmwnO1xuaW1wb3J0IHsgRW1haWxBdXRoQ3JlZGVudGlhbCB9IGZyb20gJy4uL2NyZWRlbnRpYWxzL2VtYWlsJztcbmltcG9ydCB7IEF1dGhFcnJvckNvZGUgfSBmcm9tICcuLi9lcnJvcnMnO1xuaW1wb3J0IHsgX2Fzc2VydCB9IGZyb20gJy4uL3V0aWwvYXNzZXJ0JztcblxuLyoqXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyB7QGxpbmsgRW1haWxBdXRoQ3JlZGVudGlhbH0uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgRW1haWxBdXRoUHJvdmlkZXIgaW1wbGVtZW50cyBBdXRoUHJvdmlkZXIge1xuICAvKipcbiAgICogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkQsIGV2ZW4gZm9yIGVtYWlsIGxpbmsuXG4gICAqL1xuICBzdGF0aWMgcmVhZG9ubHkgUFJPVklERVJfSUQ6ICdwYXNzd29yZCcgPSBQcm92aWRlcklkLlBBU1NXT1JEO1xuICAvKipcbiAgICogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRC5cbiAgICovXG4gIHN0YXRpYyByZWFkb25seSBFTUFJTF9QQVNTV09SRF9TSUdOX0lOX01FVEhPRDogJ3Bhc3N3b3JkJyA9XG4gICAgU2lnbkluTWV0aG9kLkVNQUlMX1BBU1NXT1JEO1xuICAvKipcbiAgICogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9MSU5LLlxuICAgKi9cbiAgc3RhdGljIHJlYWRvbmx5IEVNQUlMX0xJTktfU0lHTl9JTl9NRVRIT0Q6ICdlbWFpbExpbmsnID1cbiAgICBTaWduSW5NZXRob2QuRU1BSUxfTElOSztcbiAgLyoqXG4gICAqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlBBU1NXT1JELCBldmVuIGZvciBlbWFpbCBsaW5rLlxuICAgKi9cbiAgcmVhZG9ubHkgcHJvdmlkZXJJZCA9IEVtYWlsQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEO1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gdXNpbmcgYW4gZW1haWwgYW5kIHBhc3N3b3JkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQpO1xuICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGF1dGhDcmVkZW50aWFsKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGVtYWlsIC0gRW1haWwgYWRkcmVzcy5cbiAgICogQHBhcmFtIHBhc3N3b3JkIC0gVXNlciBhY2NvdW50IHBhc3N3b3JkLlxuICAgKiBAcmV0dXJucyBUaGUgYXV0aCBwcm92aWRlciBjcmVkZW50aWFsLlxuICAgKi9cbiAgc3RhdGljIGNyZWRlbnRpYWwoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZyk6IEVtYWlsQXV0aENyZWRlbnRpYWwge1xuICAgIHJldHVybiBFbWFpbEF1dGhDcmVkZW50aWFsLl9mcm9tRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSB1c2luZyBhbiBlbWFpbCBhbmQgYW4gZW1haWwgbGluayBhZnRlciBhIHNpZ24gaW4gd2l0aFxuICAgKiBlbWFpbCBsaW5rIG9wZXJhdGlvbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiBjb25zdCBhdXRoQ3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxXaXRoTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKTtcbiAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCBlbWFpbCk7XG4gICAqIC8vIE9idGFpbiBlbWFpbExpbmsgZnJvbSB1c2VyLlxuICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWwsIGVtYWlsTGluayk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgdXNlZCB0byB2ZXJpZnkgdGhlIGxpbmsuXG4gICAqIEBwYXJhbSBlbWFpbCAtIEVtYWlsIGFkZHJlc3MuXG4gICAqIEBwYXJhbSBlbWFpbExpbmsgLSBTaWduLWluIGVtYWlsIGxpbmsuXG4gICAqIEByZXR1cm5zIC0gVGhlIGF1dGggcHJvdmlkZXIgY3JlZGVudGlhbC5cbiAgICovXG4gIHN0YXRpYyBjcmVkZW50aWFsV2l0aExpbmsoXG4gICAgZW1haWw6IHN0cmluZyxcbiAgICBlbWFpbExpbms6IHN0cmluZ1xuICApOiBFbWFpbEF1dGhDcmVkZW50aWFsIHtcbiAgICBjb25zdCBhY3Rpb25Db2RlVXJsID0gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsoZW1haWxMaW5rKTtcbiAgICBfYXNzZXJ0KGFjdGlvbkNvZGVVcmwsIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IpO1xuXG4gICAgcmV0dXJuIEVtYWlsQXV0aENyZWRlbnRpYWwuX2Zyb21FbWFpbEFuZENvZGUoXG4gICAgICBlbWFpbCxcbiAgICAgIGFjdGlvbkNvZGVVcmwuY29kZSxcbiAgICAgIGFjdGlvbkNvZGVVcmwudGVuYW50SWRcbiAgICApO1xuICB9XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBdXRoUHJvdmlkZXIgfSBmcm9tICcuLi8uLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuXG4vKipcbiAqIE1hcCBvZiBPQXV0aCBDdXN0b20gUGFyYW1ldGVycy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIEN1c3RvbVBhcmFtZXRlcnMgPSBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuXG4vKipcbiAqIFRoZSBiYXNlIGNsYXNzIGZvciBhbGwgRmVkZXJhdGVkIHByb3ZpZGVycyAoT0F1dGggKGluY2x1ZGluZyBPSURDKSwgU0FNTCkuXG4gKlxuICogVGhpcyBjbGFzcyBpcyBub3QgbWVhbnQgdG8gYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEZlZGVyYXRlZEF1dGhQcm92aWRlciBpbXBsZW1lbnRzIEF1dGhQcm92aWRlciB7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZGVmYXVsdExhbmd1YWdlQ29kZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJpdmF0ZSBjdXN0b21QYXJhbWV0ZXJzOiBDdXN0b21QYXJhbWV0ZXJzID0ge307XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yIGZvciBnZW5lcmljIE9BdXRoIHByb3ZpZGVycy5cbiAgICpcbiAgICogQHBhcmFtIHByb3ZpZGVySWQgLSBQcm92aWRlciBmb3Igd2hpY2ggY3JlZGVudGlhbHMgc2hvdWxkIGJlIGdlbmVyYXRlZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHByb3ZpZGVySWQ6IHN0cmluZykge31cblxuICAvKipcbiAgICogU2V0IHRoZSBsYW5ndWFnZSBnb2RlLlxuICAgKlxuICAgKiBAcGFyYW0gbGFuZ3VhZ2VDb2RlIC0gbGFuZ3VhZ2UgY29kZVxuICAgKi9cbiAgc2V0RGVmYXVsdExhbmd1YWdlKGxhbmd1YWdlQ29kZTogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZSA9IGxhbmd1YWdlQ29kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBPQXV0aCBjdXN0b20gcGFyYW1ldGVycyB0byBwYXNzIGluIGFuIE9BdXRoIHJlcXVlc3QgZm9yIHBvcHVwIGFuZCByZWRpcmVjdCBzaWduLWluXG4gICAqIG9wZXJhdGlvbnMuXG4gICAqXG4gICAqIEByZW1hcmtzXG4gICAqIEZvciBhIGRldGFpbGVkIGxpc3QsIGNoZWNrIHRoZSByZXNlcnZlZCByZXF1aXJlZCBPQXV0aCAyLjAgcGFyYW1ldGVycyBzdWNoIGFzIGBjbGllbnRfaWRgLFxuICAgKiBgcmVkaXJlY3RfdXJpYCwgYHNjb3BlYCwgYHJlc3BvbnNlX3R5cGVgLCBhbmQgYHN0YXRlYCBhcmUgbm90IGFsbG93ZWQgYW5kIHdpbGwgYmUgaWdub3JlZC5cbiAgICpcbiAgICogQHBhcmFtIGN1c3RvbU9BdXRoUGFyYW1ldGVycyAtIFRoZSBjdXN0b20gT0F1dGggcGFyYW1ldGVycyB0byBwYXNzIGluIHRoZSBPQXV0aCByZXF1ZXN0LlxuICAgKi9cbiAgc2V0Q3VzdG9tUGFyYW1ldGVycyhjdXN0b21PQXV0aFBhcmFtZXRlcnM6IEN1c3RvbVBhcmFtZXRlcnMpOiBBdXRoUHJvdmlkZXIge1xuICAgIHRoaXMuY3VzdG9tUGFyYW1ldGVycyA9IGN1c3RvbU9BdXRoUGFyYW1ldGVycztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSB0aGUgY3VycmVudCBsaXN0IG9mIHtAbGluayBDdXN0b21QYXJhbWV0ZXJzfS5cbiAgICovXG4gIGdldEN1c3RvbVBhcmFtZXRlcnMoKTogQ3VzdG9tUGFyYW1ldGVycyB7XG4gICAgcmV0dXJuIHRoaXMuY3VzdG9tUGFyYW1ldGVycztcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQXV0aFByb3ZpZGVyLCBVc2VyQ3JlZGVudGlhbCB9IGZyb20gJy4uLy4uL21vZGVsL3B1YmxpY190eXBlcyc7XG5cbmltcG9ydCB7IF9hc3NlcnQgfSBmcm9tICcuLi91dGlsL2Fzc2VydCc7XG5pbXBvcnQgeyBBdXRoRXJyb3JDb2RlIH0gZnJvbSAnLi4vZXJyb3JzJztcblxuaW1wb3J0IHsgT0F1dGhDcmVkZW50aWFsLCBPQXV0aENyZWRlbnRpYWxQYXJhbXMgfSBmcm9tICcuLi9jcmVkZW50aWFscy9vYXV0aCc7XG5pbXBvcnQgeyBVc2VyQ3JlZGVudGlhbEludGVybmFsIH0gZnJvbSAnLi4vLi4vbW9kZWwvdXNlcic7XG5pbXBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgVGFnZ2VkV2l0aFRva2VuUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9tb2RlbC9pZF90b2tlbic7XG5pbXBvcnQgeyBTaWduSW5XaXRoSWRwUmVzcG9uc2UgfSBmcm9tICcuLi8uLi8uLi9pbnRlcm5hbCc7XG5pbXBvcnQgeyBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIgfSBmcm9tICcuL2ZlZGVyYXRlZCc7XG5cbi8qKlxuICogRGVmaW5lcyB0aGUgb3B0aW9ucyBmb3IgaW5pdGlhbGl6aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9LlxuICpcbiAqIEByZW1hcmtzXG4gKiBGb3IgSUQgdG9rZW5zIHdpdGggbm9uY2UgY2xhaW0sIHRoZSByYXcgbm9uY2UgaGFzIHRvIGFsc28gYmUgcHJvdmlkZWQuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgaW50ZXJmYWNlIE9BdXRoQ3JlZGVudGlhbE9wdGlvbnMge1xuICAvKipcbiAgICogVGhlIE9BdXRoIElEIHRva2VuIHVzZWQgdG8gaW5pdGlhbGl6ZSB0aGUge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0uXG4gICAqL1xuICBpZFRva2VuPzogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIE9BdXRoIGFjY2VzcyB0b2tlbiB1c2VkIHRvIGluaXRpYWxpemUgdGhlIHtAbGluayBPQXV0aENyZWRlbnRpYWx9LlxuICAgKi9cbiAgYWNjZXNzVG9rZW4/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgcmF3IG5vbmNlIGFzc29jaWF0ZWQgd2l0aCB0aGUgSUQgdG9rZW4uXG4gICAqXG4gICAqIEByZW1hcmtzXG4gICAqIEl0IGlzIHJlcXVpcmVkIHdoZW4gYW4gSUQgdG9rZW4gd2l0aCBhIG5vbmNlIGZpZWxkIGlzIHByb3ZpZGVkLiBUaGUgU0hBLTI1NiBoYXNoIG9mIHRoZVxuICAgKiByYXcgbm9uY2UgbXVzdCBtYXRjaCB0aGUgbm9uY2UgZmllbGQgaW4gdGhlIElEIHRva2VuLlxuICAgKi9cbiAgcmF3Tm9uY2U/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogQ29tbW9uIGNvZGUgdG8gYWxsIE9BdXRoIHByb3ZpZGVycy4gVGhpcyBpcyBzZXBhcmF0ZSBmcm9tIHRoZVxuICoge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHNvIHRoYXQgY2hpbGQgcHJvdmlkZXJzIChsaWtlXG4gKiB7QGxpbmsgR29vZ2xlQXV0aFByb3ZpZGVyfSkgZG9uJ3QgaW5oZXJpdCB0aGUgYGNyZWRlbnRpYWxgIGluc3RhbmNlIG1ldGhvZC5cbiAqIEluc3RlYWQsIHRoZXkgcmVseSBvbiBhIHN0YXRpYyBgY3JlZGVudGlhbGAgbWV0aG9kLlxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZU9BdXRoUHJvdmlkZXJcbiAgZXh0ZW5kcyBGZWRlcmF0ZWRBdXRoUHJvdmlkZXJcbiAgaW1wbGVtZW50cyBBdXRoUHJvdmlkZXJcbntcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwcml2YXRlIHNjb3Blczogc3RyaW5nW10gPSBbXTtcblxuICAvKipcbiAgICogQWRkIGFuIE9BdXRoIHNjb3BlIHRvIHRoZSBjcmVkZW50aWFsLlxuICAgKlxuICAgKiBAcGFyYW0gc2NvcGUgLSBQcm92aWRlciBPQXV0aCBzY29wZSB0byBhZGQuXG4gICAqL1xuICBhZGRTY29wZShzY29wZTogc3RyaW5nKTogQXV0aFByb3ZpZGVyIHtcbiAgICAvLyBJZiBub3QgYWxyZWFkeSBhZGRlZCwgYWRkIHNjb3BlIHRvIGxpc3QuXG4gICAgaWYgKCF0aGlzLnNjb3Blcy5pbmNsdWRlcyhzY29wZSkpIHtcbiAgICAgIHRoaXMuc2NvcGVzLnB1c2goc2NvcGUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSB0aGUgY3VycmVudCBsaXN0IG9mIE9BdXRoIHNjb3Blcy5cbiAgICovXG4gIGdldFNjb3BlcygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLnNjb3Blc107XG4gIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBnZW5lcmljIHtAbGluayBPQXV0aENyZWRlbnRpYWx9LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXG4gKiBwcm92aWRlci5hZGRTY29wZSgncHJvZmlsZScpO1xuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXG4gKlxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XG4gKiBpZiAocmVzdWx0KSB7XG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBPQXV0aCBBY2Nlc3MgVG9rZW4gZm9yIHRoZSBwcm92aWRlci5cbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XG4gKiBwcm92aWRlci5hZGRTY29wZSgncHJvZmlsZScpO1xuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xuICpcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBPQXV0aCBBY2Nlc3MgVG9rZW4gZm9yIHRoZSBwcm92aWRlci5cbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xuICogYGBgXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBPQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xuICAvKipcbiAgICogQ3JlYXRlcyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEgSlNPTiBzdHJpbmcgb3IgYSBwbGFpbiBvYmplY3QuXG4gICAqIEBwYXJhbSBqc29uIC0gQSBwbGFpbiBvYmplY3Qgb3IgYSBKU09OIHN0cmluZ1xuICAgKi9cbiAgc3RhdGljIGNyZWRlbnRpYWxGcm9tSlNPTihqc29uOiBvYmplY3QgfCBzdHJpbmcpOiBPQXV0aENyZWRlbnRpYWwge1xuICAgIGNvbnN0IG9iaiA9IHR5cGVvZiBqc29uID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoanNvbikgOiBqc29uO1xuICAgIF9hc3NlcnQoXG4gICAgICAncHJvdmlkZXJJZCcgaW4gb2JqICYmICdzaWduSW5NZXRob2QnIGluIG9iaixcbiAgICAgIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1JcbiAgICApO1xuICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMob2JqKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIGdlbmVyaWMgT0F1dGggcHJvdmlkZXIncyBhY2Nlc3MgdG9rZW4gb3IgSUQgdG9rZW4uXG4gICAqXG4gICAqIEByZW1hcmtzXG4gICAqIFRoZSByYXcgbm9uY2UgaXMgcmVxdWlyZWQgd2hlbiBhbiBJRCB0b2tlbiB3aXRoIGEgbm9uY2UgZmllbGQgaXMgcHJvdmlkZWQuIFRoZSBTSEEtMjU2IGhhc2ggb2ZcbiAgICogdGhlIHJhdyBub25jZSBtdXN0IG1hdGNoIHRoZSBub25jZSBmaWVsZCBpbiB0aGUgSUQgdG9rZW4uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogLy8gYGdvb2dsZVVzZXJgIGZyb20gdGhlIG9uc3VjY2VzcyBHb29nbGUgU2lnbiBJbiBjYWxsYmFjay5cbiAgICogLy8gSW5pdGlhbGl6ZSBhIGdlbmVyYXRlIE9BdXRoIHByb3ZpZGVyIHdpdGggYSBgZ29vZ2xlLmNvbWAgcHJvdmlkZXJJZC5cbiAgICogY29uc3QgcHJvdmlkZXIgPSBuZXcgT0F1dGhQcm92aWRlcignZ29vZ2xlLmNvbScpO1xuICAgKiBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbCh7XG4gICAqICAgaWRUb2tlbjogZ29vZ2xlVXNlci5nZXRBdXRoUmVzcG9uc2UoKS5pZF90b2tlbixcbiAgICogfSk7XG4gICAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyAtIEVpdGhlciB0aGUgb3B0aW9ucyBvYmplY3QgY29udGFpbmluZyB0aGUgSUQgdG9rZW4sIGFjY2VzcyB0b2tlbiBhbmQgcmF3IG5vbmNlXG4gICAqIG9yIHRoZSBJRCB0b2tlbiBzdHJpbmcuXG4gICAqL1xuICBjcmVkZW50aWFsKHBhcmFtczogT0F1dGhDcmVkZW50aWFsT3B0aW9ucyk6IE9BdXRoQ3JlZGVudGlhbCB7XG4gICAgcmV0dXJuIHRoaXMuX2NyZWRlbnRpYWwoeyAuLi5wYXJhbXMsIG5vbmNlOiBwYXJhbXMucmF3Tm9uY2UgfSk7XG4gIH1cblxuICAvKiogQW4gaW50ZXJuYWwgY3JlZGVudGlhbCBtZXRob2QgdGhhdCBhY2NlcHRzIG1vcmUgcGVybWlzc2l2ZSBvcHRpb25zICovXG4gIHByaXZhdGUgX2NyZWRlbnRpYWwoXG4gICAgcGFyYW1zOiBPbWl0PE9BdXRoQ3JlZGVudGlhbFBhcmFtcywgJ3NpZ25Jbk1ldGhvZCcgfCAncHJvdmlkZXJJZCc+XG4gICk6IE9BdXRoQ3JlZGVudGlhbCB7XG4gICAgX2Fzc2VydChwYXJhbXMuaWRUb2tlbiB8fCBwYXJhbXMuYWNjZXNzVG9rZW4sIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IpO1xuICAgIC8vIEZvciBPQXV0aENyZWRlbnRpYWwsIHNpZ24gaW4gbWV0aG9kIGlzIHNhbWUgYXMgcHJvdmlkZXJJZC5cbiAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcbiAgICAgIC4uLnBhcmFtcyxcbiAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCxcbiAgICAgIHNpZ25Jbk1ldGhvZDogdGhpcy5wcm92aWRlcklkXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxuICAgKlxuICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxuICAgKi9cbiAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KFxuICAgIHVzZXJDcmVkZW50aWFsOiBVc2VyQ3JlZGVudGlhbFxuICApOiBPQXV0aENyZWRlbnRpYWwgfCBudWxsIHtcbiAgICByZXR1cm4gT0F1dGhQcm92aWRlci5vYXV0aENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KFxuICAgICAgdXNlckNyZWRlbnRpYWwgYXMgVXNlckNyZWRlbnRpYWxJbnRlcm5hbFxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXG4gICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXG4gICAqL1xuICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcjogRmlyZWJhc2VFcnJvcik6IE9BdXRoQ3JlZGVudGlhbCB8IG51bGwge1xuICAgIHJldHVybiBPQXV0aFByb3ZpZGVyLm9hdXRoQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoXG4gICAgICAoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkgYXMgVGFnZ2VkV2l0aFRva2VuUmVzcG9uc2VcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgb2F1dGhDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7XG4gICAgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2VcbiAgfTogVGFnZ2VkV2l0aFRva2VuUmVzcG9uc2UpOiBPQXV0aENyZWRlbnRpYWwgfCBudWxsIHtcbiAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHtcbiAgICAgIG9hdXRoSWRUb2tlbixcbiAgICAgIG9hdXRoQWNjZXNzVG9rZW4sXG4gICAgICBvYXV0aFRva2VuU2VjcmV0LFxuICAgICAgcGVuZGluZ1Rva2VuLFxuICAgICAgbm9uY2UsXG4gICAgICBwcm92aWRlcklkXG4gICAgfSA9IHRva2VuUmVzcG9uc2UgYXMgU2lnbkluV2l0aElkcFJlc3BvbnNlO1xuICAgIGlmIChcbiAgICAgICFvYXV0aEFjY2Vzc1Rva2VuICYmXG4gICAgICAhb2F1dGhUb2tlblNlY3JldCAmJlxuICAgICAgIW9hdXRoSWRUb2tlbiAmJlxuICAgICAgIXBlbmRpbmdUb2tlblxuICAgICkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCFwcm92aWRlcklkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIG5ldyBPQXV0aFByb3ZpZGVyKHByb3ZpZGVySWQpLl9jcmVkZW50aWFsKHtcbiAgICAgICAgaWRUb2tlbjogb2F1dGhJZFRva2VuLFxuICAgICAgICBhY2Nlc3NUb2tlbjogb2F1dGhBY2Nlc3NUb2tlbixcbiAgICAgICAgbm9uY2UsXG4gICAgICAgIHBlbmRpbmdUb2tlblxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBVc2VyQ3JlZGVudGlhbCB9IGZyb20gJy4uLy4uL21vZGVsL3B1YmxpY190eXBlcyc7XG5pbXBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG5pbXBvcnQgeyBUYWdnZWRXaXRoVG9rZW5SZXNwb25zZSB9IGZyb20gJy4uLy4uL21vZGVsL2lkX3Rva2VuJztcbmltcG9ydCB7IFVzZXJDcmVkZW50aWFsSW50ZXJuYWwgfSBmcm9tICcuLi8uLi9tb2RlbC91c2VyJztcbmltcG9ydCB7IE9BdXRoQ3JlZGVudGlhbCB9IGZyb20gJy4uL2NyZWRlbnRpYWxzL29hdXRoJztcbmltcG9ydCB7IEJhc2VPQXV0aFByb3ZpZGVyIH0gZnJvbSAnLi9vYXV0aCc7XG5pbXBvcnQgeyBQcm92aWRlcklkLCBTaWduSW5NZXRob2QgfSBmcm9tICcuLi8uLi9tb2RlbC9lbnVtcyc7XG5cbi8qKlxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYW4ge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZm9yIHtAbGluayBQcm92aWRlcklkfS5GQUNFQk9PSy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgamF2YXNjcmlwdFxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXG4gKlxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XG4gKiBpZiAocmVzdWx0KSB7XG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgamF2YXNjcmlwdFxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xuICpcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXG4gKiBjb25zdCBjcmVkZW50aWFsID0gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcbiAqIGBgYFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEZhY2Vib29rQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xuICAvKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5GQUNFQk9PSy4gKi9cbiAgc3RhdGljIHJlYWRvbmx5IEZBQ0VCT09LX1NJR05fSU5fTUVUSE9EOiAnZmFjZWJvb2suY29tJyA9XG4gICAgU2lnbkluTWV0aG9kLkZBQ0VCT09LO1xuICAvKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uRkFDRUJPT0suICovXG4gIHN0YXRpYyByZWFkb25seSBQUk9WSURFUl9JRDogJ2ZhY2Vib29rLmNvbScgPSBQcm92aWRlcklkLkZBQ0VCT09LO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFByb3ZpZGVySWQuRkFDRUJPT0spO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBGYWNlYm9vay5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiAvLyBgZXZlbnRgIGZyb20gdGhlIEZhY2Vib29rIGF1dGguYXV0aFJlc3BvbnNlQ2hhbmdlIGNhbGxiYWNrLlxuICAgKiBjb25zdCBjcmVkZW50aWFsID0gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChldmVudC5hdXRoUmVzcG9uc2UuYWNjZXNzVG9rZW4pO1xuICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEZhY2Vib29rIGFjY2VzcyB0b2tlbi5cbiAgICovXG4gIHN0YXRpYyBjcmVkZW50aWFsKGFjY2Vzc1Rva2VuOiBzdHJpbmcpOiBPQXV0aENyZWRlbnRpYWwge1xuICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xuICAgICAgcHJvdmlkZXJJZDogRmFjZWJvb2tBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXG4gICAgICBzaWduSW5NZXRob2Q6IEZhY2Vib29rQXV0aFByb3ZpZGVyLkZBQ0VCT09LX1NJR05fSU5fTUVUSE9ELFxuICAgICAgYWNjZXNzVG9rZW5cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXG4gICAqXG4gICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXG4gICAqL1xuICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQoXG4gICAgdXNlckNyZWRlbnRpYWw6IFVzZXJDcmVkZW50aWFsXG4gICk6IE9BdXRoQ3JlZGVudGlhbCB8IG51bGwge1xuICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdChcbiAgICAgIHVzZXJDcmVkZW50aWFsIGFzIFVzZXJDcmVkZW50aWFsSW50ZXJuYWxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXG4gICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXG4gICAqL1xuICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcjogRmlyZWJhc2VFcnJvcik6IE9BdXRoQ3JlZGVudGlhbCB8IG51bGwge1xuICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdChcbiAgICAgIChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSBhcyBUYWdnZWRXaXRoVG9rZW5SZXNwb25zZVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7XG4gICAgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2VcbiAgfTogVGFnZ2VkV2l0aFRva2VuUmVzcG9uc2UpOiBPQXV0aENyZWRlbnRpYWwgfCBudWxsIHtcbiAgICBpZiAoIXRva2VuUmVzcG9uc2UgfHwgISgnb2F1dGhBY2Nlc3NUb2tlbicgaW4gdG9rZW5SZXNwb25zZSkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICghdG9rZW5SZXNwb25zZS5vYXV0aEFjY2Vzc1Rva2VuKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodG9rZW5SZXNwb25zZS5vYXV0aEFjY2Vzc1Rva2VuKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgVXNlckNyZWRlbnRpYWwgfSBmcm9tICcuLi8uLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuaW1wb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuaW1wb3J0IHsgU2lnbkluV2l0aElkcFJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vYXBpL2F1dGhlbnRpY2F0aW9uL2lkcCc7XG5pbXBvcnQgeyBUYWdnZWRXaXRoVG9rZW5SZXNwb25zZSB9IGZyb20gJy4uLy4uL21vZGVsL2lkX3Rva2VuJztcbmltcG9ydCB7IFVzZXJDcmVkZW50aWFsSW50ZXJuYWwgfSBmcm9tICcuLi8uLi9tb2RlbC91c2VyJztcbmltcG9ydCB7IE9BdXRoQ3JlZGVudGlhbCB9IGZyb20gJy4uL2NyZWRlbnRpYWxzL29hdXRoJztcbmltcG9ydCB7IEJhc2VPQXV0aFByb3ZpZGVyIH0gZnJvbSAnLi9vYXV0aCc7XG5pbXBvcnQgeyBQcm92aWRlcklkLCBTaWduSW5NZXRob2QgfSBmcm9tICcuLi8uLi9tb2RlbC9lbnVtcyc7XG5cbi8qKlxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYW4gYW4ge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZm9yIHtAbGluayBQcm92aWRlcklkfS5HT09HTEUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGphdmFzY3JpcHRcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdvb2dsZUF1dGhQcm92aWRlcigpO1xuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxuICpcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xuICogaWYgKHJlc3VsdCkge1xuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR29vZ2xlIEFjY2VzcyBUb2tlbi5cbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgamF2YXNjcmlwdFxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR29vZ2xlQXV0aFByb3ZpZGVyKCk7XG4gKiBwcm92aWRlci5hZGRTY29wZSgncHJvZmlsZScpO1xuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xuICpcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBHb29nbGUgQWNjZXNzIFRva2VuLlxuICogY29uc3QgY3JlZGVudGlhbCA9IEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xuICogYGBgXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgR29vZ2xlQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xuICAvKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5HT09HTEUuICovXG4gIHN0YXRpYyByZWFkb25seSBHT09HTEVfU0lHTl9JTl9NRVRIT0Q6ICdnb29nbGUuY29tJyA9IFNpZ25Jbk1ldGhvZC5HT09HTEU7XG4gIC8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5HT09HTEUuICovXG4gIHN0YXRpYyByZWFkb25seSBQUk9WSURFUl9JRDogJ2dvb2dsZS5jb20nID0gUHJvdmlkZXJJZC5HT09HTEU7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoUHJvdmlkZXJJZC5HT09HTEUpO1xuICAgIHRoaXMuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY3JlZGVudGlhbCBmb3IgR29vZ2xlLiBBdCBsZWFzdCBvbmUgb2YgSUQgdG9rZW4gYW5kIGFjY2VzcyB0b2tlbiBpcyByZXF1aXJlZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiAvLyBcXGBnb29nbGVVc2VyXFxgIGZyb20gdGhlIG9uc3VjY2VzcyBHb29nbGUgU2lnbiBJbiBjYWxsYmFjay5cbiAgICogY29uc3QgY3JlZGVudGlhbCA9IEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKGdvb2dsZVVzZXIuZ2V0QXV0aFJlc3BvbnNlKCkuaWRfdG9rZW4pO1xuICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBpZFRva2VuIC0gR29vZ2xlIElEIHRva2VuLlxuICAgKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBHb29nbGUgYWNjZXNzIHRva2VuLlxuICAgKi9cbiAgc3RhdGljIGNyZWRlbnRpYWwoXG4gICAgaWRUb2tlbj86IHN0cmluZyB8IG51bGwsXG4gICAgYWNjZXNzVG9rZW4/OiBzdHJpbmcgfCBudWxsXG4gICk6IE9BdXRoQ3JlZGVudGlhbCB7XG4gICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XG4gICAgICBwcm92aWRlcklkOiBHb29nbGVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXG4gICAgICBzaWduSW5NZXRob2Q6IEdvb2dsZUF1dGhQcm92aWRlci5HT09HTEVfU0lHTl9JTl9NRVRIT0QsXG4gICAgICBpZFRva2VuLFxuICAgICAgYWNjZXNzVG9rZW5cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXG4gICAqXG4gICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXG4gICAqL1xuICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQoXG4gICAgdXNlckNyZWRlbnRpYWw6IFVzZXJDcmVkZW50aWFsXG4gICk6IE9BdXRoQ3JlZGVudGlhbCB8IG51bGwge1xuICAgIHJldHVybiBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoXG4gICAgICB1c2VyQ3JlZGVudGlhbCBhcyBVc2VyQ3JlZGVudGlhbEludGVybmFsXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcbiAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cbiAgICovXG4gIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yOiBGaXJlYmFzZUVycm9yKTogT0F1dGhDcmVkZW50aWFsIHwgbnVsbCB7XG4gICAgcmV0dXJuIEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdChcbiAgICAgIChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSBhcyBUYWdnZWRXaXRoVG9rZW5SZXNwb25zZVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7XG4gICAgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2VcbiAgfTogVGFnZ2VkV2l0aFRva2VuUmVzcG9uc2UpOiBPQXV0aENyZWRlbnRpYWwgfCBudWxsIHtcbiAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHsgb2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuIH0gPVxuICAgICAgdG9rZW5SZXNwb25zZSBhcyBTaWduSW5XaXRoSWRwUmVzcG9uc2U7XG4gICAgaWYgKCFvYXV0aElkVG9rZW4gJiYgIW9hdXRoQWNjZXNzVG9rZW4pIHtcbiAgICAgIC8vIFRoaXMgY291bGQgYmUgYW4gb2F1dGggMSBjcmVkZW50aWFsIG9yIGEgcGhvbmUgY3JlZGVudGlhbFxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChvYXV0aElkVG9rZW4sIG9hdXRoQWNjZXNzVG9rZW4pO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBVc2VyQ3JlZGVudGlhbCB9IGZyb20gJy4uLy4uL21vZGVsL3B1YmxpY190eXBlcyc7XG5pbXBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG5pbXBvcnQgeyBUYWdnZWRXaXRoVG9rZW5SZXNwb25zZSB9IGZyb20gJy4uLy4uL21vZGVsL2lkX3Rva2VuJztcbmltcG9ydCB7IFVzZXJDcmVkZW50aWFsSW50ZXJuYWwgfSBmcm9tICcuLi8uLi9tb2RlbC91c2VyJztcbmltcG9ydCB7IE9BdXRoQ3JlZGVudGlhbCB9IGZyb20gJy4uL2NyZWRlbnRpYWxzL29hdXRoJztcbmltcG9ydCB7IEJhc2VPQXV0aFByb3ZpZGVyIH0gZnJvbSAnLi9vYXV0aCc7XG5pbXBvcnQgeyBQcm92aWRlcklkLCBTaWduSW5NZXRob2QgfSBmcm9tICcuLi8uLi9tb2RlbC9lbnVtcyc7XG5cbi8qKlxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYW4ge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZm9yIHtAbGluayBQcm92aWRlcklkfS5HSVRIVUIuXG4gKlxuICogQHJlbWFya3NcbiAqIEdpdEh1YiByZXF1aXJlcyBhbiBPQXV0aCAyLjAgcmVkaXJlY3QsIHNvIHlvdSBjYW4gZWl0aGVyIGhhbmRsZSB0aGUgcmVkaXJlY3QgZGlyZWN0bHksIG9yIHVzZVxuICogdGhlIHtAbGluayBzaWduSW5XaXRoUG9wdXB9IGhhbmRsZXI6XG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGphdmFzY3JpcHRcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdpdGh1YkF1dGhQcm92aWRlcigpO1xuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3JlcG8nKTtcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcbiAqXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcbiAqIGlmIChyZXN1bHQpIHtcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEdpdGh1YiBBY2Nlc3MgVG9rZW4uXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xuICogfVxuICogYGBgXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGphdmFzY3JpcHRcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdpdGh1YkF1dGhQcm92aWRlcigpO1xuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3JlcG8nKTtcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XG4gKlxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEdpdGh1YiBBY2Nlc3MgVG9rZW4uXG4gKiBjb25zdCBjcmVkZW50aWFsID0gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XG4gKiBgYGBcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEdpdGh1YkF1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcbiAgLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uR0lUSFVCLiAqL1xuICBzdGF0aWMgcmVhZG9ubHkgR0lUSFVCX1NJR05fSU5fTUVUSE9EOiAnZ2l0aHViLmNvbScgPSBTaWduSW5NZXRob2QuR0lUSFVCO1xuICAvKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uR0lUSFVCLiAqL1xuICBzdGF0aWMgcmVhZG9ubHkgUFJPVklERVJfSUQ6ICdnaXRodWIuY29tJyA9IFByb3ZpZGVySWQuR0lUSFVCO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFByb3ZpZGVySWQuR0lUSFVCKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY3JlZGVudGlhbCBmb3IgR2l0aHViLlxuICAgKlxuICAgKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBHaXRodWIgYWNjZXNzIHRva2VuLlxuICAgKi9cbiAgc3RhdGljIGNyZWRlbnRpYWwoYWNjZXNzVG9rZW46IHN0cmluZyk6IE9BdXRoQ3JlZGVudGlhbCB7XG4gICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XG4gICAgICBwcm92aWRlcklkOiBHaXRodWJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXG4gICAgICBzaWduSW5NZXRob2Q6IEdpdGh1YkF1dGhQcm92aWRlci5HSVRIVUJfU0lHTl9JTl9NRVRIT0QsXG4gICAgICBhY2Nlc3NUb2tlblxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cbiAgICpcbiAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cbiAgICovXG4gIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdChcbiAgICB1c2VyQ3JlZGVudGlhbDogVXNlckNyZWRlbnRpYWxcbiAgKTogT0F1dGhDcmVkZW50aWFsIHwgbnVsbCB7XG4gICAgcmV0dXJuIEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdChcbiAgICAgIHVzZXJDcmVkZW50aWFsIGFzIFVzZXJDcmVkZW50aWFsSW50ZXJuYWxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXG4gICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXG4gICAqL1xuICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcjogRmlyZWJhc2VFcnJvcik6IE9BdXRoQ3JlZGVudGlhbCB8IG51bGwge1xuICAgIHJldHVybiBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoXG4gICAgICAoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkgYXMgVGFnZ2VkV2l0aFRva2VuUmVzcG9uc2VcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3Qoe1xuICAgIF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlXG4gIH06IFRhZ2dlZFdpdGhUb2tlblJlc3BvbnNlKTogT0F1dGhDcmVkZW50aWFsIHwgbnVsbCB7XG4gICAgaWYgKCF0b2tlblJlc3BvbnNlIHx8ICEoJ29hdXRoQWNjZXNzVG9rZW4nIGluIHRva2VuUmVzcG9uc2UpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIXRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFNBTUwgY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkgYW4ge0BsaW5rIFNBTUxBdXRoUHJvdmlkZXJ9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuXG5pbXBvcnQge1xuICBzaWduSW5XaXRoSWRwLFxuICBTaWduSW5XaXRoSWRwUmVxdWVzdFxufSBmcm9tICcuLi8uLi9hcGkvYXV0aGVudGljYXRpb24vaWRwJztcbmltcG9ydCB7IEF1dGhJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL2F1dGgnO1xuaW1wb3J0IHsgSWRUb2tlblJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vbW9kZWwvaWRfdG9rZW4nO1xuaW1wb3J0IHsgQXV0aENyZWRlbnRpYWwgfSBmcm9tICcuL2F1dGhfY3JlZGVudGlhbCc7XG5cbmNvbnN0IElEUF9SRVFVRVNUX1VSSSA9ICdodHRwOi8vbG9jYWxob3N0JztcblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBTQU1MQXV0aENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihcbiAgICBwcm92aWRlcklkOiBzdHJpbmcsXG4gICAgcHJpdmF0ZSByZWFkb25seSBwZW5kaW5nVG9rZW46IHN0cmluZ1xuICApIHtcbiAgICBzdXBlcihwcm92aWRlcklkLCBwcm92aWRlcklkKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2dldElkVG9rZW5SZXNwb25zZShhdXRoOiBBdXRoSW50ZXJuYWwpOiBQcm9taXNlPElkVG9rZW5SZXNwb25zZT4ge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xuICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfbGlua1RvSWRUb2tlbihcbiAgICBhdXRoOiBBdXRoSW50ZXJuYWwsXG4gICAgaWRUb2tlbjogc3RyaW5nXG4gICk6IFByb21pc2U8SWRUb2tlblJlc3BvbnNlPiB7XG4gICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XG4gICAgcmVxdWVzdC5pZFRva2VuID0gaWRUb2tlbjtcbiAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoOiBBdXRoSW50ZXJuYWwpOiBQcm9taXNlPElkVG9rZW5SZXNwb25zZT4ge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xuICAgIHJlcXVlc3QuYXV0b0NyZWF0ZSA9IGZhbHNlO1xuICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xuICB9XG5cbiAgLyoqIHtAaW5oZXJpdGRvYyBBdXRoQ3JlZGVudGlhbC50b0pTT059ICAqL1xuICB0b0pTT04oKTogb2JqZWN0IHtcbiAgICByZXR1cm4ge1xuICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZCxcbiAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCxcbiAgICAgIHBlbmRpbmdUb2tlbjogdGhpcy5wZW5kaW5nVG9rZW5cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXRpYyBtZXRob2QgdG8gZGVzZXJpYWxpemUgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGFuIG9iamVjdCBpbnRvIGFuXG4gICAqIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LlxuICAgKlxuICAgKiBAcGFyYW0ganNvbiAtIElucHV0IGNhbiBiZSBlaXRoZXIgT2JqZWN0IG9yIHRoZSBzdHJpbmdpZmllZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgb2JqZWN0LlxuICAgKiBXaGVuIHN0cmluZyBpcyBwcm92aWRlZCwgSlNPTi5wYXJzZSB3b3VsZCBiZSBjYWxsZWQgZmlyc3QuXG4gICAqXG4gICAqIEByZXR1cm5zIElmIHRoZSBKU09OIGlucHV0IGRvZXMgbm90IHJlcHJlc2VudCBhbiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cbiAgICovXG4gIHN0YXRpYyBmcm9tSlNPTihqc29uOiBzdHJpbmcgfCBvYmplY3QpOiBTQU1MQXV0aENyZWRlbnRpYWwgfCBudWxsIHtcbiAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcbiAgICBjb25zdCB7IHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCwgcGVuZGluZ1Rva2VuIH06IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPVxuICAgICAgb2JqO1xuICAgIGlmIChcbiAgICAgICFwcm92aWRlcklkIHx8XG4gICAgICAhc2lnbkluTWV0aG9kIHx8XG4gICAgICAhcGVuZGluZ1Rva2VuIHx8XG4gICAgICBwcm92aWRlcklkICE9PSBzaWduSW5NZXRob2RcbiAgICApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgU0FNTEF1dGhDcmVkZW50aWFsKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbik7XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIHN0YXRpYyBtZXRob2QgdG8gYXZvaWQgZXhwb3NpbmcgdGhlIGNvbnN0cnVjdG9yIHRvIGVuZCB1c2Vycy5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBzdGF0aWMgX2NyZWF0ZShwcm92aWRlcklkOiBzdHJpbmcsIHBlbmRpbmdUb2tlbjogc3RyaW5nKTogU0FNTEF1dGhDcmVkZW50aWFsIHtcbiAgICByZXR1cm4gbmV3IFNBTUxBdXRoQ3JlZGVudGlhbChwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFJlcXVlc3QoKTogU2lnbkluV2l0aElkcFJlcXVlc3Qge1xuICAgIHJldHVybiB7XG4gICAgICByZXF1ZXN0VXJpOiBJRFBfUkVRVUVTVF9VUkksXG4gICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcbiAgICAgIHBlbmRpbmdUb2tlbjogdGhpcy5wZW5kaW5nVG9rZW5cbiAgICB9O1xuICB9XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgU2lnbkluV2l0aElkcFJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vYXBpL2F1dGhlbnRpY2F0aW9uL2lkcCc7XG5pbXBvcnQgeyBUYWdnZWRXaXRoVG9rZW5SZXNwb25zZSB9IGZyb20gJy4uLy4uL21vZGVsL2lkX3Rva2VuJztcbmltcG9ydCB7IFVzZXJDcmVkZW50aWFsIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcbmltcG9ydCB7IFVzZXJDcmVkZW50aWFsSW50ZXJuYWwgfSBmcm9tICcuLi8uLi9tb2RlbC91c2VyJztcbmltcG9ydCB7IEF1dGhDcmVkZW50aWFsIH0gZnJvbSAnLi4vY3JlZGVudGlhbHMnO1xuaW1wb3J0IHsgU0FNTEF1dGhDcmVkZW50aWFsIH0gZnJvbSAnLi4vY3JlZGVudGlhbHMvc2FtbCc7XG5pbXBvcnQgeyBBdXRoRXJyb3JDb2RlIH0gZnJvbSAnLi4vZXJyb3JzJztcbmltcG9ydCB7IF9hc3NlcnQgfSBmcm9tICcuLi91dGlsL2Fzc2VydCc7XG5pbXBvcnQgeyBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIgfSBmcm9tICcuL2ZlZGVyYXRlZCc7XG5cbmNvbnN0IFNBTUxfUFJPVklERVJfUFJFRklYID0gJ3NhbWwuJztcblxuLyoqXG4gKiBBbiB7QGxpbmsgQXV0aFByb3ZpZGVyfSBmb3IgU0FNTC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBTQU1MQXV0aFByb3ZpZGVyIGV4dGVuZHMgRmVkZXJhdGVkQXV0aFByb3ZpZGVyIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yLiBUaGUgcHJvdmlkZXJJZCBtdXN0IHN0YXJ0IHdpdGggXCJzYW1sLlwiXG4gICAqIEBwYXJhbSBwcm92aWRlcklkIC0gU0FNTCBwcm92aWRlciBJRC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHByb3ZpZGVySWQ6IHN0cmluZykge1xuICAgIF9hc3NlcnQoXG4gICAgICBwcm92aWRlcklkLnN0YXJ0c1dpdGgoU0FNTF9QUk9WSURFUl9QUkVGSVgpLFxuICAgICAgQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUlxuICAgICk7XG4gICAgc3VwZXIocHJvdmlkZXJJZCk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0gYWZ0ZXIgYVxuICAgKiBzdWNjZXNzZnVsIFNBTUwgZmxvdyBjb21wbGV0ZXMuXG4gICAqXG4gICAqIEByZW1hcmtzXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCB0byBnZXQgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSwgeW91IGNvdWxkIHdyaXRlIHRoZVxuICAgKiBmb2xsb3dpbmcgY29kZTpcbiAgICpcbiAgICogYGBganNcbiAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgc2FtbFByb3ZpZGVyKTtcbiAgICogY29uc3QgY3JlZGVudGlhbCA9IFNBTUxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cbiAgICovXG4gIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdChcbiAgICB1c2VyQ3JlZGVudGlhbDogVXNlckNyZWRlbnRpYWxcbiAgKTogQXV0aENyZWRlbnRpYWwgfCBudWxsIHtcbiAgICByZXR1cm4gU0FNTEF1dGhQcm92aWRlci5zYW1sQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoXG4gICAgICB1c2VyQ3JlZGVudGlhbCBhcyBVc2VyQ3JlZGVudGlhbEludGVybmFsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xuICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxuICAgKi9cbiAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3I6IEZpcmViYXNlRXJyb3IpOiBBdXRoQ3JlZGVudGlhbCB8IG51bGwge1xuICAgIHJldHVybiBTQU1MQXV0aFByb3ZpZGVyLnNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdChcbiAgICAgIChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSBhcyBUYWdnZWRXaXRoVG9rZW5SZXNwb25zZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IGZyb20gYSBKU09OIHN0cmluZyBvciBhIHBsYWluIG9iamVjdC5cbiAgICogQHBhcmFtIGpzb24gLSBBIHBsYWluIG9iamVjdCBvciBhIEpTT04gc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgY3JlZGVudGlhbEZyb21KU09OKGpzb246IHN0cmluZyB8IG9iamVjdCk6IEF1dGhDcmVkZW50aWFsIHtcbiAgICBjb25zdCBjcmVkZW50aWFsID0gU0FNTEF1dGhDcmVkZW50aWFsLmZyb21KU09OKGpzb24pO1xuICAgIF9hc3NlcnQoY3JlZGVudGlhbCwgQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUik7XG4gICAgcmV0dXJuIGNyZWRlbnRpYWw7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBzYW1sQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3Qoe1xuICAgIF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlXG4gIH06IFRhZ2dlZFdpdGhUb2tlblJlc3BvbnNlKTogU0FNTEF1dGhDcmVkZW50aWFsIHwgbnVsbCB7XG4gICAgaWYgKCF0b2tlblJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCB7IHBlbmRpbmdUb2tlbiwgcHJvdmlkZXJJZCB9ID0gdG9rZW5SZXNwb25zZSBhcyBTaWduSW5XaXRoSWRwUmVzcG9uc2U7XG5cbiAgICBpZiAoIXBlbmRpbmdUb2tlbiB8fCAhcHJvdmlkZXJJZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBTQU1MQXV0aENyZWRlbnRpYWwuX2NyZWF0ZShwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgVHdpdHRlciBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFVzZXJDcmVkZW50aWFsIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcbmltcG9ydCB7IEZpcmViYXNlRXJyb3IgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbmltcG9ydCB7IFNpZ25JbldpdGhJZHBSZXNwb25zZSB9IGZyb20gJy4uLy4uL2FwaS9hdXRoZW50aWNhdGlvbi9pZHAnO1xuaW1wb3J0IHsgVGFnZ2VkV2l0aFRva2VuUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9tb2RlbC9pZF90b2tlbic7XG5pbXBvcnQgeyBVc2VyQ3JlZGVudGlhbEludGVybmFsIH0gZnJvbSAnLi4vLi4vbW9kZWwvdXNlcic7XG5pbXBvcnQgeyBPQXV0aENyZWRlbnRpYWwgfSBmcm9tICcuLi9jcmVkZW50aWFscy9vYXV0aCc7XG5pbXBvcnQgeyBCYXNlT0F1dGhQcm92aWRlciB9IGZyb20gJy4vb2F1dGgnO1xuaW1wb3J0IHsgUHJvdmlkZXJJZCwgU2lnbkluTWV0aG9kIH0gZnJvbSAnLi4vLi4vbW9kZWwvZW51bXMnO1xuXG4vKipcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uVFdJVFRFUi5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgamF2YXNjcmlwdFxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgVHdpdHRlckF1dGhQcm92aWRlcigpO1xuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxuICpcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xuICogaWYgKHJlc3VsdCkge1xuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgVHdpdHRlciBBY2Nlc3MgVG9rZW4gYW5kIFNlY3JldC5cbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xuICogICBjb25zdCBzZWNyZXQgPSBjcmVkZW50aWFsLnNlY3JldDtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBUd2l0dGVyQXV0aFByb3ZpZGVyKCk7XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xuICpcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBUd2l0dGVyIEFjY2VzcyBUb2tlbiBhbmQgU2VjcmV0LlxuICogY29uc3QgY3JlZGVudGlhbCA9IFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcbiAqIGNvbnN0IHNlY3JldCA9IGNyZWRlbnRpYWwuc2VjcmV0O1xuICogYGBgXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgVHdpdHRlckF1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcbiAgLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uVFdJVFRFUi4gKi9cbiAgc3RhdGljIHJlYWRvbmx5IFRXSVRURVJfU0lHTl9JTl9NRVRIT0Q6ICd0d2l0dGVyLmNvbScgPSBTaWduSW5NZXRob2QuVFdJVFRFUjtcbiAgLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlRXSVRURVIuICovXG4gIHN0YXRpYyByZWFkb25seSBQUk9WSURFUl9JRDogJ3R3aXR0ZXIuY29tJyA9IFByb3ZpZGVySWQuVFdJVFRFUjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihQcm92aWRlcklkLlRXSVRURVIpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBUd2l0dGVyLlxuICAgKlxuICAgKiBAcGFyYW0gdG9rZW4gLSBUd2l0dGVyIGFjY2VzcyB0b2tlbi5cbiAgICogQHBhcmFtIHNlY3JldCAtIFR3aXR0ZXIgc2VjcmV0LlxuICAgKi9cbiAgc3RhdGljIGNyZWRlbnRpYWwodG9rZW46IHN0cmluZywgc2VjcmV0OiBzdHJpbmcpOiBPQXV0aENyZWRlbnRpYWwge1xuICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xuICAgICAgcHJvdmlkZXJJZDogVHdpdHRlckF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcbiAgICAgIHNpZ25Jbk1ldGhvZDogVHdpdHRlckF1dGhQcm92aWRlci5UV0lUVEVSX1NJR05fSU5fTUVUSE9ELFxuICAgICAgb2F1dGhUb2tlbjogdG9rZW4sXG4gICAgICBvYXV0aFRva2VuU2VjcmV0OiBzZWNyZXRcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXG4gICAqXG4gICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXG4gICAqL1xuICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQoXG4gICAgdXNlckNyZWRlbnRpYWw6IFVzZXJDcmVkZW50aWFsXG4gICk6IE9BdXRoQ3JlZGVudGlhbCB8IG51bGwge1xuICAgIHJldHVybiBUd2l0dGVyQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KFxuICAgICAgdXNlckNyZWRlbnRpYWwgYXMgVXNlckNyZWRlbnRpYWxJbnRlcm5hbFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcbiAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cbiAgICovXG4gIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yOiBGaXJlYmFzZUVycm9yKTogT0F1dGhDcmVkZW50aWFsIHwgbnVsbCB7XG4gICAgcmV0dXJuIFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoXG4gICAgICAoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkgYXMgVGFnZ2VkV2l0aFRva2VuUmVzcG9uc2VcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3Qoe1xuICAgIF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlXG4gIH06IFRhZ2dlZFdpdGhUb2tlblJlc3BvbnNlKTogT0F1dGhDcmVkZW50aWFsIHwgbnVsbCB7XG4gICAgaWYgKCF0b2tlblJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0IH0gPVxuICAgICAgdG9rZW5SZXNwb25zZSBhcyBTaWduSW5XaXRoSWRwUmVzcG9uc2U7XG4gICAgaWYgKCFvYXV0aEFjY2Vzc1Rva2VuIHx8ICFvYXV0aFRva2VuU2VjcmV0KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0KTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgRW5kcG9pbnQsXG4gIEh0dHBNZXRob2QsXG4gIFJlY2FwdGNoYUNsaWVudFR5cGUsXG4gIFJlY2FwdGNoYVZlcnNpb24sXG4gIF9hZGRUaWRJZk5lY2Vzc2FyeSxcbiAgX3BlcmZvcm1TaWduSW5SZXF1ZXN0XG59IGZyb20gJy4uL2luZGV4JztcbmltcG9ydCB7IElkVG9rZW5SZXNwb25zZSB9IGZyb20gJy4uLy4uL21vZGVsL2lkX3Rva2VuJztcbmltcG9ydCB7IEF1dGggfSBmcm9tICcuLi8uLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNpZ25VcFJlcXVlc3Qge1xuICByZXR1cm5TZWN1cmVUb2tlbj86IGJvb2xlYW47XG4gIGVtYWlsPzogc3RyaW5nO1xuICBwYXNzd29yZD86IHN0cmluZztcbiAgdGVuYW50SWQ/OiBzdHJpbmc7XG4gIGNhcHRjaGFSZXNwb25zZT86IHN0cmluZztcbiAgY2xpZW50VHlwZT86IFJlY2FwdGNoYUNsaWVudFR5cGU7XG4gIHJlY2FwdGNoYVZlcnNpb24/OiBSZWNhcHRjaGFWZXJzaW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNpZ25VcFJlc3BvbnNlIGV4dGVuZHMgSWRUb2tlblJlc3BvbnNlIHtcbiAgZGlzcGxheU5hbWU/OiBzdHJpbmc7XG4gIGVtYWlsPzogc3RyaW5nO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2lnblVwKFxuICBhdXRoOiBBdXRoLFxuICByZXF1ZXN0OiBTaWduVXBSZXF1ZXN0XG4pOiBQcm9taXNlPFNpZ25VcFJlc3BvbnNlPiB7XG4gIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3Q8U2lnblVwUmVxdWVzdCwgU2lnblVwUmVzcG9uc2U+KFxuICAgIGF1dGgsXG4gICAgSHR0cE1ldGhvZC5QT1NULFxuICAgIEVuZHBvaW50LlNJR05fVVAsXG4gICAgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpXG4gICk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBQaG9uZU9yT2F1dGhUb2tlblJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vYXBpL2F1dGhlbnRpY2F0aW9uL21mYSc7XG5pbXBvcnQgeyBJZFRva2VuUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9tb2RlbC9pZF90b2tlbic7XG5pbXBvcnQgeyBVc2VySW50ZXJuYWwsIFVzZXJDcmVkZW50aWFsSW50ZXJuYWwgfSBmcm9tICcuLi8uLi9tb2RlbC91c2VyJztcbmltcG9ydCB7IFVzZXJJbXBsIH0gZnJvbSAnLi91c2VyX2ltcGwnO1xuaW1wb3J0IHsgQXV0aEludGVybmFsIH0gZnJvbSAnLi4vLi4vbW9kZWwvYXV0aCc7XG5pbXBvcnQgeyBPcGVyYXRpb25UeXBlLCBQcm92aWRlcklkIH0gZnJvbSAnLi4vLi4vbW9kZWwvZW51bXMnO1xuXG5pbnRlcmZhY2UgVXNlckNyZWRlbnRpYWxQYXJhbXMge1xuICByZWFkb25seSB1c2VyOiBVc2VySW50ZXJuYWw7XG4gIHJlYWRvbmx5IHByb3ZpZGVySWQ6IFByb3ZpZGVySWQgfCBzdHJpbmcgfCBudWxsO1xuICByZWFkb25seSBfdG9rZW5SZXNwb25zZT86IFBob25lT3JPYXV0aFRva2VuUmVzcG9uc2U7XG4gIHJlYWRvbmx5IG9wZXJhdGlvblR5cGU6IE9wZXJhdGlvblR5cGU7XG59XG5cbmV4cG9ydCBjbGFzcyBVc2VyQ3JlZGVudGlhbEltcGxcbiAgaW1wbGVtZW50cyBVc2VyQ3JlZGVudGlhbEludGVybmFsLCBVc2VyQ3JlZGVudGlhbFBhcmFtc1xue1xuICByZWFkb25seSB1c2VyOiBVc2VySW50ZXJuYWw7XG4gIHJlYWRvbmx5IHByb3ZpZGVySWQ6IFByb3ZpZGVySWQgfCBzdHJpbmcgfCBudWxsO1xuICByZWFkb25seSBfdG9rZW5SZXNwb25zZTogUGhvbmVPck9hdXRoVG9rZW5SZXNwb25zZSB8IHVuZGVmaW5lZDtcbiAgcmVhZG9ubHkgb3BlcmF0aW9uVHlwZTogT3BlcmF0aW9uVHlwZTtcblxuICBjb25zdHJ1Y3RvcihwYXJhbXM6IFVzZXJDcmVkZW50aWFsUGFyYW1zKSB7XG4gICAgdGhpcy51c2VyID0gcGFyYW1zLnVzZXI7XG4gICAgdGhpcy5wcm92aWRlcklkID0gcGFyYW1zLnByb3ZpZGVySWQ7XG4gICAgdGhpcy5fdG9rZW5SZXNwb25zZSA9IHBhcmFtcy5fdG9rZW5SZXNwb25zZTtcbiAgICB0aGlzLm9wZXJhdGlvblR5cGUgPSBwYXJhbXMub3BlcmF0aW9uVHlwZTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfZnJvbUlkVG9rZW5SZXNwb25zZShcbiAgICBhdXRoOiBBdXRoSW50ZXJuYWwsXG4gICAgb3BlcmF0aW9uVHlwZTogT3BlcmF0aW9uVHlwZSxcbiAgICBpZFRva2VuUmVzcG9uc2U6IElkVG9rZW5SZXNwb25zZSxcbiAgICBpc0Fub255bW91czogYm9vbGVhbiA9IGZhbHNlXG4gICk6IFByb21pc2U8VXNlckNyZWRlbnRpYWxJbnRlcm5hbD4ge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VySW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShcbiAgICAgIGF1dGgsXG4gICAgICBpZFRva2VuUmVzcG9uc2UsXG4gICAgICBpc0Fub255bW91c1xuICAgICk7XG4gICAgY29uc3QgcHJvdmlkZXJJZCA9IHByb3ZpZGVySWRGb3JSZXNwb25zZShpZFRva2VuUmVzcG9uc2UpO1xuICAgIGNvbnN0IHVzZXJDcmVkID0gbmV3IFVzZXJDcmVkZW50aWFsSW1wbCh7XG4gICAgICB1c2VyLFxuICAgICAgcHJvdmlkZXJJZCxcbiAgICAgIF90b2tlblJlc3BvbnNlOiBpZFRva2VuUmVzcG9uc2UsXG4gICAgICBvcGVyYXRpb25UeXBlXG4gICAgfSk7XG4gICAgcmV0dXJuIHVzZXJDcmVkO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9mb3JPcGVyYXRpb24oXG4gICAgdXNlcjogVXNlckludGVybmFsLFxuICAgIG9wZXJhdGlvblR5cGU6IE9wZXJhdGlvblR5cGUsXG4gICAgcmVzcG9uc2U6IFBob25lT3JPYXV0aFRva2VuUmVzcG9uc2VcbiAgKTogUHJvbWlzZTxVc2VyQ3JlZGVudGlhbEltcGw+IHtcbiAgICBhd2FpdCB1c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSwgLyogcmVsb2FkICovIHRydWUpO1xuICAgIGNvbnN0IHByb3ZpZGVySWQgPSBwcm92aWRlcklkRm9yUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIHJldHVybiBuZXcgVXNlckNyZWRlbnRpYWxJbXBsKHtcbiAgICAgIHVzZXIsXG4gICAgICBwcm92aWRlcklkLFxuICAgICAgX3Rva2VuUmVzcG9uc2U6IHJlc3BvbnNlLFxuICAgICAgb3BlcmF0aW9uVHlwZVxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByb3ZpZGVySWRGb3JSZXNwb25zZShcbiAgcmVzcG9uc2U6IElkVG9rZW5SZXNwb25zZVxuKTogUHJvdmlkZXJJZCB8IHN0cmluZyB8IG51bGwge1xuICBpZiAocmVzcG9uc2UucHJvdmlkZXJJZCkge1xuICAgIHJldHVybiByZXNwb25zZS5wcm92aWRlcklkO1xuICB9XG5cbiAgaWYgKCdwaG9uZU51bWJlcicgaW4gcmVzcG9uc2UpIHtcbiAgICByZXR1cm4gUHJvdmlkZXJJZC5QSE9ORTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQXV0aCwgVXNlckNyZWRlbnRpYWwgfSBmcm9tICcuLi8uLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuaW1wb3J0IHsgc2lnblVwIH0gZnJvbSAnLi4vLi4vYXBpL2F1dGhlbnRpY2F0aW9uL3NpZ25fdXAnO1xuaW1wb3J0IHsgVXNlckludGVybmFsIH0gZnJvbSAnLi4vLi4vbW9kZWwvdXNlcic7XG5pbXBvcnQgeyBVc2VyQ3JlZGVudGlhbEltcGwgfSBmcm9tICcuLi91c2VyL3VzZXJfY3JlZGVudGlhbF9pbXBsJztcbmltcG9ydCB7IF9jYXN0QXV0aCB9IGZyb20gJy4uL2F1dGgvYXV0aF9pbXBsJztcbmltcG9ydCB7IE9wZXJhdGlvblR5cGUgfSBmcm9tICcuLi8uLi9tb2RlbC9lbnVtcyc7XG5cbi8qKlxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gYXMgYW4gYW5vbnltb3VzIHVzZXIuXG4gKlxuICogQHJlbWFya3NcbiAqIElmIHRoZXJlIGlzIGFscmVhZHkgYW4gYW5vbnltb3VzIHVzZXIgc2lnbmVkIGluLCB0aGF0IHVzZXIgd2lsbCBiZSByZXR1cm5lZDsgb3RoZXJ3aXNlLCBhXG4gKiBuZXcgYW5vbnltb3VzIHVzZXIgaWRlbnRpdHkgd2lsbCBiZSBjcmVhdGVkIGFuZCByZXR1cm5lZC5cbiAqXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2lnbkluQW5vbnltb3VzbHkoYXV0aDogQXV0aCk6IFByb21pc2U8VXNlckNyZWRlbnRpYWw+IHtcbiAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xuICBhd2FpdCBhdXRoSW50ZXJuYWwuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcbiAgaWYgKGF1dGhJbnRlcm5hbC5jdXJyZW50VXNlcj8uaXNBbm9ueW1vdXMpIHtcbiAgICAvLyBJZiBhbiBhbm9ueW1vdXMgdXNlciBpcyBhbHJlYWR5IHNpZ25lZCBpbiwgbm8gbmVlZCB0byBzaWduIHRoZW0gaW4gYWdhaW4uXG4gICAgcmV0dXJuIG5ldyBVc2VyQ3JlZGVudGlhbEltcGwoe1xuICAgICAgdXNlcjogYXV0aEludGVybmFsLmN1cnJlbnRVc2VyIGFzIFVzZXJJbnRlcm5hbCxcbiAgICAgIHByb3ZpZGVySWQ6IG51bGwsXG4gICAgICBvcGVyYXRpb25UeXBlOiBPcGVyYXRpb25UeXBlLlNJR05fSU5cbiAgICB9KTtcbiAgfVxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpZ25VcChhdXRoSW50ZXJuYWwsIHtcbiAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxuICB9KTtcbiAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoXG4gICAgYXV0aEludGVybmFsLFxuICAgIE9wZXJhdGlvblR5cGUuU0lHTl9JTixcbiAgICByZXNwb25zZSxcbiAgICB0cnVlXG4gICk7XG4gIGF3YWl0IGF1dGhJbnRlcm5hbC5fdXBkYXRlQ3VycmVudFVzZXIodXNlckNyZWRlbnRpYWwudXNlcik7XG4gIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IE11bHRpRmFjdG9yRXJyb3IgYXMgTXVsdGlGYWN0b3JFcnJvclB1YmxpYyB9IGZyb20gJy4uL21vZGVsL3B1YmxpY190eXBlcyc7XG5pbXBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQXV0aEludGVybmFsIH0gZnJvbSAnLi4vbW9kZWwvYXV0aCc7XG5pbXBvcnQgeyBJZFRva2VuUmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9pZF90b2tlbic7XG5pbXBvcnQgeyBBdXRoRXJyb3JDb2RlIH0gZnJvbSAnLi4vY29yZS9lcnJvcnMnO1xuaW1wb3J0IHsgVXNlckludGVybmFsIH0gZnJvbSAnLi4vbW9kZWwvdXNlcic7XG5pbXBvcnQgeyBBdXRoQ3JlZGVudGlhbCB9IGZyb20gJy4uL2NvcmUvY3JlZGVudGlhbHMnO1xuaW1wb3J0IHsgSWRUb2tlbk1mYVJlc3BvbnNlIH0gZnJvbSAnLi4vYXBpL2F1dGhlbnRpY2F0aW9uL21mYSc7XG5pbXBvcnQgeyBPcGVyYXRpb25UeXBlIH0gZnJvbSAnLi4vbW9kZWwvZW51bXMnO1xuXG5leHBvcnQgdHlwZSBNdWx0aUZhY3RvckVycm9yRGF0YSA9IE11bHRpRmFjdG9yRXJyb3JQdWJsaWNbJ2N1c3RvbURhdGEnXSAmIHtcbiAgX3NlcnZlclJlc3BvbnNlOiBJZFRva2VuTWZhUmVzcG9uc2U7XG59O1xuXG5leHBvcnQgY2xhc3MgTXVsdGlGYWN0b3JFcnJvclxuICBleHRlbmRzIEZpcmViYXNlRXJyb3JcbiAgaW1wbGVtZW50cyBNdWx0aUZhY3RvckVycm9yUHVibGljXG57XG4gIHJlYWRvbmx5IGN1c3RvbURhdGE6IE11bHRpRmFjdG9yRXJyb3JEYXRhO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoXG4gICAgYXV0aDogQXV0aEludGVybmFsLFxuICAgIGVycm9yOiBGaXJlYmFzZUVycm9yLFxuICAgIHJlYWRvbmx5IG9wZXJhdGlvblR5cGU6IE9wZXJhdGlvblR5cGUsXG4gICAgcmVhZG9ubHkgdXNlcj86IFVzZXJJbnRlcm5hbFxuICApIHtcbiAgICBzdXBlcihlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKTtcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBNdWx0aUZhY3RvckVycm9yLnByb3RvdHlwZSk7XG4gICAgdGhpcy5jdXN0b21EYXRhID0ge1xuICAgICAgYXBwTmFtZTogYXV0aC5uYW1lLFxuICAgICAgdGVuYW50SWQ6IGF1dGgudGVuYW50SWQgPz8gdW5kZWZpbmVkLFxuICAgICAgX3NlcnZlclJlc3BvbnNlOiBlcnJvci5jdXN0b21EYXRhIS5fc2VydmVyUmVzcG9uc2UgYXMgSWRUb2tlbk1mYVJlc3BvbnNlLFxuICAgICAgb3BlcmF0aW9uVHlwZVxuICAgIH07XG4gIH1cblxuICBzdGF0aWMgX2Zyb21FcnJvckFuZE9wZXJhdGlvbihcbiAgICBhdXRoOiBBdXRoSW50ZXJuYWwsXG4gICAgZXJyb3I6IEZpcmViYXNlRXJyb3IsXG4gICAgb3BlcmF0aW9uVHlwZTogT3BlcmF0aW9uVHlwZSxcbiAgICB1c2VyPzogVXNlckludGVybmFsXG4gICk6IE11bHRpRmFjdG9yRXJyb3Ige1xuICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JFcnJvcihhdXRoLCBlcnJvciwgb3BlcmF0aW9uVHlwZSwgdXNlcik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeShcbiAgYXV0aDogQXV0aEludGVybmFsLFxuICBvcGVyYXRpb25UeXBlOiBPcGVyYXRpb25UeXBlLFxuICBjcmVkZW50aWFsOiBBdXRoQ3JlZGVudGlhbCxcbiAgdXNlcj86IFVzZXJJbnRlcm5hbFxuKTogUHJvbWlzZTxJZFRva2VuUmVzcG9uc2U+IHtcbiAgY29uc3QgaWRUb2tlblByb3ZpZGVyID1cbiAgICBvcGVyYXRpb25UeXBlID09PSBPcGVyYXRpb25UeXBlLlJFQVVUSEVOVElDQVRFXG4gICAgICA/IGNyZWRlbnRpYWwuX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKVxuICAgICAgOiBjcmVkZW50aWFsLl9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCk7XG5cbiAgcmV0dXJuIGlkVG9rZW5Qcm92aWRlci5jYXRjaChlcnJvciA9PiB7XG4gICAgaWYgKGVycm9yLmNvZGUgPT09IGBhdXRoLyR7QXV0aEVycm9yQ29kZS5NRkFfUkVRVUlSRUR9YCkge1xuICAgICAgdGhyb3cgTXVsdGlGYWN0b3JFcnJvci5fZnJvbUVycm9yQW5kT3BlcmF0aW9uKFxuICAgICAgICBhdXRoLFxuICAgICAgICBlcnJvcixcbiAgICAgICAgb3BlcmF0aW9uVHlwZSxcbiAgICAgICAgdXNlclxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aHJvdyBlcnJvcjtcbiAgfSk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb3ZpZGVyQXNzb2NpYXRlZE9iamVjdCB7XG4gIHByb3ZpZGVySWQ/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogVGFrZXMgYSBzZXQgb2YgVXNlckluZm8gcHJvdmlkZXIgZGF0YSBhbmQgY29udmVydHMgaXQgdG8gYSBzZXQgb2YgbmFtZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByb3ZpZGVyRGF0YUFzTmFtZXM8VCBleHRlbmRzIFByb3ZpZGVyQXNzb2NpYXRlZE9iamVjdD4oXG4gIHByb3ZpZGVyRGF0YTogVFtdXG4pOiBTZXQ8c3RyaW5nPiB7XG4gIHJldHVybiBuZXcgU2V0KFxuICAgIHByb3ZpZGVyRGF0YVxuICAgICAgLm1hcCgoeyBwcm92aWRlcklkIH0pID0+IHByb3ZpZGVySWQpXG4gICAgICAuZmlsdGVyKHBpZCA9PiAhIXBpZCkgYXMgc3RyaW5nW11cbiAgKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi8uLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuXG5pbXBvcnQgeyBkZWxldGVMaW5rZWRBY2NvdW50cyB9IGZyb20gJy4uLy4uL2FwaS9hY2NvdW50X21hbmFnZW1lbnQvYWNjb3VudCc7XG5pbXBvcnQgeyBVc2VySW50ZXJuYWwsIFVzZXJDcmVkZW50aWFsSW50ZXJuYWwgfSBmcm9tICcuLi8uLi9tb2RlbC91c2VyJztcbmltcG9ydCB7IEF1dGhDcmVkZW50aWFsIH0gZnJvbSAnLi4vY3JlZGVudGlhbHMnO1xuaW1wb3J0IHsgQXV0aEVycm9yQ29kZSB9IGZyb20gJy4uL2Vycm9ycyc7XG5pbXBvcnQgeyBfYXNzZXJ0IH0gZnJvbSAnLi4vdXRpbC9hc3NlcnQnO1xuaW1wb3J0IHsgcHJvdmlkZXJEYXRhQXNOYW1lcyB9IGZyb20gJy4uL3V0aWwvcHJvdmlkZXJzJztcbmltcG9ydCB7IF9sb2dvdXRJZkludmFsaWRhdGVkIH0gZnJvbSAnLi9pbnZhbGlkYXRpb24nO1xuaW1wb3J0IHsgX3JlbG9hZFdpdGhvdXRTYXZpbmcgfSBmcm9tICcuL3JlbG9hZCc7XG5pbXBvcnQgeyBVc2VyQ3JlZGVudGlhbEltcGwgfSBmcm9tICcuL3VzZXJfY3JlZGVudGlhbF9pbXBsJztcbmltcG9ydCB7IGdldE1vZHVsYXJJbnN0YW5jZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IE9wZXJhdGlvblR5cGUsIFByb3ZpZGVySWQgfSBmcm9tICcuLi8uLi9tb2RlbC9lbnVtcyc7XG5cbi8qKlxuICogVW5saW5rcyBhIHByb3ZpZGVyIGZyb20gYSB1c2VyIGFjY291bnQuXG4gKlxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cbiAqIEBwYXJhbSBwcm92aWRlcklkIC0gVGhlIHByb3ZpZGVyIHRvIHVubGluay5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1bmxpbmsodXNlcjogVXNlciwgcHJvdmlkZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyPiB7XG4gIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSBhcyBVc2VySW50ZXJuYWw7XG4gIGF3YWl0IF9hc3NlcnRMaW5rZWRTdGF0dXModHJ1ZSwgdXNlckludGVybmFsLCBwcm92aWRlcklkKTtcbiAgY29uc3QgeyBwcm92aWRlclVzZXJJbmZvIH0gPSBhd2FpdCBkZWxldGVMaW5rZWRBY2NvdW50cyh1c2VySW50ZXJuYWwuYXV0aCwge1xuICAgIGlkVG9rZW46IGF3YWl0IHVzZXJJbnRlcm5hbC5nZXRJZFRva2VuKCksXG4gICAgZGVsZXRlUHJvdmlkZXI6IFtwcm92aWRlcklkXVxuICB9KTtcblxuICBjb25zdCBwcm92aWRlcnNMZWZ0ID0gcHJvdmlkZXJEYXRhQXNOYW1lcyhwcm92aWRlclVzZXJJbmZvIHx8IFtdKTtcblxuICB1c2VySW50ZXJuYWwucHJvdmlkZXJEYXRhID0gdXNlckludGVybmFsLnByb3ZpZGVyRGF0YS5maWx0ZXIocGQgPT5cbiAgICBwcm92aWRlcnNMZWZ0LmhhcyhwZC5wcm92aWRlcklkKVxuICApO1xuICBpZiAoIXByb3ZpZGVyc0xlZnQuaGFzKFByb3ZpZGVySWQuUEhPTkUpKSB7XG4gICAgdXNlckludGVybmFsLnBob25lTnVtYmVyID0gbnVsbDtcbiAgfVxuXG4gIGF3YWl0IHVzZXJJbnRlcm5hbC5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VySW50ZXJuYWwpO1xuICByZXR1cm4gdXNlckludGVybmFsO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gX2xpbmsoXG4gIHVzZXI6IFVzZXJJbnRlcm5hbCxcbiAgY3JlZGVudGlhbDogQXV0aENyZWRlbnRpYWwsXG4gIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlXG4pOiBQcm9taXNlPFVzZXJDcmVkZW50aWFsSW50ZXJuYWw+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZChcbiAgICB1c2VyLFxuICAgIGNyZWRlbnRpYWwuX2xpbmtUb0lkVG9rZW4odXNlci5hdXRoLCBhd2FpdCB1c2VyLmdldElkVG9rZW4oKSksXG4gICAgYnlwYXNzQXV0aFN0YXRlXG4gICk7XG4gIHJldHVybiBVc2VyQ3JlZGVudGlhbEltcGwuX2Zvck9wZXJhdGlvbih1c2VyLCBPcGVyYXRpb25UeXBlLkxJTkssIHJlc3BvbnNlKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIF9hc3NlcnRMaW5rZWRTdGF0dXMoXG4gIGV4cGVjdGVkOiBib29sZWFuLFxuICB1c2VyOiBVc2VySW50ZXJuYWwsXG4gIHByb3ZpZGVyOiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VyKTtcbiAgY29uc3QgcHJvdmlkZXJJZHMgPSBwcm92aWRlckRhdGFBc05hbWVzKHVzZXIucHJvdmlkZXJEYXRhKTtcblxuICBjb25zdCBjb2RlID1cbiAgICBleHBlY3RlZCA9PT0gZmFsc2VcbiAgICAgID8gQXV0aEVycm9yQ29kZS5QUk9WSURFUl9BTFJFQURZX0xJTktFRFxuICAgICAgOiBBdXRoRXJyb3JDb2RlLk5PX1NVQ0hfUFJPVklERVI7XG4gIF9hc3NlcnQocHJvdmlkZXJJZHMuaGFzKHByb3ZpZGVyKSA9PT0gZXhwZWN0ZWQsIHVzZXIuYXV0aCwgY29kZSk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5IH0gZnJvbSAnLi4vLi4vbWZhL21mYV9lcnJvcic7XG5pbXBvcnQgeyBPcGVyYXRpb25UeXBlIH0gZnJvbSAnLi4vLi4vbW9kZWwvZW51bXMnO1xuaW1wb3J0IHsgVXNlckludGVybmFsIH0gZnJvbSAnLi4vLi4vbW9kZWwvdXNlcic7XG5pbXBvcnQgeyBBdXRoQ3JlZGVudGlhbCB9IGZyb20gJy4uL2NyZWRlbnRpYWxzJztcbmltcG9ydCB7IEF1dGhFcnJvckNvZGUgfSBmcm9tICcuLi9lcnJvcnMnO1xuaW1wb3J0IHsgX2Fzc2VydCwgX2ZhaWwgfSBmcm9tICcuLi91dGlsL2Fzc2VydCc7XG5pbXBvcnQgeyBfcGFyc2VUb2tlbiB9IGZyb20gJy4vaWRfdG9rZW5fcmVzdWx0JztcbmltcG9ydCB7IF9sb2dvdXRJZkludmFsaWRhdGVkIH0gZnJvbSAnLi9pbnZhbGlkYXRpb24nO1xuaW1wb3J0IHsgVXNlckNyZWRlbnRpYWxJbXBsIH0gZnJvbSAnLi91c2VyX2NyZWRlbnRpYWxfaW1wbCc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBfcmVhdXRoZW50aWNhdGUoXG4gIHVzZXI6IFVzZXJJbnRlcm5hbCxcbiAgY3JlZGVudGlhbDogQXV0aENyZWRlbnRpYWwsXG4gIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlXG4pOiBQcm9taXNlPFVzZXJDcmVkZW50aWFsSW1wbD4ge1xuICBjb25zdCB7IGF1dGggfSA9IHVzZXI7XG4gIGNvbnN0IG9wZXJhdGlvblR5cGUgPSBPcGVyYXRpb25UeXBlLlJFQVVUSEVOVElDQVRFO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZChcbiAgICAgIHVzZXIsXG4gICAgICBfcHJvY2Vzc0NyZWRlbnRpYWxTYXZpbmdNZmFDb250ZXh0SWZOZWNlc3NhcnkoXG4gICAgICAgIGF1dGgsXG4gICAgICAgIG9wZXJhdGlvblR5cGUsXG4gICAgICAgIGNyZWRlbnRpYWwsXG4gICAgICAgIHVzZXJcbiAgICAgICksXG4gICAgICBieXBhc3NBdXRoU3RhdGVcbiAgICApO1xuICAgIF9hc3NlcnQocmVzcG9uc2UuaWRUb2tlbiwgYXV0aCwgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUik7XG4gICAgY29uc3QgcGFyc2VkID0gX3BhcnNlVG9rZW4ocmVzcG9uc2UuaWRUb2tlbik7XG4gICAgX2Fzc2VydChwYXJzZWQsIGF1dGgsIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IpO1xuXG4gICAgY29uc3QgeyBzdWI6IGxvY2FsSWQgfSA9IHBhcnNlZDtcbiAgICBfYXNzZXJ0KHVzZXIudWlkID09PSBsb2NhbElkLCBhdXRoLCBBdXRoRXJyb3JDb2RlLlVTRVJfTUlTTUFUQ0gpO1xuXG4gICAgcmV0dXJuIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uKHVzZXIsIG9wZXJhdGlvblR5cGUsIHJlc3BvbnNlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIENvbnZlcnQgdXNlciBkZWxldGVkIGVycm9yIGludG8gdXNlciBtaXNtYXRjaFxuICAgIGlmICgoZSBhcyBGaXJlYmFzZUVycm9yKT8uY29kZSA9PT0gYGF1dGgvJHtBdXRoRXJyb3JDb2RlLlVTRVJfREVMRVRFRH1gKSB7XG4gICAgICBfZmFpbChhdXRoLCBBdXRoRXJyb3JDb2RlLlVTRVJfTUlTTUFUQ0gpO1xuICAgIH1cbiAgICB0aHJvdyBlO1xuICB9XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBVc2VyQ3JlZGVudGlhbCwgQXV0aCwgVXNlciB9IGZyb20gJy4uLy4uL21vZGVsL3B1YmxpY190eXBlcyc7XG5cbmltcG9ydCB7IF9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeSB9IGZyb20gJy4uLy4uL21mYS9tZmFfZXJyb3InO1xuaW1wb3J0IHsgQXV0aEludGVybmFsIH0gZnJvbSAnLi4vLi4vbW9kZWwvYXV0aCc7XG5pbXBvcnQgeyBVc2VySW50ZXJuYWwgfSBmcm9tICcuLi8uLi9tb2RlbC91c2VyJztcbmltcG9ydCB7IEF1dGhDcmVkZW50aWFsIH0gZnJvbSAnLi4vY3JlZGVudGlhbHMnO1xuaW1wb3J0IHsgX2Fzc2VydExpbmtlZFN0YXR1cywgX2xpbmsgfSBmcm9tICcuLi91c2VyL2xpbmtfdW5saW5rJztcbmltcG9ydCB7IF9yZWF1dGhlbnRpY2F0ZSB9IGZyb20gJy4uL3VzZXIvcmVhdXRoZW50aWNhdGUnO1xuaW1wb3J0IHsgVXNlckNyZWRlbnRpYWxJbXBsIH0gZnJvbSAnLi4vdXNlci91c2VyX2NyZWRlbnRpYWxfaW1wbCc7XG5pbXBvcnQgeyBfY2FzdEF1dGggfSBmcm9tICcuLi9hdXRoL2F1dGhfaW1wbCc7XG5pbXBvcnQgeyBnZXRNb2R1bGFySW5zdGFuY2UgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBPcGVyYXRpb25UeXBlIH0gZnJvbSAnLi4vLi4vbW9kZWwvZW51bXMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gX3NpZ25JbldpdGhDcmVkZW50aWFsKFxuICBhdXRoOiBBdXRoSW50ZXJuYWwsXG4gIGNyZWRlbnRpYWw6IEF1dGhDcmVkZW50aWFsLFxuICBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZVxuKTogUHJvbWlzZTxVc2VyQ3JlZGVudGlhbD4ge1xuICBjb25zdCBvcGVyYXRpb25UeXBlID0gT3BlcmF0aW9uVHlwZS5TSUdOX0lOO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeShcbiAgICBhdXRoLFxuICAgIG9wZXJhdGlvblR5cGUsXG4gICAgY3JlZGVudGlhbFxuICApO1xuICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShcbiAgICBhdXRoLFxuICAgIG9wZXJhdGlvblR5cGUsXG4gICAgcmVzcG9uc2VcbiAgKTtcblxuICBpZiAoIWJ5cGFzc0F1dGhTdGF0ZSkge1xuICAgIGF3YWl0IGF1dGguX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xuICB9XG4gIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcbn1cblxuLyoqXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB3aXRoIHRoZSBnaXZlbiBjcmVkZW50aWFscy5cbiAqXG4gKiBAcmVtYXJrc1xuICogQW4ge0BsaW5rIEF1dGhQcm92aWRlcn0gY2FuIGJlIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIGNyZWRlbnRpYWwuXG4gKlxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxuICogQHBhcmFtIGNyZWRlbnRpYWwgLSBUaGUgYXV0aCBjcmVkZW50aWFsLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhDcmVkZW50aWFsKFxuICBhdXRoOiBBdXRoLFxuICBjcmVkZW50aWFsOiBBdXRoQ3JlZGVudGlhbFxuKTogUHJvbWlzZTxVc2VyQ3JlZGVudGlhbD4ge1xuICByZXR1cm4gX3NpZ25JbldpdGhDcmVkZW50aWFsKF9jYXN0QXV0aChhdXRoKSwgY3JlZGVudGlhbCk7XG59XG5cbi8qKlxuICogTGlua3MgdGhlIHVzZXIgYWNjb3VudCB3aXRoIHRoZSBnaXZlbiBjcmVkZW50aWFscy5cbiAqXG4gKiBAcmVtYXJrc1xuICogQW4ge0BsaW5rIEF1dGhQcm92aWRlcn0gY2FuIGJlIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIGNyZWRlbnRpYWwuXG4gKlxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gVGhlIGF1dGggY3JlZGVudGlhbC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaW5rV2l0aENyZWRlbnRpYWwoXG4gIHVzZXI6IFVzZXIsXG4gIGNyZWRlbnRpYWw6IEF1dGhDcmVkZW50aWFsXG4pOiBQcm9taXNlPFVzZXJDcmVkZW50aWFsPiB7XG4gIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSBhcyBVc2VySW50ZXJuYWw7XG5cbiAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyhmYWxzZSwgdXNlckludGVybmFsLCBjcmVkZW50aWFsLnByb3ZpZGVySWQpO1xuXG4gIHJldHVybiBfbGluayh1c2VySW50ZXJuYWwsIGNyZWRlbnRpYWwpO1xufVxuXG4vKipcbiAqIFJlLWF1dGhlbnRpY2F0ZXMgYSB1c2VyIHVzaW5nIGEgZnJlc2ggY3JlZGVudGlhbC5cbiAqXG4gKiBAcmVtYXJrc1xuICogVXNlIGJlZm9yZSBvcGVyYXRpb25zIHN1Y2ggYXMge0BsaW5rIHVwZGF0ZVBhc3N3b3JkfSB0aGF0IHJlcXVpcmUgdG9rZW5zIGZyb20gcmVjZW50IHNpZ24taW5cbiAqIGF0dGVtcHRzLiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byByZWNvdmVyIGZyb20gYSBgQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOYCBlcnJvclxuICogb3IgYSBgVE9LRU5fRVhQSVJFRGAgZXJyb3IuXG4gKlxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gVGhlIGF1dGggY3JlZGVudGlhbC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsKFxuICB1c2VyOiBVc2VyLFxuICBjcmVkZW50aWFsOiBBdXRoQ3JlZGVudGlhbFxuKTogUHJvbWlzZTxVc2VyQ3JlZGVudGlhbD4ge1xuICByZXR1cm4gX3JlYXV0aGVudGljYXRlKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSBhcyBVc2VySW50ZXJuYWwsIGNyZWRlbnRpYWwpO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgRW5kcG9pbnQsXG4gIEh0dHBNZXRob2QsXG4gIF9hZGRUaWRJZk5lY2Vzc2FyeSxcbiAgX3BlcmZvcm1TaWduSW5SZXF1ZXN0XG59IGZyb20gJy4uL2luZGV4JztcbmltcG9ydCB7IElkVG9rZW5SZXNwb25zZSB9IGZyb20gJy4uLy4uL21vZGVsL2lkX3Rva2VuJztcbmltcG9ydCB7IEF1dGggfSBmcm9tICcuLi8uLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNpZ25JbldpdGhDdXN0b21Ub2tlblJlcXVlc3Qge1xuICB0b2tlbjogc3RyaW5nO1xuICByZXR1cm5TZWN1cmVUb2tlbjogYm9vbGVhbjtcbiAgdGVuYW50SWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2lnbkluV2l0aEN1c3RvbVRva2VuUmVzcG9uc2UgZXh0ZW5kcyBJZFRva2VuUmVzcG9uc2Uge31cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhDdXN0b21Ub2tlbihcbiAgYXV0aDogQXV0aCxcbiAgcmVxdWVzdDogU2lnbkluV2l0aEN1c3RvbVRva2VuUmVxdWVzdFxuKTogUHJvbWlzZTxTaWduSW5XaXRoQ3VzdG9tVG9rZW5SZXNwb25zZT4ge1xuICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0PFxuICAgIFNpZ25JbldpdGhDdXN0b21Ub2tlblJlcXVlc3QsXG4gICAgU2lnbkluV2l0aEN1c3RvbVRva2VuUmVzcG9uc2VcbiAgPihcbiAgICBhdXRoLFxuICAgIEh0dHBNZXRob2QuUE9TVCxcbiAgICBFbmRwb2ludC5TSUdOX0lOX1dJVEhfQ1VTVE9NX1RPS0VOLFxuICAgIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KVxuICApO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQXV0aCwgVXNlckNyZWRlbnRpYWwgfSBmcm9tICcuLi8uLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuXG5pbXBvcnQgeyBzaWduSW5XaXRoQ3VzdG9tVG9rZW4gYXMgZ2V0SWRUb2tlblJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vYXBpL2F1dGhlbnRpY2F0aW9uL2N1c3RvbV90b2tlbic7XG5pbXBvcnQgeyBJZFRva2VuUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9tb2RlbC9pZF90b2tlbic7XG5pbXBvcnQgeyBVc2VyQ3JlZGVudGlhbEltcGwgfSBmcm9tICcuLi91c2VyL3VzZXJfY3JlZGVudGlhbF9pbXBsJztcbmltcG9ydCB7IF9jYXN0QXV0aCB9IGZyb20gJy4uL2F1dGgvYXV0aF9pbXBsJztcbmltcG9ydCB7IE9wZXJhdGlvblR5cGUgfSBmcm9tICcuLi8uLi9tb2RlbC9lbnVtcyc7XG5cbi8qKlxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYSBjdXN0b20gdG9rZW4uXG4gKlxuICogQHJlbWFya3NcbiAqIEN1c3RvbSB0b2tlbnMgYXJlIHVzZWQgdG8gaW50ZWdyYXRlIEZpcmViYXNlIEF1dGggd2l0aCBleGlzdGluZyBhdXRoIHN5c3RlbXMsIGFuZCBtdXN0XG4gKiBiZSBnZW5lcmF0ZWQgYnkgYW4gYXV0aCBiYWNrZW5kIHVzaW5nIHRoZVxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL3JlZmVyZW5jZS9hZG1pbi9ub2RlL2FkbWluLmF1dGguQXV0aCNjcmVhdGVjdXN0b210b2tlbiB8IGNyZWF0ZUN1c3RvbVRva2VufVxuICogbWV0aG9kIGluIHRoZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvYXV0aC9hZG1pbiB8IEFkbWluIFNES30gLlxuICpcbiAqIEZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIHRva2VuIGlzIGludmFsaWQsIGV4cGlyZWQsIG9yIG5vdCBhY2NlcHRlZCBieSB0aGUgRmlyZWJhc2UgQXV0aCBzZXJ2aWNlLlxuICpcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBjdXN0b21Ub2tlbiAtIFRoZSBjdXN0b20gdG9rZW4gdG8gc2lnbiBpbiB3aXRoLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhDdXN0b21Ub2tlbihcbiAgYXV0aDogQXV0aCxcbiAgY3VzdG9tVG9rZW46IHN0cmluZ1xuKTogUHJvbWlzZTxVc2VyQ3JlZGVudGlhbD4ge1xuICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XG4gIGNvbnN0IHJlc3BvbnNlOiBJZFRva2VuUmVzcG9uc2UgPSBhd2FpdCBnZXRJZFRva2VuUmVzcG9uc2UoYXV0aEludGVybmFsLCB7XG4gICAgdG9rZW46IGN1c3RvbVRva2VuLFxuICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXG4gIH0pO1xuICBjb25zdCBjcmVkID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKFxuICAgIGF1dGhJbnRlcm5hbCxcbiAgICBPcGVyYXRpb25UeXBlLlNJR05fSU4sXG4gICAgcmVzcG9uc2VcbiAgKTtcbiAgYXdhaXQgYXV0aEludGVybmFsLl91cGRhdGVDdXJyZW50VXNlcihjcmVkLnVzZXIpO1xuICByZXR1cm4gY3JlZDtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIEZhY3RvcklkLFxuICBNdWx0aUZhY3RvckluZm8sXG4gIFBob25lTXVsdGlGYWN0b3JJbmZvLFxuICBUb3RwTXVsdGlGYWN0b3JJbmZvXG59IGZyb20gJy4uL21vZGVsL3B1YmxpY190eXBlcyc7XG5pbXBvcnQge1xuICBQaG9uZU1mYUVucm9sbG1lbnQsXG4gIE1mYUVucm9sbG1lbnQsXG4gIFRvdHBNZmFFbnJvbGxtZW50XG59IGZyb20gJy4uL2FwaS9hY2NvdW50X21hbmFnZW1lbnQvbWZhJztcbmltcG9ydCB7IEF1dGhFcnJvckNvZGUgfSBmcm9tICcuLi9jb3JlL2Vycm9ycyc7XG5pbXBvcnQgeyBfZmFpbCB9IGZyb20gJy4uL2NvcmUvdXRpbC9hc3NlcnQnO1xuaW1wb3J0IHsgQXV0aEludGVybmFsIH0gZnJvbSAnLi4vbW9kZWwvYXV0aCc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBNdWx0aUZhY3RvckluZm9JbXBsIGltcGxlbWVudHMgTXVsdGlGYWN0b3JJbmZvIHtcbiAgcmVhZG9ubHkgdWlkOiBzdHJpbmc7XG4gIHJlYWRvbmx5IGRpc3BsYXlOYW1lPzogc3RyaW5nIHwgbnVsbDtcbiAgcmVhZG9ubHkgZW5yb2xsbWVudFRpbWU6IHN0cmluZztcblxuICBwcm90ZWN0ZWQgY29uc3RydWN0b3IocmVhZG9ubHkgZmFjdG9ySWQ6IEZhY3RvcklkLCByZXNwb25zZTogTWZhRW5yb2xsbWVudCkge1xuICAgIHRoaXMudWlkID0gcmVzcG9uc2UubWZhRW5yb2xsbWVudElkO1xuICAgIHRoaXMuZW5yb2xsbWVudFRpbWUgPSBuZXcgRGF0ZShyZXNwb25zZS5lbnJvbGxlZEF0KS50b1VUQ1N0cmluZygpO1xuICAgIHRoaXMuZGlzcGxheU5hbWUgPSByZXNwb25zZS5kaXNwbGF5TmFtZTtcbiAgfVxuXG4gIHN0YXRpYyBfZnJvbVNlcnZlclJlc3BvbnNlKFxuICAgIGF1dGg6IEF1dGhJbnRlcm5hbCxcbiAgICBlbnJvbGxtZW50OiBNZmFFbnJvbGxtZW50XG4gICk6IE11bHRpRmFjdG9ySW5mb0ltcGwge1xuICAgIGlmICgncGhvbmVJbmZvJyBpbiBlbnJvbGxtZW50KSB7XG4gICAgICByZXR1cm4gUGhvbmVNdWx0aUZhY3RvckluZm9JbXBsLl9mcm9tU2VydmVyUmVzcG9uc2UoYXV0aCwgZW5yb2xsbWVudCk7XG4gICAgfSBlbHNlIGlmICgndG90cEluZm8nIGluIGVucm9sbG1lbnQpIHtcbiAgICAgIHJldHVybiBUb3RwTXVsdGlGYWN0b3JJbmZvSW1wbC5fZnJvbVNlcnZlclJlc3BvbnNlKGF1dGgsIGVucm9sbG1lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gX2ZhaWwoYXV0aCwgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUik7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBob25lTXVsdGlGYWN0b3JJbmZvSW1wbFxuICBleHRlbmRzIE11bHRpRmFjdG9ySW5mb0ltcGxcbiAgaW1wbGVtZW50cyBQaG9uZU11bHRpRmFjdG9ySW5mb1xue1xuICByZWFkb25seSBwaG9uZU51bWJlcjogc3RyaW5nO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IocmVzcG9uc2U6IFBob25lTWZhRW5yb2xsbWVudCkge1xuICAgIHN1cGVyKEZhY3RvcklkLlBIT05FLCByZXNwb25zZSk7XG4gICAgdGhpcy5waG9uZU51bWJlciA9IHJlc3BvbnNlLnBob25lSW5mbztcbiAgfVxuXG4gIHN0YXRpYyBfZnJvbVNlcnZlclJlc3BvbnNlKFxuICAgIF9hdXRoOiBBdXRoSW50ZXJuYWwsXG4gICAgZW5yb2xsbWVudDogTWZhRW5yb2xsbWVudFxuICApOiBQaG9uZU11bHRpRmFjdG9ySW5mb0ltcGwge1xuICAgIHJldHVybiBuZXcgUGhvbmVNdWx0aUZhY3RvckluZm9JbXBsKGVucm9sbG1lbnQgYXMgUGhvbmVNZmFFbnJvbGxtZW50KTtcbiAgfVxufVxuZXhwb3J0IGNsYXNzIFRvdHBNdWx0aUZhY3RvckluZm9JbXBsXG4gIGV4dGVuZHMgTXVsdGlGYWN0b3JJbmZvSW1wbFxuICBpbXBsZW1lbnRzIFRvdHBNdWx0aUZhY3RvckluZm9cbntcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihyZXNwb25zZTogVG90cE1mYUVucm9sbG1lbnQpIHtcbiAgICBzdXBlcihGYWN0b3JJZC5UT1RQLCByZXNwb25zZSk7XG4gIH1cblxuICBzdGF0aWMgX2Zyb21TZXJ2ZXJSZXNwb25zZShcbiAgICBfYXV0aDogQXV0aEludGVybmFsLFxuICAgIGVucm9sbG1lbnQ6IE1mYUVucm9sbG1lbnRcbiAgKTogVG90cE11bHRpRmFjdG9ySW5mb0ltcGwge1xuICAgIHJldHVybiBuZXcgVG90cE11bHRpRmFjdG9ySW5mb0ltcGwoZW5yb2xsbWVudCBhcyBUb3RwTWZhRW5yb2xsbWVudCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEFjdGlvbkNvZGVTZXR0aW5ncywgQXV0aCB9IGZyb20gJy4uLy4uL21vZGVsL3B1YmxpY190eXBlcyc7XG5cbmltcG9ydCB7IEdldE9vYkNvZGVSZXF1ZXN0IH0gZnJvbSAnLi4vLi4vYXBpL2F1dGhlbnRpY2F0aW9uL2VtYWlsX2FuZF9wYXNzd29yZCc7XG5pbXBvcnQgeyBBdXRoRXJyb3JDb2RlIH0gZnJvbSAnLi4vZXJyb3JzJztcbmltcG9ydCB7IF9hc3NlcnQgfSBmcm9tICcuLi91dGlsL2Fzc2VydCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KFxuICBhdXRoOiBBdXRoLFxuICByZXF1ZXN0OiBHZXRPb2JDb2RlUmVxdWVzdCxcbiAgYWN0aW9uQ29kZVNldHRpbmdzOiBBY3Rpb25Db2RlU2V0dGluZ3Ncbik6IHZvaWQge1xuICBfYXNzZXJ0KFxuICAgIGFjdGlvbkNvZGVTZXR0aW5ncy51cmw/Lmxlbmd0aCA+IDAsXG4gICAgYXV0aCxcbiAgICBBdXRoRXJyb3JDb2RlLklOVkFMSURfQ09OVElOVUVfVVJJXG4gICk7XG4gIF9hc3NlcnQoXG4gICAgdHlwZW9mIGFjdGlvbkNvZGVTZXR0aW5ncy5keW5hbWljTGlua0RvbWFpbiA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIGFjdGlvbkNvZGVTZXR0aW5ncy5keW5hbWljTGlua0RvbWFpbi5sZW5ndGggPiAwLFxuICAgIGF1dGgsXG4gICAgQXV0aEVycm9yQ29kZS5JTlZBTElEX0RZTkFNSUNfTElOS19ET01BSU5cbiAgKTtcblxuICByZXF1ZXN0LmNvbnRpbnVlVXJsID0gYWN0aW9uQ29kZVNldHRpbmdzLnVybDtcbiAgcmVxdWVzdC5keW5hbWljTGlua0RvbWFpbiA9IGFjdGlvbkNvZGVTZXR0aW5ncy5keW5hbWljTGlua0RvbWFpbjtcbiAgcmVxdWVzdC5jYW5IYW5kbGVDb2RlSW5BcHAgPSBhY3Rpb25Db2RlU2V0dGluZ3MuaGFuZGxlQ29kZUluQXBwO1xuXG4gIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MuaU9TKSB7XG4gICAgX2Fzc2VydChcbiAgICAgIGFjdGlvbkNvZGVTZXR0aW5ncy5pT1MuYnVuZGxlSWQubGVuZ3RoID4gMCxcbiAgICAgIGF1dGgsXG4gICAgICBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfSU9TX0JVTkRMRV9JRFxuICAgICk7XG4gICAgcmVxdWVzdC5pT1NCdW5kbGVJZCA9IGFjdGlvbkNvZGVTZXR0aW5ncy5pT1MuYnVuZGxlSWQ7XG4gIH1cblxuICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQpIHtcbiAgICBfYXNzZXJ0KFxuICAgICAgYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQucGFja2FnZU5hbWUubGVuZ3RoID4gMCxcbiAgICAgIGF1dGgsXG4gICAgICBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUVcbiAgICApO1xuICAgIHJlcXVlc3QuYW5kcm9pZEluc3RhbGxBcHAgPSBhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZC5pbnN0YWxsQXBwO1xuICAgIHJlcXVlc3QuYW5kcm9pZE1pbmltdW1WZXJzaW9uQ29kZSA9XG4gICAgICBhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZC5taW5pbXVtVmVyc2lvbjtcbiAgICByZXF1ZXN0LmFuZHJvaWRQYWNrYWdlTmFtZSA9IGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLnBhY2thZ2VOYW1lO1xuICB9XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBBY3Rpb25Db2RlSW5mbyxcbiAgQWN0aW9uQ29kZU9wZXJhdGlvbixcbiAgQWN0aW9uQ29kZVNldHRpbmdzLFxuICBBdXRoLFxuICBVc2VyQ3JlZGVudGlhbFxufSBmcm9tICcuLi8uLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuXG5pbXBvcnQgKiBhcyBhY2NvdW50IGZyb20gJy4uLy4uL2FwaS9hY2NvdW50X21hbmFnZW1lbnQvZW1haWxfYW5kX3Bhc3N3b3JkJztcbmltcG9ydCAqIGFzIGF1dGhlbnRpY2F0aW9uIGZyb20gJy4uLy4uL2FwaS9hdXRoZW50aWNhdGlvbi9lbWFpbF9hbmRfcGFzc3dvcmQnO1xuaW1wb3J0IHsgc2lnblVwLCBTaWduVXBSZXF1ZXN0IH0gZnJvbSAnLi4vLi4vYXBpL2F1dGhlbnRpY2F0aW9uL3NpZ25fdXAnO1xuaW1wb3J0IHsgTXVsdGlGYWN0b3JJbmZvSW1wbCB9IGZyb20gJy4uLy4uL21mYS9tZmFfaW5mbyc7XG5pbXBvcnQgeyBFbWFpbEF1dGhQcm92aWRlciB9IGZyb20gJy4uL3Byb3ZpZGVycy9lbWFpbCc7XG5pbXBvcnQgeyBVc2VyQ3JlZGVudGlhbEltcGwgfSBmcm9tICcuLi91c2VyL3VzZXJfY3JlZGVudGlhbF9pbXBsJztcbmltcG9ydCB7IF9hc3NlcnQgfSBmcm9tICcuLi91dGlsL2Fzc2VydCc7XG5pbXBvcnQgeyBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0IH0gZnJvbSAnLi9hY3Rpb25fY29kZV9zZXR0aW5ncyc7XG5pbXBvcnQgeyBzaWduSW5XaXRoQ3JlZGVudGlhbCB9IGZyb20gJy4vY3JlZGVudGlhbCc7XG5pbXBvcnQgeyBfY2FzdEF1dGggfSBmcm9tICcuLi9hdXRoL2F1dGhfaW1wbCc7XG5pbXBvcnQgeyBBdXRoRXJyb3JDb2RlIH0gZnJvbSAnLi4vZXJyb3JzJztcbmltcG9ydCB7IGdldE1vZHVsYXJJbnN0YW5jZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IE9wZXJhdGlvblR5cGUgfSBmcm9tICcuLi8uLi9tb2RlbC9lbnVtcyc7XG5pbXBvcnQgeyBpbmplY3RSZWNhcHRjaGFGaWVsZHMgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybV9icm93c2VyL3JlY2FwdGNoYS9yZWNhcHRjaGFfZW50ZXJwcmlzZV92ZXJpZmllcic7XG5pbXBvcnQgeyBJZFRva2VuUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9tb2RlbC9pZF90b2tlbic7XG5pbXBvcnQgeyBSZWNhcHRjaGFBY3Rpb25OYW1lLCBSZWNhcHRjaGFDbGllbnRUeXBlIH0gZnJvbSAnLi4vLi4vYXBpJztcblxuLyoqXG4gKiBTZW5kcyBhIHBhc3N3b3JkIHJlc2V0IGVtYWlsIHRvIHRoZSBnaXZlbiBlbWFpbCBhZGRyZXNzLlxuICpcbiAqIEByZW1hcmtzXG4gKiBUbyBjb21wbGV0ZSB0aGUgcGFzc3dvcmQgcmVzZXQsIGNhbGwge0BsaW5rIGNvbmZpcm1QYXNzd29yZFJlc2V0fSB3aXRoIHRoZSBjb2RlIHN1cHBsaWVkIGluXG4gKiB0aGUgZW1haWwgc2VudCB0byB0aGUgdXNlciwgYWxvbmcgd2l0aCB0aGUgbmV3IHBhc3N3b3JkIHNwZWNpZmllZCBieSB0aGUgdXNlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgamF2YXNjcmlwdFxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXG4gKiAgIGlPUzoge1xuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcbiAqICAgfSxcbiAqICAgYW5kcm9pZDoge1xuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xuICogICB9LFxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcbiAqIH07XG4gKiBhd2FpdCBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKGF1dGgsICd1c2VyQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcbiAqIC8vIE9idGFpbiBjb2RlIGZyb20gdXNlci5cbiAqIGF3YWl0IGNvbmZpcm1QYXNzd29yZFJlc2V0KCd1c2VyQGV4YW1wbGUuY29tJywgY29kZSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRQYXNzd29yZFJlc2V0RW1haWwoXG4gIGF1dGg6IEF1dGgsXG4gIGVtYWlsOiBzdHJpbmcsXG4gIGFjdGlvbkNvZGVTZXR0aW5ncz86IEFjdGlvbkNvZGVTZXR0aW5nc1xuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcbiAgY29uc3QgcmVxdWVzdDogYXV0aGVudGljYXRpb24uUGFzc3dvcmRSZXNldFJlcXVlc3QgPSB7XG4gICAgcmVxdWVzdFR5cGU6IEFjdGlvbkNvZGVPcGVyYXRpb24uUEFTU1dPUkRfUkVTRVQsXG4gICAgZW1haWwsXG4gICAgY2xpZW50VHlwZTogUmVjYXB0Y2hhQ2xpZW50VHlwZS5XRUJcbiAgfTtcbiAgaWYgKGF1dGhJbnRlcm5hbC5fZ2V0UmVjYXB0Y2hhQ29uZmlnKCk/LmVtYWlsUGFzc3dvcmRFbmFibGVkKSB7XG4gICAgY29uc3QgcmVxdWVzdFdpdGhSZWNhcHRjaGEgPSBhd2FpdCBpbmplY3RSZWNhcHRjaGFGaWVsZHMoXG4gICAgICBhdXRoSW50ZXJuYWwsXG4gICAgICByZXF1ZXN0LFxuICAgICAgUmVjYXB0Y2hhQWN0aW9uTmFtZS5HRVRfT09CX0NPREUsXG4gICAgICB0cnVlXG4gICAgKTtcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XG4gICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KFxuICAgICAgICBhdXRoSW50ZXJuYWwsXG4gICAgICAgIHJlcXVlc3RXaXRoUmVjYXB0Y2hhLFxuICAgICAgICBhY3Rpb25Db2RlU2V0dGluZ3NcbiAgICAgICk7XG4gICAgfVxuICAgIGF3YWl0IGF1dGhlbnRpY2F0aW9uLnNlbmRQYXNzd29yZFJlc2V0RW1haWwoXG4gICAgICBhdXRoSW50ZXJuYWwsXG4gICAgICByZXF1ZXN0V2l0aFJlY2FwdGNoYVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncykge1xuICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdChcbiAgICAgICAgYXV0aEludGVybmFsLFxuICAgICAgICByZXF1ZXN0LFxuICAgICAgICBhY3Rpb25Db2RlU2V0dGluZ3NcbiAgICAgICk7XG4gICAgfVxuICAgIGF3YWl0IGF1dGhlbnRpY2F0aW9uXG4gICAgICAuc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChhdXRoSW50ZXJuYWwsIHJlcXVlc3QpXG4gICAgICAuY2F0Y2goYXN5bmMgZXJyb3IgPT4ge1xuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gYGF1dGgvJHtBdXRoRXJyb3JDb2RlLk1JU1NJTkdfUkVDQVBUQ0hBX1RPS0VOfWApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICdQYXNzd29yZCByZXNldHMgYXJlIHByb3RlY3RlZCBieSByZUNBUFRDSEEgZm9yIHRoaXMgcHJvamVjdC4gQXV0b21hdGljYWxseSB0cmlnZ2VyaW5nIHRoZSByZUNBUFRDSEEgZmxvdyBhbmQgcmVzdGFydGluZyB0aGUgcGFzc3dvcmQgcmVzZXQgZmxvdy4nXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCByZXF1ZXN0V2l0aFJlY2FwdGNoYSA9IGF3YWl0IGluamVjdFJlY2FwdGNoYUZpZWxkcyhcbiAgICAgICAgICAgIGF1dGhJbnRlcm5hbCxcbiAgICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgICBSZWNhcHRjaGFBY3Rpb25OYW1lLkdFVF9PT0JfQ09ERSxcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QoXG4gICAgICAgICAgICAgIGF1dGhJbnRlcm5hbCxcbiAgICAgICAgICAgICAgcmVxdWVzdFdpdGhSZWNhcHRjaGEsXG4gICAgICAgICAgICAgIGFjdGlvbkNvZGVTZXR0aW5nc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgYXV0aGVudGljYXRpb24uc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChcbiAgICAgICAgICAgIGF1dGhJbnRlcm5hbCxcbiAgICAgICAgICAgIHJlcXVlc3RXaXRoUmVjYXB0Y2hhXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIENvbXBsZXRlcyB0aGUgcGFzc3dvcmQgcmVzZXQgcHJvY2VzcywgZ2l2ZW4gYSBjb25maXJtYXRpb24gY29kZSBhbmQgbmV3IHBhc3N3b3JkLlxuICpcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBvb2JDb2RlIC0gQSBjb25maXJtYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxuICogQHBhcmFtIG5ld1Bhc3N3b3JkIC0gVGhlIG5ldyBwYXNzd29yZC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25maXJtUGFzc3dvcmRSZXNldChcbiAgYXV0aDogQXV0aCxcbiAgb29iQ29kZTogc3RyaW5nLFxuICBuZXdQYXNzd29yZDogc3RyaW5nXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgYXdhaXQgYWNjb3VudC5yZXNldFBhc3N3b3JkKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwge1xuICAgIG9vYkNvZGUsXG4gICAgbmV3UGFzc3dvcmRcbiAgfSk7XG4gIC8vIERvIG5vdCByZXR1cm4gdGhlIGVtYWlsLlxufVxuXG4vKipcbiAqIEFwcGxpZXMgYSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyIGJ5IGVtYWlsIG9yIG90aGVyIG91dC1vZi1iYW5kIG1lY2hhbmlzbS5cbiAqXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXG4gKiBAcGFyYW0gb29iQ29kZSAtIEEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhcHBseUFjdGlvbkNvZGUoXG4gIGF1dGg6IEF1dGgsXG4gIG9vYkNvZGU6IHN0cmluZ1xuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IGFjY291bnQuYXBwbHlBY3Rpb25Db2RlKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgeyBvb2JDb2RlIH0pO1xufVxuXG4vKipcbiAqIENoZWNrcyBhIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIgYnkgZW1haWwgb3Igb3RoZXIgb3V0LW9mLWJhbmQgbWVjaGFuaXNtLlxuICpcbiAqIEByZXR1cm5zIG1ldGFkYXRhIGFib3V0IHRoZSBjb2RlLlxuICpcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBvb2JDb2RlIC0gQSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrQWN0aW9uQ29kZShcbiAgYXV0aDogQXV0aCxcbiAgb29iQ29kZTogc3RyaW5nXG4pOiBQcm9taXNlPEFjdGlvbkNvZGVJbmZvPiB7XG4gIGNvbnN0IGF1dGhNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFjY291bnQucmVzZXRQYXNzd29yZChhdXRoTW9kdWxhciwgeyBvb2JDb2RlIH0pO1xuXG4gIC8vIEVtYWlsIGNvdWxkIGJlIGVtcHR5IG9ubHkgaWYgdGhlIHJlcXVlc3QgdHlwZSBpcyBFTUFJTF9TSUdOSU4gb3JcbiAgLy8gVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwuXG4gIC8vIE5ldyBlbWFpbCBzaG91bGQgbm90IGJlIGVtcHR5IGlmIHRoZSByZXF1ZXN0IHR5cGUgaXNcbiAgLy8gVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwuXG4gIC8vIE11bHRpLWZhY3RvciBpbmZvIGNvdWxkIG5vdCBiZSBlbXB0eSBpZiB0aGUgcmVxdWVzdCB0eXBlIGlzXG4gIC8vIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OLlxuICBjb25zdCBvcGVyYXRpb24gPSByZXNwb25zZS5yZXF1ZXN0VHlwZTtcbiAgX2Fzc2VydChvcGVyYXRpb24sIGF1dGhNb2R1bGFyLCBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SKTtcbiAgc3dpdGNoIChvcGVyYXRpb24pIHtcbiAgICBjYXNlIEFjdGlvbkNvZGVPcGVyYXRpb24uRU1BSUxfU0lHTklOOlxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBY3Rpb25Db2RlT3BlcmF0aW9uLlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMOlxuICAgICAgX2Fzc2VydChyZXNwb25zZS5uZXdFbWFpbCwgYXV0aE1vZHVsYXIsIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBY3Rpb25Db2RlT3BlcmF0aW9uLlJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OOlxuICAgICAgX2Fzc2VydChyZXNwb25zZS5tZmFJbmZvLCBhdXRoTW9kdWxhciwgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUik7XG4gICAgLy8gZmFsbCB0aHJvdWdoXG4gICAgZGVmYXVsdDpcbiAgICAgIF9hc3NlcnQocmVzcG9uc2UuZW1haWwsIGF1dGhNb2R1bGFyLCBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SKTtcbiAgfVxuXG4gIC8vIFRoZSBtdWx0aS1mYWN0b3IgaW5mbyBmb3IgcmV2ZXJ0IHNlY29uZCBmYWN0b3IgYWRkaXRpb25cbiAgbGV0IG11bHRpRmFjdG9ySW5mbzogTXVsdGlGYWN0b3JJbmZvSW1wbCB8IG51bGwgPSBudWxsO1xuICBpZiAocmVzcG9uc2UubWZhSW5mbykge1xuICAgIG11bHRpRmFjdG9ySW5mbyA9IE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZShcbiAgICAgIF9jYXN0QXV0aChhdXRoTW9kdWxhciksXG4gICAgICByZXNwb25zZS5tZmFJbmZvXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZGF0YToge1xuICAgICAgZW1haWw6XG4gICAgICAgIChyZXNwb25zZS5yZXF1ZXN0VHlwZSA9PT0gQWN0aW9uQ29kZU9wZXJhdGlvbi5WRVJJRllfQU5EX0NIQU5HRV9FTUFJTFxuICAgICAgICAgID8gcmVzcG9uc2UubmV3RW1haWxcbiAgICAgICAgICA6IHJlc3BvbnNlLmVtYWlsKSB8fCBudWxsLFxuICAgICAgcHJldmlvdXNFbWFpbDpcbiAgICAgICAgKHJlc3BvbnNlLnJlcXVlc3RUeXBlID09PSBBY3Rpb25Db2RlT3BlcmF0aW9uLlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXG4gICAgICAgICAgPyByZXNwb25zZS5lbWFpbFxuICAgICAgICAgIDogcmVzcG9uc2UubmV3RW1haWwpIHx8IG51bGwsXG4gICAgICBtdWx0aUZhY3RvckluZm9cbiAgICB9LFxuICAgIG9wZXJhdGlvblxuICB9O1xufVxuXG4vKipcbiAqIENoZWNrcyBhIHBhc3N3b3JkIHJlc2V0IGNvZGUgc2VudCB0byB0aGUgdXNlciBieSBlbWFpbCBvciBvdGhlciBvdXQtb2YtYmFuZCBtZWNoYW5pc20uXG4gKlxuICogQHJldHVybnMgdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzIGlmIHZhbGlkLlxuICpcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBjb2RlIC0gQSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlKFxuICBhdXRoOiBBdXRoLFxuICBjb2RlOiBzdHJpbmdcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgY2hlY2tBY3Rpb25Db2RlKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgY29kZSk7XG4gIC8vIEVtYWlsIHNob3VsZCBhbHdheXMgYmUgcHJlc2VudCBzaW5jZSBhIGNvZGUgd2FzIHNlbnQgdG8gaXRcbiAgcmV0dXJuIGRhdGEuZW1haWwhO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdXNlciBhY2NvdW50IGFzc29jaWF0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGVtYWlsIGFkZHJlc3MgYW5kIHBhc3N3b3JkLlxuICpcbiAqIEByZW1hcmtzXG4gKiBPbiBzdWNjZXNzZnVsIGNyZWF0aW9uIG9mIHRoZSB1c2VyIGFjY291bnQsIHRoaXMgdXNlciB3aWxsIGFsc28gYmUgc2lnbmVkIGluIHRvIHlvdXIgYXBwbGljYXRpb24uXG4gKlxuICogVXNlciBhY2NvdW50IGNyZWF0aW9uIGNhbiBmYWlsIGlmIHRoZSBhY2NvdW50IGFscmVhZHkgZXhpc3RzIG9yIHRoZSBwYXNzd29yZCBpcyBpbnZhbGlkLlxuICpcbiAqIE5vdGU6IFRoZSBlbWFpbCBhZGRyZXNzIGFjdHMgYXMgYSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHVzZXIgYW5kIGVuYWJsZXMgYW4gZW1haWwtYmFzZWRcbiAqIHBhc3N3b3JkIHJlc2V0LiBUaGlzIGZ1bmN0aW9uIHdpbGwgY3JlYXRlIGEgbmV3IHVzZXIgYWNjb3VudCBhbmQgc2V0IHRoZSBpbml0aWFsIHVzZXIgcGFzc3dvcmQuXG4gKlxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxuICogQHBhcmFtIHBhc3N3b3JkIC0gVGhlIHVzZXIncyBjaG9zZW4gcGFzc3dvcmQuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKFxuICBhdXRoOiBBdXRoLFxuICBlbWFpbDogc3RyaW5nLFxuICBwYXNzd29yZDogc3RyaW5nXG4pOiBQcm9taXNlPFVzZXJDcmVkZW50aWFsPiB7XG4gIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcbiAgY29uc3QgcmVxdWVzdDogU2lnblVwUmVxdWVzdCA9IHtcbiAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcbiAgICBlbWFpbCxcbiAgICBwYXNzd29yZCxcbiAgICBjbGllbnRUeXBlOiBSZWNhcHRjaGFDbGllbnRUeXBlLldFQlxuICB9O1xuICBsZXQgc2lnblVwUmVzcG9uc2U6IFByb21pc2U8SWRUb2tlblJlc3BvbnNlPjtcbiAgaWYgKGF1dGhJbnRlcm5hbC5fZ2V0UmVjYXB0Y2hhQ29uZmlnKCk/LmVtYWlsUGFzc3dvcmRFbmFibGVkKSB7XG4gICAgY29uc3QgcmVxdWVzdFdpdGhSZWNhcHRjaGEgPSBhd2FpdCBpbmplY3RSZWNhcHRjaGFGaWVsZHMoXG4gICAgICBhdXRoSW50ZXJuYWwsXG4gICAgICByZXF1ZXN0LFxuICAgICAgUmVjYXB0Y2hhQWN0aW9uTmFtZS5TSUdOX1VQX1BBU1NXT1JEXG4gICAgKTtcbiAgICBzaWduVXBSZXNwb25zZSA9IHNpZ25VcChhdXRoSW50ZXJuYWwsIHJlcXVlc3RXaXRoUmVjYXB0Y2hhKTtcbiAgfSBlbHNlIHtcbiAgICBzaWduVXBSZXNwb25zZSA9IHNpZ25VcChhdXRoSW50ZXJuYWwsIHJlcXVlc3QpLmNhdGNoKGFzeW5jIGVycm9yID0+IHtcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSBgYXV0aC8ke0F1dGhFcnJvckNvZGUuTUlTU0lOR19SRUNBUFRDSEFfVE9LRU59YCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAnU2lnbi11cCBpcyBwcm90ZWN0ZWQgYnkgcmVDQVBUQ0hBIGZvciB0aGlzIHByb2plY3QuIEF1dG9tYXRpY2FsbHkgdHJpZ2dlcmluZyB0aGUgcmVDQVBUQ0hBIGZsb3cgYW5kIHJlc3RhcnRpbmcgdGhlIHNpZ24tdXAgZmxvdy4nXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RXaXRoUmVjYXB0Y2hhID0gYXdhaXQgaW5qZWN0UmVjYXB0Y2hhRmllbGRzKFxuICAgICAgICAgIGF1dGhJbnRlcm5hbCxcbiAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgIFJlY2FwdGNoYUFjdGlvbk5hbWUuU0lHTl9VUF9QQVNTV09SRFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gc2lnblVwKGF1dGhJbnRlcm5hbCwgcmVxdWVzdFdpdGhSZWNhcHRjaGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2lnblVwUmVzcG9uc2UuY2F0Y2goZXJyb3IgPT4ge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gIH0pO1xuXG4gIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKFxuICAgIGF1dGhJbnRlcm5hbCxcbiAgICBPcGVyYXRpb25UeXBlLlNJR05fSU4sXG4gICAgcmVzcG9uc2VcbiAgKTtcbiAgYXdhaXQgYXV0aEludGVybmFsLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcblxuICByZXR1cm4gdXNlckNyZWRlbnRpYWw7XG59XG5cbi8qKlxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYW4gZW1haWwgYW5kIHBhc3N3b3JkLlxuICpcbiAqIEByZW1hcmtzXG4gKiBGYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSBlbWFpbCBhZGRyZXNzIGFuZCBwYXNzd29yZCBkbyBub3QgbWF0Y2guXG4gKlxuICogTm90ZTogVGhlIHVzZXIncyBwYXNzd29yZCBpcyBOT1QgdGhlIHBhc3N3b3JkIHVzZWQgdG8gYWNjZXNzIHRoZSB1c2VyJ3MgZW1haWwgYWNjb3VudC4gVGhlXG4gKiBlbWFpbCBhZGRyZXNzIHNlcnZlcyBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdXNlciwgYW5kIHRoZSBwYXNzd29yZCBpcyB1c2VkIHRvIGFjY2Vzc1xuICogdGhlIHVzZXIncyBhY2NvdW50IGluIHlvdXIgRmlyZWJhc2UgcHJvamVjdC4gU2VlIGFsc286IHtAbGluayBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmR9LlxuICpcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VycyBlbWFpbCBhZGRyZXNzLlxuICogQHBhcmFtIHBhc3N3b3JkIC0gVGhlIHVzZXJzIHBhc3N3b3JkLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKFxuICBhdXRoOiBBdXRoLFxuICBlbWFpbDogc3RyaW5nLFxuICBwYXNzd29yZDogc3RyaW5nXG4pOiBQcm9taXNlPFVzZXJDcmVkZW50aWFsPiB7XG4gIHJldHVybiBzaWduSW5XaXRoQ3JlZGVudGlhbChcbiAgICBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksXG4gICAgRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQpXG4gICk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBBY3Rpb25Db2RlT3BlcmF0aW9uLFxuICBBY3Rpb25Db2RlU2V0dGluZ3MsXG4gIEF1dGgsXG4gIFVzZXJDcmVkZW50aWFsXG59IGZyb20gJy4uLy4uL21vZGVsL3B1YmxpY190eXBlcyc7XG5cbmltcG9ydCAqIGFzIGFwaSBmcm9tICcuLi8uLi9hcGkvYXV0aGVudGljYXRpb24vZW1haWxfYW5kX3Bhc3N3b3JkJztcbmltcG9ydCB7IEFjdGlvbkNvZGVVUkwgfSBmcm9tICcuLi9hY3Rpb25fY29kZV91cmwnO1xuaW1wb3J0IHsgRW1haWxBdXRoUHJvdmlkZXIgfSBmcm9tICcuLi9wcm92aWRlcnMvZW1haWwnO1xuaW1wb3J0IHsgX2dldEN1cnJlbnRVcmwgfSBmcm9tICcuLi91dGlsL2xvY2F0aW9uJztcbmltcG9ydCB7IF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QgfSBmcm9tICcuL2FjdGlvbl9jb2RlX3NldHRpbmdzJztcbmltcG9ydCB7IHNpZ25JbldpdGhDcmVkZW50aWFsIH0gZnJvbSAnLi9jcmVkZW50aWFsJztcbmltcG9ydCB7IEF1dGhFcnJvckNvZGUgfSBmcm9tICcuLi9lcnJvcnMnO1xuaW1wb3J0IHsgX2Fzc2VydCB9IGZyb20gJy4uL3V0aWwvYXNzZXJ0JztcbmltcG9ydCB7IGdldE1vZHVsYXJJbnN0YW5jZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IF9jYXN0QXV0aCB9IGZyb20gJy4uL2F1dGgvYXV0aF9pbXBsJztcbmltcG9ydCB7IGluamVjdFJlY2FwdGNoYUZpZWxkcyB9IGZyb20gJy4uLy4uL3BsYXRmb3JtX2Jyb3dzZXIvcmVjYXB0Y2hhL3JlY2FwdGNoYV9lbnRlcnByaXNlX3ZlcmlmaWVyJztcbmltcG9ydCB7IFJlY2FwdGNoYUFjdGlvbk5hbWUsIFJlY2FwdGNoYUNsaWVudFR5cGUgfSBmcm9tICcuLi8uLi9hcGknO1xuXG4vKipcbiAqIFNlbmRzIGEgc2lnbi1pbiBlbWFpbCBsaW5rIHRvIHRoZSB1c2VyIHdpdGggdGhlIHNwZWNpZmllZCBlbWFpbC5cbiAqXG4gKiBAcmVtYXJrc1xuICogVGhlIHNpZ24taW4gb3BlcmF0aW9uIGhhcyB0byBhbHdheXMgYmUgY29tcGxldGVkIGluIHRoZSBhcHAgdW5saWtlIG90aGVyIG91dCBvZiBiYW5kIGVtYWlsXG4gKiBhY3Rpb25zIChwYXNzd29yZCByZXNldCBhbmQgZW1haWwgdmVyaWZpY2F0aW9ucykuIFRoaXMgaXMgYmVjYXVzZSwgYXQgdGhlIGVuZCBvZiB0aGUgZmxvdyxcbiAqIHRoZSB1c2VyIGlzIGV4cGVjdGVkIHRvIGJlIHNpZ25lZCBpbiBhbmQgdGhlaXIgQXV0aCBzdGF0ZSBwZXJzaXN0ZWQgd2l0aGluIHRoZSBhcHAuXG4gKlxuICogVG8gY29tcGxldGUgc2lnbiBpbiB3aXRoIHRoZSBlbWFpbCBsaW5rLCBjYWxsIHtAbGluayBzaWduSW5XaXRoRW1haWxMaW5rfSB3aXRoIHRoZSBlbWFpbFxuICogYWRkcmVzcyBhbmQgdGhlIGVtYWlsIGxpbmsgc3VwcGxpZWQgaW4gdGhlIGVtYWlsIHNlbnQgdG8gdGhlIHVzZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGphdmFzY3JpcHRcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxuICogICBpT1M6IHtcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXG4gKiAgIH0sXG4gKiAgIGFuZHJvaWQ6IHtcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcbiAqICAgfSxcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXG4gKiB9O1xuICogYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsICd1c2VyQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcbiAqIC8vIE9idGFpbiBlbWFpbExpbmsgZnJvbSB0aGUgdXNlci5cbiAqIGlmKGlzU2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbExpbmspKSB7XG4gKiAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBlbWFpbExpbmspO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGF1dGhJbnRlcm5hbCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRTaWduSW5MaW5rVG9FbWFpbChcbiAgYXV0aDogQXV0aCxcbiAgZW1haWw6IHN0cmluZyxcbiAgYWN0aW9uQ29kZVNldHRpbmdzOiBBY3Rpb25Db2RlU2V0dGluZ3Ncbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XG4gIGNvbnN0IHJlcXVlc3Q6IGFwaS5FbWFpbFNpZ25JblJlcXVlc3QgPSB7XG4gICAgcmVxdWVzdFR5cGU6IEFjdGlvbkNvZGVPcGVyYXRpb24uRU1BSUxfU0lHTklOLFxuICAgIGVtYWlsLFxuICAgIGNsaWVudFR5cGU6IFJlY2FwdGNoYUNsaWVudFR5cGUuV0VCXG4gIH07XG4gIGZ1bmN0aW9uIHNldEFjdGlvbkNvZGVTZXR0aW5ncyhcbiAgICByZXF1ZXN0OiBhcGkuRW1haWxTaWduSW5SZXF1ZXN0LFxuICAgIGFjdGlvbkNvZGVTZXR0aW5nczogQWN0aW9uQ29kZVNldHRpbmdzXG4gICk6IHZvaWQge1xuICAgIF9hc3NlcnQoXG4gICAgICBhY3Rpb25Db2RlU2V0dGluZ3MuaGFuZGxlQ29kZUluQXBwLFxuICAgICAgYXV0aEludGVybmFsLFxuICAgICAgQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUlxuICAgICk7XG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncykge1xuICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdChcbiAgICAgICAgYXV0aEludGVybmFsLFxuICAgICAgICByZXF1ZXN0LFxuICAgICAgICBhY3Rpb25Db2RlU2V0dGluZ3NcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGlmIChhdXRoSW50ZXJuYWwuX2dldFJlY2FwdGNoYUNvbmZpZygpPy5lbWFpbFBhc3N3b3JkRW5hYmxlZCkge1xuICAgIGNvbnN0IHJlcXVlc3RXaXRoUmVjYXB0Y2hhID0gYXdhaXQgaW5qZWN0UmVjYXB0Y2hhRmllbGRzKFxuICAgICAgYXV0aEludGVybmFsLFxuICAgICAgcmVxdWVzdCxcbiAgICAgIFJlY2FwdGNoYUFjdGlvbk5hbWUuR0VUX09PQl9DT0RFLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gICAgc2V0QWN0aW9uQ29kZVNldHRpbmdzKHJlcXVlc3RXaXRoUmVjYXB0Y2hhLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xuICAgIGF3YWl0IGFwaS5zZW5kU2lnbkluTGlua1RvRW1haWwoYXV0aEludGVybmFsLCByZXF1ZXN0V2l0aFJlY2FwdGNoYSk7XG4gIH0gZWxzZSB7XG4gICAgc2V0QWN0aW9uQ29kZVNldHRpbmdzKHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XG4gICAgYXdhaXQgYXBpXG4gICAgICAuc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGhJbnRlcm5hbCwgcmVxdWVzdClcbiAgICAgIC5jYXRjaChhc3luYyBlcnJvciA9PiB7XG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSBgYXV0aC8ke0F1dGhFcnJvckNvZGUuTUlTU0lOR19SRUNBUFRDSEFfVE9LRU59YCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgJ0VtYWlsIGxpbmsgc2lnbi1pbiBpcyBwcm90ZWN0ZWQgYnkgcmVDQVBUQ0hBIGZvciB0aGlzIHByb2plY3QuIEF1dG9tYXRpY2FsbHkgdHJpZ2dlcmluZyB0aGUgcmVDQVBUQ0hBIGZsb3cgYW5kIHJlc3RhcnRpbmcgdGhlIHNpZ24taW4gZmxvdy4nXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCByZXF1ZXN0V2l0aFJlY2FwdGNoYSA9IGF3YWl0IGluamVjdFJlY2FwdGNoYUZpZWxkcyhcbiAgICAgICAgICAgIGF1dGhJbnRlcm5hbCxcbiAgICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgICBSZWNhcHRjaGFBY3Rpb25OYW1lLkdFVF9PT0JfQ09ERSxcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldEFjdGlvbkNvZGVTZXR0aW5ncyhyZXF1ZXN0V2l0aFJlY2FwdGNoYSwgYWN0aW9uQ29kZVNldHRpbmdzKTtcbiAgICAgICAgICBhd2FpdCBhcGkuc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGhJbnRlcm5hbCwgcmVxdWVzdFdpdGhSZWNhcHRjaGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGFuIGluY29taW5nIGxpbmsgaXMgYSBzaWduLWluIHdpdGggZW1haWwgbGluayBzdWl0YWJsZSBmb3Ige0BsaW5rIHNpZ25JbldpdGhFbWFpbExpbmt9LlxuICpcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBlbWFpbExpbmsgLSBUaGUgbGluayBzZW50IHRvIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NpZ25JbldpdGhFbWFpbExpbmsoYXV0aDogQXV0aCwgZW1haWxMaW5rOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgYWN0aW9uQ29kZVVybCA9IEFjdGlvbkNvZGVVUkwucGFyc2VMaW5rKGVtYWlsTGluayk7XG4gIHJldHVybiBhY3Rpb25Db2RlVXJsPy5vcGVyYXRpb24gPT09IEFjdGlvbkNvZGVPcGVyYXRpb24uRU1BSUxfU0lHTklOO1xufVxuXG4vKipcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHVzaW5nIGFuIGVtYWlsIGFuZCBzaWduLWluIGVtYWlsIGxpbmsuXG4gKlxuICogQHJlbWFya3NcbiAqIElmIG5vIGxpbmsgaXMgcGFzc2VkLCB0aGUgbGluayBpcyBpbmZlcnJlZCBmcm9tIHRoZSBjdXJyZW50IFVSTC5cbiAqXG4gKiBGYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSBlbWFpbCBhZGRyZXNzIGlzIGludmFsaWQgb3IgT1RQIGluIGVtYWlsIGxpbmsgZXhwaXJlcy5cbiAqXG4gKiBOb3RlOiBDb25maXJtIHRoZSBsaW5rIGlzIGEgc2lnbi1pbiBlbWFpbCBsaW5rIGJlZm9yZSBjYWxsaW5nIHRoaXMgbWV0aG9kIGZpcmViYXNlLmF1dGguQXV0aC5pc1NpZ25JbldpdGhFbWFpbExpbmsuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGphdmFzY3JpcHRcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxuICogICBpT1M6IHtcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXG4gKiAgIH0sXG4gKiAgIGFuZHJvaWQ6IHtcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcbiAqICAgfSxcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXG4gKiB9O1xuICogYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsICd1c2VyQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcbiAqIC8vIE9idGFpbiBlbWFpbExpbmsgZnJvbSB0aGUgdXNlci5cbiAqIGlmKGlzU2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbExpbmspKSB7XG4gKiAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBlbWFpbExpbmspO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxuICogQHBhcmFtIGVtYWlsTGluayAtIFRoZSBsaW5rIHNlbnQgdG8gdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhFbWFpbExpbmsoXG4gIGF1dGg6IEF1dGgsXG4gIGVtYWlsOiBzdHJpbmcsXG4gIGVtYWlsTGluaz86IHN0cmluZ1xuKTogUHJvbWlzZTxVc2VyQ3JlZGVudGlhbD4ge1xuICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcbiAgY29uc3QgY3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxXaXRoTGluayhcbiAgICBlbWFpbCxcbiAgICBlbWFpbExpbmsgfHwgX2dldEN1cnJlbnRVcmwoKVxuICApO1xuICAvLyBDaGVjayBpZiB0aGUgdGVuYW50IElEIGluIHRoZSBlbWFpbCBsaW5rIG1hdGNoZXMgdGhlIHRlbmFudCBJRCBvbiBBdXRoXG4gIC8vIGluc3RhbmNlLlxuICBfYXNzZXJ0KFxuICAgIGNyZWRlbnRpYWwuX3RlbmFudElkID09PSAoYXV0aE1vZHVsYXIudGVuYW50SWQgfHwgbnVsbCksXG4gICAgYXV0aE1vZHVsYXIsXG4gICAgQXV0aEVycm9yQ29kZS5URU5BTlRfSURfTUlTTUFUQ0hcbiAgKTtcbiAgcmV0dXJuIHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGhNb2R1bGFyLCBjcmVkZW50aWFsKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIEVuZHBvaW50LFxuICBIdHRwTWV0aG9kLFxuICBfYWRkVGlkSWZOZWNlc3NhcnksXG4gIF9wZXJmb3JtQXBpUmVxdWVzdFxufSBmcm9tICcuLi9pbmRleCc7XG5pbXBvcnQgeyBBdXRoIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVBdXRoVXJpUmVxdWVzdCB7XG4gIGlkZW50aWZpZXI6IHN0cmluZztcbiAgY29udGludWVVcmk6IHN0cmluZztcbiAgdGVuYW50SWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlQXV0aFVyaVJlc3BvbnNlIHtcbiAgc2lnbmluTWV0aG9kczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBdXRoVXJpKFxuICBhdXRoOiBBdXRoLFxuICByZXF1ZXN0OiBDcmVhdGVBdXRoVXJpUmVxdWVzdFxuKTogUHJvbWlzZTxDcmVhdGVBdXRoVXJpUmVzcG9uc2U+IHtcbiAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdDxDcmVhdGVBdXRoVXJpUmVxdWVzdCwgQ3JlYXRlQXV0aFVyaVJlc3BvbnNlPihcbiAgICBhdXRoLFxuICAgIEh0dHBNZXRob2QuUE9TVCxcbiAgICBFbmRwb2ludC5DUkVBVEVfQVVUSF9VUkksXG4gICAgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpXG4gICk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBBY3Rpb25Db2RlT3BlcmF0aW9uLFxuICBBY3Rpb25Db2RlU2V0dGluZ3MsXG4gIEF1dGgsXG4gIFVzZXJcbn0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcblxuaW1wb3J0IHtcbiAgY3JlYXRlQXV0aFVyaSxcbiAgQ3JlYXRlQXV0aFVyaVJlcXVlc3Rcbn0gZnJvbSAnLi4vLi4vYXBpL2F1dGhlbnRpY2F0aW9uL2NyZWF0ZV9hdXRoX3VyaSc7XG5pbXBvcnQgKiBhcyBhcGkgZnJvbSAnLi4vLi4vYXBpL2F1dGhlbnRpY2F0aW9uL2VtYWlsX2FuZF9wYXNzd29yZCc7XG5pbXBvcnQgeyBVc2VySW50ZXJuYWwgfSBmcm9tICcuLi8uLi9tb2RlbC91c2VyJztcbmltcG9ydCB7IF9nZXRDdXJyZW50VXJsLCBfaXNIdHRwT3JIdHRwcyB9IGZyb20gJy4uL3V0aWwvbG9jYXRpb24nO1xuaW1wb3J0IHsgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdCB9IGZyb20gJy4vYWN0aW9uX2NvZGVfc2V0dGluZ3MnO1xuaW1wb3J0IHsgZ2V0TW9kdWxhckluc3RhbmNlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcbiAqIEdldHMgdGhlIGxpc3Qgb2YgcG9zc2libGUgc2lnbiBpbiBtZXRob2RzIGZvciB0aGUgZ2l2ZW4gZW1haWwgYWRkcmVzcy5cbiAqXG4gKiBAcmVtYXJrc1xuICogVGhpcyBpcyB1c2VmdWwgdG8gZGlmZmVyZW50aWF0ZSBtZXRob2RzIG9mIHNpZ24taW4gZm9yIHRoZSBzYW1lIHByb3ZpZGVyLCBlZy5cbiAqIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2hpY2ggaGFzIDIgbWV0aG9kcyBvZiBzaWduLWluLFxuICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfUEFTU1dPUkQgYW5kXG4gKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9MSU5LLlxuICpcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFNpZ25Jbk1ldGhvZHNGb3JFbWFpbChcbiAgYXV0aDogQXV0aCxcbiAgZW1haWw6IHN0cmluZ1xuKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAvLyBjcmVhdGVBdXRoVXJpIHJldHVybnMgYW4gZXJyb3IgaWYgY29udGludWUgVVJJIGlzIG5vdCBodHRwIG9yIGh0dHBzLlxuICAvLyBGb3IgZW52aXJvbm1lbnRzIGxpa2UgQ29yZG92YSwgQ2hyb21lIGV4dGVuc2lvbnMsIG5hdGl2ZSBmcmFtZXdvcmtzLCBmaWxlXG4gIC8vIHN5c3RlbXMsIGV0YywgdXNlIGh0dHA6Ly9sb2NhbGhvc3QgYXMgY29udGludWUgVVJMLlxuICBjb25zdCBjb250aW51ZVVyaSA9IF9pc0h0dHBPckh0dHBzKCkgPyBfZ2V0Q3VycmVudFVybCgpIDogJ2h0dHA6Ly9sb2NhbGhvc3QnO1xuICBjb25zdCByZXF1ZXN0OiBDcmVhdGVBdXRoVXJpUmVxdWVzdCA9IHtcbiAgICBpZGVudGlmaWVyOiBlbWFpbCxcbiAgICBjb250aW51ZVVyaVxuICB9O1xuXG4gIGNvbnN0IHsgc2lnbmluTWV0aG9kcyB9ID0gYXdhaXQgY3JlYXRlQXV0aFVyaShcbiAgICBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksXG4gICAgcmVxdWVzdFxuICApO1xuXG4gIHJldHVybiBzaWduaW5NZXRob2RzIHx8IFtdO1xufVxuXG4vKipcbiAqIFNlbmRzIGEgdmVyaWZpY2F0aW9uIGVtYWlsIHRvIGEgdXNlci5cbiAqXG4gKiBAcmVtYXJrc1xuICogVGhlIHZlcmlmaWNhdGlvbiBwcm9jZXNzIGlzIGNvbXBsZXRlZCBieSBjYWxsaW5nIHtAbGluayBhcHBseUFjdGlvbkNvZGV9LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcbiAqICAgaU9TOiB7XG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xuICogICB9LFxuICogICBhbmRyb2lkOiB7XG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXG4gKiAgIH0sXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxuICogfTtcbiAqIGF3YWl0IHNlbmRFbWFpbFZlcmlmaWNhdGlvbih1c2VyLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xuICogLy8gT2J0YWluIGNvZGUgZnJvbSB0aGUgdXNlci5cbiAqIGF3YWl0IGFwcGx5QWN0aW9uQ29kZShhdXRoLCBjb2RlKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRFbWFpbFZlcmlmaWNhdGlvbihcbiAgdXNlcjogVXNlcixcbiAgYWN0aW9uQ29kZVNldHRpbmdzPzogQWN0aW9uQ29kZVNldHRpbmdzIHwgbnVsbFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSBhcyBVc2VySW50ZXJuYWw7XG4gIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcbiAgY29uc3QgcmVxdWVzdDogYXBpLlZlcmlmeUVtYWlsUmVxdWVzdCA9IHtcbiAgICByZXF1ZXN0VHlwZTogQWN0aW9uQ29kZU9wZXJhdGlvbi5WRVJJRllfRU1BSUwsXG4gICAgaWRUb2tlblxuICB9O1xuICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XG4gICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdChcbiAgICAgIHVzZXJJbnRlcm5hbC5hdXRoLFxuICAgICAgcmVxdWVzdCxcbiAgICAgIGFjdGlvbkNvZGVTZXR0aW5nc1xuICAgICk7XG4gIH1cblxuICBjb25zdCB7IGVtYWlsIH0gPSBhd2FpdCBhcGkuc2VuZEVtYWlsVmVyaWZpY2F0aW9uKHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0KTtcblxuICBpZiAoZW1haWwgIT09IHVzZXIuZW1haWwpIHtcbiAgICBhd2FpdCB1c2VyLnJlbG9hZCgpO1xuICB9XG59XG5cbi8qKlxuICogU2VuZHMgYSB2ZXJpZmljYXRpb24gZW1haWwgdG8gYSBuZXcgZW1haWwgYWRkcmVzcy5cbiAqXG4gKiBAcmVtYXJrc1xuICogVGhlIHVzZXIncyBlbWFpbCB3aWxsIGJlIHVwZGF0ZWQgdG8gdGhlIG5ldyBvbmUgYWZ0ZXIgYmVpbmcgdmVyaWZpZWQuXG4gKlxuICogSWYgeW91IGhhdmUgYSBjdXN0b20gZW1haWwgYWN0aW9uIGhhbmRsZXIsIHlvdSBjYW4gY29tcGxldGUgdGhlIHZlcmlmaWNhdGlvbiBwcm9jZXNzIGJ5IGNhbGxpbmdcbiAqIHtAbGluayBhcHBseUFjdGlvbkNvZGV9LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcbiAqICAgaU9TOiB7XG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xuICogICB9LFxuICogICBhbmRyb2lkOiB7XG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXG4gKiAgIH0sXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxuICogfTtcbiAqIGF3YWl0IHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsKHVzZXIsICduZXdlbWFpbEBleGFtcGxlLmNvbScsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XG4gKiAvLyBPYnRhaW4gY29kZSBmcm9tIHRoZSB1c2VyLlxuICogYXdhaXQgYXBwbHlBY3Rpb25Db2RlKGF1dGgsIGNvZGUpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cbiAqIEBwYXJhbSBuZXdFbWFpbCAtIFRoZSBuZXcgZW1haWwgYWRkcmVzcyB0byBiZSB2ZXJpZmllZCBiZWZvcmUgdXBkYXRlLlxuICogQHBhcmFtIGFjdGlvbkNvZGVTZXR0aW5ncyAtIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVNldHRpbmdzfS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbChcbiAgdXNlcjogVXNlcixcbiAgbmV3RW1haWw6IHN0cmluZyxcbiAgYWN0aW9uQ29kZVNldHRpbmdzPzogQWN0aW9uQ29kZVNldHRpbmdzIHwgbnVsbFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSBhcyBVc2VySW50ZXJuYWw7XG4gIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcbiAgY29uc3QgcmVxdWVzdDogYXBpLlZlcmlmeUFuZENoYW5nZUVtYWlsUmVxdWVzdCA9IHtcbiAgICByZXF1ZXN0VHlwZTogQWN0aW9uQ29kZU9wZXJhdGlvbi5WRVJJRllfQU5EX0NIQU5HRV9FTUFJTCxcbiAgICBpZFRva2VuLFxuICAgIG5ld0VtYWlsXG4gIH07XG4gIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcbiAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KFxuICAgICAgdXNlckludGVybmFsLmF1dGgsXG4gICAgICByZXF1ZXN0LFxuICAgICAgYWN0aW9uQ29kZVNldHRpbmdzXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IHsgZW1haWwgfSA9IGF3YWl0IGFwaS52ZXJpZnlBbmRDaGFuZ2VFbWFpbCh1c2VySW50ZXJuYWwuYXV0aCwgcmVxdWVzdCk7XG5cbiAgaWYgKGVtYWlsICE9PSB1c2VyLmVtYWlsKSB7XG4gICAgLy8gSWYgdGhlIGxvY2FsIGNvcHkgb2YgdGhlIGVtYWlsIG9uIHVzZXIgaXMgb3V0ZGF0ZWQsIHJlbG9hZCB0aGVcbiAgICAvLyB1c2VyLlxuICAgIGF3YWl0IHVzZXIucmVsb2FkKCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEVuZHBvaW50LCBIdHRwTWV0aG9kLCBfcGVyZm9ybUFwaVJlcXVlc3QgfSBmcm9tICcuLi9pbmRleCc7XG5pbXBvcnQgeyBJZFRva2VuUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9tb2RlbC9pZF90b2tlbic7XG5pbXBvcnQgeyBBdXRoIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVQcm9maWxlUmVxdWVzdCB7XG4gIGlkVG9rZW46IHN0cmluZztcbiAgZGlzcGxheU5hbWU/OiBzdHJpbmcgfCBudWxsO1xuICBwaG90b1VybD86IHN0cmluZyB8IG51bGw7XG4gIHJldHVyblNlY3VyZVRva2VuOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZVByb2ZpbGVSZXNwb25zZSBleHRlbmRzIElkVG9rZW5SZXNwb25zZSB7XG4gIGRpc3BsYXlOYW1lPzogc3RyaW5nIHwgbnVsbDtcbiAgcGhvdG9Vcmw/OiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvZmlsZShcbiAgYXV0aDogQXV0aCxcbiAgcmVxdWVzdDogVXBkYXRlUHJvZmlsZVJlcXVlc3Rcbik6IFByb21pc2U8VXBkYXRlUHJvZmlsZVJlc3BvbnNlPiB7XG4gIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3Q8VXBkYXRlUHJvZmlsZVJlcXVlc3QsIFVwZGF0ZVByb2ZpbGVSZXNwb25zZT4oXG4gICAgYXV0aCxcbiAgICBIdHRwTWV0aG9kLlBPU1QsXG4gICAgRW5kcG9pbnQuU0VUX0FDQ09VTlRfSU5GTyxcbiAgICByZXF1ZXN0XG4gICk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcblxuaW1wb3J0IHtcbiAgdXBkYXRlRW1haWxQYXNzd29yZCBhcyBhcGlVcGRhdGVFbWFpbFBhc3N3b3JkLFxuICBVcGRhdGVFbWFpbFBhc3N3b3JkUmVxdWVzdFxufSBmcm9tICcuLi8uLi9hcGkvYWNjb3VudF9tYW5hZ2VtZW50L2VtYWlsX2FuZF9wYXNzd29yZCc7XG5pbXBvcnQgeyB1cGRhdGVQcm9maWxlIGFzIGFwaVVwZGF0ZVByb2ZpbGUgfSBmcm9tICcuLi8uLi9hcGkvYWNjb3VudF9tYW5hZ2VtZW50L3Byb2ZpbGUnO1xuaW1wb3J0IHsgVXNlckludGVybmFsIH0gZnJvbSAnLi4vLi4vbW9kZWwvdXNlcic7XG5pbXBvcnQgeyBfbG9nb3V0SWZJbnZhbGlkYXRlZCB9IGZyb20gJy4vaW52YWxpZGF0aW9uJztcbmltcG9ydCB7IGdldE1vZHVsYXJJbnN0YW5jZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFByb3ZpZGVySWQgfSBmcm9tICcuLi8uLi9tb2RlbC9lbnVtcyc7XG5cbi8qKlxuICogVXBkYXRlcyBhIHVzZXIncyBwcm9maWxlIGRhdGEuXG4gKlxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cbiAqIEBwYXJhbSBwcm9maWxlIC0gVGhlIHByb2ZpbGUncyBgZGlzcGxheU5hbWVgIGFuZCBgcGhvdG9VUkxgIHRvIHVwZGF0ZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlKFxuICB1c2VyOiBVc2VyLFxuICB7XG4gICAgZGlzcGxheU5hbWUsXG4gICAgcGhvdG9VUkw6IHBob3RvVXJsXG4gIH06IHsgZGlzcGxheU5hbWU/OiBzdHJpbmcgfCBudWxsOyBwaG90b1VSTD86IHN0cmluZyB8IG51bGwgfVxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmIChkaXNwbGF5TmFtZSA9PT0gdW5kZWZpbmVkICYmIHBob3RvVXJsID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcikgYXMgVXNlckludGVybmFsO1xuICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlckludGVybmFsLmdldElkVG9rZW4oKTtcbiAgY29uc3QgcHJvZmlsZVJlcXVlc3QgPSB7XG4gICAgaWRUb2tlbixcbiAgICBkaXNwbGF5TmFtZSxcbiAgICBwaG90b1VybCxcbiAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxuICB9O1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKFxuICAgIHVzZXJJbnRlcm5hbCxcbiAgICBhcGlVcGRhdGVQcm9maWxlKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm9maWxlUmVxdWVzdClcbiAgKTtcblxuICB1c2VySW50ZXJuYWwuZGlzcGxheU5hbWUgPSByZXNwb25zZS5kaXNwbGF5TmFtZSB8fCBudWxsO1xuICB1c2VySW50ZXJuYWwucGhvdG9VUkwgPSByZXNwb25zZS5waG90b1VybCB8fCBudWxsO1xuXG4gIC8vIFVwZGF0ZSB0aGUgcGFzc3dvcmQgcHJvdmlkZXIgYXMgd2VsbFxuICBjb25zdCBwYXNzd29yZFByb3ZpZGVyID0gdXNlckludGVybmFsLnByb3ZpZGVyRGF0YS5maW5kKFxuICAgICh7IHByb3ZpZGVySWQgfSkgPT4gcHJvdmlkZXJJZCA9PT0gUHJvdmlkZXJJZC5QQVNTV09SRFxuICApO1xuICBpZiAocGFzc3dvcmRQcm92aWRlcikge1xuICAgIHBhc3N3b3JkUHJvdmlkZXIuZGlzcGxheU5hbWUgPSB1c2VySW50ZXJuYWwuZGlzcGxheU5hbWU7XG4gICAgcGFzc3dvcmRQcm92aWRlci5waG90b1VSTCA9IHVzZXJJbnRlcm5hbC5waG90b1VSTDtcbiAgfVxuXG4gIGF3YWl0IHVzZXJJbnRlcm5hbC5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UpO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxuICpcbiAqIEByZW1hcmtzXG4gKiBBbiBlbWFpbCB3aWxsIGJlIHNlbnQgdG8gdGhlIG9yaWdpbmFsIGVtYWlsIGFkZHJlc3MgKGlmIGl0IHdhcyBzZXQpIHRoYXQgYWxsb3dzIHRvIHJldm9rZSB0aGVcbiAqIGVtYWlsIGFkZHJlc3MgY2hhbmdlLCBpbiBvcmRlciB0byBwcm90ZWN0IHRoZW0gZnJvbSBhY2NvdW50IGhpamFja2luZy5cbiAqXG4gKiBJbXBvcnRhbnQ6IHRoaXMgaXMgYSBzZWN1cml0eSBzZW5zaXRpdmUgb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSByZWNlbnRseSBzaWduZWRcbiAqIGluLiBJZiB0aGlzIHJlcXVpcmVtZW50IGlzbid0IG1ldCwgYXNrIHRoZSB1c2VyIHRvIGF1dGhlbnRpY2F0ZSBhZ2FpbiBhbmQgdGhlbiBjYWxsXG4gKiB7QGxpbmsgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbH0uXG4gKlxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cbiAqIEBwYXJhbSBuZXdFbWFpbCAtIFRoZSBuZXcgZW1haWwgYWRkcmVzcy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVFbWFpbCh1c2VyOiBVc2VyLCBuZXdFbWFpbDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIHJldHVybiB1cGRhdGVFbWFpbE9yUGFzc3dvcmQoXG4gICAgZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpIGFzIFVzZXJJbnRlcm5hbCxcbiAgICBuZXdFbWFpbCxcbiAgICBudWxsXG4gICk7XG59XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgdXNlcidzIHBhc3N3b3JkLlxuICpcbiAqIEByZW1hcmtzXG4gKiBJbXBvcnRhbnQ6IHRoaXMgaXMgYSBzZWN1cml0eSBzZW5zaXRpdmUgb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSByZWNlbnRseSBzaWduZWRcbiAqIGluLiBJZiB0aGlzIHJlcXVpcmVtZW50IGlzbid0IG1ldCwgYXNrIHRoZSB1c2VyIHRvIGF1dGhlbnRpY2F0ZSBhZ2FpbiBhbmQgdGhlbiBjYWxsXG4gKiB7QGxpbmsgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbH0uXG4gKlxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cbiAqIEBwYXJhbSBuZXdQYXNzd29yZCAtIFRoZSBuZXcgcGFzc3dvcmQuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUGFzc3dvcmQodXNlcjogVXNlciwgbmV3UGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICByZXR1cm4gdXBkYXRlRW1haWxPclBhc3N3b3JkKFxuICAgIGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSBhcyBVc2VySW50ZXJuYWwsXG4gICAgbnVsbCxcbiAgICBuZXdQYXNzd29yZFxuICApO1xufVxuXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVFbWFpbE9yUGFzc3dvcmQoXG4gIHVzZXI6IFVzZXJJbnRlcm5hbCxcbiAgZW1haWw6IHN0cmluZyB8IG51bGwsXG4gIHBhc3N3b3JkOiBzdHJpbmcgfCBudWxsXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeyBhdXRoIH0gPSB1c2VyO1xuICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XG4gIGNvbnN0IHJlcXVlc3Q6IFVwZGF0ZUVtYWlsUGFzc3dvcmRSZXF1ZXN0ID0ge1xuICAgIGlkVG9rZW4sXG4gICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcbiAgfTtcblxuICBpZiAoZW1haWwpIHtcbiAgICByZXF1ZXN0LmVtYWlsID0gZW1haWw7XG4gIH1cblxuICBpZiAocGFzc3dvcmQpIHtcbiAgICByZXF1ZXN0LnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gIH1cblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKFxuICAgIHVzZXIsXG4gICAgYXBpVXBkYXRlRW1haWxQYXNzd29yZChhdXRoLCByZXF1ZXN0KVxuICApO1xuICBhd2FpdCB1c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSwgLyogcmVsb2FkICovIHRydWUpO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQWRkaXRpb25hbFVzZXJJbmZvLCBVc2VyQ3JlZGVudGlhbCB9IGZyb20gJy4uLy4uL21vZGVsL3B1YmxpY190eXBlcyc7XG5pbXBvcnQgeyBJZFRva2VuUmVzcG9uc2UsIElkVG9rZW5SZXNwb25zZUtpbmQgfSBmcm9tICcuLi8uLi9tb2RlbC9pZF90b2tlbic7XG5pbXBvcnQgeyBfcGFyc2VUb2tlbiB9IGZyb20gJy4vaWRfdG9rZW5fcmVzdWx0JztcbmltcG9ydCB7IFVzZXJDcmVkZW50aWFsSW50ZXJuYWwgfSBmcm9tICcuLi8uLi9tb2RlbC91c2VyJztcbmltcG9ydCB7IFByb3ZpZGVySWQgfSBmcm9tICcuLi8uLi9tb2RlbC9lbnVtcyc7XG5cbi8qKlxuICogUGFyc2UgdGhlIGBBZGRpdGlvbmFsVXNlckluZm9gIGZyb20gdGhlIElEIHRva2VuIHJlc3BvbnNlLlxuICpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9mcm9tSWRUb2tlblJlc3BvbnNlKFxuICBpZFRva2VuUmVzcG9uc2U/OiBJZFRva2VuUmVzcG9uc2Vcbik6IEFkZGl0aW9uYWxVc2VySW5mbyB8IG51bGwge1xuICBpZiAoIWlkVG9rZW5SZXNwb25zZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHsgcHJvdmlkZXJJZCB9ID0gaWRUb2tlblJlc3BvbnNlO1xuICBjb25zdCBwcm9maWxlID0gaWRUb2tlblJlc3BvbnNlLnJhd1VzZXJJbmZvXG4gICAgPyBKU09OLnBhcnNlKGlkVG9rZW5SZXNwb25zZS5yYXdVc2VySW5mbylcbiAgICA6IHt9O1xuICBjb25zdCBpc05ld1VzZXIgPVxuICAgIGlkVG9rZW5SZXNwb25zZS5pc05ld1VzZXIgfHxcbiAgICBpZFRva2VuUmVzcG9uc2Uua2luZCA9PT0gSWRUb2tlblJlc3BvbnNlS2luZC5TaWdudXBOZXdVc2VyO1xuICBpZiAoIXByb3ZpZGVySWQgJiYgaWRUb2tlblJlc3BvbnNlPy5pZFRva2VuKSB7XG4gICAgY29uc3Qgc2lnbkluUHJvdmlkZXIgPSBfcGFyc2VUb2tlbihpZFRva2VuUmVzcG9uc2UuaWRUb2tlbik/LmZpcmViYXNlPy5bXG4gICAgICAnc2lnbl9pbl9wcm92aWRlcidcbiAgICBdO1xuICAgIGlmIChzaWduSW5Qcm92aWRlcikge1xuICAgICAgY29uc3QgZmlsdGVyZWRQcm92aWRlcklkID1cbiAgICAgICAgc2lnbkluUHJvdmlkZXIgIT09IFByb3ZpZGVySWQuQU5PTllNT1VTICYmXG4gICAgICAgIHNpZ25JblByb3ZpZGVyICE9PSBQcm92aWRlcklkLkNVU1RPTVxuICAgICAgICAgID8gKHNpZ25JblByb3ZpZGVyIGFzIFByb3ZpZGVySWQpXG4gICAgICAgICAgOiBudWxsO1xuICAgICAgLy8gVXNlcyBnZW5lcmljIGNsYXNzIGluIGFjY29yZGFuY2Ugd2l0aCB0aGUgbGVnYWN5IFNESy5cbiAgICAgIHJldHVybiBuZXcgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIGZpbHRlcmVkUHJvdmlkZXJJZCk7XG4gICAgfVxuICB9XG4gIGlmICghcHJvdmlkZXJJZCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHN3aXRjaCAocHJvdmlkZXJJZCkge1xuICAgIGNhc2UgUHJvdmlkZXJJZC5GQUNFQk9PSzpcbiAgICAgIHJldHVybiBuZXcgRmFjZWJvb2tBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlKTtcbiAgICBjYXNlIFByb3ZpZGVySWQuR0lUSFVCOlxuICAgICAgcmV0dXJuIG5ldyBHaXRodWJBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlKTtcbiAgICBjYXNlIFByb3ZpZGVySWQuR09PR0xFOlxuICAgICAgcmV0dXJuIG5ldyBHb29nbGVBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlKTtcbiAgICBjYXNlIFByb3ZpZGVySWQuVFdJVFRFUjpcbiAgICAgIHJldHVybiBuZXcgVHdpdHRlckFkZGl0aW9uYWxVc2VySW5mbyhcbiAgICAgICAgaXNOZXdVc2VyLFxuICAgICAgICBwcm9maWxlLFxuICAgICAgICBpZFRva2VuUmVzcG9uc2Uuc2NyZWVuTmFtZSB8fCBudWxsXG4gICAgICApO1xuICAgIGNhc2UgUHJvdmlkZXJJZC5DVVNUT006XG4gICAgY2FzZSBQcm92aWRlcklkLkFOT05ZTU9VUzpcbiAgICAgIHJldHVybiBuZXcgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIG51bGwpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbmV3IEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlKTtcbiAgfVxufVxuXG5jbGFzcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIGltcGxlbWVudHMgQWRkaXRpb25hbFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcmVhZG9ubHkgaXNOZXdVc2VyOiBib29sZWFuLFxuICAgIHJlYWRvbmx5IHByb3ZpZGVySWQ6IFByb3ZpZGVySWQgfCBzdHJpbmcgfCBudWxsLFxuICAgIHJlYWRvbmx5IHByb2ZpbGU6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge31cbiAgKSB7fVxufVxuXG5jbGFzcyBGZWRlcmF0ZWRBZGRpdGlvbmFsVXNlckluZm9XaXRoVXNlcm5hbWUgZXh0ZW5kcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoXG4gICAgaXNOZXdVc2VyOiBib29sZWFuLFxuICAgIHByb3ZpZGVySWQ6IFByb3ZpZGVySWQsXG4gICAgcHJvZmlsZTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gICAgcmVhZG9ubHkgdXNlcm5hbWU6IHN0cmluZyB8IG51bGxcbiAgKSB7XG4gICAgc3VwZXIoaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlKTtcbiAgfVxufVxuXG5jbGFzcyBGYWNlYm9va0FkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcihpc05ld1VzZXI6IGJvb2xlYW4sIHByb2ZpbGU6IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSB7XG4gICAgc3VwZXIoaXNOZXdVc2VyLCBQcm92aWRlcklkLkZBQ0VCT09LLCBwcm9maWxlKTtcbiAgfVxufVxuXG5jbGFzcyBHaXRodWJBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBGZWRlcmF0ZWRBZGRpdGlvbmFsVXNlckluZm9XaXRoVXNlcm5hbWUge1xuICBjb25zdHJ1Y3Rvcihpc05ld1VzZXI6IGJvb2xlYW4sIHByb2ZpbGU6IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSB7XG4gICAgc3VwZXIoXG4gICAgICBpc05ld1VzZXIsXG4gICAgICBQcm92aWRlcklkLkdJVEhVQixcbiAgICAgIHByb2ZpbGUsXG4gICAgICB0eXBlb2YgcHJvZmlsZT8ubG9naW4gPT09ICdzdHJpbmcnID8gcHJvZmlsZT8ubG9naW4gOiBudWxsXG4gICAgKTtcbiAgfVxufVxuXG5jbGFzcyBHb29nbGVBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoaXNOZXdVc2VyOiBib29sZWFuLCBwcm9maWxlOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikge1xuICAgIHN1cGVyKGlzTmV3VXNlciwgUHJvdmlkZXJJZC5HT09HTEUsIHByb2ZpbGUpO1xuICB9XG59XG5cbmNsYXNzIFR3aXR0ZXJBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBGZWRlcmF0ZWRBZGRpdGlvbmFsVXNlckluZm9XaXRoVXNlcm5hbWUge1xuICBjb25zdHJ1Y3RvcihcbiAgICBpc05ld1VzZXI6IGJvb2xlYW4sXG4gICAgcHJvZmlsZTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gICAgc2NyZWVuTmFtZTogc3RyaW5nIHwgbnVsbFxuICApIHtcbiAgICBzdXBlcihpc05ld1VzZXIsIFByb3ZpZGVySWQuVFdJVFRFUiwgcHJvZmlsZSwgc2NyZWVuTmFtZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0cyBwcm92aWRlciBzcGVjaWZpYyB7QGxpbmsgQWRkaXRpb25hbFVzZXJJbmZvfSBmb3IgdGhlIGdpdmVuIGNyZWRlbnRpYWwuXG4gKlxuICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBZGRpdGlvbmFsVXNlckluZm8oXG4gIHVzZXJDcmVkZW50aWFsOiBVc2VyQ3JlZGVudGlhbFxuKTogQWRkaXRpb25hbFVzZXJJbmZvIHwgbnVsbCB7XG4gIGNvbnN0IHsgdXNlciwgX3Rva2VuUmVzcG9uc2UgfSA9IHVzZXJDcmVkZW50aWFsIGFzIFVzZXJDcmVkZW50aWFsSW50ZXJuYWw7XG4gIGlmICh1c2VyLmlzQW5vbnltb3VzICYmICFfdG9rZW5SZXNwb25zZSkge1xuICAgIC8vIEhhbmRsZSB0aGUgc3BlY2lhbCBjYXNlIHdoZXJlIHNpZ25JbkFub255bW91c2x5KCkgZ2V0cyBjYWxsZWQgdHdpY2UuXG4gICAgLy8gTm8gbmV0d29yayBjYWxsIGlzIG1hZGUgc28gdGhlcmUncyBub3RoaW5nIHRvIGFjdHVhbGx5IGZpbGwgdGhpcyBpblxuICAgIHJldHVybiB7XG4gICAgICBwcm92aWRlcklkOiBudWxsLFxuICAgICAgaXNOZXdVc2VyOiBmYWxzZSxcbiAgICAgIHByb2ZpbGU6IG51bGxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIF9mcm9tSWRUb2tlblJlc3BvbnNlKF90b2tlblJlc3BvbnNlKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGdldE1vZHVsYXJJbnN0YW5jZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7XG4gIEF1dGgsXG4gIE5leHRPck9ic2VydmVyLFxuICBQZXJzaXN0ZW5jZSxcbiAgVXNlcixcbiAgQ29tcGxldGVGbixcbiAgRXJyb3JGbixcbiAgVW5zdWJzY3JpYmVcbn0gZnJvbSAnLi4vbW9kZWwvcHVibGljX3R5cGVzJztcbmltcG9ydCB7IF9jYXN0QXV0aCB9IGZyb20gJy4uL2NvcmUvYXV0aC9hdXRoX2ltcGwnO1xuXG5leHBvcnQge1xuICBkZWJ1Z0Vycm9yTWFwLFxuICBwcm9kRXJyb3JNYXAsXG4gIEFVVEhfRVJST1JfQ09ERVNfTUFQX0RPX05PVF9VU0VfSU5URVJOQUxMWSBhcyBBdXRoRXJyb3JDb2Rlc1xufSBmcm9tICcuL2Vycm9ycyc7XG5cbi8vIE5vbi1vcHRpb25hbCBhdXRoIG1ldGhvZHMuXG4vKipcbiAqIENoYW5nZXMgdGhlIHR5cGUgb2YgcGVyc2lzdGVuY2Ugb24gdGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSBmb3IgdGhlIGN1cnJlbnRseSBzYXZlZFxuICogYEF1dGhgIHNlc3Npb24gYW5kIGFwcGxpZXMgdGhpcyB0eXBlIG9mIHBlcnNpc3RlbmNlIGZvciBmdXR1cmUgc2lnbi1pbiByZXF1ZXN0cywgaW5jbHVkaW5nXG4gKiBzaWduLWluIHdpdGggcmVkaXJlY3QgcmVxdWVzdHMuXG4gKlxuICogQHJlbWFya3NcbiAqIFRoaXMgbWFrZXMgaXQgZWFzeSBmb3IgYSB1c2VyIHNpZ25pbmcgaW4gdG8gc3BlY2lmeSB3aGV0aGVyIHRoZWlyIHNlc3Npb24gc2hvdWxkIGJlXG4gKiByZW1lbWJlcmVkIG9yIG5vdC4gSXQgYWxzbyBtYWtlcyBpdCBlYXNpZXIgdG8gbmV2ZXIgcGVyc2lzdCB0aGUgYEF1dGhgIHN0YXRlIGZvciBhcHBsaWNhdGlvbnNcbiAqIHRoYXQgYXJlIHNoYXJlZCBieSBvdGhlciB1c2VycyBvciBoYXZlIHNlbnNpdGl2ZSBkYXRhLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBzZXRQZXJzaXN0ZW5jZShhdXRoLCBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBwZXJzaXN0ZW5jZSAtIFRoZSB7QGxpbmsgUGVyc2lzdGVuY2V9IHRvIHVzZS5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgb25jZSB0aGUgcGVyc2lzdGVuY2UgY2hhbmdlIGhhcyBjb21wbGV0ZWRcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRQZXJzaXN0ZW5jZShcbiAgYXV0aDogQXV0aCxcbiAgcGVyc2lzdGVuY2U6IFBlcnNpc3RlbmNlXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5zZXRQZXJzaXN0ZW5jZShwZXJzaXN0ZW5jZSk7XG59XG5cbi8qKlxuICogTG9hZHMgdGhlIHJlQ0FQVENIQSBjb25maWd1cmF0aW9uIGludG8gdGhlIGBBdXRoYCBpbnN0YW5jZS5cbiAqXG4gKiBAcmVtYXJrc1xuICogVGhpcyB3aWxsIGxvYWQgdGhlIHJlQ0FQVENIQSBjb25maWcsIHdoaWNoIGluZGljYXRlcyB3aGV0aGVyIHRoZSByZUNBUFRDSEFcbiAqIHZlcmlmaWNhdGlvbiBmbG93IHNob3VsZCBiZSB0cmlnZ2VyZWQgZm9yIGVhY2ggYXV0aCBwcm92aWRlciwgaW50byB0aGVcbiAqIGN1cnJlbnQgQXV0aCBzZXNzaW9uLlxuICpcbiAqIElmIGluaXRpYWxpemVSZWNhcHRjaGFDb25maWcoKSBpcyBub3QgaW52b2tlZCwgdGhlIGF1dGggZmxvdyB3aWxsIGFsd2F5cyBzdGFydFxuICogd2l0aG91dCByZUNBUFRDSEEgdmVyaWZpY2F0aW9uLiBJZiB0aGUgcHJvdmlkZXIgaXMgY29uZmlndXJlZCB0byByZXF1aXJlIHJlQ0FQVENIQVxuICogdmVyaWZpY2F0aW9uLCB0aGUgU0RLIHdpbGwgdHJhbnNwYXJlbnRseSBsb2FkIHRoZSByZUNBUFRDSEEgY29uZmlnIGFuZCByZXN0YXJ0IHRoZVxuICogYXV0aCBmbG93cy5cbiAqXG4gKiBUaHVzLCBieSBjYWxsaW5nIHRoaXMgb3B0aW9uYWwgbWV0aG9kLCB5b3Ugd2lsbCByZWR1Y2UgdGhlIGxhdGVuY3kgb2YgZnV0dXJlIGF1dGggZmxvd3MuXG4gKiBMb2FkaW5nIHRoZSByZUNBUFRDSEEgY29uZmlnIGVhcmx5IHdpbGwgYWxzbyBlbmhhbmNlIHRoZSBzaWduYWwgY29sbGVjdGVkIGJ5IHJlQ0FQVENIQS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgamF2YXNjcmlwdFxuICogaW5pdGlhbGl6ZVJlY2FwdGNoYUNvbmZpZyhhdXRoKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplUmVjYXB0Y2hhQ29uZmlnKGF1dGg6IEF1dGgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xuICByZXR1cm4gYXV0aEludGVybmFsLmluaXRpYWxpemVSZWNhcHRjaGFDb25maWcoKTtcbn1cblxuLyoqXG4gKiBBZGRzIGFuIG9ic2VydmVyIGZvciBjaGFuZ2VzIHRvIHRoZSBzaWduZWQtaW4gdXNlcidzIElEIHRva2VuLlxuICpcbiAqIEByZW1hcmtzXG4gKiBUaGlzIGluY2x1ZGVzIHNpZ24taW4sIHNpZ24tb3V0LCBhbmQgdG9rZW4gcmVmcmVzaCBldmVudHMuXG4gKiBUaGlzIHdpbGwgbm90IGJlIHRyaWdnZXJlZCBhdXRvbWF0aWNhbGx5IHVwb24gSUQgdG9rZW4gZXhwaXJhdGlvbi4gVXNlIHtAbGluayBVc2VyLmdldElkVG9rZW59IHRvIHJlZnJlc2ggdGhlIElEIHRva2VuLlxuICpcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBuZXh0T3JPYnNlcnZlciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBjaGFuZ2UuXG4gKiBAcGFyYW0gZXJyb3IgLSBEZXByZWNhdGVkLiBUaGlzIGNhbGxiYWNrIGlzIG5ldmVyIHRyaWdnZXJlZC4gRXJyb3JzXG4gKiBvbiBzaWduaW5nIGluL291dCBjYW4gYmUgY2F1Z2h0IGluIHByb21pc2VzIHJldHVybmVkIGZyb21cbiAqIHNpZ24taW4vc2lnbi1vdXQgZnVuY3Rpb25zLlxuICogQHBhcmFtIGNvbXBsZXRlZCAtIERlcHJlY2F0ZWQuIFRoaXMgY2FsbGJhY2sgaXMgbmV2ZXIgdHJpZ2dlcmVkLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9uSWRUb2tlbkNoYW5nZWQoXG4gIGF1dGg6IEF1dGgsXG4gIG5leHRPck9ic2VydmVyOiBOZXh0T3JPYnNlcnZlcjxVc2VyPixcbiAgZXJyb3I/OiBFcnJvckZuLFxuICBjb21wbGV0ZWQ/OiBDb21wbGV0ZUZuXG4pOiBVbnN1YnNjcmliZSB7XG4gIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkub25JZFRva2VuQ2hhbmdlZChcbiAgICBuZXh0T3JPYnNlcnZlcixcbiAgICBlcnJvcixcbiAgICBjb21wbGV0ZWRcbiAgKTtcbn1cbi8qKlxuICogQWRkcyBhIGJsb2NraW5nIGNhbGxiYWNrIHRoYXQgcnVucyBiZWZvcmUgYW4gYXV0aCBzdGF0ZSBjaGFuZ2VcbiAqIHNldHMgYSBuZXcgdXNlci5cbiAqXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXG4gKiBAcGFyYW0gY2FsbGJhY2sgLSBjYWxsYmFjayB0cmlnZ2VyZWQgYmVmb3JlIG5ldyB1c2VyIHZhbHVlIGlzIHNldC5cbiAqICAgSWYgdGhpcyB0aHJvd3MsIGl0IGJsb2NrcyB0aGUgdXNlciBmcm9tIGJlaW5nIHNldC5cbiAqIEBwYXJhbSBvbkFib3J0IC0gY2FsbGJhY2sgdHJpZ2dlcmVkIGlmIGEgbGF0ZXIgYGJlZm9yZUF1dGhTdGF0ZUNoYW5nZWQoKWBcbiAqICAgY2FsbGJhY2sgdGhyb3dzLCBhbGxvd2luZyB5b3UgdG8gdW5kbyBhbnkgc2lkZSBlZmZlY3RzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYmVmb3JlQXV0aFN0YXRlQ2hhbmdlZChcbiAgYXV0aDogQXV0aCxcbiAgY2FsbGJhY2s6ICh1c2VyOiBVc2VyIHwgbnVsbCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4sXG4gIG9uQWJvcnQ/OiAoKSA9PiB2b2lkXG4pOiBVbnN1YnNjcmliZSB7XG4gIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkuYmVmb3JlQXV0aFN0YXRlQ2hhbmdlZChjYWxsYmFjaywgb25BYm9ydCk7XG59XG4vKipcbiAqIEFkZHMgYW4gb2JzZXJ2ZXIgZm9yIGNoYW5nZXMgdG8gdGhlIHVzZXIncyBzaWduLWluIHN0YXRlLlxuICpcbiAqIEByZW1hcmtzXG4gKiBUbyBrZWVwIHRoZSBvbGQgYmVoYXZpb3IsIHNlZSB7QGxpbmsgb25JZFRva2VuQ2hhbmdlZH0uXG4gKlxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxuICogQHBhcmFtIG5leHRPck9ic2VydmVyIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIG9uIGNoYW5nZS5cbiAqIEBwYXJhbSBlcnJvciAtIERlcHJlY2F0ZWQuIFRoaXMgY2FsbGJhY2sgaXMgbmV2ZXIgdHJpZ2dlcmVkLiBFcnJvcnNcbiAqIG9uIHNpZ25pbmcgaW4vb3V0IGNhbiBiZSBjYXVnaHQgaW4gcHJvbWlzZXMgcmV0dXJuZWQgZnJvbVxuICogc2lnbi1pbi9zaWduLW91dCBmdW5jdGlvbnMuXG4gKiBAcGFyYW0gY29tcGxldGVkIC0gRGVwcmVjYXRlZC4gVGhpcyBjYWxsYmFjayBpcyBuZXZlciB0cmlnZ2VyZWQuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gb25BdXRoU3RhdGVDaGFuZ2VkKFxuICBhdXRoOiBBdXRoLFxuICBuZXh0T3JPYnNlcnZlcjogTmV4dE9yT2JzZXJ2ZXI8VXNlcj4sXG4gIGVycm9yPzogRXJyb3JGbixcbiAgY29tcGxldGVkPzogQ29tcGxldGVGblxuKTogVW5zdWJzY3JpYmUge1xuICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLm9uQXV0aFN0YXRlQ2hhbmdlZChcbiAgICBuZXh0T3JPYnNlcnZlcixcbiAgICBlcnJvcixcbiAgICBjb21wbGV0ZWRcbiAgKTtcbn1cbi8qKlxuICogU2V0cyB0aGUgY3VycmVudCBsYW5ndWFnZSB0byB0aGUgZGVmYXVsdCBkZXZpY2UvYnJvd3NlciBwcmVmZXJlbmNlLlxuICpcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VEZXZpY2VMYW5ndWFnZShhdXRoOiBBdXRoKTogdm9pZCB7XG4gIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS51c2VEZXZpY2VMYW5ndWFnZSgpO1xufVxuLyoqXG4gKiBBc3luY2hyb25vdXNseSBzZXRzIHRoZSBwcm92aWRlZCB1c2VyIGFzIHtAbGluayBBdXRoLmN1cnJlbnRVc2VyfSBvbiB0aGVcbiAqIHtAbGluayBBdXRofSBpbnN0YW5jZS5cbiAqXG4gKiBAcmVtYXJrc1xuICogQSBuZXcgaW5zdGFuY2UgY29weSBvZiB0aGUgdXNlciBwcm92aWRlZCB3aWxsIGJlIG1hZGUgYW5kIHNldCBhcyBjdXJyZW50VXNlci5cbiAqXG4gKiBUaGlzIHdpbGwgdHJpZ2dlciB7QGxpbmsgb25BdXRoU3RhdGVDaGFuZ2VkfSBhbmQge0BsaW5rIG9uSWRUb2tlbkNoYW5nZWR9IGxpc3RlbmVyc1xuICogbGlrZSBvdGhlciBzaWduIGluIG1ldGhvZHMuXG4gKlxuICogVGhlIG9wZXJhdGlvbiBmYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSB1c2VyIHRvIGJlIHVwZGF0ZWQgYmVsb25ncyB0byBhIGRpZmZlcmVudCBGaXJlYmFzZVxuICogcHJvamVjdC5cbiAqXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXG4gKiBAcGFyYW0gdXNlciAtIFRoZSBuZXcge0BsaW5rIFVzZXJ9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnRVc2VyKFxuICBhdXRoOiBBdXRoLFxuICB1c2VyOiBVc2VyIHwgbnVsbFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkudXBkYXRlQ3VycmVudFVzZXIodXNlcik7XG59XG4vKipcbiAqIFNpZ25zIG91dCB0aGUgY3VycmVudCB1c2VyLlxuICpcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaWduT3V0KGF1dGg6IEF1dGgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5zaWduT3V0KCk7XG59XG5cbmV4cG9ydCB7IGluaXRpYWxpemVBdXRoIH0gZnJvbSAnLi9hdXRoL2luaXRpYWxpemUnO1xuZXhwb3J0IHsgY29ubmVjdEF1dGhFbXVsYXRvciB9IGZyb20gJy4vYXV0aC9lbXVsYXRvcic7XG5cbi8vIGNyZWRlbnRpYWxzXG5leHBvcnQgeyBBdXRoQ3JlZGVudGlhbCB9IGZyb20gJy4vY3JlZGVudGlhbHMnO1xuZXhwb3J0IHsgRW1haWxBdXRoQ3JlZGVudGlhbCB9IGZyb20gJy4vY3JlZGVudGlhbHMvZW1haWwnO1xuZXhwb3J0IHsgT0F1dGhDcmVkZW50aWFsIH0gZnJvbSAnLi9jcmVkZW50aWFscy9vYXV0aCc7XG5leHBvcnQgeyBQaG9uZUF1dGhDcmVkZW50aWFsIH0gZnJvbSAnLi9jcmVkZW50aWFscy9waG9uZSc7XG5cbi8vIHBlcnNpc3RlbmNlXG5leHBvcnQgeyBpbk1lbW9yeVBlcnNpc3RlbmNlIH0gZnJvbSAnLi9wZXJzaXN0ZW5jZS9pbl9tZW1vcnknO1xuXG4vLyBwcm92aWRlcnNcbmV4cG9ydCB7IEVtYWlsQXV0aFByb3ZpZGVyIH0gZnJvbSAnLi9wcm92aWRlcnMvZW1haWwnO1xuZXhwb3J0IHsgRmFjZWJvb2tBdXRoUHJvdmlkZXIgfSBmcm9tICcuL3Byb3ZpZGVycy9mYWNlYm9vayc7XG5leHBvcnQgeyBDdXN0b21QYXJhbWV0ZXJzIH0gZnJvbSAnLi9wcm92aWRlcnMvZmVkZXJhdGVkJztcbmV4cG9ydCB7IEdvb2dsZUF1dGhQcm92aWRlciB9IGZyb20gJy4vcHJvdmlkZXJzL2dvb2dsZSc7XG5leHBvcnQgeyBHaXRodWJBdXRoUHJvdmlkZXIgfSBmcm9tICcuL3Byb3ZpZGVycy9naXRodWInO1xuZXhwb3J0IHsgT0F1dGhQcm92aWRlciwgT0F1dGhDcmVkZW50aWFsT3B0aW9ucyB9IGZyb20gJy4vcHJvdmlkZXJzL29hdXRoJztcbmV4cG9ydCB7IFNBTUxBdXRoUHJvdmlkZXIgfSBmcm9tICcuL3Byb3ZpZGVycy9zYW1sJztcbmV4cG9ydCB7IFR3aXR0ZXJBdXRoUHJvdmlkZXIgfSBmcm9tICcuL3Byb3ZpZGVycy90d2l0dGVyJztcblxuLy8gc3RyYXRlZ2llc1xuZXhwb3J0IHsgc2lnbkluQW5vbnltb3VzbHkgfSBmcm9tICcuL3N0cmF0ZWdpZXMvYW5vbnltb3VzJztcbmV4cG9ydCB7XG4gIHNpZ25JbldpdGhDcmVkZW50aWFsLFxuICBsaW5rV2l0aENyZWRlbnRpYWwsXG4gIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWxcbn0gZnJvbSAnLi9zdHJhdGVnaWVzL2NyZWRlbnRpYWwnO1xuZXhwb3J0IHsgc2lnbkluV2l0aEN1c3RvbVRva2VuIH0gZnJvbSAnLi9zdHJhdGVnaWVzL2N1c3RvbV90b2tlbic7XG5leHBvcnQge1xuICBzZW5kUGFzc3dvcmRSZXNldEVtYWlsLFxuICBjb25maXJtUGFzc3dvcmRSZXNldCxcbiAgYXBwbHlBY3Rpb25Db2RlLFxuICBjaGVja0FjdGlvbkNvZGUsXG4gIHZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlLFxuICBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQsXG4gIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkXG59IGZyb20gJy4vc3RyYXRlZ2llcy9lbWFpbF9hbmRfcGFzc3dvcmQnO1xuZXhwb3J0IHtcbiAgc2VuZFNpZ25JbkxpbmtUb0VtYWlsLFxuICBpc1NpZ25JbldpdGhFbWFpbExpbmssXG4gIHNpZ25JbldpdGhFbWFpbExpbmtcbn0gZnJvbSAnLi9zdHJhdGVnaWVzL2VtYWlsX2xpbmsnO1xuZXhwb3J0IHtcbiAgZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwsXG4gIHNlbmRFbWFpbFZlcmlmaWNhdGlvbixcbiAgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWxcbn0gZnJvbSAnLi9zdHJhdGVnaWVzL2VtYWlsJztcblxuLy8gY29yZVxuZXhwb3J0IHsgQWN0aW9uQ29kZVVSTCwgcGFyc2VBY3Rpb25Db2RlVVJMIH0gZnJvbSAnLi9hY3Rpb25fY29kZV91cmwnO1xuXG4vLyB1c2VyXG5leHBvcnQge1xuICB1cGRhdGVQcm9maWxlLFxuICB1cGRhdGVFbWFpbCxcbiAgdXBkYXRlUGFzc3dvcmRcbn0gZnJvbSAnLi91c2VyL2FjY291bnRfaW5mbyc7XG5leHBvcnQgeyBnZXRJZFRva2VuLCBnZXRJZFRva2VuUmVzdWx0IH0gZnJvbSAnLi91c2VyL2lkX3Rva2VuX3Jlc3VsdCc7XG5leHBvcnQgeyB1bmxpbmsgfSBmcm9tICcuL3VzZXIvbGlua191bmxpbmsnO1xuZXhwb3J0IHsgZ2V0QWRkaXRpb25hbFVzZXJJbmZvIH0gZnJvbSAnLi91c2VyL2FkZGl0aW9uYWxfdXNlcl9pbmZvJztcblxuLy8gTm9uLW9wdGlvbmFsIHVzZXIgbWV0aG9kcy5cbmV4cG9ydCB7IHJlbG9hZCB9IGZyb20gJy4vdXNlci9yZWxvYWQnO1xuLyoqXG4gKiBEZWxldGVzIGFuZCBzaWducyBvdXQgdGhlIHVzZXIuXG4gKlxuICogQHJlbWFya3NcbiAqIEltcG9ydGFudDogdGhpcyBpcyBhIHNlY3VyaXR5LXNlbnNpdGl2ZSBvcGVyYXRpb24gdGhhdCByZXF1aXJlcyB0aGUgdXNlciB0byBoYXZlIHJlY2VudGx5XG4gKiBzaWduZWQgaW4uIElmIHRoaXMgcmVxdWlyZW1lbnQgaXNuJ3QgbWV0LCBhc2sgdGhlIHVzZXIgdG8gYXV0aGVudGljYXRlIGFnYWluIGFuZCB0aGVuIGNhbGxcbiAqIHtAbGluayByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsfS5cbiAqXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVVzZXIodXNlcjogVXNlcik6IFByb21pc2U8dm9pZD4ge1xuICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLmRlbGV0ZSgpO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IEF1dGhJbnRlcm5hbCB9IGZyb20gJy4uL21vZGVsL2F1dGgnO1xuaW1wb3J0IHsgTXVsdGlGYWN0b3JTZXNzaW9uIH0gZnJvbSAnLi4vbW9kZWwvcHVibGljX3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IGVudW0gTXVsdGlGYWN0b3JTZXNzaW9uVHlwZSB7XG4gIEVOUk9MTCA9ICdlbnJvbGwnLFxuICBTSUdOX0lOID0gJ3NpZ25pbidcbn1cblxuaW50ZXJmYWNlIFNlcmlhbGl6ZWRNdWx0aUZhY3RvclNlc3Npb24ge1xuICBtdWx0aUZhY3RvclNlc3Npb246IHtcbiAgICBpZFRva2VuPzogc3RyaW5nO1xuICAgIHBlbmRpbmdDcmVkZW50aWFsPzogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbCBpbXBsZW1lbnRzIE11bHRpRmFjdG9yU2Vzc2lvbiB7XG4gIHByaXZhdGUgY29uc3RydWN0b3IoXG4gICAgcmVhZG9ubHkgdHlwZTogTXVsdGlGYWN0b3JTZXNzaW9uVHlwZSxcbiAgICByZWFkb25seSBjcmVkZW50aWFsOiBzdHJpbmcsXG4gICAgcmVhZG9ubHkgYXV0aD86IEF1dGhJbnRlcm5hbFxuICApIHt9XG5cbiAgc3RhdGljIF9mcm9tSWR0b2tlbihcbiAgICBpZFRva2VuOiBzdHJpbmcsXG4gICAgYXV0aD86IEF1dGhJbnRlcm5hbFxuICApOiBNdWx0aUZhY3RvclNlc3Npb25JbXBsIHtcbiAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yU2Vzc2lvbkltcGwoXG4gICAgICBNdWx0aUZhY3RvclNlc3Npb25UeXBlLkVOUk9MTCxcbiAgICAgIGlkVG9rZW4sXG4gICAgICBhdXRoXG4gICAgKTtcbiAgfVxuXG4gIHN0YXRpYyBfZnJvbU1mYVBlbmRpbmdDcmVkZW50aWFsKFxuICAgIG1mYVBlbmRpbmdDcmVkZW50aWFsOiBzdHJpbmdcbiAgKTogTXVsdGlGYWN0b3JTZXNzaW9uSW1wbCB7XG4gICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvclNlc3Npb25JbXBsKFxuICAgICAgTXVsdGlGYWN0b3JTZXNzaW9uVHlwZS5TSUdOX0lOLFxuICAgICAgbWZhUGVuZGluZ0NyZWRlbnRpYWxcbiAgICApO1xuICB9XG5cbiAgdG9KU09OKCk6IFNlcmlhbGl6ZWRNdWx0aUZhY3RvclNlc3Npb24ge1xuICAgIGNvbnN0IGtleSA9XG4gICAgICB0aGlzLnR5cGUgPT09IE11bHRpRmFjdG9yU2Vzc2lvblR5cGUuRU5ST0xMXG4gICAgICAgID8gJ2lkVG9rZW4nXG4gICAgICAgIDogJ3BlbmRpbmdDcmVkZW50aWFsJztcbiAgICByZXR1cm4ge1xuICAgICAgbXVsdGlGYWN0b3JTZXNzaW9uOiB7XG4gICAgICAgIFtrZXldOiB0aGlzLmNyZWRlbnRpYWxcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgc3RhdGljIGZyb21KU09OKFxuICAgIG9iajogUGFydGlhbDxTZXJpYWxpemVkTXVsdGlGYWN0b3JTZXNzaW9uPlxuICApOiBNdWx0aUZhY3RvclNlc3Npb25JbXBsIHwgbnVsbCB7XG4gICAgaWYgKG9iaj8ubXVsdGlGYWN0b3JTZXNzaW9uKSB7XG4gICAgICBpZiAob2JqLm11bHRpRmFjdG9yU2Vzc2lvbj8ucGVuZGluZ0NyZWRlbnRpYWwpIHtcbiAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21NZmFQZW5kaW5nQ3JlZGVudGlhbChcbiAgICAgICAgICBvYmoubXVsdGlGYWN0b3JTZXNzaW9uLnBlbmRpbmdDcmVkZW50aWFsXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKG9iai5tdWx0aUZhY3RvclNlc3Npb24/LmlkVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21JZHRva2VuKFxuICAgICAgICAgIG9iai5tdWx0aUZhY3RvclNlc3Npb24uaWRUb2tlblxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgQXV0aCxcbiAgTXVsdGlGYWN0b3JSZXNvbHZlcixcbiAgVXNlckNyZWRlbnRpYWwsXG4gIE11bHRpRmFjdG9yRXJyb3Jcbn0gZnJvbSAnLi4vbW9kZWwvcHVibGljX3R5cGVzJztcblxuaW1wb3J0IHsgX2Nhc3RBdXRoIH0gZnJvbSAnLi4vY29yZS9hdXRoL2F1dGhfaW1wbCc7XG5pbXBvcnQgeyBBdXRoRXJyb3JDb2RlIH0gZnJvbSAnLi4vY29yZS9lcnJvcnMnO1xuaW1wb3J0IHsgVXNlckNyZWRlbnRpYWxJbXBsIH0gZnJvbSAnLi4vY29yZS91c2VyL3VzZXJfY3JlZGVudGlhbF9pbXBsJztcbmltcG9ydCB7IF9hc3NlcnQsIF9mYWlsIH0gZnJvbSAnLi4vY29yZS91dGlsL2Fzc2VydCc7XG5pbXBvcnQgeyBVc2VyQ3JlZGVudGlhbEludGVybmFsIH0gZnJvbSAnLi4vbW9kZWwvdXNlcic7XG5pbXBvcnQgeyBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwgfSBmcm9tICcuL21mYV9hc3NlcnRpb24nO1xuaW1wb3J0IHsgTXVsdGlGYWN0b3JFcnJvciBhcyBNdWx0aUZhY3RvckVycm9ySW50ZXJuYWwgfSBmcm9tICcuL21mYV9lcnJvcic7XG5pbXBvcnQgeyBNdWx0aUZhY3RvckluZm9JbXBsIH0gZnJvbSAnLi9tZmFfaW5mbyc7XG5pbXBvcnQgeyBNdWx0aUZhY3RvclNlc3Npb25JbXBsIH0gZnJvbSAnLi9tZmFfc2Vzc2lvbic7XG5pbXBvcnQgeyBnZXRNb2R1bGFySW5zdGFuY2UgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBPcGVyYXRpb25UeXBlIH0gZnJvbSAnLi4vbW9kZWwvZW51bXMnO1xuXG5leHBvcnQgY2xhc3MgTXVsdGlGYWN0b3JSZXNvbHZlckltcGwgaW1wbGVtZW50cyBNdWx0aUZhY3RvclJlc29sdmVyIHtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihcbiAgICByZWFkb25seSBzZXNzaW9uOiBNdWx0aUZhY3RvclNlc3Npb25JbXBsLFxuICAgIHJlYWRvbmx5IGhpbnRzOiBNdWx0aUZhY3RvckluZm9JbXBsW10sXG4gICAgcHJpdmF0ZSByZWFkb25seSBzaWduSW5SZXNvbHZlcjogKFxuICAgICAgYXNzZXJ0aW9uOiBNdWx0aUZhY3RvckFzc2VydGlvbkltcGxcbiAgICApID0+IFByb21pc2U8VXNlckNyZWRlbnRpYWxJbnRlcm5hbD5cbiAgKSB7fVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgc3RhdGljIF9mcm9tRXJyb3IoXG4gICAgYXV0aEV4dGVybjogQXV0aCxcbiAgICBlcnJvcjogTXVsdGlGYWN0b3JFcnJvckludGVybmFsXG4gICk6IE11bHRpRmFjdG9yUmVzb2x2ZXJJbXBsIHtcbiAgICBjb25zdCBhdXRoID0gX2Nhc3RBdXRoKGF1dGhFeHRlcm4pO1xuICAgIGNvbnN0IHNlcnZlclJlc3BvbnNlID0gZXJyb3IuY3VzdG9tRGF0YS5fc2VydmVyUmVzcG9uc2U7XG4gICAgY29uc3QgaGludHMgPSAoc2VydmVyUmVzcG9uc2UubWZhSW5mbyB8fCBbXSkubWFwKGVucm9sbG1lbnQgPT5cbiAgICAgIE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZShhdXRoLCBlbnJvbGxtZW50KVxuICAgICk7XG5cbiAgICBfYXNzZXJ0KFxuICAgICAgc2VydmVyUmVzcG9uc2UubWZhUGVuZGluZ0NyZWRlbnRpYWwsXG4gICAgICBhdXRoLFxuICAgICAgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUlxuICAgICk7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21NZmFQZW5kaW5nQ3JlZGVudGlhbChcbiAgICAgIHNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsXG4gICAgKTtcblxuICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JSZXNvbHZlckltcGwoXG4gICAgICBzZXNzaW9uLFxuICAgICAgaGludHMsXG4gICAgICBhc3luYyAoXG4gICAgICAgIGFzc2VydGlvbjogTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsXG4gICAgICApOiBQcm9taXNlPFVzZXJDcmVkZW50aWFsSW50ZXJuYWw+ID0+IHtcbiAgICAgICAgY29uc3QgbWZhUmVzcG9uc2UgPSBhd2FpdCBhc3NlcnRpb24uX3Byb2Nlc3MoYXV0aCwgc2Vzc2lvbik7XG4gICAgICAgIC8vIENsZWFyIG91dCB0aGUgdW5uZWVkZWQgZmllbGRzIGZyb20gdGhlIG9sZCBsb2dpbiByZXNwb25zZVxuICAgICAgICBkZWxldGUgc2VydmVyUmVzcG9uc2UubWZhSW5mbztcbiAgICAgICAgZGVsZXRlIHNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsO1xuXG4gICAgICAgIC8vIFVzZSBpbiB0aGUgbmV3IHRva2VuICYgcmVmcmVzaCB0b2tlbiBpbiB0aGUgb2xkIHJlc3BvbnNlXG4gICAgICAgIGNvbnN0IGlkVG9rZW5SZXNwb25zZSA9IHtcbiAgICAgICAgICAuLi5zZXJ2ZXJSZXNwb25zZSxcbiAgICAgICAgICBpZFRva2VuOiBtZmFSZXNwb25zZS5pZFRva2VuLFxuICAgICAgICAgIHJlZnJlc2hUb2tlbjogbWZhUmVzcG9uc2UucmVmcmVzaFRva2VuXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVE9ETzogd2Ugc2hvdWxkIGNvbGxhcHNlIHRoaXMgc3dpdGNoIHN0YXRlbWVudCBpbnRvIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uIGFuZCBoYXZlIGl0IHN1cHBvcnQgdGhlIFNJR05fSU4gY2FzZVxuICAgICAgICBzd2l0Y2ggKGVycm9yLm9wZXJhdGlvblR5cGUpIHtcbiAgICAgICAgICBjYXNlIE9wZXJhdGlvblR5cGUuU0lHTl9JTjpcbiAgICAgICAgICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID1cbiAgICAgICAgICAgICAgYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKFxuICAgICAgICAgICAgICAgIGF1dGgsXG4gICAgICAgICAgICAgICAgZXJyb3Iub3BlcmF0aW9uVHlwZSxcbiAgICAgICAgICAgICAgICBpZFRva2VuUmVzcG9uc2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGF3YWl0IGF1dGguX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xuICAgICAgICAgIGNhc2UgT3BlcmF0aW9uVHlwZS5SRUFVVEhFTlRJQ0FURTpcbiAgICAgICAgICAgIF9hc3NlcnQoZXJyb3IudXNlciwgYXV0aCwgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUik7XG4gICAgICAgICAgICByZXR1cm4gVXNlckNyZWRlbnRpYWxJbXBsLl9mb3JPcGVyYXRpb24oXG4gICAgICAgICAgICAgIGVycm9yLnVzZXIsXG4gICAgICAgICAgICAgIGVycm9yLm9wZXJhdGlvblR5cGUsXG4gICAgICAgICAgICAgIGlkVG9rZW5SZXNwb25zZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgX2ZhaWwoYXV0aCwgQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgYXN5bmMgcmVzb2x2ZVNpZ25JbihcbiAgICBhc3NlcnRpb25FeHRlcm46IE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbFxuICApOiBQcm9taXNlPFVzZXJDcmVkZW50aWFsPiB7XG4gICAgY29uc3QgYXNzZXJ0aW9uID0gYXNzZXJ0aW9uRXh0ZXJuIGFzIE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbDtcbiAgICByZXR1cm4gdGhpcy5zaWduSW5SZXNvbHZlcihhc3NlcnRpb24pO1xuICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYSB7QGxpbmsgTXVsdGlGYWN0b3JSZXNvbHZlcn0gc3VpdGFibGUgZm9yIGNvbXBsZXRpb24gb2YgYVxuICogbXVsdGktZmFjdG9yIGZsb3cuXG4gKlxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxuICogQHBhcmFtIGVycm9yIC0gVGhlIHtAbGluayBNdWx0aUZhY3RvckVycm9yfSByYWlzZWQgZHVyaW5nIGEgc2lnbi1pbiwgb3JcbiAqIHJlYXV0aGVudGljYXRpb24gb3BlcmF0aW9uLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE11bHRpRmFjdG9yUmVzb2x2ZXIoXG4gIGF1dGg6IEF1dGgsXG4gIGVycm9yOiBNdWx0aUZhY3RvckVycm9yXG4pOiBNdWx0aUZhY3RvclJlc29sdmVyIHtcbiAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XG4gIGNvbnN0IGVycm9ySW50ZXJuYWwgPSBlcnJvciBhcyBNdWx0aUZhY3RvckVycm9ySW50ZXJuYWw7XG4gIF9hc3NlcnQoXG4gICAgZXJyb3IuY3VzdG9tRGF0YS5vcGVyYXRpb25UeXBlLFxuICAgIGF1dGhNb2R1bGFyLFxuICAgIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1JcbiAgKTtcbiAgX2Fzc2VydChcbiAgICBlcnJvckludGVybmFsLmN1c3RvbURhdGEuX3NlcnZlclJlc3BvbnNlPy5tZmFQZW5kaW5nQ3JlZGVudGlhbCxcbiAgICBhdXRoTW9kdWxhcixcbiAgICBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SXG4gICk7XG5cbiAgcmV0dXJuIE11bHRpRmFjdG9yUmVzb2x2ZXJJbXBsLl9mcm9tRXJyb3IoYXV0aE1vZHVsYXIsIGVycm9ySW50ZXJuYWwpO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgRW5kcG9pbnQsXG4gIEh0dHBNZXRob2QsXG4gIF9hZGRUaWRJZk5lY2Vzc2FyeSxcbiAgX3BlcmZvcm1BcGlSZXF1ZXN0XG59IGZyb20gJy4uL2luZGV4JztcbmltcG9ydCB7IFNpZ25JbldpdGhQaG9uZU51bWJlclJlcXVlc3QgfSBmcm9tICcuLi9hdXRoZW50aWNhdGlvbi9zbXMnO1xuaW1wb3J0IHsgRmluYWxpemVNZmFSZXNwb25zZSB9IGZyb20gJy4uL2F1dGhlbnRpY2F0aW9uL21mYSc7XG5pbXBvcnQgeyBBdXRoSW50ZXJuYWwgfSBmcm9tICcuLi8uLi9tb2RlbC9hdXRoJztcblxuLyoqXG4gKiBNRkEgSW5mbyBhcyByZXR1cm5lZCBieSB0aGUgQVBJLlxuICovXG5pbnRlcmZhY2UgQmFzZU1mYUVucm9sbG1lbnQge1xuICBtZmFFbnJvbGxtZW50SWQ6IHN0cmluZztcbiAgZW5yb2xsZWRBdDogbnVtYmVyO1xuICBkaXNwbGF5TmFtZT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBBbiBNRkEgcHJvdmlkZWQgYnkgU01TIHZlcmlmaWNhdGlvbi5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQaG9uZU1mYUVucm9sbG1lbnQgZXh0ZW5kcyBCYXNlTWZhRW5yb2xsbWVudCB7XG4gIHBob25lSW5mbzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEFuIE1GQSBwcm92aWRlZCBieSBUT1RQIChUaW1lLWJhc2VkIE9uZSBUaW1lIFBhc3N3b3JkKS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUb3RwTWZhRW5yb2xsbWVudCBleHRlbmRzIEJhc2VNZmFFbnJvbGxtZW50IHt9XG5cbi8qKlxuICogTWZhRW5yb2xsbWVudCBjYW4gYmUgYW55IHN1YnR5cGUgb2YgQmFzZU1mYUVucm9sbG1lbnQsIGN1cnJlbnRseSBvbmx5IFBob25lTWZhRW5yb2xsbWVudCBhbmQgVG90cE1mYUVucm9sbG1lbnQgYXJlIHN1cHBvcnRlZC5cbiAqL1xuZXhwb3J0IHR5cGUgTWZhRW5yb2xsbWVudCA9IFBob25lTWZhRW5yb2xsbWVudCB8IFRvdHBNZmFFbnJvbGxtZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXJ0UGhvbmVNZmFFbnJvbGxtZW50UmVxdWVzdCB7XG4gIGlkVG9rZW46IHN0cmluZztcbiAgcGhvbmVFbnJvbGxtZW50SW5mbzoge1xuICAgIHBob25lTnVtYmVyOiBzdHJpbmc7XG4gICAgcmVjYXB0Y2hhVG9rZW46IHN0cmluZztcbiAgfTtcbiAgdGVuYW50SWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhcnRQaG9uZU1mYUVucm9sbG1lbnRSZXNwb25zZSB7XG4gIHBob25lU2Vzc2lvbkluZm86IHtcbiAgICBzZXNzaW9uSW5mbzogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRFbnJvbGxQaG9uZU1mYShcbiAgYXV0aDogQXV0aEludGVybmFsLFxuICByZXF1ZXN0OiBTdGFydFBob25lTWZhRW5yb2xsbWVudFJlcXVlc3Rcbik6IFByb21pc2U8U3RhcnRQaG9uZU1mYUVucm9sbG1lbnRSZXNwb25zZT4ge1xuICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0PFxuICAgIFN0YXJ0UGhvbmVNZmFFbnJvbGxtZW50UmVxdWVzdCxcbiAgICBTdGFydFBob25lTWZhRW5yb2xsbWVudFJlc3BvbnNlXG4gID4oXG4gICAgYXV0aCxcbiAgICBIdHRwTWV0aG9kLlBPU1QsXG4gICAgRW5kcG9pbnQuU1RBUlRfTUZBX0VOUk9MTE1FTlQsXG4gICAgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpXG4gICk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmluYWxpemVQaG9uZU1mYUVucm9sbG1lbnRSZXF1ZXN0IHtcbiAgaWRUb2tlbjogc3RyaW5nO1xuICBwaG9uZVZlcmlmaWNhdGlvbkluZm86IFNpZ25JbldpdGhQaG9uZU51bWJlclJlcXVlc3Q7XG4gIGRpc3BsYXlOYW1lPzogc3RyaW5nIHwgbnVsbDtcbiAgdGVuYW50SWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmluYWxpemVQaG9uZU1mYUVucm9sbG1lbnRSZXNwb25zZVxuICBleHRlbmRzIEZpbmFsaXplTWZhUmVzcG9uc2Uge31cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmFsaXplRW5yb2xsUGhvbmVNZmEoXG4gIGF1dGg6IEF1dGhJbnRlcm5hbCxcbiAgcmVxdWVzdDogRmluYWxpemVQaG9uZU1mYUVucm9sbG1lbnRSZXF1ZXN0XG4pOiBQcm9taXNlPEZpbmFsaXplUGhvbmVNZmFFbnJvbGxtZW50UmVzcG9uc2U+IHtcbiAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdDxcbiAgICBGaW5hbGl6ZVBob25lTWZhRW5yb2xsbWVudFJlcXVlc3QsXG4gICAgRmluYWxpemVQaG9uZU1mYUVucm9sbG1lbnRSZXNwb25zZVxuICA+KFxuICAgIGF1dGgsXG4gICAgSHR0cE1ldGhvZC5QT1NULFxuICAgIEVuZHBvaW50LkZJTkFMSVpFX01GQV9FTlJPTExNRU5ULFxuICAgIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KVxuICApO1xufVxuZXhwb3J0IGludGVyZmFjZSBTdGFydFRvdHBNZmFFbnJvbGxtZW50UmVxdWVzdCB7XG4gIGlkVG9rZW46IHN0cmluZztcbiAgdG90cEVucm9sbG1lbnRJbmZvOiB7fTtcbiAgdGVuYW50SWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhcnRUb3RwTWZhRW5yb2xsbWVudFJlc3BvbnNlIHtcbiAgdG90cFNlc3Npb25JbmZvOiB7XG4gICAgc2hhcmVkU2VjcmV0S2V5OiBzdHJpbmc7XG4gICAgdmVyaWZpY2F0aW9uQ29kZUxlbmd0aDogbnVtYmVyO1xuICAgIGhhc2hpbmdBbGdvcml0aG06IHN0cmluZztcbiAgICBwZXJpb2RTZWM6IG51bWJlcjtcbiAgICBzZXNzaW9uSW5mbzogc3RyaW5nO1xuICAgIGZpbmFsaXplRW5yb2xsbWVudFRpbWU6IG51bWJlcjtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0RW5yb2xsVG90cE1mYShcbiAgYXV0aDogQXV0aEludGVybmFsLFxuICByZXF1ZXN0OiBTdGFydFRvdHBNZmFFbnJvbGxtZW50UmVxdWVzdFxuKTogUHJvbWlzZTxTdGFydFRvdHBNZmFFbnJvbGxtZW50UmVzcG9uc2U+IHtcbiAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdDxcbiAgICBTdGFydFRvdHBNZmFFbnJvbGxtZW50UmVxdWVzdCxcbiAgICBTdGFydFRvdHBNZmFFbnJvbGxtZW50UmVzcG9uc2VcbiAgPihcbiAgICBhdXRoLFxuICAgIEh0dHBNZXRob2QuUE9TVCxcbiAgICBFbmRwb2ludC5TVEFSVF9NRkFfRU5ST0xMTUVOVCxcbiAgICBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdClcbiAgKTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb3RwVmVyaWZpY2F0aW9uSW5mbyB7XG4gIHNlc3Npb25JbmZvOiBzdHJpbmc7XG4gIHZlcmlmaWNhdGlvbkNvZGU6IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgRmluYWxpemVUb3RwTWZhRW5yb2xsbWVudFJlcXVlc3Qge1xuICBpZFRva2VuOiBzdHJpbmc7XG4gIHRvdHBWZXJpZmljYXRpb25JbmZvOiBUb3RwVmVyaWZpY2F0aW9uSW5mbztcbiAgZGlzcGxheU5hbWU/OiBzdHJpbmcgfCBudWxsO1xuICB0ZW5hbnRJZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaW5hbGl6ZVRvdHBNZmFFbnJvbGxtZW50UmVzcG9uc2VcbiAgZXh0ZW5kcyBGaW5hbGl6ZU1mYVJlc3BvbnNlIHt9XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5hbGl6ZUVucm9sbFRvdHBNZmEoXG4gIGF1dGg6IEF1dGhJbnRlcm5hbCxcbiAgcmVxdWVzdDogRmluYWxpemVUb3RwTWZhRW5yb2xsbWVudFJlcXVlc3Rcbik6IFByb21pc2U8RmluYWxpemVUb3RwTWZhRW5yb2xsbWVudFJlc3BvbnNlPiB7XG4gIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3Q8XG4gICAgRmluYWxpemVUb3RwTWZhRW5yb2xsbWVudFJlcXVlc3QsXG4gICAgRmluYWxpemVUb3RwTWZhRW5yb2xsbWVudFJlc3BvbnNlXG4gID4oXG4gICAgYXV0aCxcbiAgICBIdHRwTWV0aG9kLlBPU1QsXG4gICAgRW5kcG9pbnQuRklOQUxJWkVfTUZBX0VOUk9MTE1FTlQsXG4gICAgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpXG4gICk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2l0aGRyYXdNZmFSZXF1ZXN0IHtcbiAgaWRUb2tlbjogc3RyaW5nO1xuICBtZmFFbnJvbGxtZW50SWQ6IHN0cmluZztcbiAgdGVuYW50SWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2l0aGRyYXdNZmFSZXNwb25zZSBleHRlbmRzIEZpbmFsaXplTWZhUmVzcG9uc2Uge31cblxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhkcmF3TWZhKFxuICBhdXRoOiBBdXRoSW50ZXJuYWwsXG4gIHJlcXVlc3Q6IFdpdGhkcmF3TWZhUmVxdWVzdFxuKTogUHJvbWlzZTxXaXRoZHJhd01mYVJlc3BvbnNlPiB7XG4gIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3Q8V2l0aGRyYXdNZmFSZXF1ZXN0LCBXaXRoZHJhd01mYVJlc3BvbnNlPihcbiAgICBhdXRoLFxuICAgIEh0dHBNZXRob2QuUE9TVCxcbiAgICBFbmRwb2ludC5XSVRIRFJBV19NRkEsXG4gICAgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpXG4gICk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHtcbiAgTXVsdGlGYWN0b3JBc3NlcnRpb24sXG4gIE11bHRpRmFjdG9ySW5mbyxcbiAgTXVsdGlGYWN0b3JTZXNzaW9uLFxuICBNdWx0aUZhY3RvclVzZXIsXG4gIFVzZXJcbn0gZnJvbSAnLi4vbW9kZWwvcHVibGljX3R5cGVzJztcblxuaW1wb3J0IHsgd2l0aGRyYXdNZmEgfSBmcm9tICcuLi9hcGkvYWNjb3VudF9tYW5hZ2VtZW50L21mYSc7XG5pbXBvcnQgeyBfbG9nb3V0SWZJbnZhbGlkYXRlZCB9IGZyb20gJy4uL2NvcmUvdXNlci9pbnZhbGlkYXRpb24nO1xuaW1wb3J0IHsgVXNlckludGVybmFsIH0gZnJvbSAnLi4vbW9kZWwvdXNlcic7XG5pbXBvcnQgeyBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwgfSBmcm9tICcuL21mYV9hc3NlcnRpb24nO1xuaW1wb3J0IHsgTXVsdGlGYWN0b3JJbmZvSW1wbCB9IGZyb20gJy4vbWZhX2luZm8nO1xuaW1wb3J0IHsgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbCB9IGZyb20gJy4vbWZhX3Nlc3Npb24nO1xuaW1wb3J0IHsgZ2V0TW9kdWxhckluc3RhbmNlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgTXVsdGlGYWN0b3JVc2VySW1wbCBpbXBsZW1lbnRzIE11bHRpRmFjdG9yVXNlciB7XG4gIGVucm9sbGVkRmFjdG9yczogTXVsdGlGYWN0b3JJbmZvW10gPSBbXTtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHVzZXI6IFVzZXJJbnRlcm5hbCkge1xuICAgIHVzZXIuX29uUmVsb2FkKHVzZXJJbmZvID0+IHtcbiAgICAgIGlmICh1c2VySW5mby5tZmFJbmZvKSB7XG4gICAgICAgIHRoaXMuZW5yb2xsZWRGYWN0b3JzID0gdXNlckluZm8ubWZhSW5mby5tYXAoZW5yb2xsbWVudCA9PlxuICAgICAgICAgIE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZSh1c2VyLmF1dGgsIGVucm9sbG1lbnQpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgX2Zyb21Vc2VyKHVzZXI6IFVzZXJJbnRlcm5hbCk6IE11bHRpRmFjdG9yVXNlckltcGwge1xuICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JVc2VySW1wbCh1c2VyKTtcbiAgfVxuXG4gIGFzeW5jIGdldFNlc3Npb24oKTogUHJvbWlzZTxNdWx0aUZhY3RvclNlc3Npb24+IHtcbiAgICByZXR1cm4gTXVsdGlGYWN0b3JTZXNzaW9uSW1wbC5fZnJvbUlkdG9rZW4oXG4gICAgICBhd2FpdCB0aGlzLnVzZXIuZ2V0SWRUb2tlbigpLFxuICAgICAgdGhpcy51c2VyLmF1dGhcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgZW5yb2xsKFxuICAgIGFzc2VydGlvbkV4dGVybjogTXVsdGlGYWN0b3JBc3NlcnRpb24sXG4gICAgZGlzcGxheU5hbWU/OiBzdHJpbmcgfCBudWxsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFzc2VydGlvbiA9IGFzc2VydGlvbkV4dGVybiBhcyBNdWx0aUZhY3RvckFzc2VydGlvbkltcGw7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IChhd2FpdCB0aGlzLmdldFNlc3Npb24oKSkgYXMgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbDtcbiAgICBjb25zdCBmaW5hbGl6ZU1mYVJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQoXG4gICAgICB0aGlzLnVzZXIsXG4gICAgICBhc3NlcnRpb24uX3Byb2Nlc3ModGhpcy51c2VyLmF1dGgsIHNlc3Npb24sIGRpc3BsYXlOYW1lKVxuICAgICk7XG4gICAgLy8gTmV3IHRva2VucyB3aWxsIGJlIGlzc3VlZCBhZnRlciBlbnJvbGxtZW50IG9mIHRoZSBuZXcgc2Vjb25kIGZhY3RvcnMuXG4gICAgLy8gVGhleSBuZWVkIHRvIGJlIHVwZGF0ZWQgb24gdGhlIHVzZXIuXG4gICAgYXdhaXQgdGhpcy51c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShmaW5hbGl6ZU1mYVJlc3BvbnNlKTtcbiAgICAvLyBUaGUgdXNlciBuZWVkcyB0byBiZSByZWxvYWRlZCB0byBnZXQgdGhlIG5ldyBtdWx0aS1mYWN0b3IgaW5mb3JtYXRpb25cbiAgICAvLyBmcm9tIHNlcnZlci4gVVNFUl9SRUxPQURFRCBldmVudCB3aWxsIGJlIHRyaWdnZXJlZCBhbmQgYGVucm9sbGVkRmFjdG9yc2BcbiAgICAvLyB3aWxsIGJlIHVwZGF0ZWQuXG4gICAgcmV0dXJuIHRoaXMudXNlci5yZWxvYWQoKTtcbiAgfVxuXG4gIGFzeW5jIHVuZW5yb2xsKGluZm9PclVpZDogTXVsdGlGYWN0b3JJbmZvIHwgc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgbWZhRW5yb2xsbWVudElkID1cbiAgICAgIHR5cGVvZiBpbmZvT3JVaWQgPT09ICdzdHJpbmcnID8gaW5mb09yVWlkIDogaW5mb09yVWlkLnVpZDtcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdGhpcy51c2VyLmdldElkVG9rZW4oKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaWRUb2tlblJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQoXG4gICAgICAgIHRoaXMudXNlcixcbiAgICAgICAgd2l0aGRyYXdNZmEodGhpcy51c2VyLmF1dGgsIHtcbiAgICAgICAgICBpZFRva2VuLFxuICAgICAgICAgIG1mYUVucm9sbG1lbnRJZFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIC8vIFJlbW92ZSB0aGUgc2Vjb25kIGZhY3RvciBmcm9tIHRoZSB1c2VyJ3MgbGlzdC5cbiAgICAgIHRoaXMuZW5yb2xsZWRGYWN0b3JzID0gdGhpcy5lbnJvbGxlZEZhY3RvcnMuZmlsdGVyKFxuICAgICAgICAoeyB1aWQgfSkgPT4gdWlkICE9PSBtZmFFbnJvbGxtZW50SWRcbiAgICAgICk7XG4gICAgICAvLyBEZXBlbmRpbmcgb24gd2hldGhlciB0aGUgYmFja2VuZCBkZWNpZGVkIHRvIHJldm9rZSB0aGUgdXNlcidzIHNlc3Npb24sXG4gICAgICAvLyB0aGUgdG9rZW5SZXNwb25zZSBtYXkgYmUgZW1wdHkuIElmIHRoZSB0b2tlbnMgd2VyZSBub3QgdXBkYXRlZCAoYW5kIHRoZXlcbiAgICAgIC8vIGFyZSBub3cgaW52YWxpZCksIHJlbG9hZGluZyB0aGUgdXNlciB3aWxsIGRpc2NvdmVyIHRoaXMgYW5kIGludmFsaWRhdGVcbiAgICAgIC8vIHRoZSB1c2VyJ3Mgc3RhdGUgYWNjb3JkaW5nbHkuXG4gICAgICBhd2FpdCB0aGlzLnVzZXIuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KGlkVG9rZW5SZXNwb25zZSk7XG4gICAgICBhd2FpdCB0aGlzLnVzZXIucmVsb2FkKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgbXVsdGlGYWN0b3JVc2VyQ2FjaGUgPSBuZXcgV2Vha01hcDxVc2VyLCBNdWx0aUZhY3RvclVzZXI+KCk7XG5cbi8qKlxuICogVGhlIHtAbGluayBNdWx0aUZhY3RvclVzZXJ9IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHVzZXIuXG4gKlxuICogQHJlbWFya3NcbiAqIFRoaXMgaXMgdXNlZCB0byBhY2Nlc3MgYWxsIG11bHRpLWZhY3RvciBwcm9wZXJ0aWVzIGFuZCBvcGVyYXRpb25zIHJlbGF0ZWQgdG8gdGhlIHVzZXIuXG4gKlxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aUZhY3Rvcih1c2VyOiBVc2VyKTogTXVsdGlGYWN0b3JVc2VyIHtcbiAgY29uc3QgdXNlck1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XG4gIGlmICghbXVsdGlGYWN0b3JVc2VyQ2FjaGUuaGFzKHVzZXJNb2R1bGFyKSkge1xuICAgIG11bHRpRmFjdG9yVXNlckNhY2hlLnNldChcbiAgICAgIHVzZXJNb2R1bGFyLFxuICAgICAgTXVsdGlGYWN0b3JVc2VySW1wbC5fZnJvbVVzZXIodXNlck1vZHVsYXIgYXMgVXNlckludGVybmFsKVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIG11bHRpRmFjdG9yVXNlckNhY2hlLmdldCh1c2VyTW9kdWxhcikhO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgVW5zdWJzY3JpYmUgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBGaXJlYmFzZUF1dGhJbnRlcm5hbCB9IGZyb20gJ0BmaXJlYmFzZS9hdXRoLWludGVyb3AtdHlwZXMnO1xuXG5pbXBvcnQgeyBBdXRoSW50ZXJuYWwgfSBmcm9tICcuLi8uLi9tb2RlbC9hdXRoJztcbmltcG9ydCB7IFVzZXJJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL3VzZXInO1xuaW1wb3J0IHsgX2Fzc2VydCB9IGZyb20gJy4uL3V0aWwvYXNzZXJ0JztcbmltcG9ydCB7IEF1dGhFcnJvckNvZGUgfSBmcm9tICcuLi9lcnJvcnMnO1xuXG5pbnRlcmZhY2UgVG9rZW5MaXN0ZW5lciB7XG4gICh0b2s6IHN0cmluZyB8IG51bGwpOiB1bmtub3duO1xufVxuXG5leHBvcnQgY2xhc3MgQXV0aEludGVyb3AgaW1wbGVtZW50cyBGaXJlYmFzZUF1dGhJbnRlcm5hbCB7XG4gIHByaXZhdGUgcmVhZG9ubHkgaW50ZXJuYWxMaXN0ZW5lcnM6IE1hcDxUb2tlbkxpc3RlbmVyLCBVbnN1YnNjcmliZT4gPVxuICAgIG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGF1dGg6IEF1dGhJbnRlcm5hbCkge31cblxuICBnZXRVaWQoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xuICAgIHJldHVybiB0aGlzLmF1dGguY3VycmVudFVzZXI/LnVpZCB8fCBudWxsO1xuICB9XG5cbiAgYXN5bmMgZ2V0VG9rZW4oXG4gICAgZm9yY2VSZWZyZXNoPzogYm9vbGVhblxuICApOiBQcm9taXNlPHsgYWNjZXNzVG9rZW46IHN0cmluZyB9IHwgbnVsbD4ge1xuICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcbiAgICBhd2FpdCB0aGlzLmF1dGguX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcbiAgICBpZiAoIXRoaXMuYXV0aC5jdXJyZW50VXNlcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLmF1dGguY3VycmVudFVzZXIuZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpO1xuICAgIHJldHVybiB7IGFjY2Vzc1Rva2VuIH07XG4gIH1cblxuICBhZGRBdXRoVG9rZW5MaXN0ZW5lcihsaXN0ZW5lcjogVG9rZW5MaXN0ZW5lcik6IHZvaWQge1xuICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcbiAgICBpZiAodGhpcy5pbnRlcm5hbExpc3RlbmVycy5oYXMobGlzdGVuZXIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSB0aGlzLmF1dGgub25JZFRva2VuQ2hhbmdlZCh1c2VyID0+IHtcbiAgICAgIGxpc3RlbmVyKFxuICAgICAgICAodXNlciBhcyBVc2VySW50ZXJuYWwgfCBudWxsKT8uc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuIHx8IG51bGxcbiAgICAgICk7XG4gICAgfSk7XG4gICAgdGhpcy5pbnRlcm5hbExpc3RlbmVycy5zZXQobGlzdGVuZXIsIHVuc3Vic2NyaWJlKTtcbiAgICB0aGlzLnVwZGF0ZVByb2FjdGl2ZVJlZnJlc2goKTtcbiAgfVxuXG4gIHJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKGxpc3RlbmVyOiBUb2tlbkxpc3RlbmVyKTogdm9pZCB7XG4gICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5pbnRlcm5hbExpc3RlbmVycy5nZXQobGlzdGVuZXIpO1xuICAgIGlmICghdW5zdWJzY3JpYmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmludGVybmFsTGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG4gICAgdW5zdWJzY3JpYmUoKTtcbiAgICB0aGlzLnVwZGF0ZVByb2FjdGl2ZVJlZnJlc2goKTtcbiAgfVxuXG4gIHByaXZhdGUgYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTogdm9pZCB7XG4gICAgX2Fzc2VydChcbiAgICAgIHRoaXMuYXV0aC5faW5pdGlhbGl6YXRpb25Qcm9taXNlLFxuICAgICAgQXV0aEVycm9yQ29kZS5ERVBFTkRFTlRfU0RLX0lOSVRfQkVGT1JFX0FVVEhcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVQcm9hY3RpdmVSZWZyZXNoKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmludGVybmFsTGlzdGVuZXJzLnNpemUgPiAwKSB7XG4gICAgICB0aGlzLmF1dGguX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmF1dGguX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBDb21wb25lbnRUeXBlLFxuICBJbnN0YW50aWF0aW9uTW9kZVxufSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcblxuaW1wb3J0IHsgbmFtZSwgdmVyc2lvbiB9IGZyb20gJy4uLy4uLy4uL3BhY2thZ2UuanNvbic7XG5pbXBvcnQgeyBBdXRoRXJyb3JDb2RlIH0gZnJvbSAnLi4vZXJyb3JzJztcbmltcG9ydCB7IF9hc3NlcnQgfSBmcm9tICcuLi91dGlsL2Fzc2VydCc7XG5pbXBvcnQgeyBfZ2V0Q2xpZW50VmVyc2lvbiwgQ2xpZW50UGxhdGZvcm0gfSBmcm9tICcuLi91dGlsL3ZlcnNpb24nO1xuaW1wb3J0IHsgX2Nhc3RBdXRoLCBBdXRoSW1wbCwgRGVmYXVsdENvbmZpZyB9IGZyb20gJy4vYXV0aF9pbXBsJztcbmltcG9ydCB7IEF1dGhJbnRlcm9wIH0gZnJvbSAnLi9maXJlYmFzZV9pbnRlcm5hbCc7XG5pbXBvcnQgeyBDb25maWdJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL2F1dGgnO1xuaW1wb3J0IHsgRGVwZW5kZW5jaWVzIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcbmltcG9ydCB7IF9pbml0aWFsaXplQXV0aEluc3RhbmNlIH0gZnJvbSAnLi9pbml0aWFsaXplJztcblxuZXhwb3J0IGNvbnN0IGVudW0gX0NvbXBvbmVudE5hbWUge1xuICBBVVRIID0gJ2F1dGgnLFxuICBBVVRIX0lOVEVSTkFMID0gJ2F1dGgtaW50ZXJuYWwnXG59XG5cbmZ1bmN0aW9uIGdldFZlcnNpb25Gb3JQbGF0Zm9ybShcbiAgY2xpZW50UGxhdGZvcm06IENsaWVudFBsYXRmb3JtXG4pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBzd2l0Y2ggKGNsaWVudFBsYXRmb3JtKSB7XG4gICAgY2FzZSBDbGllbnRQbGF0Zm9ybS5OT0RFOlxuICAgICAgcmV0dXJuICdub2RlJztcbiAgICBjYXNlIENsaWVudFBsYXRmb3JtLlJFQUNUX05BVElWRTpcbiAgICAgIHJldHVybiAncm4nO1xuICAgIGNhc2UgQ2xpZW50UGxhdGZvcm0uV09SS0VSOlxuICAgICAgcmV0dXJuICd3ZWJ3b3JrZXInO1xuICAgIGNhc2UgQ2xpZW50UGxhdGZvcm0uQ09SRE9WQTpcbiAgICAgIHJldHVybiAnY29yZG92YSc7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQXV0aChjbGllbnRQbGF0Zm9ybTogQ2xpZW50UGxhdGZvcm0pOiB2b2lkIHtcbiAgX3JlZ2lzdGVyQ29tcG9uZW50KFxuICAgIG5ldyBDb21wb25lbnQoXG4gICAgICBfQ29tcG9uZW50TmFtZS5BVVRILFxuICAgICAgKGNvbnRhaW5lciwgeyBvcHRpb25zOiBkZXBzIH06IHsgb3B0aW9ucz86IERlcGVuZGVuY2llcyB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCkhO1xuICAgICAgICBjb25zdCBoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIgPVxuICAgICAgICAgIGNvbnRhaW5lci5nZXRQcm92aWRlcjwnaGVhcnRiZWF0Jz4oJ2hlYXJ0YmVhdCcpO1xuICAgICAgICBjb25zdCBhcHBDaGVja1NlcnZpY2VQcm92aWRlciA9XG4gICAgICAgICAgY29udGFpbmVyLmdldFByb3ZpZGVyPCdhcHAtY2hlY2staW50ZXJuYWwnPignYXBwLWNoZWNrLWludGVybmFsJyk7XG4gICAgICAgIGNvbnN0IHsgYXBpS2V5LCBhdXRoRG9tYWluIH0gPSBhcHAub3B0aW9ucztcblxuICAgICAgICBfYXNzZXJ0KFxuICAgICAgICAgIGFwaUtleSAmJiAhYXBpS2V5LmluY2x1ZGVzKCc6JyksXG4gICAgICAgICAgQXV0aEVycm9yQ29kZS5JTlZBTElEX0FQSV9LRVksXG4gICAgICAgICAgeyBhcHBOYW1lOiBhcHAubmFtZSB9XG4gICAgICAgICk7XG4gICAgICAgIC8vIEF1dGggZG9tYWluIGlzIG9wdGlvbmFsIGlmIElkUCBzaWduIGluIGlzbid0IGJlaW5nIHVzZWRcbiAgICAgICAgX2Fzc2VydCghYXV0aERvbWFpbj8uaW5jbHVkZXMoJzonKSwgQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiwge1xuICAgICAgICAgIGFwcE5hbWU6IGFwcC5uYW1lXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjb25maWc6IENvbmZpZ0ludGVybmFsID0ge1xuICAgICAgICAgIGFwaUtleSxcbiAgICAgICAgICBhdXRoRG9tYWluLFxuICAgICAgICAgIGNsaWVudFBsYXRmb3JtLFxuICAgICAgICAgIGFwaUhvc3Q6IERlZmF1bHRDb25maWcuQVBJX0hPU1QsXG4gICAgICAgICAgdG9rZW5BcGlIb3N0OiBEZWZhdWx0Q29uZmlnLlRPS0VOX0FQSV9IT1NULFxuICAgICAgICAgIGFwaVNjaGVtZTogRGVmYXVsdENvbmZpZy5BUElfU0NIRU1FLFxuICAgICAgICAgIHNka0NsaWVudFZlcnNpb246IF9nZXRDbGllbnRWZXJzaW9uKGNsaWVudFBsYXRmb3JtKVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGF1dGhJbnN0YW5jZSA9IG5ldyBBdXRoSW1wbChcbiAgICAgICAgICBhcHAsXG4gICAgICAgICAgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLFxuICAgICAgICAgIGFwcENoZWNrU2VydmljZVByb3ZpZGVyLFxuICAgICAgICAgIGNvbmZpZ1xuICAgICAgICApO1xuICAgICAgICBfaW5pdGlhbGl6ZUF1dGhJbnN0YW5jZShhdXRoSW5zdGFuY2UsIGRlcHMpO1xuXG4gICAgICAgIHJldHVybiBhdXRoSW5zdGFuY2U7XG4gICAgICB9LFxuICAgICAgQ29tcG9uZW50VHlwZS5QVUJMSUNcbiAgICApXG4gICAgICAvKipcbiAgICAgICAqIEF1dGggY2FuIG9ubHkgYmUgaW5pdGlhbGl6ZWQgYnkgZXhwbGljaXRseSBjYWxsaW5nIGdldEF1dGgoKSBvciBpbml0aWFsaXplQXV0aCgpXG4gICAgICAgKiBGb3Igd2h5IHdlIGRvIHRoaXMsIFNlZSBnby9maXJlYmFzZS1uZXh0LWF1dGgtaW5pdFxuICAgICAgICovXG4gICAgICAuc2V0SW5zdGFudGlhdGlvbk1vZGUoSW5zdGFudGlhdGlvbk1vZGUuRVhQTElDSVQpXG4gICAgICAvKipcbiAgICAgICAqIEJlY2F1c2UgYWxsIGZpcmViYXNlIHByb2R1Y3RzIHRoYXQgZGVwZW5kIG9uIGF1dGggZGVwZW5kIG9uIGF1dGgtaW50ZXJuYWwgZGlyZWN0bHksXG4gICAgICAgKiB3ZSBuZWVkIHRvIGluaXRpYWxpemUgYXV0aC1pbnRlcm5hbCBhZnRlciBhdXRoIGlzIGluaXRpYWxpemVkIHRvIG1ha2UgaXQgYXZhaWxhYmxlIHRvIG90aGVyIGZpcmViYXNlIHByb2R1Y3RzLlxuICAgICAgICovXG4gICAgICAuc2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2soXG4gICAgICAgIChjb250YWluZXIsIF9pbnN0YW5jZUlkZW50aWZpZXIsIF9pbnN0YW5jZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGF1dGhJbnRlcm5hbFByb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKFxuICAgICAgICAgICAgX0NvbXBvbmVudE5hbWUuQVVUSF9JTlRFUk5BTFxuICAgICAgICAgICk7XG4gICAgICAgICAgYXV0aEludGVybmFsUHJvdmlkZXIuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB9XG4gICAgICApXG4gICk7XG5cbiAgX3JlZ2lzdGVyQ29tcG9uZW50KFxuICAgIG5ldyBDb21wb25lbnQoXG4gICAgICBfQ29tcG9uZW50TmFtZS5BVVRIX0lOVEVSTkFMLFxuICAgICAgY29udGFpbmVyID0+IHtcbiAgICAgICAgY29uc3QgYXV0aCA9IF9jYXN0QXV0aChcbiAgICAgICAgICBjb250YWluZXIuZ2V0UHJvdmlkZXIoX0NvbXBvbmVudE5hbWUuQVVUSCkuZ2V0SW1tZWRpYXRlKCkhXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiAoYXV0aCA9PiBuZXcgQXV0aEludGVyb3AoYXV0aCkpKGF1dGgpO1xuICAgICAgfSxcbiAgICAgIENvbXBvbmVudFR5cGUuUFJJVkFURVxuICAgICkuc2V0SW5zdGFudGlhdGlvbk1vZGUoSW5zdGFudGlhdGlvbk1vZGUuRVhQTElDSVQpXG4gICk7XG5cbiAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sIGdldFZlcnNpb25Gb3JQbGF0Zm9ybShjbGllbnRQbGF0Zm9ybSkpO1xuICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxuICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ19fQlVJTERfVEFSR0VUX18nKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEF1dGhFcnJvckNvZGUgfSBmcm9tICcuLi9jb3JlL2Vycm9ycyc7XG5pbXBvcnQgeyBfY3JlYXRlRXJyb3IgfSBmcm9tICcuLi9jb3JlL3V0aWwvYXNzZXJ0JztcblxuaW1wb3J0IHsgRmlyZWJhc2VBcHAsIGdldEFwcCwgX2dldFByb3ZpZGVyIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBBdXRoIH0gZnJvbSAnLi4vbW9kZWwvcHVibGljX3R5cGVzJztcblxuaW1wb3J0IHsgaW5pdGlhbGl6ZUF1dGgsIGluTWVtb3J5UGVyc2lzdGVuY2UsIGNvbm5lY3RBdXRoRW11bGF0b3IgfSBmcm9tICcuLic7XG5pbXBvcnQgeyByZWdpc3RlckF1dGggfSBmcm9tICcuLi9jb3JlL2F1dGgvcmVnaXN0ZXInO1xuaW1wb3J0IHsgQ2xpZW50UGxhdGZvcm0gfSBmcm9tICcuLi9jb3JlL3V0aWwvdmVyc2lvbic7XG5pbXBvcnQgeyBBdXRoSW1wbCB9IGZyb20gJy4uL2NvcmUvYXV0aC9hdXRoX2ltcGwnO1xuXG5pbXBvcnQgeyBGZXRjaFByb3ZpZGVyIH0gZnJvbSAnLi4vY29yZS91dGlsL2ZldGNoX3Byb3ZpZGVyJztcbmltcG9ydCAqIGFzIGZldGNoSW1wbCBmcm9tICdub2RlLWZldGNoJztcbmltcG9ydCB7IGdldERlZmF1bHRFbXVsYXRvckhvc3QgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8vIEluaXRpYWxpemUgdGhlIGZldGNoIHBvbHlmaWxsLCB0aGUgdHlwZXMgYXJlIHNsaWdodGx5IG9mZiBzbyBqdXN0IGNhc3QgYW5kIGhvcGUgZm9yIHRoZSBiZXN0XG5GZXRjaFByb3ZpZGVyLmluaXRpYWxpemUoXG4gIGZldGNoSW1wbC5kZWZhdWx0IGFzIHVua25vd24gYXMgdHlwZW9mIGZldGNoLFxuICBmZXRjaEltcGwuSGVhZGVycyBhcyB1bmtub3duIGFzIHR5cGVvZiBIZWFkZXJzLFxuICBmZXRjaEltcGwuUmVzcG9uc2UgYXMgdW5rbm93biBhcyB0eXBlb2YgUmVzcG9uc2Vcbik7XG5cbi8vIEZpcnN0LCB3ZSBzZXQgdXAgdGhlIHZhcmlvdXMgcGxhdGZvcm0tc3BlY2lmaWMgZmVhdHVyZXMgZm9yIE5vZGUgKHJlZ2lzdGVyXG4vLyB0aGUgdmVyc2lvbiBhbmQgZGVjbGFyZSB0aGUgTm9kZSBnZXRBdXRoIGZ1bmN0aW9uKVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXV0aChhcHA6IEZpcmViYXNlQXBwID0gZ2V0QXBwKCkpOiBBdXRoIHtcbiAgY29uc3QgcHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCAnYXV0aCcpO1xuXG4gIGlmIChwcm92aWRlci5pc0luaXRpYWxpemVkKCkpIHtcbiAgICByZXR1cm4gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XG4gIH1cblxuICBjb25zdCBhdXRoID0gaW5pdGlhbGl6ZUF1dGgoYXBwKTtcblxuICBjb25zdCBhdXRoRW11bGF0b3JIb3N0ID0gZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCgnYXV0aCcpO1xuICBpZiAoYXV0aEVtdWxhdG9ySG9zdCkge1xuICAgIGNvbm5lY3RBdXRoRW11bGF0b3IoYXV0aCwgYGh0dHA6Ly8ke2F1dGhFbXVsYXRvckhvc3R9YCk7XG4gIH1cblxuICByZXR1cm4gYXV0aDtcbn1cblxucmVnaXN0ZXJBdXRoKENsaWVudFBsYXRmb3JtLk5PREUpO1xuXG4vLyBUaGUgcmVzdCBvZiB0aGlzIGZpbGUgY29udGFpbnMgbm8tb3BzIGFuZCBlcnJvcnMgZm9yIGJyb3dzZXItc3BlY2lmaWNcbi8vIG1ldGhvZHMuIFdlIGtlZXAgdGhlIGJyb3dzZXIgYW5kIE5vZGUgZW50cnkgcG9pbnRzIHRoZSBzYW1lLCBidXQgZmVhdHVyZXNcbi8vIHRoYXQgb25seSB3b3JrIGluIGJyb3dzZXJzIGFyZSBzZXQgdG8gZWl0aGVyIGRvIG5vdGhpbmcgKHNldFBlcnNpc3RlbmNlKSBvclxuLy8gdG8gcmVqZWN0IHdpdGggYW4gYXV0aC9vcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50IGVycm9yLlxuLy8gVGhlIGJlbG93IGV4cG9ydHMgYXJlIHB1bGxlZCBpbnRvIHRoZSBtYWluIGVudHJ5IHBvaW50IGJ5IGEgcm9sbHVwIGFsaWFzXG4vLyBwbHVnaW4gKG92ZXJ3cml0aW5nIHRoZSBkZWZhdWx0IGJyb3dzZXIgaW1wb3J0cykuXG5cbi8qKiBhdXRoL29wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnQgKi9cbmNvbnN0IE5PVF9BVkFJTEFCTEVfRVJST1IgPSBfY3JlYXRlRXJyb3IoQXV0aEVycm9yQ29kZS5PUEVSQVRJT05fTk9UX1NVUFBPUlRFRCk7XG5cbi8qKiBSZWplY3Qgd2l0aCBhdXRoL29wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnQgKi9cbmFzeW5jIGZ1bmN0aW9uIGZhaWwoKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRocm93IE5PVF9BVkFJTEFCTEVfRVJST1I7XG59XG5cbi8qKlxuICogQSBjbGFzcyB3aGljaCB3aWxsIHRocm93IHdpdGhcbiAqIGF1dGgvb3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudCBpZiBpbnN0YW50aWF0ZWRcbiAqL1xuY2xhc3MgRmFpbENsYXNzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhyb3cgTk9UX0FWQUlMQUJMRV9FUlJPUjtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UgPSBpbk1lbW9yeVBlcnNpc3RlbmNlO1xuZXhwb3J0IGNvbnN0IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UgPSBpbk1lbW9yeVBlcnNpc3RlbmNlO1xuZXhwb3J0IGNvbnN0IGluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UgPSBpbk1lbW9yeVBlcnNpc3RlbmNlO1xuZXhwb3J0IGNvbnN0IGJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIgPSBOT1RfQVZBSUxBQkxFX0VSUk9SO1xuZXhwb3J0IGNvbnN0IFBob25lQXV0aFByb3ZpZGVyID0gRmFpbENsYXNzO1xuZXhwb3J0IGNvbnN0IHNpZ25JbldpdGhQaG9uZU51bWJlciA9IGZhaWw7XG5leHBvcnQgY29uc3QgbGlua1dpdGhQaG9uZU51bWJlciA9IGZhaWw7XG5leHBvcnQgY29uc3QgcmVhdXRoZW50aWNhdGVXaXRoUGhvbmVOdW1iZXIgPSBmYWlsO1xuZXhwb3J0IGNvbnN0IHVwZGF0ZVBob25lTnVtYmVyID0gZmFpbDtcbmV4cG9ydCBjb25zdCBzaWduSW5XaXRoUG9wdXAgPSBmYWlsO1xuZXhwb3J0IGNvbnN0IGxpbmtXaXRoUG9wdXAgPSBmYWlsO1xuZXhwb3J0IGNvbnN0IHJlYXV0aGVudGljYXRlV2l0aFBvcHVwID0gZmFpbDtcbmV4cG9ydCBjb25zdCBzaWduSW5XaXRoUmVkaXJlY3QgPSBmYWlsO1xuZXhwb3J0IGNvbnN0IGxpbmtXaXRoUmVkaXJlY3QgPSBmYWlsO1xuZXhwb3J0IGNvbnN0IHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0ID0gZmFpbDtcbmV4cG9ydCBjb25zdCBnZXRSZWRpcmVjdFJlc3VsdCA9IGZhaWw7XG5leHBvcnQgY29uc3QgUmVjYXB0Y2hhVmVyaWZpZXIgPSBGYWlsQ2xhc3M7XG5leHBvcnQgY2xhc3MgUGhvbmVNdWx0aUZhY3RvckdlbmVyYXRvciB7XG4gIHN0YXRpYyBhc3NlcnRpb24oKTogdW5rbm93biB7XG4gICAgdGhyb3cgTk9UX0FWQUlMQUJMRV9FUlJPUjtcbiAgfVxufVxuXG4vLyBTZXQgcGVyc2lzdGVuY2Ugc2hvdWxkIG5vLW9wIGluc3RlYWQgb2YgZmFpbC4gQ2hhbmdpbmcgdGhlIHByb3RvdHlwZSB3aWxsXG4vLyBtYWtlIHN1cmUgYm90aCBzZXRQZXJzaXN0ZW5jZShhdXRoLCBwZXJzaXN0ZW5jZSkgYW5kXG4vLyBhdXRoLnNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKSBhcmUgY292ZXJlZC5cbkF1dGhJbXBsLnByb3RvdHlwZS5zZXRQZXJzaXN0ZW5jZSA9IGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHt9O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgX3BlcmZvcm1BcGlSZXF1ZXN0LFxuICBFbmRwb2ludCxcbiAgSHR0cE1ldGhvZCxcbiAgX2FkZFRpZElmTmVjZXNzYXJ5XG59IGZyb20gJy4uL2luZGV4JztcbmltcG9ydCB7IEF1dGggfSBmcm9tICcuLi8uLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuaW1wb3J0IHsgSWRUb2tlblJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vbW9kZWwvaWRfdG9rZW4nO1xuaW1wb3J0IHsgTWZhRW5yb2xsbWVudCB9IGZyb20gJy4uL2FjY291bnRfbWFuYWdlbWVudC9tZmEnO1xuaW1wb3J0IHsgU2lnbkluV2l0aElkcFJlc3BvbnNlIH0gZnJvbSAnLi9pZHAnO1xuaW1wb3J0IHtcbiAgU2lnbkluV2l0aFBob25lTnVtYmVyUmVxdWVzdCxcbiAgU2lnbkluV2l0aFBob25lTnVtYmVyUmVzcG9uc2Vcbn0gZnJvbSAnLi9zbXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmFsaXplTWZhUmVzcG9uc2Uge1xuICBpZFRva2VuOiBzdHJpbmc7XG4gIHJlZnJlc2hUb2tlbjogc3RyaW5nO1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElkVG9rZW5NZmFSZXNwb25zZSBleHRlbmRzIElkVG9rZW5SZXNwb25zZSB7XG4gIG1mYVBlbmRpbmdDcmVkZW50aWFsPzogc3RyaW5nO1xuICBtZmFJbmZvPzogTWZhRW5yb2xsbWVudFtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXJ0UGhvbmVNZmFTaWduSW5SZXF1ZXN0IHtcbiAgbWZhUGVuZGluZ0NyZWRlbnRpYWw6IHN0cmluZztcbiAgbWZhRW5yb2xsbWVudElkOiBzdHJpbmc7XG4gIHBob25lU2lnbkluSW5mbzoge1xuICAgIHJlY2FwdGNoYVRva2VuOiBzdHJpbmc7XG4gIH07XG4gIHRlbmFudElkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXJ0UGhvbmVNZmFTaWduSW5SZXNwb25zZSB7XG4gIHBob25lUmVzcG9uc2VJbmZvOiB7XG4gICAgc2Vzc2lvbkluZm86IHN0cmluZztcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0U2lnbkluUGhvbmVNZmEoXG4gIGF1dGg6IEF1dGgsXG4gIHJlcXVlc3Q6IFN0YXJ0UGhvbmVNZmFTaWduSW5SZXF1ZXN0XG4pOiBQcm9taXNlPFN0YXJ0UGhvbmVNZmFTaWduSW5SZXNwb25zZT4ge1xuICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0PFxuICAgIFN0YXJ0UGhvbmVNZmFTaWduSW5SZXF1ZXN0LFxuICAgIFN0YXJ0UGhvbmVNZmFTaWduSW5SZXNwb25zZVxuICA+KFxuICAgIGF1dGgsXG4gICAgSHR0cE1ldGhvZC5QT1NULFxuICAgIEVuZHBvaW50LlNUQVJUX01GQV9TSUdOX0lOLFxuICAgIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KVxuICApO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmFsaXplUGhvbmVNZmFTaWduSW5SZXF1ZXN0IHtcbiAgbWZhUGVuZGluZ0NyZWRlbnRpYWw6IHN0cmluZztcbiAgcGhvbmVWZXJpZmljYXRpb25JbmZvOiBTaWduSW5XaXRoUGhvbmVOdW1iZXJSZXF1ZXN0O1xuICB0ZW5hbnRJZD86IHN0cmluZztcbn1cblxuLy8gVE9UUCBNRkEgU2lnbiBpbiBvbmx5IGhhcyBhIGZpbmFsaXplIHBoYXNlLiBQaG9uZSBNRkEgaGFzIGEgc3RhcnQgcGhhc2UgdG8gaW5pdGlhdGUgc2VuZGluZyBhblxuLy8gU01TIGFuZCBhIGZpbmFsaXplIHBoYXNlIHRvIGNvbXBsZXRlIHNpZ24gaW4uIFdpdGggVE9UUCwgdGhlIHVzZXIgYWxyZWFkeSBoYXMgdGhlIE9UUCBpbiB0aGVcbi8vIFRPVFAvQXV0aGVudGljYXRvciBhcHAuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmFsaXplVG90cE1mYVNpZ25JblJlcXVlc3Qge1xuICBtZmFQZW5kaW5nQ3JlZGVudGlhbDogc3RyaW5nO1xuICB0b3RwVmVyaWZpY2F0aW9uSW5mbzogeyB2ZXJpZmljYXRpb25Db2RlOiBzdHJpbmcgfTtcbiAgdGVuYW50SWQ/OiBzdHJpbmc7XG4gIG1mYUVucm9sbG1lbnRJZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmFsaXplUGhvbmVNZmFTaWduSW5SZXNwb25zZSBleHRlbmRzIEZpbmFsaXplTWZhUmVzcG9uc2Uge31cblxuZXhwb3J0IGludGVyZmFjZSBGaW5hbGl6ZVRvdHBNZmFTaWduSW5SZXNwb25zZSBleHRlbmRzIEZpbmFsaXplTWZhUmVzcG9uc2Uge31cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmFsaXplU2lnbkluUGhvbmVNZmEoXG4gIGF1dGg6IEF1dGgsXG4gIHJlcXVlc3Q6IEZpbmFsaXplUGhvbmVNZmFTaWduSW5SZXF1ZXN0XG4pOiBQcm9taXNlPEZpbmFsaXplUGhvbmVNZmFTaWduSW5SZXNwb25zZT4ge1xuICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0PFxuICAgIEZpbmFsaXplUGhvbmVNZmFTaWduSW5SZXF1ZXN0LFxuICAgIEZpbmFsaXplUGhvbmVNZmFTaWduSW5SZXNwb25zZVxuICA+KFxuICAgIGF1dGgsXG4gICAgSHR0cE1ldGhvZC5QT1NULFxuICAgIEVuZHBvaW50LkZJTkFMSVpFX01GQV9TSUdOX0lOLFxuICAgIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluYWxpemVTaWduSW5Ub3RwTWZhKFxuICBhdXRoOiBBdXRoLFxuICByZXF1ZXN0OiBGaW5hbGl6ZVRvdHBNZmFTaWduSW5SZXF1ZXN0XG4pOiBQcm9taXNlPEZpbmFsaXplVG90cE1mYVNpZ25JblJlc3BvbnNlPiB7XG4gIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3Q8XG4gICAgRmluYWxpemVUb3RwTWZhU2lnbkluUmVxdWVzdCxcbiAgICBGaW5hbGl6ZVRvdHBNZmFTaWduSW5SZXNwb25zZVxuICA+KFxuICAgIGF1dGgsXG4gICAgSHR0cE1ldGhvZC5QT1NULFxuICAgIEVuZHBvaW50LkZJTkFMSVpFX01GQV9TSUdOX0lOLFxuICAgIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KVxuICApO1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdHlwZSBQaG9uZU9yT2F1dGhUb2tlblJlc3BvbnNlID1cbiAgfCBTaWduSW5XaXRoUGhvbmVOdW1iZXJSZXNwb25zZVxuICB8IFNpZ25JbldpdGhJZHBSZXNwb25zZVxuICB8IElkVG9rZW5SZXNwb25zZTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBGYWN0b3JJZCwgTXVsdGlGYWN0b3JBc3NlcnRpb24gfSBmcm9tICcuLi9tb2RlbC9wdWJsaWNfdHlwZXMnO1xuaW1wb3J0IHsgZGVidWdGYWlsIH0gZnJvbSAnLi4vY29yZS91dGlsL2Fzc2VydCc7XG5pbXBvcnQgeyBNdWx0aUZhY3RvclNlc3Npb25JbXBsLCBNdWx0aUZhY3RvclNlc3Npb25UeXBlIH0gZnJvbSAnLi9tZmFfc2Vzc2lvbic7XG5pbXBvcnQgeyBGaW5hbGl6ZU1mYVJlc3BvbnNlIH0gZnJvbSAnLi4vYXBpL2F1dGhlbnRpY2F0aW9uL21mYSc7XG5pbXBvcnQgeyBBdXRoSW50ZXJuYWwgfSBmcm9tICcuLi9tb2RlbC9hdXRoJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbCBpbXBsZW1lbnRzIE11bHRpRmFjdG9yQXNzZXJ0aW9uIHtcbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKHJlYWRvbmx5IGZhY3RvcklkOiBGYWN0b3JJZCkge31cblxuICBfcHJvY2VzcyhcbiAgICBhdXRoOiBBdXRoSW50ZXJuYWwsXG4gICAgc2Vzc2lvbjogTXVsdGlGYWN0b3JTZXNzaW9uSW1wbCxcbiAgICBkaXNwbGF5TmFtZT86IHN0cmluZyB8IG51bGxcbiAgKTogUHJvbWlzZTxGaW5hbGl6ZU1mYVJlc3BvbnNlPiB7XG4gICAgc3dpdGNoIChzZXNzaW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgTXVsdGlGYWN0b3JTZXNzaW9uVHlwZS5FTlJPTEw6XG4gICAgICAgIHJldHVybiB0aGlzLl9maW5hbGl6ZUVucm9sbChhdXRoLCBzZXNzaW9uLmNyZWRlbnRpYWwsIGRpc3BsYXlOYW1lKTtcbiAgICAgIGNhc2UgTXVsdGlGYWN0b3JTZXNzaW9uVHlwZS5TSUdOX0lOOlxuICAgICAgICByZXR1cm4gdGhpcy5fZmluYWxpemVTaWduSW4oYXV0aCwgc2Vzc2lvbi5jcmVkZW50aWFsKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ3VuZXhwZWN0ZWQgTXVsdGlGYWN0b3JTZXNzaW9uVHlwZScpO1xuICAgIH1cbiAgfVxuXG4gIGFic3RyYWN0IF9maW5hbGl6ZUVucm9sbChcbiAgICBhdXRoOiBBdXRoSW50ZXJuYWwsXG4gICAgaWRUb2tlbjogc3RyaW5nLFxuICAgIGRpc3BsYXlOYW1lPzogc3RyaW5nIHwgbnVsbFxuICApOiBQcm9taXNlPEZpbmFsaXplTWZhUmVzcG9uc2U+O1xuICBhYnN0cmFjdCBfZmluYWxpemVTaWduSW4oXG4gICAgYXV0aDogQXV0aEludGVybmFsLFxuICAgIG1mYVBlbmRpbmdDcmVkZW50aWFsOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxGaW5hbGl6ZU1mYVJlc3BvbnNlPjtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge1xuICBUb3RwTXVsdGlGYWN0b3JBc3NlcnRpb24sXG4gIE11bHRpRmFjdG9yU2Vzc2lvbixcbiAgRmFjdG9ySWRcbn0gZnJvbSAnLi4vLi4vbW9kZWwvcHVibGljX3R5cGVzJztcbmltcG9ydCB7IEF1dGhJbnRlcm5hbCB9IGZyb20gJy4uLy4uL21vZGVsL2F1dGgnO1xuaW1wb3J0IHtcbiAgZmluYWxpemVFbnJvbGxUb3RwTWZhLFxuICBzdGFydEVucm9sbFRvdHBNZmEsXG4gIFN0YXJ0VG90cE1mYUVucm9sbG1lbnRSZXNwb25zZSxcbiAgVG90cFZlcmlmaWNhdGlvbkluZm9cbn0gZnJvbSAnLi4vLi4vYXBpL2FjY291bnRfbWFuYWdlbWVudC9tZmEnO1xuaW1wb3J0IHtcbiAgRmluYWxpemVNZmFSZXNwb25zZSxcbiAgZmluYWxpemVTaWduSW5Ub3RwTWZhXG59IGZyb20gJy4uLy4uL2FwaS9hdXRoZW50aWNhdGlvbi9tZmEnO1xuaW1wb3J0IHsgTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIH0gZnJvbSAnLi4vLi4vbWZhL21mYV9hc3NlcnRpb24nO1xuaW1wb3J0IHsgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbCB9IGZyb20gJy4uL21mYV9zZXNzaW9uJztcbmltcG9ydCB7IEF1dGhFcnJvckNvZGUgfSBmcm9tICcuLi8uLi9jb3JlL2Vycm9ycyc7XG5pbXBvcnQgeyBfYXNzZXJ0IH0gZnJvbSAnLi4vLi4vY29yZS91dGlsL2Fzc2VydCc7XG5cbi8qKlxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYSB7QGxpbmsgVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9ufS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBUb3RwTXVsdGlGYWN0b3JHZW5lcmF0b3Ige1xuICAvKipcbiAgICogUHJvdmlkZXMgYSB7QGxpbmsgVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9ufSB0byBjb25maXJtIG93bmVyc2hpcCBvZlxuICAgKiB0aGUgVE9UUCAodGltZS1iYXNlZCBvbmUtdGltZSBwYXNzd29yZCkgc2Vjb25kIGZhY3Rvci5cbiAgICogVGhpcyBhc3NlcnRpb24gaXMgdXNlZCB0byBjb21wbGV0ZSBlbnJvbGxtZW50IGluIFRPVFAgc2Vjb25kIGZhY3Rvci5cbiAgICpcbiAgICogQHBhcmFtIHNlY3JldCBBIHtAbGluayBUb3RwU2VjcmV0fSBjb250YWluaW5nIHRoZSBzaGFyZWQgc2VjcmV0IGtleSBhbmQgb3RoZXIgVE9UUCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gb25lVGltZVBhc3N3b3JkIE9uZS10aW1lIHBhc3N3b3JkIGZyb20gVE9UUCBBcHAuXG4gICAqIEByZXR1cm5zIEEge0BsaW5rIFRvdHBNdWx0aUZhY3RvckFzc2VydGlvbn0gd2hpY2ggY2FuIGJlIHVzZWQgd2l0aFxuICAgKiB7QGxpbmsgTXVsdGlGYWN0b3JVc2VyLmVucm9sbH0uXG4gICAqL1xuICBzdGF0aWMgYXNzZXJ0aW9uRm9yRW5yb2xsbWVudChcbiAgICBzZWNyZXQ6IFRvdHBTZWNyZXQsXG4gICAgb25lVGltZVBhc3N3b3JkOiBzdHJpbmdcbiAgKTogVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9uIHtcbiAgICByZXR1cm4gVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbC5fZnJvbVNlY3JldChzZWNyZXQsIG9uZVRpbWVQYXNzd29yZCk7XG4gIH1cblxuICAvKipcbiAgICogUHJvdmlkZXMgYSB7QGxpbmsgVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9ufSB0byBjb25maXJtIG93bmVyc2hpcCBvZiB0aGUgVE9UUCBzZWNvbmQgZmFjdG9yLlxuICAgKiBUaGlzIGFzc2VydGlvbiBpcyB1c2VkIHRvIGNvbXBsZXRlIHNpZ25JbiB3aXRoIFRPVFAgYXMgdGhlIHNlY29uZCBmYWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSBlbnJvbGxtZW50SWQgaWRlbnRpZmllcyB0aGUgZW5yb2xsZWQgVE9UUCBzZWNvbmQgZmFjdG9yLlxuICAgKiBAcGFyYW0gb25lVGltZVBhc3N3b3JkIE9uZS10aW1lIHBhc3N3b3JkIGZyb20gVE9UUCBBcHAuXG4gICAqIEByZXR1cm5zIEEge0BsaW5rIFRvdHBNdWx0aUZhY3RvckFzc2VydGlvbn0gd2hpY2ggY2FuIGJlIHVzZWQgd2l0aFxuICAgKiB7QGxpbmsgTXVsdGlGYWN0b3JSZXNvbHZlci5yZXNvbHZlU2lnbklufS5cbiAgICovXG4gIHN0YXRpYyBhc3NlcnRpb25Gb3JTaWduSW4oXG4gICAgZW5yb2xsbWVudElkOiBzdHJpbmcsXG4gICAgb25lVGltZVBhc3N3b3JkOiBzdHJpbmdcbiAgKTogVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9uIHtcbiAgICByZXR1cm4gVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbC5fZnJvbUVucm9sbG1lbnRJZChcbiAgICAgIGVucm9sbG1lbnRJZCxcbiAgICAgIG9uZVRpbWVQYXNzd29yZFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgdG8ge0BsaW5rIFRvdHBTZWNyZXR9IHdoaWNoIGNvbnRhaW5zIHRoZSBUT1RQIHNoYXJlZCBzZWNyZXQga2V5IGFuZCBvdGhlciBwYXJhbWV0ZXJzLlxuICAgKiBDcmVhdGVzIGEgVE9UUCBzZWNyZXQgYXMgcGFydCBvZiBlbnJvbGxpbmcgYSBUT1RQIHNlY29uZCBmYWN0b3IuXG4gICAqIFVzZWQgZm9yIGdlbmVyYXRpbmcgYSBRUiBjb2RlIFVSTCBvciBpbnB1dHRpbmcgaW50byBhIFRPVFAgYXBwLlxuICAgKiBUaGlzIG1ldGhvZCB1c2VzIHRoZSBhdXRoIGluc3RhbmNlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHVzZXIgaW4gdGhlIG11bHRpRmFjdG9yU2Vzc2lvbi5cbiAgICpcbiAgICogQHBhcmFtIHNlc3Npb24gVGhlIHtAbGluayBNdWx0aUZhY3RvclNlc3Npb259IHRoYXQgdGhlIHVzZXIgaXMgcGFydCBvZi5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIHRvIHtAbGluayBUb3RwU2VjcmV0fS5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZW5lcmF0ZVNlY3JldChcbiAgICBzZXNzaW9uOiBNdWx0aUZhY3RvclNlc3Npb25cbiAgKTogUHJvbWlzZTxUb3RwU2VjcmV0PiB7XG4gICAgY29uc3QgbWZhU2Vzc2lvbiA9IHNlc3Npb24gYXMgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbDtcbiAgICBfYXNzZXJ0KFxuICAgICAgdHlwZW9mIG1mYVNlc3Npb24uYXV0aCAhPT0gJ3VuZGVmaW5lZCcsXG4gICAgICBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SXG4gICAgKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN0YXJ0RW5yb2xsVG90cE1mYShtZmFTZXNzaW9uLmF1dGgsIHtcbiAgICAgIGlkVG9rZW46IG1mYVNlc3Npb24uY3JlZGVudGlhbCxcbiAgICAgIHRvdHBFbnJvbGxtZW50SW5mbzoge31cbiAgICB9KTtcbiAgICByZXR1cm4gVG90cFNlY3JldC5fZnJvbVN0YXJ0VG90cE1mYUVucm9sbG1lbnRSZXNwb25zZShcbiAgICAgIHJlc3BvbnNlLFxuICAgICAgbWZhU2Vzc2lvbi5hdXRoXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaWRlbnRpZmllciBvZiB0aGUgVE9UUCBzZWNvbmQgZmFjdG9yOiBgdG90cGAuXG4gICAqL1xuICBzdGF0aWMgRkFDVE9SX0lEOiAndG90cCcgPSBGYWN0b3JJZC5UT1RQO1xufVxuXG5leHBvcnQgY2xhc3MgVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbFxuICBleHRlbmRzIE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbFxuICBpbXBsZW1lbnRzIFRvdHBNdWx0aUZhY3RvckFzc2VydGlvblxue1xuICBjb25zdHJ1Y3RvcihcbiAgICByZWFkb25seSBvdHA6IHN0cmluZyxcbiAgICByZWFkb25seSBlbnJvbGxtZW50SWQ/OiBzdHJpbmcsXG4gICAgcmVhZG9ubHkgc2VjcmV0PzogVG90cFNlY3JldFxuICApIHtcbiAgICBzdXBlcihGYWN0b3JJZC5UT1RQKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgc3RhdGljIF9mcm9tU2VjcmV0KFxuICAgIHNlY3JldDogVG90cFNlY3JldCxcbiAgICBvdHA6IHN0cmluZ1xuICApOiBUb3RwTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIHtcbiAgICByZXR1cm4gbmV3IFRvdHBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwob3RwLCB1bmRlZmluZWQsIHNlY3JldCk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHN0YXRpYyBfZnJvbUVucm9sbG1lbnRJZChcbiAgICBlbnJvbGxtZW50SWQ6IHN0cmluZyxcbiAgICBvdHA6IHN0cmluZ1xuICApOiBUb3RwTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIHtcbiAgICByZXR1cm4gbmV3IFRvdHBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwob3RwLCBlbnJvbGxtZW50SWQpO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc3luYyBfZmluYWxpemVFbnJvbGwoXG4gICAgYXV0aDogQXV0aEludGVybmFsLFxuICAgIGlkVG9rZW46IHN0cmluZyxcbiAgICBkaXNwbGF5TmFtZT86IHN0cmluZyB8IG51bGxcbiAgKTogUHJvbWlzZTxGaW5hbGl6ZU1mYVJlc3BvbnNlPiB7XG4gICAgX2Fzc2VydChcbiAgICAgIHR5cGVvZiB0aGlzLnNlY3JldCAhPT0gJ3VuZGVmaW5lZCcsXG4gICAgICBhdXRoLFxuICAgICAgQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUlxuICAgICk7XG4gICAgcmV0dXJuIGZpbmFsaXplRW5yb2xsVG90cE1mYShhdXRoLCB7XG4gICAgICBpZFRva2VuLFxuICAgICAgZGlzcGxheU5hbWUsXG4gICAgICB0b3RwVmVyaWZpY2F0aW9uSW5mbzogdGhpcy5zZWNyZXQuX21ha2VUb3RwVmVyaWZpY2F0aW9uSW5mbyh0aGlzLm90cClcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgYXN5bmMgX2ZpbmFsaXplU2lnbkluKFxuICAgIGF1dGg6IEF1dGhJbnRlcm5hbCxcbiAgICBtZmFQZW5kaW5nQ3JlZGVudGlhbDogc3RyaW5nXG4gICk6IFByb21pc2U8RmluYWxpemVNZmFSZXNwb25zZT4ge1xuICAgIF9hc3NlcnQoXG4gICAgICB0aGlzLmVucm9sbG1lbnRJZCAhPT0gdW5kZWZpbmVkICYmIHRoaXMub3RwICE9PSB1bmRlZmluZWQsXG4gICAgICBhdXRoLFxuICAgICAgQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUlxuICAgICk7XG4gICAgY29uc3QgdG90cFZlcmlmaWNhdGlvbkluZm8gPSB7IHZlcmlmaWNhdGlvbkNvZGU6IHRoaXMub3RwIH07XG4gICAgcmV0dXJuIGZpbmFsaXplU2lnbkluVG90cE1mYShhdXRoLCB7XG4gICAgICBtZmFQZW5kaW5nQ3JlZGVudGlhbCxcbiAgICAgIG1mYUVucm9sbG1lbnRJZDogdGhpcy5lbnJvbGxtZW50SWQsXG4gICAgICB0b3RwVmVyaWZpY2F0aW9uSW5mb1xuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYSB7QGxpbmsgVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9ufS5cbiAqXG4gKiBTdG9yZXMgdGhlIHNoYXJlZCBzZWNyZXQga2V5IGFuZCBvdGhlciBwYXJhbWV0ZXJzIHRvIGdlbmVyYXRlIHRpbWUtYmFzZWQgT1RQcy5cbiAqIEltcGxlbWVudHMgbWV0aG9kcyB0byByZXRyaWV2ZSB0aGUgc2hhcmVkIHNlY3JldCBrZXkgYW5kIGdlbmVyYXRlIGEgUVIgY29kZSBVUkwuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBUb3RwU2VjcmV0IHtcbiAgLyoqXG4gICAqIFNoYXJlZCBzZWNyZXQga2V5L3NlZWQgdXNlZCBmb3IgZW5yb2xsaW5nIGluIFRPVFAgTUZBIGFuZCBnZW5lcmF0aW5nIE9UUHMuXG4gICAqL1xuICByZWFkb25seSBzZWNyZXRLZXk6IHN0cmluZztcbiAgLyoqXG4gICAqIEhhc2hpbmcgYWxnb3JpdGhtIHVzZWQuXG4gICAqL1xuICByZWFkb25seSBoYXNoaW5nQWxnb3JpdGhtOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBMZW5ndGggb2YgdGhlIG9uZS10aW1lIHBhc3N3b3JkcyB0byBiZSBnZW5lcmF0ZWQuXG4gICAqL1xuICByZWFkb25seSBjb2RlTGVuZ3RoOiBudW1iZXI7XG4gIC8qKlxuICAgKiBUaGUgaW50ZXJ2YWwgKGluIHNlY29uZHMpIHdoZW4gdGhlIE9UUCBjb2RlcyBzaG91bGQgY2hhbmdlLlxuICAgKi9cbiAgcmVhZG9ubHkgY29kZUludGVydmFsU2Vjb25kczogbnVtYmVyO1xuICAvKipcbiAgICogVGhlIHRpbWVzdGFtcCAoVVRDIHN0cmluZykgYnkgd2hpY2ggVE9UUCBlbnJvbGxtZW50IHNob3VsZCBiZSBjb21wbGV0ZWQuXG4gICAqL1xuICAvLyBUaGlzIGNhbiBiZSB1c2VkIGJ5IGNhbGxlcnMgdG8gc2hvdyBhIGNvdW50ZG93biBvZiB3aGVuIHRvIGVudGVyIE9UUCBjb2RlIGJ5LlxuICByZWFkb25seSBlbnJvbGxtZW50Q29tcGxldGlvbkRlYWRsaW5lOiBzdHJpbmc7XG5cbiAgLy8gVGhlIHB1YmxpYyBtZW1iZXJzIGFyZSBkZWNsYXJlZCBvdXRzaWRlIHRoZSBjb25zdHJ1Y3RvciBzbyB0aGUgZG9jcyBjYW4gYmUgZ2VuZXJhdGVkLlxuICBwcml2YXRlIGNvbnN0cnVjdG9yKFxuICAgIHNlY3JldEtleTogc3RyaW5nLFxuICAgIGhhc2hpbmdBbGdvcml0aG06IHN0cmluZyxcbiAgICBjb2RlTGVuZ3RoOiBudW1iZXIsXG4gICAgY29kZUludGVydmFsU2Vjb25kczogbnVtYmVyLFxuICAgIGVucm9sbG1lbnRDb21wbGV0aW9uRGVhZGxpbmU6IHN0cmluZyxcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNlc3Npb25JbmZvOiBzdHJpbmcsXG4gICAgcHJpdmF0ZSByZWFkb25seSBhdXRoOiBBdXRoSW50ZXJuYWxcbiAgKSB7XG4gICAgdGhpcy5zZWNyZXRLZXkgPSBzZWNyZXRLZXk7XG4gICAgdGhpcy5oYXNoaW5nQWxnb3JpdGhtID0gaGFzaGluZ0FsZ29yaXRobTtcbiAgICB0aGlzLmNvZGVMZW5ndGggPSBjb2RlTGVuZ3RoO1xuICAgIHRoaXMuY29kZUludGVydmFsU2Vjb25kcyA9IGNvZGVJbnRlcnZhbFNlY29uZHM7XG4gICAgdGhpcy5lbnJvbGxtZW50Q29tcGxldGlvbkRlYWRsaW5lID0gZW5yb2xsbWVudENvbXBsZXRpb25EZWFkbGluZTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgc3RhdGljIF9mcm9tU3RhcnRUb3RwTWZhRW5yb2xsbWVudFJlc3BvbnNlKFxuICAgIHJlc3BvbnNlOiBTdGFydFRvdHBNZmFFbnJvbGxtZW50UmVzcG9uc2UsXG4gICAgYXV0aDogQXV0aEludGVybmFsXG4gICk6IFRvdHBTZWNyZXQge1xuICAgIHJldHVybiBuZXcgVG90cFNlY3JldChcbiAgICAgIHJlc3BvbnNlLnRvdHBTZXNzaW9uSW5mby5zaGFyZWRTZWNyZXRLZXksXG4gICAgICByZXNwb25zZS50b3RwU2Vzc2lvbkluZm8uaGFzaGluZ0FsZ29yaXRobSxcbiAgICAgIHJlc3BvbnNlLnRvdHBTZXNzaW9uSW5mby52ZXJpZmljYXRpb25Db2RlTGVuZ3RoLFxuICAgICAgcmVzcG9uc2UudG90cFNlc3Npb25JbmZvLnBlcmlvZFNlYyxcbiAgICAgIG5ldyBEYXRlKHJlc3BvbnNlLnRvdHBTZXNzaW9uSW5mby5maW5hbGl6ZUVucm9sbG1lbnRUaW1lKS50b1VUQ1N0cmluZygpLFxuICAgICAgcmVzcG9uc2UudG90cFNlc3Npb25JbmZvLnNlc3Npb25JbmZvLFxuICAgICAgYXV0aFxuICAgICk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIF9tYWtlVG90cFZlcmlmaWNhdGlvbkluZm8ob3RwOiBzdHJpbmcpOiBUb3RwVmVyaWZpY2F0aW9uSW5mbyB7XG4gICAgcmV0dXJuIHsgc2Vzc2lvbkluZm86IHRoaXMuc2Vzc2lvbkluZm8sIHZlcmlmaWNhdGlvbkNvZGU6IG90cCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBRUiBjb2RlIFVSTCBhcyBkZXNjcmliZWQgaW5cbiAgICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9nb29nbGUtYXV0aGVudGljYXRvci93aWtpL0tleS1VcmktRm9ybWF0XG4gICAqIFRoaXMgY2FuIGJlIGRpc3BsYXllZCB0byB0aGUgdXNlciBhcyBhIFFSIGNvZGUgdG8gYmUgc2Nhbm5lZCBpbnRvIGEgVE9UUCBhcHAgbGlrZSBHb29nbGUgQXV0aGVudGljYXRvci5cbiAgICogSWYgdGhlIG9wdGlvbmFsIHBhcmFtZXRlcnMgYXJlIHVuc3BlY2lmaWVkLCBhbiBhY2NvdW50TmFtZSBvZiA8dXNlckVtYWlsPiBhbmQgaXNzdWVyIG9mIDxmaXJlYmFzZUFwcE5hbWU+IGFyZSB1c2VkLlxuICAgKlxuICAgKiBAcGFyYW0gYWNjb3VudE5hbWUgdGhlIG5hbWUgb2YgdGhlIGFjY291bnQvYXBwIGFsb25nIHdpdGggYSB1c2VyIGlkZW50aWZpZXIuXG4gICAqIEBwYXJhbSBpc3N1ZXIgaXNzdWVyIG9mIHRoZSBUT1RQIChsaWtlbHkgdGhlIGFwcCBuYW1lKS5cbiAgICogQHJldHVybnMgQSBRUiBjb2RlIFVSTCBzdHJpbmcuXG4gICAqL1xuICBnZW5lcmF0ZVFyQ29kZVVybChhY2NvdW50TmFtZT86IHN0cmluZywgaXNzdWVyPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBsZXQgdXNlRGVmYXVsdHMgPSBmYWxzZTtcbiAgICBpZiAoX2lzRW1wdHlTdHJpbmcoYWNjb3VudE5hbWUpIHx8IF9pc0VtcHR5U3RyaW5nKGlzc3VlcikpIHtcbiAgICAgIHVzZURlZmF1bHRzID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHVzZURlZmF1bHRzKSB7XG4gICAgICBpZiAoX2lzRW1wdHlTdHJpbmcoYWNjb3VudE5hbWUpKSB7XG4gICAgICAgIGFjY291bnROYW1lID0gdGhpcy5hdXRoLmN1cnJlbnRVc2VyPy5lbWFpbCB8fCAndW5rbm93bnVzZXInO1xuICAgICAgfVxuICAgICAgaWYgKF9pc0VtcHR5U3RyaW5nKGlzc3VlcikpIHtcbiAgICAgICAgaXNzdWVyID0gdGhpcy5hdXRoLm5hbWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBgb3RwYXV0aDovL3RvdHAvJHtpc3N1ZXJ9OiR7YWNjb3VudE5hbWV9P3NlY3JldD0ke3RoaXMuc2VjcmV0S2V5fSZpc3N1ZXI9JHtpc3N1ZXJ9JmFsZ29yaXRobT0ke3RoaXMuaGFzaGluZ0FsZ29yaXRobX0mZGlnaXRzPSR7dGhpcy5jb2RlTGVuZ3RofWA7XG4gIH1cbn1cblxuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gX2lzRW1wdHlTdHJpbmcoaW5wdXQ/OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgfHwgaW5wdXQ/Lmxlbmd0aCA9PT0gMDtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFB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