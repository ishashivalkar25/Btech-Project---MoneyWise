{"version":3,"names":["_pie","_interopRequireDefault","require","_react","_reactNative","_reactNativeSvg","_AbstractChart","_jsxRuntime","ProgressChart","_super","__extends","prototype","render","_this","_a","props","width","height","style","data","hideLegend","strokeWidth","radius","_b","borderRadius","_c","margin","_d","marginRight","Array","isArray","pies","map","pieData","i","r","length","Pie","R","center","accessor","x","pieBackgrounds","withLabel","labels","withColor","colors","legend","jsxs","Fragment","children","jsx","G","_","Rect","fill","withCustomBarColorFromData","chartConfig","color","rx","ry","y","Math","random","Text","Object","assign","getPropsForLabels","round","View","__assign","padding","Svg","renderDefs","pie","Path","d","curves","sector","path","print","stroke","strokeLinecap","strokeLinejoin","defaultProps","AbstractChart","_default","exports","default"],"sources":["../src/ProgressChart.tsx"],"sourcesContent":["import Pie from \"paths-js/pie\";\nimport React from \"react\";\nimport { View, ViewStyle } from \"react-native\";\nimport { G, Path, Rect, Svg, Text } from \"react-native-svg\";\n\nimport AbstractChart, {\n  AbstractChartConfig,\n  AbstractChartProps\n} from \"./AbstractChart\";\n\nexport type ProgressChartData =\n  | Array<number>\n  | { labels?: Array<string>; colors?: Array<string>; data: Array<number> };\n\nexport interface ProgressChartProps extends AbstractChartProps {\n  data: ProgressChartData;\n  width: number;\n  height: number;\n  center?: Array<number>;\n  absolute?: boolean;\n  hasLegend?: boolean;\n  style?: Partial<ViewStyle>;\n  chartConfig?: AbstractChartConfig;\n  hideLegend?: boolean;\n  strokeWidth?: number;\n  radius?: number;\n  withCustomBarColorFromData?: boolean;\n}\n\ntype ProgressChartState = {};\n\nclass ProgressChart extends AbstractChart<\n  ProgressChartProps,\n  ProgressChartState\n> {\n  public static defaultProps = { style: {}, strokeWidth: 16, radius: 32 };\n\n  render() {\n    let {\n      width,\n      height,\n      style,\n      data,\n      hideLegend,\n      strokeWidth,\n      radius\n    } = this.props;\n\n    const { borderRadius = 0, margin = 0, marginRight = 0 } = style;\n\n    if (Array.isArray(data)) {\n      data = {\n        data\n      };\n    }\n\n    const pies = data.data.map((pieData, i) => {\n      const r =\n        ((height / 2 - 32) /\n          (Array.isArray(data) ? data.length : data.data.length)) *\n          i +\n        radius;\n\n      return Pie({\n        r,\n        R: r,\n        center: [0, 0],\n        data: [pieData, 1 - pieData],\n        accessor(x: string) {\n          return x;\n        }\n      });\n    });\n\n    const pieBackgrounds = data.data.map((pieData, i) => {\n      const r =\n        ((height / 2 - 32) /\n          (Array.isArray(data) ? data.length : data.data.length)) *\n          i +\n        radius;\n      return Pie({\n        r,\n        R: r,\n        center: [0, 0],\n        data: [0.999, 0.001],\n        accessor(x: string) {\n          return x;\n        }\n      });\n    });\n\n    const withLabel = (i: number) =>\n      (data as any).labels && (data as any).labels[i];\n\n    const withColor = (i: number) =>\n      (data as any).colors && (data as any).colors[i];\n\n    const legend = !hideLegend && (\n      <>\n        <G>\n          {pies.map((_, i) => {\n            return (\n              <Rect\n                key={Math.random()}\n                width=\"16px\"\n                height=\"16px\"\n                fill={\n                  this.props.withCustomBarColorFromData\n                    ? withColor(i)\n                    : this.props.chartConfig.color(0.2 * (i + 1), i)\n                }\n                rx={8}\n                ry={8}\n                x={this.props.width / 2.5 - 24}\n                y={\n                  -(this.props.height / 2.5) +\n                  ((this.props.height * 0.8) /\n                    (Array.isArray(data) ? data.length : data.data.length)) *\n                    i +\n                  12\n                }\n              />\n            );\n          })}\n        </G>\n        <G>\n          {pies.map((_, i) => {\n            return (\n              <Text\n                key={Math.random()}\n                x={this.props.width / 2.5}\n                y={\n                  -(this.props.height / 2.5) +\n                  ((this.props.height * 0.8) /\n                    (Array.isArray(data) ? data.length : data.data.length)) *\n                    i +\n                  12 * 2\n                }\n                {...this.getPropsForLabels()}\n              >\n                {withLabel(i)\n                  ? `${(data as any).labels[i]} ${Math.round(\n                      100 * (data as any).data[i]\n                    )}%`\n                  : `${Math.round(100 * (data as any).data[i])}%`}\n              </Text>\n            );\n          })}\n        </G>\n      </>\n    );\n\n    return (\n      <View\n        style={{\n          width,\n          height,\n          padding: 0,\n          ...style\n        }}\n      >\n        <Svg\n          width={width - (margin as number) * 2 - (marginRight as number)}\n          height={height}\n        >\n          {this.renderDefs({\n            width: this.props.height,\n            height: this.props.height,\n            ...this.props.chartConfig\n          })}\n          <Rect\n            width=\"100%\"\n            height={this.props.height}\n            rx={borderRadius}\n            ry={borderRadius}\n            fill=\"url(#backgroundGradient)\"\n          />\n          <G\n            x={this.props.width / (hideLegend ? 2 : 2.5)}\n            y={this.props.height / 2}\n          >\n            <G>\n              {pieBackgrounds.map((pie, i) => {\n                return (\n                  <Path\n                    key={Math.random()}\n                    d={pie.curves[0].sector.path.print()}\n                    strokeWidth={strokeWidth}\n                    stroke={this.props.chartConfig.color(0.2, i)}\n                  />\n                );\n              })}\n            </G>\n            <G>\n              {pies.map((pie, i) => {\n                return (\n                  <Path\n                    key={Math.random()}\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    d={pie.curves[0].sector.path.print()}\n                    strokeWidth={strokeWidth}\n                    stroke={\n                      this.props.withCustomBarColorFromData\n                        ? withColor(i)\n                        : this.props.chartConfig.color(\n                            (i / pies.length) * 0.5 + 0.5,\n                            i\n                          )\n                    }\n                  />\n                );\n              })}\n            </G>\n            {legend}\n          </G>\n        </Svg>\n      </View>\n    );\n  }\n}\n\nexport default ProgressChart;\n"],"mappings":";;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,YAAA,GAAAF,OAAA;AACA,IAAAG,eAAA,GAAAH,OAAA;AAEA,IAAAI,cAAA,GAAAL,sBAAA,CAAAC,OAAA;AAGyB,IAAAK,WAAA,GAAAL,OAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuBzB,IAAAM,aAAA,aAAAC,MAAA;EAA4BC,SAAA,CAAAF,aAAA,EAAAC,MAAA;EAA5B,SAAAD,cAAA;;EA6LA;EAvLEA,aAAA,CAAAG,SAAA,CAAAC,MAAM,GAAN;IAAA,IAAAC,KAAA;IACM,IAAAC,EAAA,GAQA,IAAI,CAACC,KAAK;MAPZC,KAAK,GAAAF,EAAA,CAAAE,KAAA;MACLC,MAAM,GAAAH,EAAA,CAAAG,MAAA;MACNC,KAAK,GAAAJ,EAAA,CAAAI,KAAA;MACLC,IAAI,GAAAL,EAAA,CAAAK,IAAA;MACJC,UAAU,GAAAN,EAAA,CAAAM,UAAA;MACVC,WAAW,GAAAP,EAAA,CAAAO,WAAA;MACXC,MAAM,GAAAR,EAAA,CAAAQ,MACM;IAEN,IAAAC,EAAA,GAAkDL,KAAK,CAAAM,YAAvC;MAAhBA,YAAY,GAAAD,EAAA,cAAG,CAAC,GAAAA,EAAA;MAAEE,EAAA,GAAgCP,KAAK,CAAAQ,MAA3B;MAAVA,MAAM,GAAAD,EAAA,cAAG,CAAC,GAAAA,EAAA;MAAEE,EAAA,GAAoBT,KAAK,CAAAU,WAAV;MAAfA,WAAW,GAAAD,EAAA,cAAG,CAAC,GAAAA,EAAA;IAErD,IAAIE,KAAK,CAACC,OAAO,CAACX,IAAI,CAAC,EAAE;MACvBA,IAAI,GAAG;QACLA,IAAI,EAAAA;OACL;;IAGH,IAAMY,IAAI,GAAGZ,IAAI,CAACA,IAAI,CAACa,GAAG,CAAC,UAACC,OAAO,EAAEC,CAAC;MACpC,IAAMC,CAAC,GACJ,CAAClB,MAAM,GAAG,CAAC,GAAG,EAAE,KACdY,KAAK,CAACC,OAAO,CAACX,IAAI,CAAC,GAAGA,IAAI,CAACiB,MAAM,GAAGjB,IAAI,CAACA,IAAI,CAACiB,MAAM,CAAC,GACtDF,CAAC,GACHZ,MAAM;MAER,OAAO,IAAAe,YAAG,EAAC;QACTF,CAAC,EAAAA,CAAA;QACDG,CAAC,EAAEH,CAAC;QACJI,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACdpB,IAAI,EAAE,CAACc,OAAO,EAAE,CAAC,GAAGA,OAAO,CAAC;QAC5BO,QAAQ,EAAR,SAAAA,SAASC,CAAS;UAChB,OAAOA,CAAC;QACV;OACD,CAAC;IACJ,CAAC,CAAC;IAEF,IAAMC,cAAc,GAAGvB,IAAI,CAACA,IAAI,CAACa,GAAG,CAAC,UAACC,OAAO,EAAEC,CAAC;MAC9C,IAAMC,CAAC,GACJ,CAAClB,MAAM,GAAG,CAAC,GAAG,EAAE,KACdY,KAAK,CAACC,OAAO,CAACX,IAAI,CAAC,GAAGA,IAAI,CAACiB,MAAM,GAAGjB,IAAI,CAACA,IAAI,CAACiB,MAAM,CAAC,GACtDF,CAAC,GACHZ,MAAM;MACR,OAAO,IAAAe,YAAG,EAAC;QACTF,CAAC,EAAAA,CAAA;QACDG,CAAC,EAAEH,CAAC;QACJI,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACdpB,IAAI,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC;QACpBqB,QAAQ,EAAR,SAAAA,SAASC,CAAS;UAChB,OAAOA,CAAC;QACV;OACD,CAAC;IACJ,CAAC,CAAC;IAEF,IAAME,SAAS,GAAG,SAAZA,SAASA,CAAIT,CAAS;MAC1B,OAACf,IAAY,CAACyB,MAAM,IAAKzB,IAAY,CAACyB,MAAM,CAACV,CAAC,CAAC;IAA/C,CAA+C;IAEjD,IAAMW,SAAS,GAAG,SAAZA,SAASA,CAAIX,CAAS;MAC1B,OAACf,IAAY,CAAC2B,MAAM,IAAK3B,IAAY,CAAC2B,MAAM,CAACZ,CAAC,CAAC;IAA/C,CAA+C;IAEjD,IAAMa,MAAM,GAAG,CAAC3B,UAAU,IACxB,IAAAb,WAAA,CAAAyC,IAAA,EAAAzC,WAAA,CAAA0C,QAAA;MAAAC,QAAA,GACE,IAAA3C,WAAA,CAAA4C,GAAA,EAAC9C,eAAA,CAAA+C,CAAC;QAAAF,QAAA,EACCnB,IAAI,CAACC,GAAG,CAAC,UAACqB,CAAC,EAAEnB,CAAC;UACb,OACE,IAAA3B,WAAA,CAAA4C,GAAA,EAAC9C,eAAA,CAAAiD,IAAI;YAEHtC,KAAK,EAAC,MAAM;YACZC,MAAM,EAAC,MAAM;YACbsC,IAAI,EACF1C,KAAI,CAACE,KAAK,CAACyC,0BAA0B,GACjCX,SAAS,CAACX,CAAC,CAAC,GACZrB,KAAI,CAACE,KAAK,CAAC0C,WAAW,CAACC,KAAK,CAAC,GAAG,IAAIxB,CAAC,GAAG,CAAC,CAAC,EAAEA,CAAC,CAClD;YACDyB,EAAE,EAAE,CAAE;YACNC,EAAE,EAAE,CAAE;YACNnB,CAAC,EAAE5B,KAAI,CAACE,KAAK,CAACC,KAAK,GAAG,GAAG,GAAG,EAAG;YAC/B6C,CAAC,EACC,EAAEhD,KAAI,CAACE,KAAK,CAACE,MAAM,GAAG,GAAG,CAAC,GACxBJ,KAAI,CAACE,KAAK,CAACE,MAAM,GAAG,GAAG,IACtBY,KAAK,CAACC,OAAO,CAACX,IAAI,CAAC,GAAGA,IAAI,CAACiB,MAAM,GAAGjB,IAAI,CAACA,IAAI,CAACiB,MAAM,CAAC,GACtDF,CAAC,GACH;UACD,GAjBI4B,IAAI,CAACC,MAAM,EAiBf,CACD;QAEN,CAAC;MAAC,CACD,CACH,MAAAxD,WAAA,CAAA4C,GAAA,EAAC9C,eAAA,CAAA+C,CAAC;QAAAF,QAAA,EACCnB,IAAI,CAACC,GAAG,CAAC,UAACqB,CAAC,EAAEnB,CAAC;UACb,OACE,IAAA3B,WAAA,CAAA4C,GAAA,EAAC9C,eAAA,CAAA2D,IAAI,EAAAC,MAAA,CAAAC,MAAA;YAEHzB,CAAC,EAAE5B,KAAI,CAACE,KAAK,CAACC,KAAK,GAAG,GAAI;YAC1B6C,CAAC,EACC,EAAEhD,KAAI,CAACE,KAAK,CAACE,MAAM,GAAG,GAAG,CAAC,GACxBJ,KAAI,CAACE,KAAK,CAACE,MAAM,GAAG,GAAG,IACtBY,KAAK,CAACC,OAAO,CAACX,IAAI,CAAC,GAAGA,IAAI,CAACiB,MAAM,GAAGjB,IAAI,CAACA,IAAI,CAACiB,MAAM,CAAC,GACtDF,CAAC,GACH,EAAE,GAAG;UACN,GACGrB,KAAI,CAACsD,iBAAiB,EAAE;YAAAjB,QAAA,EAE3BP,SAAS,CAACT,CAAC,CAAC,GACLf,IAAY,CAACyB,MAAM,CAACV,CAAC,CAAC,SAAI4B,IAAI,CAACM,KAAK,CACtC,GAAG,GAAIjD,IAAY,CAACA,IAAI,CAACe,CAAC,CAAC,CAC5B,MAAG,GACD4B,IAAI,CAACM,KAAK,CAAC,GAAG,GAAIjD,IAAY,CAACA,IAAI,CAACe,CAAC,CAAC,CAAC;UAAG,IAf5C4B,IAAI,CAACC,MAAM,EAgBZ,CAAC;QAEX,CAAC;MAAC,CACD,CACL;IAAA,EACD;IAED,OACE,IAAAxD,WAAA,CAAA4C,GAAA,EAAC/C,YAAA,CAAAiE,IAAI;MACHnD,KAAK,EAACoD,QAAA;QACJtD,KAAK,EAAAA,KAAA;QACLC,MAAM,EAAAA,MAAA;QACNsD,OAAO,EAAE;MAAC,GACPrD,KAAK,CACR;MAAAgC,QAAA,EAEF,IAAA3C,WAAA,CAAAyC,IAAA,EAAC3C,eAAA,CAAAmE,GAAG;QACFxD,KAAK,EAAEA,KAAK,GAAIU,MAAiB,GAAG,CAAC,GAAIE,WAAuB;QAChEX,MAAM,EAAEA,MAAO;QAAAiC,QAAA,GAEd,IAAI,CAACuB,UAAU,CAAAH,QAAA;UACdtD,KAAK,EAAE,IAAI,CAACD,KAAK,CAACE,MAAM;UACxBA,MAAM,EAAE,IAAI,CAACF,KAAK,CAACE;QAAM,GACtB,IAAI,CAACF,KAAK,CAAC0C,WAAW,EACzB,EACF,IAAAlD,WAAA,CAAA4C,GAAA,EAAC9C,eAAA,CAAAiD,IAAI;UACHtC,KAAK,EAAC,MAAM;UACZC,MAAM,EAAE,IAAI,CAACF,KAAK,CAACE,MAAO;UAC1B0C,EAAE,EAAEnC,YAAa;UACjBoC,EAAE,EAAEpC,YAAa;UACjB+B,IAAI,EAAC;QAA0B,EAEjC,MAAAhD,WAAA,CAAAyC,IAAA,EAAC3C,eAAA,CAAA+C,CAAC;UACAX,CAAC,EAAE,IAAI,CAAC1B,KAAK,CAACC,KAAK,IAAII,UAAU,GAAG,CAAC,GAAG,GAAG,CAAE;UAC7CyC,CAAC,EAAE,IAAI,CAAC9C,KAAK,CAACE,MAAM,GAAG,CAAE;UAAAiC,QAAA,GAEzB,IAAA3C,WAAA,CAAA4C,GAAA,EAAC9C,eAAA,CAAA+C,CAAC;YAAAF,QAAA,EACCR,cAAc,CAACV,GAAG,CAAC,UAAC0C,GAAG,EAAExC,CAAC;cACzB,OACE,IAAA3B,WAAA,CAAA4C,GAAA,EAAC9C,eAAA,CAAAsE,IAAI;gBAEHC,CAAC,EAAEF,GAAG,CAACG,MAAM,CAAC,CAAC,CAAC,CAACC,MAAM,CAACC,IAAI,CAACC,KAAK,EAAG;gBACrC3D,WAAW,EAAEA,WAAY;gBACzB4D,MAAM,EAAEpE,KAAI,CAACE,KAAK,CAAC0C,WAAW,CAACC,KAAK,CAAC,GAAG,EAAExB,CAAC;cAAE,GAHxC4B,IAAI,CAACC,MAAM,EAG6B,CAC7C;YAEN,CAAC;UAAC,CACD,CACH,MAAAxD,WAAA,CAAA4C,GAAA,EAAC9C,eAAA,CAAA+C,CAAC;YAAAF,QAAA,EACCnB,IAAI,CAACC,GAAG,CAAC,UAAC0C,GAAG,EAAExC,CAAC;cACf,OACE,IAAA3B,WAAA,CAAA4C,GAAA,EAAC9C,eAAA,CAAAsE,IAAI;gBAEHO,aAAa,EAAC,OAAO;gBACrBC,cAAc,EAAC,OAAO;gBACtBP,CAAC,EAAEF,GAAG,CAACG,MAAM,CAAC,CAAC,CAAC,CAACC,MAAM,CAACC,IAAI,CAACC,KAAK,EAAG;gBACrC3D,WAAW,EAAEA,WAAY;gBACzB4D,MAAM,EACJpE,KAAI,CAACE,KAAK,CAACyC,0BAA0B,GACjCX,SAAS,CAACX,CAAC,CAAC,GACZrB,KAAI,CAACE,KAAK,CAAC0C,WAAW,CAACC,KAAK,CACzBxB,CAAC,GAAGH,IAAI,CAACK,MAAM,GAAI,GAAG,GAAG,GAAG,EAC7BF,CAAC;cAER,GAZI4B,IAAI,CAACC,MAAM,EAYf,CACD;YAEN,CAAC;UAAC,CACD,CACH,EAAChB,MAAM;QAAA,CACN,CACL;MAAA,CAAK;IACP,CAAM,CAAC;EAEX,CAAC;EAxLavC,aAAA,CAAA4E,YAAY,GAAG;IAAElE,KAAK,EAAE,EAAE;IAAEG,WAAW,EAAE,EAAE;IAAEC,MAAM,EAAE;EAAE,CAAE;EAyLzE,OAAAd,aAAC;CAAA,CA7L2B6E,sBAAa;AA6LxC,IAAAC,QAAA,GAEc9E,aAAa;AAAA+E,OAAA,CAAAC,OAAA,GAAAF,QAAA"}